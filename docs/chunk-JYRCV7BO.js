var gP=Object.defineProperty,mP=Object.defineProperties;var yP=Object.getOwnPropertyDescriptors;var uw=Object.getOwnPropertySymbols,vP=Object.getPrototypeOf,_P=Object.prototype.hasOwnProperty,IP=Object.prototype.propertyIsEnumerable,EP=Reflect.get;var lw=(t,e,n)=>e in t?gP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,U=(t,e)=>{for(var n in e||={})_P.call(e,n)&&lw(t,n,e[n]);if(uw)for(var n of uw(e))IP.call(e,n)&&lw(t,n,e[n]);return t},ye=(t,e)=>mP(t,yP(e));var yr=(t,e,n)=>EP(vP(t),n,e);var E=(t,e,n)=>new Promise((r,i)=>{var o=u=>{try{a(n.next(u))}catch(l){i(l)}},s=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((n=n.apply(t,e)).next())});function tp(t,e){return Object.is(t,e)}var ze=null,iu=!1,np=1,Et=Symbol("SIGNAL");function se(t){let e=ze;return ze=t,e}function rp(){return ze}var to={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Zs(t){if(iu)throw new Error("");if(ze===null)return;ze.consumerOnSignalRead(t);let e=ze.nextProducerIndex++;if(uu(ze),e<ze.producerNode.length&&ze.producerNode[e]!==t&&Js(ze)){let n=ze.producerNode[e];cu(n,ze.producerIndexOfThis[e])}ze.producerNode[e]!==t&&(ze.producerNode[e]=t,ze.producerIndexOfThis[e]=Js(ze)?hw(t,ze,e):0),ze.producerLastReadVersion[e]=t.version}function dw(){np++}function ip(t){if(!(Js(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===np)){if(!t.producerMustRecompute(t)&&!au(t)){ep(t);return}t.producerRecomputeValue(t),ep(t)}}function op(t){if(t.liveConsumerNode===void 0)return;let e=iu;iu=!0;try{for(let n of t.liveConsumerNode)n.dirty||wP(n)}finally{iu=e}}function sp(){return ze?.consumerAllowSignalWrites!==!1}function wP(t){t.dirty=!0,op(t),t.consumerMarkedDirty?.(t)}function ep(t){t.dirty=!1,t.lastCleanEpoch=np}function Xs(t){return t&&(t.nextProducerIndex=0),se(t)}function su(t,e){if(se(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Js(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)cu(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function au(t){uu(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(ip(n),r!==n.version))return!0}return!1}function ea(t){if(uu(t),Js(t))for(let e=0;e<t.producerNode.length;e++)cu(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function hw(t,e,n){if(fw(t),t.liveConsumerNode.length===0&&pw(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=hw(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function cu(t,e){if(fw(t),t.liveConsumerNode.length===1&&pw(t))for(let r=0;r<t.producerNode.length;r++)cu(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];uu(i),i.producerIndexOfThis[r]=e}}function Js(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function uu(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function fw(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function pw(t){return t.producerNode!==void 0}function lu(t,e){let n=Object.create(TP);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(ip(n),Zs(n),n.value===ou)throw n.error;return n.value};return r[Et]=n,r}var Zf=Symbol("UNSET"),Xf=Symbol("COMPUTING"),ou=Symbol("ERRORED"),TP=ye(U({},to),{value:Zf,dirty:!0,error:null,equal:tp,kind:"computed",producerMustRecompute(t){return t.value===Zf||t.value===Xf},producerRecomputeValue(t){if(t.value===Xf)throw new Error("Detected cycle in computations.");let e=t.value;t.value=Xf;let n=Xs(t),r,i=!1;try{r=t.computation(),se(null),i=e!==Zf&&e!==ou&&r!==ou&&t.equal(e,r)}catch(o){r=ou,t.error=o}finally{su(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function DP(){throw new Error}var gw=DP;function mw(t){gw(t)}function ap(t){gw=t}var bP=null;function cp(t,e){let n=Object.create(du);n.value=t,e!==void 0&&(n.equal=e);let r=()=>(Zs(n),n.value);return r[Et]=n,r}function ta(t,e){sp()||mw(t),t.equal(t.value,e)||(t.value=e,CP(t))}function up(t,e){sp()||mw(t),ta(t,e(t.value))}var du=ye(U({},to),{equal:tp,value:void 0,kind:"signal"});function CP(t){t.version++,dw(),op(t),bP?.()}function lp(t){let e=se(null);try{return t()}finally{se(e)}}var dp;function na(){return dp}function xn(t){let e=dp;return dp=t,e}var hu=Symbol("NotFound");function ee(t){return typeof t=="function"}function no(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var fu=no(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ti(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Pe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ee(r))try{r()}catch(o){e=o instanceof fu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{yw(o)}catch(s){e=e??[],s instanceof fu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new fu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)yw(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ti(n,e)}remove(e){let{_finalizers:n}=this;n&&ti(n,e),e instanceof t&&e._removeParent(this)}};Pe.EMPTY=(()=>{let t=new Pe;return t.closed=!0,t})();var hp=Pe.EMPTY;function pu(t){return t instanceof Pe||t&&"closed"in t&&ee(t.remove)&&ee(t.add)&&ee(t.unsubscribe)}function yw(t){ee(t)?t():t.unsubscribe()}var Zt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ro={setTimeout(t,e,...n){let{delegate:r}=ro;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ro;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function gu(t){ro.setTimeout(()=>{let{onUnhandledError:e}=Zt;if(e)e(t);else throw t})}function ra(){}var vw=fp("C",void 0,void 0);function _w(t){return fp("E",void 0,t)}function Iw(t){return fp("N",t,void 0)}function fp(t,e,n){return{kind:t,value:e,error:n}}var ni=null;function io(t){if(Zt.useDeprecatedSynchronousErrorHandling){let e=!ni;if(e&&(ni={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=ni;if(ni=null,n)throw r}}else t()}function Ew(t){Zt.useDeprecatedSynchronousErrorHandling&&ni&&(ni.errorThrown=!0,ni.error=t)}var ri=class extends Pe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,pu(e)&&e.add(this)):this.destination=PP}static create(e,n,r){return new kn(e,n,r)}next(e){this.isStopped?gp(Iw(e),this):this._next(e)}error(e){this.isStopped?gp(_w(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?gp(vw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},NP=Function.prototype.bind;function pp(t,e){return NP.call(t,e)}var mp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){mu(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){mu(r)}else mu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){mu(n)}}},kn=class extends ri{constructor(e,n,r){super();let i;if(ee(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Zt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&pp(e.next,o),error:e.error&&pp(e.error,o),complete:e.complete&&pp(e.complete,o)}):i=e}this.destination=new mp(i)}};function mu(t){Zt.useDeprecatedSynchronousErrorHandling?Ew(t):gu(t)}function MP(t){throw t}function gp(t,e){let{onStoppedNotification:n}=Zt;n&&ro.setTimeout(()=>n(t,e))}var PP={closed:!0,next:ra,error:MP,complete:ra};var oo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function mt(t){return t}function yp(...t){return vp(t)}function vp(t){return t.length===0?mt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var he=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=kP(n)?n:new kn(n,r,i);return io(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=ww(r),new r((i,o)=>{let s=new kn({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[oo](){return this}pipe(...n){return vp(n)(this)}toPromise(n){return n=ww(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function ww(t){var e;return(e=t??Zt.Promise)!==null&&e!==void 0?e:Promise}function xP(t){return t&&ee(t.next)&&ee(t.error)&&ee(t.complete)}function kP(t){return t&&t instanceof ri||xP(t)&&pu(t)}function _p(t){return ee(t?.lift)}function Q(t){return e=>{if(_p(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function K(t,e,n,r,i){return new Ip(t,e,n,r,i)}var Ip=class extends ri{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function so(){return Q((t,e)=>{let n=null;t._refCount++;let r=K(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var ao=class extends he{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,_p(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Pe;let n=this.getSubject();e.add(this.source.subscribe(K(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Pe.EMPTY)}return e}refCount(){return so()(this)}};var Tw=no(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var xe=(()=>{class t extends he{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new yu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Tw}next(n){io(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){io(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){io(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?hp:(this.currentObservers=null,o.push(n),new Pe(()=>{this.currentObservers=null,ti(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new he;return n.source=this,n}}return t.create=(e,n)=>new yu(e,n),t})(),yu=class extends xe{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:hp}};var Xe=class extends xe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ia={now(){return(ia.delegate||Date).now()},delegate:void 0};var oa=class extends xe{constructor(e=1/0,n=1/0,r=ia){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var vu=class extends Pe{constructor(e,n){super()}schedule(e,n=0){return this}};var sa={setInterval(t,e,...n){let{delegate:r}=sa;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=sa;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var _u=class extends vu{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return sa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&sa.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ti(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var co=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};co.now=ia.now;var Iu=class extends co{constructor(e,n=co.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var aa=new Iu(_u),Dw=aa;var at=new he(t=>t.complete());function Eu(t){return t&&ee(t.schedule)}function Ep(t){return t[t.length-1]}function wu(t){return ee(Ep(t))?t.pop():void 0}function ln(t){return Eu(Ep(t))?t.pop():void 0}function bw(t,e){return typeof Ep(t)=="number"?t.pop():e}function wp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Sw(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function Cw(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ii(t){return this instanceof ii?(this.v=t,this):new ii(t)}function Aw(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(m){return function(w){return Promise.resolve(w).then(m,p)}}function a(m,w){r[m]&&(i[m]=function(A){return new Promise(function(R,k){o.push([m,A,R,k])>1||u(m,A)})},w&&(i[m]=w(i[m])))}function u(m,w){try{l(r[m](w))}catch(A){g(o[0][3],A)}}function l(m){m.value instanceof ii?Promise.resolve(m.value.v).then(h,p):g(o[0][2],m)}function h(m){u("next",m)}function p(m){u("throw",m)}function g(m,w){m(w),o.shift(),o.length&&u(o[0][0],o[0][1])}}function Rw(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Cw=="function"?Cw(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Tu=t=>t&&typeof t.length=="number"&&typeof t!="function";function Du(t){return ee(t?.then)}function bu(t){return ee(t[oo])}function Cu(t){return Symbol.asyncIterator&&ee(t?.[Symbol.asyncIterator])}function Su(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function OP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Au=OP();function Ru(t){return ee(t?.[Au])}function Nu(t){return Aw(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield ii(n.read());if(i)return yield ii(void 0);yield yield ii(r)}}finally{n.releaseLock()}})}function Mu(t){return ee(t?.getReader)}function we(t){if(t instanceof he)return t;if(t!=null){if(bu(t))return LP(t);if(Tu(t))return FP(t);if(Du(t))return VP(t);if(Cu(t))return Nw(t);if(Ru(t))return UP(t);if(Mu(t))return jP(t)}throw Su(t)}function LP(t){return new he(e=>{let n=t[oo]();if(ee(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function FP(t){return new he(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function VP(t){return new he(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,gu)})}function UP(t){return new he(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Nw(t){return new he(e=>{BP(t,e).catch(n=>e.error(n))})}function jP(t){return Nw(Nu(t))}function BP(t,e){var n,r,i,o;return Sw(this,void 0,void 0,function*(){try{for(n=Rw(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function wt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Pu(t,e=0){return Q((n,r)=>{n.subscribe(K(r,i=>wt(r,t,()=>r.next(i),e),()=>wt(r,t,()=>r.complete(),e),i=>wt(r,t,()=>r.error(i),e)))})}function xu(t,e=0){return Q((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Mw(t,e){return we(t).pipe(xu(e),Pu(e))}function Pw(t,e){return we(t).pipe(xu(e),Pu(e))}function xw(t,e){return new he(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function kw(t,e){return new he(n=>{let r;return wt(n,e,()=>{r=t[Au](),wt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>ee(r?.return)&&r.return()})}function ku(t,e){if(!t)throw new Error("Iterable cannot be null");return new he(n=>{wt(n,e,()=>{let r=t[Symbol.asyncIterator]();wt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Ow(t,e){return ku(Nu(t),e)}function Lw(t,e){if(t!=null){if(bu(t))return Mw(t,e);if(Tu(t))return xw(t,e);if(Du(t))return Pw(t,e);if(Cu(t))return ku(t,e);if(Ru(t))return kw(t,e);if(Mu(t))return Ow(t,e)}throw Su(t)}function Ae(t,e){return e?Lw(t,e):we(t)}function Y(...t){let e=ln(t);return Ae(t,e)}function uo(t,e){let n=ee(t)?t:()=>t,r=i=>i.error(n());return new he(e?i=>e.schedule(r,0,i):r)}function Tp(t){return!!t&&(t instanceof he||ee(t.lift)&&ee(t.subscribe))}var On=no(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Fw(t){return t instanceof Date&&!isNaN(t)}function ce(t,e){return Q((n,r)=>{let i=0;n.subscribe(K(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:$P}=Array;function HP(t,e){return $P(e)?t(...e):t(e)}function Ou(t){return ce(e=>HP(t,e))}var{isArray:zP}=Array,{getPrototypeOf:qP,prototype:GP,keys:WP}=Object;function Lu(t){if(t.length===1){let e=t[0];if(zP(e))return{args:e,keys:null};if(KP(e)){let n=WP(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function KP(t){return t&&typeof t=="object"&&qP(t)===GP}function Fu(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Vu(...t){let e=ln(t),n=wu(t),{args:r,keys:i}=Lu(t);if(r.length===0)return Ae([],e);let o=new he(QP(r,e,i?s=>Fu(i,s):mt));return n?o.pipe(Ou(n)):o}function QP(t,e,n=mt){return r=>{Vw(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)Vw(e,()=>{let l=Ae(t[u],e),h=!1;l.subscribe(K(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Vw(t,e,n){t?wt(n,t,e):e()}function Uw(t,e,n,r,i,o,s,a){let u=[],l=0,h=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},m=A=>l<r?w(A):u.push(A),w=A=>{o&&e.next(A),l++;let R=!1;we(n(A,h++)).subscribe(K(e,k=>{i?.(k),o?m(k):e.next(k)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let k=u.shift();s?wt(e,s,()=>w(k)):w(k)}g()}catch(k){e.error(k)}}))};return t.subscribe(K(e,m,()=>{p=!0,g()})),()=>{a?.()}}function qe(t,e,n=1/0){return ee(e)?qe((r,i)=>ce((o,s)=>e(r,o,i,s))(we(t(r,i))),n):(typeof e=="number"&&(n=e),Q((r,i)=>Uw(r,i,t,n)))}function Uu(t=1/0){return qe(mt,t)}function jw(){return Uu(1)}function lo(...t){return jw()(Ae(t,ln(t)))}function ju(t){return new he(e=>{we(t()).subscribe(e)})}function YP(...t){let e=wu(t),{args:n,keys:r}=Lu(t),i=new he(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;we(n[h]).subscribe(K(o,g=>{p||(p=!0,l--),a[h]=g},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Fu(r,a):a),o.complete())}))}});return e?i.pipe(Ou(e)):i}function Bw(t=0,e,n=Dw){let r=-1;return e!=null&&(Eu(e)?n=e:r=e),new he(i=>{let o=Fw(t)?+t-n.now():t;o<0&&(o=0);let s=0;return n.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function JP(...t){let e=ln(t),n=bw(t,1/0),r=t;return r.length?r.length===1?we(r[0]):Uu(n)(Ae(r,e)):at}function yt(t,e){return Q((n,r)=>{let i=0;n.subscribe(K(r,o=>t.call(e,o,i++)&&r.next(o)))})}function $w(t){return Q((e,n)=>{let r=!1,i=null,o=null,s=!1,a=()=>{if(o?.unsubscribe(),o=null,r){r=!1;let l=i;i=null,n.next(l)}s&&n.complete()},u=()=>{o=null,s&&n.complete()};e.subscribe(K(n,l=>{r=!0,i=l,o||we(t(l)).subscribe(o=K(n,a,u))},()=>{s=!0,(!r||!o||o.closed)&&n.complete()}))})}function ZP(t,e=aa){return $w(()=>Bw(t,e))}function vr(t){return Q((e,n)=>{let r=null,i=!1,o;r=e.subscribe(K(n,void 0,void 0,s=>{o=we(t(s,vr(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Hw(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(K(s,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function _r(t,e){return ee(e)?qe(t,e,1):qe(t,1)}function XP(t,e=aa){return Q((n,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function u(){let l=s+t,h=e.now();if(h<l){i=this.schedule(void 0,l-h),r.add(i);return}a()}n.subscribe(K(r,l=>{o=l,s=e.now(),i||(i=e.schedule(u,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function Ir(t){return Q((e,n)=>{let r=!1;e.subscribe(K(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Ln(t){return t<=0?()=>at:Q((e,n)=>{let r=0;e.subscribe(K(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function ex(t,e=mt){return t=t??tx,Q((n,r)=>{let i,o=!0;n.subscribe(K(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function tx(t,e){return t===e}function Bu(t=nx){return Q((e,n)=>{let r=!1;e.subscribe(K(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function nx(){return new On}function Er(t){return Q((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Fn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?yt((i,o)=>t(i,o,r)):mt,Ln(1),n?Ir(e):Bu(()=>new On))}function ho(t){return t<=0?()=>at:Q((e,n)=>{let r=[];e.subscribe(K(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Dp(t,e){let n=arguments.length>=2;return r=>r.pipe(t?yt((i,o)=>t(i,o,r)):mt,ho(1),n?Ir(e):Bu(()=>new On))}function rx(){return Q((t,e)=>{let n,r=!1;t.subscribe(K(e,i=>{let o=n;n=i,r&&e.next([o,i]),r=!0}))})}function bp(t,e){return Q(Hw(t,e,arguments.length>=2,!0))}function Sp(t={}){let{connector:e=()=>new xe,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,u,l=0,h=!1,p=!1,g=()=>{a?.unsubscribe(),a=void 0},m=()=>{g(),s=u=void 0,h=p=!1},w=()=>{let A=s;m(),A?.unsubscribe()};return Q((A,R)=>{l++,!p&&!h&&g();let k=u=u??e();R.add(()=>{l--,l===0&&!p&&!h&&(a=Cp(w,i))}),k.subscribe(R),!s&&l>0&&(s=new kn({next:V=>k.next(V),error:V=>{p=!0,g(),a=Cp(m,n,V),k.error(V)},complete:()=>{h=!0,g(),a=Cp(m,r),k.complete()}}),we(A).subscribe(s))})(o)}}function Cp(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new kn({next:()=>{r.unsubscribe(),t()}});return we(e(...n)).subscribe(r)}function ix(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,Sp({connector:()=>new oa(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function ox(t){return yt((e,n)=>t<=n)}function Ap(...t){let e=ln(t);return Q((n,r)=>{(e?lo(t,n,e):lo(t,n)).subscribe(r)})}function xt(t,e){return Q((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(K(r,u=>{i?.unsubscribe();let l=0,h=o++;we(t(u,h)).subscribe(i=K(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Rp(t){return Q((e,n)=>{we(t).subscribe(K(n,()=>n.complete(),ra)),!n.closed&&e.subscribe(n)})}function sx(t,e=!1){return Q((n,r)=>{let i=0;n.subscribe(K(r,o=>{let s=t(o,i++);(s||e)&&r.next(o),!s&&r.complete()}))})}function et(t,e,n){let r=ee(t)||e||n?{next:t,error:e,complete:n}:t;return r?Q((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(K(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):mt}var xT="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",F=class extends Error{code;constructor(e,n){super(kT(e,n)),this.code=e}};function ax(t){return`NG0${Math.abs(t)}`}function kT(t,e){return`${ax(t)}${e?": "+e:""}`}var OT=Symbol("InputSignalNode#UNSET"),cx=ye(U({},du),{transformFn:void 0,applyValueToInputSignal(t,e){ta(t,e)}});function LT(t,e){let n=Object.create(cx);n.value=t,n.transformFn=e?.transform;function r(){if(Zs(n),n.value===OT){let i=null;throw new F(-950,i)}return n.value}return r[Et]=n,r}function _a(t){return{toString:t}.toString()}var $u="__parameters__";function ux(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function FT(t,e,n){return _a(()=>{let r=ux(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty($u)?u[$u]:Object.defineProperty(u,$u,{value:[]})[$u];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var wr=globalThis;function Te(t){for(let e in t)if(t[e]===Te)return e;throw Error("Could not find renamed property on target object.")}function lx(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function bt(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(bt).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function qp(t,e){return t?e?`${t} ${e}`:t:e||""}var dx=Te({__forward_ref__:Te});function VT(t){return t.__forward_ref__=VT,t.toString=function(){return bt(this())},t}function vt(t){return UT(t)?t():t}function UT(t){return typeof t=="function"&&t.hasOwnProperty(dx)&&t.__forward_ref__===VT}function H(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Mo(t){return{providers:t.providers||[],imports:t.imports||[]}}function bl(t){return zw(t,BT)||zw(t,$T)}function jT(t){return bl(t)!==null}function zw(t,e){return t.hasOwnProperty(e)?t[e]:null}function hx(t){let e=t&&(t[BT]||t[$T]);return e||null}function qw(t){return t&&(t.hasOwnProperty(Gw)||t.hasOwnProperty(fx))?t[Gw]:null}var BT=Te({\u0275prov:Te}),Gw=Te({\u0275inj:Te}),$T=Te({ngInjectableDef:Te}),fx=Te({ngInjectorDef:Te}),$=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=H({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function HT(t){return t&&!!t.\u0275providers}var px=Te({\u0275cmp:Te}),gx=Te({\u0275dir:Te}),mx=Te({\u0275pipe:Te}),yx=Te({\u0275mod:Te}),Zu=Te({\u0275fac:Te}),da=Te({__NG_ELEMENT_ID__:Te}),Ww=Te({__NG_ENV_ID__:Te});function _o(t){return typeof t=="string"?t:t==null?"":String(t)}function vx(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():_o(t)}function zT(t,e){throw new F(-200,t)}function em(t,e){throw new F(-201,!1)}var oe=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(oe||{}),Gp;function qT(){return Gp}function Tt(t){let e=Gp;return Gp=t,e}function GT(t,e,n){let r=bl(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&oe.Optional)return null;if(e!==void 0)return e;em(t,"Injector")}var _x={},si=_x,Wp="__NG_DI_FLAG__",Xu=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=n;return this.injector.get(e,r.optional?hu:si,r)}},el="ngTempTokenPath",Ix="ngTokenPath",Ex=/\n/gm,wx="\u0275",Kw="__source";function Tx(t,e=oe.Default){if(na()===void 0)throw new F(-203,!1);if(na()===null)return GT(t,void 0,e);{let n=na(),r;return n instanceof Xu?r=n.injector:r=n,r.get(t,e&oe.Optional?null:void 0,e)}}function W(t,e=oe.Default){return(qT()||Tx)(vt(t),e)}function x(t,e=oe.Default){return W(t,Cl(e))}function Cl(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Kp(t){let e=[];for(let n=0;n<t.length;n++){let r=vt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new F(900,!1);let i,o=oe.Default;for(let s=0;s<r.length;s++){let a=r[s],u=Dx(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(W(i,o))}else e.push(W(r))}return e}function WT(t,e){return t[Wp]=e,t.prototype[Wp]=e,t}function Dx(t){return t[Wp]}function bx(t,e,n,r){let i=t[el];throw e[Kw]&&i.unshift(e[Kw]),t.message=Cx(`
`+t.message,i,n,r),t[Ix]=i,t[el]=null,t}function Cx(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==wx?t.slice(2):t;let i=bt(e);if(Array.isArray(e))i=e.map(bt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):bt(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Ex,`
  `)}`}var KT=WT(FT("Optional"),8);var Sx=WT(FT("SkipSelf"),4);function ci(t,e){let n=t.hasOwnProperty(Zu);return n?t[Zu]:null}function Ax(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function Rx(t){return t.flat(Number.POSITIVE_INFINITY)}function tm(t,e){t.forEach(n=>Array.isArray(n)?tm(n,e):e(n))}function QT(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function tl(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Nx(t,e){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function Mx(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function Sl(t,e,n){let r=Ia(t,e);return r>=0?t[r|1]=n:(r=~r,Mx(t,r,e,n)),r}function Np(t,e){let n=Ia(t,e);if(n>=0)return t[n|1]}function Ia(t,e){return Px(t,e,1)}function Px(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var ui={},_t=[],Io=new $(""),YT=new $("",-1),JT=new $(""),nl=class{get(e,n=si){if(n===si){let r=new Error(`NullInjectorError: No provider for ${bt(e)}!`);throw r.name="NullInjectorError",r}return n}};function ZT(t,e){let n=t[yx]||null;if(!n&&e===!0)throw new Error(`Type ${bt(t)} does not have '\u0275mod' property.`);return n}function li(t){return t[px]||null}function xx(t){return t[gx]||null}function kx(t){return t[mx]||null}function Po(t){return{\u0275providers:t}}function Ox(...t){return{\u0275providers:XT(!0,t),\u0275fromNgModule:!0}}function XT(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return tm(e,s=>{let a=s;Qp(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&eD(i,o),n}function eD(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];nm(i,o=>{e(o,r)})}}function Qp(t,e,n,r){if(t=vt(t),!t)return!1;let i=null,o=qw(t),s=!o&&li(t);if(!o&&!s){let u=t.ngModule;if(o=qw(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Qp(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{tm(o.imports,h=>{Qp(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&eD(l,e)}if(!a){let l=ci(i)||(()=>new i);e({provide:i,useFactory:l,deps:_t},i),e({provide:JT,useValue:i,multi:!0},i),e({provide:Io,useValue:()=>W(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;nm(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function nm(t,e){for(let n of t)HT(n)&&(n=n.\u0275providers),Array.isArray(n)?nm(n,e):e(n)}var Lx=Te({provide:String,useValue:Te});function tD(t){return t!==null&&typeof t=="object"&&Lx in t}function Fx(t){return!!(t&&t.useExisting)}function Vx(t){return!!(t&&t.useFactory)}function Eo(t){return typeof t=="function"}function Ux(t){return!!t.useClass}var Al=new $(""),Gu={},Qw={},Mp;function Rl(){return Mp===void 0&&(Mp=new nl),Mp}var Ct=class{},ha=class extends Ct{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Jp(e,s=>this.processProvider(s)),this.records.set(YT,fo(void 0,this)),i.has("environment")&&this.records.set(Ct,fo(void 0,this));let o=this.records.get(Al);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(JT,_t,oe.Self))}retrieve(e,n){let r=n;return this.get(e,r.optional?hu:si,r)}destroy(){ua(this),this._destroyed=!0;let e=se(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),se(e)}}onDestroy(e){return ua(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){ua(this);let n=xn(this),r=Tt(void 0),i;try{return e()}finally{xn(n),Tt(r)}}get(e,n=si,r=oe.Default){if(ua(this),e.hasOwnProperty(Ww))return e[Ww](this);r=Cl(r);let i,o=xn(this),s=Tt(void 0);try{if(!(r&oe.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=zx(e)&&bl(e);l&&this.injectableDefInScope(l)?u=fo(Yp(e),Gu):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,r)}let a=r&oe.Self?Rl():this.parent;return n=r&oe.Optional&&n===si?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[el]=a[el]||[]).unshift(bt(e)),o)throw a;return bx(a,e,"R3InjectorError",this.source)}else throw a}finally{Tt(s),xn(o)}}resolveInjectorInitializers(){let e=se(null),n=xn(this),r=Tt(void 0),i;try{let o=this.get(Io,_t,oe.Self);for(let s of o)s()}finally{xn(n),Tt(r),se(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(bt(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=vt(e);let n=Eo(e)?e:vt(e&&e.provide),r=Bx(e);if(!Eo(e)&&e.multi===!0){let i=this.records.get(n);i||(i=fo(void 0,Gu,!0),i.factory=()=>Kp(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=se(null);try{return n.value===Qw?zT(bt(e)):n.value===Gu&&(n.value=Qw,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&Hx(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{se(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=vt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Yp(t){let e=bl(t),n=e!==null?e.factory:ci(t);if(n!==null)return n;if(t instanceof $)throw new F(204,!1);if(t instanceof Function)return jx(t);throw new F(204,!1)}function jx(t){if(t.length>0)throw new F(204,!1);let n=hx(t);return n!==null?()=>n.factory(t):()=>new t}function Bx(t){if(tD(t))return fo(void 0,t.useValue);{let e=nD(t);return fo(e,Gu)}}function nD(t,e,n){let r;if(Eo(t)){let i=vt(t);return ci(i)||Yp(i)}else if(tD(t))r=()=>vt(t.useValue);else if(Vx(t))r=()=>t.useFactory(...Kp(t.deps||[]));else if(Fx(t))r=(i,o)=>W(vt(t.useExisting),o!==void 0&&o&oe.Optional?oe.Optional:void 0);else{let i=vt(t&&(t.useClass||t.provide));if($x(t))r=()=>new i(...Kp(t.deps));else return ci(i)||Yp(i)}return r}function ua(t){if(t.destroyed)throw new F(205,!1)}function fo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function $x(t){return!!t.deps}function Hx(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function zx(t){return typeof t=="function"||typeof t=="object"&&t instanceof $}function Jp(t,e){for(let n of t)Array.isArray(n)?Jp(n,e):n&&HT(n)?Jp(n.\u0275providers,e):e(n)}function Ot(t,e){let n;t instanceof ha?(ua(t),n=t):n=new Xu(t);let r,i=xn(n),o=Tt(void 0);try{return e()}finally{xn(i),Tt(o)}}function rD(){return qT()!==void 0||na()!=null}function rm(t){if(!rD())throw new F(-203,!1)}function qx(t){return typeof t=="function"}var $n=0,te=1,J=2,ut=3,tn=4,St=5,wo=6,rl=7,Ge=8,di=9,Vn=10,Se=11,fa=12,Yw=13,xo=14,kt=15,hi=16,po=17,Un=18,Nl=19,iD=20,Tr=21,Pp=22,fi=23,Ht=24,yo=25,Ve=26,oD=1;var pi=7,il=8,To=9,ct=10;function Dr(t){return Array.isArray(t)&&typeof t[oD]=="object"}function Hn(t){return Array.isArray(t)&&t[oD]===!0}function im(t){return(t.flags&4)!==0}function ko(t){return t.componentOffset>-1}function Ml(t){return(t.flags&1)===1}function hn(t){return!!t.template}function ol(t){return(t[J]&512)!==0}function Oo(t){return(t[J]&256)===256}var Zp=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function sD(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var Pl=(()=>{let t=()=>aD;return t.ngInherit=!0,t})();function aD(t){return t.type.prototype.ngOnChanges&&(t.setInput=Wx),Gx}function Gx(){let t=uD(this),e=t?.current;if(e){let n=t.previous;if(n===ui)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Wx(t,e,n,r,i){let o=this.declaredInputs[r],s=uD(t)||Kx(t,{previous:ui,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Zp(l&&l.currentValue,n,u===ui),sD(t,e,i,n)}var cD="__ngSimpleChanges__";function uD(t){return t[cD]||null}function Kx(t,e){return t[cD]=e}var Jw=null;var _e=function(t,e=null,n){Jw?.(t,e,n)},lD="svg",Qx="math";function fn(t){for(;Array.isArray(t);)t=t[$n];return t}function dD(t,e){return fn(e[t])}function yn(t,e){return fn(e[t.index])}function om(t,e){return t.data[e]}function sm(t,e){return t[e]}function pn(t,e){let n=e[t];return Dr(n)?n:n[$n]}function Yx(t){return(t[J]&4)===4}function am(t){return(t[J]&128)===128}function Jx(t){return Hn(t[ut])}function br(t,e){return e==null?null:t[e]}function hD(t){t[po]=0}function fD(t){t[J]&1024||(t[J]|=1024,am(t)&&Lo(t))}function Zx(t,e){for(;t>0;)e=e[xo],t--;return e}function xl(t){return!!(t[J]&9216||t[Ht]?.dirty)}function Xp(t){t[Vn].changeDetectionScheduler?.notify(8),t[J]&64&&(t[J]|=1024),xl(t)&&Lo(t)}function Lo(t){t[Vn].changeDetectionScheduler?.notify(0);let e=gi(t);for(;e!==null&&!(e[J]&8192||(e[J]|=8192,!am(e)));)e=gi(e)}function pD(t,e){if(Oo(t))throw new F(911,!1);t[Tr]===null&&(t[Tr]=[]),t[Tr].push(e)}function Xx(t,e){if(t[Tr]===null)return;let n=t[Tr].indexOf(e);n!==-1&&t[Tr].splice(n,1)}function gi(t){let e=t[ut];return Hn(e)?e[ut]:e}function cm(t){return t[rl]??=[]}function um(t){return t.cleanup??=[]}function ek(t,e,n,r){let i=cm(e);i.push(n),t.firstCreatePass&&um(t).push(r,i.length-1)}var re={lFrame:ID(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var eg=!1;function tk(){return re.lFrame.elementDepthCount}function nk(){re.lFrame.elementDepthCount++}function rk(){re.lFrame.elementDepthCount--}function lm(){return re.bindingsEnabled}function gD(){return re.skipHydrationRootTNode!==null}function ik(t){return re.skipHydrationRootTNode===t}function ok(){re.skipHydrationRootTNode=null}function G(){return re.lFrame.lView}function De(){return re.lFrame.tView}function jG(t){return re.lFrame.contextLView=t,t[Ge]}function BG(t){return re.lFrame.contextLView=null,t}function lt(){let t=mD();for(;t!==null&&t.type===64;)t=t.parent;return t}function mD(){return re.lFrame.currentTNode}function sk(){let t=re.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Sr(t,e){let n=re.lFrame;n.currentTNode=t,n.isParent=e}function dm(){return re.lFrame.isParent}function hm(){re.lFrame.isParent=!1}function ak(){return re.lFrame.contextLView}function yD(){return eg}function sl(t){let e=eg;return eg=t,e}function kl(){let t=re.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function ck(){return re.lFrame.bindingIndex}function uk(t){return re.lFrame.bindingIndex=t}function Ei(){return re.lFrame.bindingIndex++}function fm(t){let e=re.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function lk(){return re.lFrame.inI18n}function dk(t,e){let n=re.lFrame;n.bindingIndex=n.bindingRootIndex=t,tg(e)}function hk(){return re.lFrame.currentDirectiveIndex}function tg(t){re.lFrame.currentDirectiveIndex=t}function fk(t){let e=re.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function pm(){return re.lFrame.currentQueryIndex}function Ol(t){re.lFrame.currentQueryIndex=t}function pk(t){let e=t[te];return e.type===2?e.declTNode:e.type===1?t[St]:null}function vD(t,e,n){if(n&oe.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&oe.Host);)if(i=pk(o),i===null||(o=o[xo],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=re.lFrame=_D();return r.currentTNode=e,r.lView=t,!0}function gm(t){let e=_D(),n=t[te];re.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function _D(){let t=re.lFrame,e=t===null?null:t.child;return e===null?ID(t):e}function ID(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function ED(){let t=re.lFrame;return re.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var wD=ED;function mm(){let t=ED();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function gk(t){return(re.lFrame.contextLView=Zx(t,re.lFrame.contextLView))[Ge]}function zn(){return re.lFrame.selectedIndex}function mi(t){re.lFrame.selectedIndex=t}function Fo(){let t=re.lFrame;return om(t.tView,t.selectedIndex)}function $G(){re.lFrame.currentNamespace=lD}function HG(){mk()}function mk(){re.lFrame.currentNamespace=null}function yk(){return re.lFrame.currentNamespace}var TD=!0;function Ll(){return TD}function Fl(t){TD=t}function vk(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=aD(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function ym(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Wu(t,e,n){DD(t,e,3,n)}function Ku(t,e,n,r){(t[J]&3)===n&&DD(t,e,n,r)}function xp(t,e){let n=t[J];(n&3)===e&&(n&=16383,n+=1,t[J]=n)}function DD(t,e,n,r){let i=r!==void 0?t[po]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[po]+=65536),(a<o||o==-1)&&(_k(t,n,e,u),t[po]=(t[po]&4294901760)+u+2),u++}function Zw(t,e){_e(4,t,e);let n=se(null);try{e.call(t)}finally{se(n),_e(5,t,e)}}function _k(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[J]>>14<t[po]>>16&&(t[J]&3)===e&&(t[J]+=16384,Zw(a,o)):Zw(a,o)}var vo=-1,yi=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r){this.factory=e,this.canSeeViewProviders=n,this.injectImpl=r}};function Ik(t){return(t.flags&8)!==0}function Ek(t){return(t.flags&16)!==0}function wk(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];Tk(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function bD(t){return t===3||t===4||t===6}function Tk(t){return t.charCodeAt(0)===64}function Do(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Xw(t,n,i,null,e[++r]):Xw(t,n,i,null,null))}}return t}function Xw(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function CD(t){return t!==vo}function al(t){return t&32767}function Dk(t){return t>>16}function cl(t,e){let n=Dk(t),r=e;for(;n>0;)r=r[xo],n--;return r}var ng=!0;function ul(t){let e=ng;return ng=t,e}var bk=256,SD=bk-1,AD=5,Ck=0,dn={};function Sk(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(da)&&(r=n[da]),r==null&&(r=n[da]=Ck++);let i=r&SD,o=1<<i;e.data[t+(i>>AD)]|=o}function ll(t,e){let n=RD(t,e);if(n!==-1)return n;let r=e[te];r.firstCreatePass&&(t.injectorIndex=e.length,kp(r.data,t),kp(e,null),kp(r.blueprint,null));let i=vm(t,e),o=t.injectorIndex;if(CD(i)){let s=al(i),a=cl(i,e),u=a[te].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function kp(t,e){t.push(0,0,0,0,0,0,0,0,e)}function RD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function vm(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=kD(i),r===null)return vo;if(n++,i=i[xo],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return vo}function rg(t,e,n){Sk(t,e,n)}function Ak(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(bD(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function ND(t,e,n){if(n&oe.Optional||t!==void 0)return t;em(e,"NodeInjector")}function MD(t,e,n,r){if(n&oe.Optional&&r===void 0&&(r=null),(n&(oe.Self|oe.Host))===0){let i=t[di],o=Tt(void 0);try{return i?i.get(e,r,n&oe.Optional):GT(e,r,n&oe.Optional)}finally{Tt(o)}}return ND(r,e,n)}function PD(t,e,n,r=oe.Default,i){if(t!==null){if(e[J]&2048&&!(r&oe.Self)){let s=Pk(t,e,n,r,dn);if(s!==dn)return s}let o=xD(t,e,n,r,dn);if(o!==dn)return o}return MD(e,n,r,i)}function xD(t,e,n,r,i){let o=Nk(n);if(typeof o=="function"){if(!vD(e,t,r))return r&oe.Host?ND(i,n,r):MD(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&oe.Optional))em(n);else return s}finally{wD()}}else if(typeof o=="number"){let s=null,a=RD(t,e),u=vo,l=r&oe.Host?e[kt][St]:null;for((a===-1||r&oe.SkipSelf)&&(u=a===-1?vm(t,e):e[a+8],u===vo||!tT(r,!1)?a=-1:(s=e[te],a=al(u),e=cl(u,e)));a!==-1;){let h=e[te];if(eT(o,a,h.data)){let p=Rk(a,e,n,s,r,l);if(p!==dn)return p}u=e[a+8],u!==vo&&tT(r,e[te].data[a+8]===l)&&eT(o,a,e)?(s=h,a=al(u),e=cl(u,e)):a=-1}}return i}function Rk(t,e,n,r,i,o){let s=e[te],a=s.data[t+8],u=r==null?ko(a)&&ng:r!=s&&(a.type&3)!==0,l=i&oe.Host&&o===a,h=Qu(a,s,n,u,l);return h!==null?pa(e,s,h,a,i):dn}function Qu(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:l;for(let m=p;m<g;m++){let w=s[m];if(m<u&&n===w||m>=u&&w.type===n)return m}if(i){let m=s[u];if(m&&hn(m)&&m.type===n)return u}return null}function pa(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof yi){let a=o;a.resolving&&zT(vx(s[n]));let u=ul(a.canSeeViewProviders);a.resolving=!0;let l,h=a.injectImpl?Tt(a.injectImpl):null,p=vD(t,r,oe.Default);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&vk(n,s[n],e)}finally{h!==null&&Tt(h),ul(u),a.resolving=!1,wD()}}return o}function Nk(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(da)?t[da]:void 0;return typeof e=="number"?e>=0?e&SD:Mk:e}function eT(t,e,n){let r=1<<t;return!!(n[e+(t>>AD)]&r)}function tT(t,e){return!(t&oe.Self)&&!(t&oe.Host&&e)}var ai=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return PD(this._tNode,this._lView,e,Cl(r),n)}};function Mk(){return new ai(lt(),G())}function _m(t){return _a(()=>{let e=t.prototype.constructor,n=e[Zu]||ig(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Zu]||ig(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function ig(t){return UT(t)?()=>{let e=ig(vt(t));return e&&e()}:ci(t)}function Pk(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[J]&2048&&!ol(s);){let a=xD(o,s,n,r|oe.Self,dn);if(a!==dn)return a;let u=o.parent;if(!u){let l=s[iD];if(l){let h=l.get(n,dn,r);if(h!==dn)return h}u=kD(s),s=s[xo]}o=u}return i}function kD(t){let e=t[te],n=e.type;return n===2?e.declTNode:n===1?t[St]:null}function OD(t){return Ak(lt(),t)}function nT(t,e=null,n=null,r){let i=LD(t,e,n,r);return i.resolveInjectorInitializers(),i}function LD(t,e=null,n=null,r,i=new Set){let o=[n||_t,Ox(t)];return r=r||(typeof t=="object"?void 0:bt(t)),new ha(o,e||Rl(),r||null,i)}var zt=class t{static THROW_IF_NOT_FOUND=si;static NULL=new nl;static create(e,n){if(Array.isArray(e))return nT({name:""},n,e,"");{let r=e.name??"";return nT({name:r},e.parent,e.providers,r)}}static \u0275prov=H({token:t,providedIn:"any",factory:()=>W(YT)});static __NG_ELEMENT_ID__=-1};var rT=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>OD(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},xk=new $("");xk.__NG_ELEMENT_ID__=t=>{let e=lt();if(e===null)throw new F(204,!1);if(e.type&2)return e.value;if(t&oe.Optional)return null;throw new F(204,!1)};var FD=!1,Vo=(()=>{class t{static __NG_ELEMENT_ID__=kk;static __NG_ENV_ID__=n=>n}return t})(),dl=class extends Vo{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let n=this._lView;return Oo(n)?(e(),()=>{}):(pD(n,e),()=>Xx(n,e))}};function kk(){return new dl(G())}var vi=class{},Vl=new $("",{providedIn:"root",factory:()=>!1});var VD=new $(""),UD=new $(""),qn=(()=>{class t{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Xe(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}return t})();var og=class extends xe{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,rD()&&(this.destroyRef=x(Vo,{optional:!0})??void 0,this.pendingTasks=x(qn,{optional:!0})??void 0)}emit(e){let n=se(null);try{super.next(e)}finally{se(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Pe&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Dt=og;function ga(...t){}function jD(t){let e,n;function r(){t=ga;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function iT(t){return queueMicrotask(()=>t()),()=>{t=ga}}var Im="isAngularZone",hl=Im+"_ID",Ok=0,Le=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Dt(!1);onMicrotaskEmpty=new Dt(!1);onStable=new Dt(!1);onError=new Dt(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=FD}=e;if(typeof Zone>"u")throw new F(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,Vk(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Im)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new F(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new F(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Lk,ga,ga);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},Lk={};function Em(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Fk(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){jD(()=>{t.callbackScheduled=!1,sg(t),t.isCheckStableRunning=!0,Em(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),sg(t)}function Vk(t){let e=()=>{Fk(t)},n=Ok++;t._inner=t._inner.fork({name:"angular",properties:{[Im]:!0,[hl]:n,[hl+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(Uk(u))return r.invokeTask(o,s,a,u);try{return oT(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),sT(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return oT(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!jk(u)&&e(),sT(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,sg(t),Em(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function sg(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function oT(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function sT(t){t._nesting--,Em(t)}var ag=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Dt;onMicrotaskEmpty=new Dt;onStable=new Dt;onError=new Dt;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function Uk(t){return BD(t,"__ignore_ng_zone__")}function jk(t){return BD(t,"__scheduler_tick__")}function BD(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var gn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Bk=new $("",{providedIn:"root",factory:()=>{let t=x(Le),e=x(gn);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function aT(t,e){return LT(t,e)}function $k(t){return LT(OT,t)}var $D=(aT.required=$k,aT);function Hk(){return Uo(lt(),G())}function Uo(t,e){return new jo(yn(t,e))}var jo=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=Hk}return t})();function HD(t){return t instanceof jo?t.nativeElement:t}function zk(t){return typeof t=="function"&&t[Et]!==void 0}function qk(t,e){let n=cp(t,e?.equal),r=n[Et];return n.set=i=>ta(r,i),n.update=i=>up(r,i),n.asReadonly=Gk.bind(n),n}function Gk(){let t=this[Et];if(t.readonlyFn===void 0){let e=()=>this();e[Et]=t,t.readonlyFn=e}return t.readonlyFn}function zD(t){return zk(t)&&typeof t.set=="function"}function Wk(){return this._results[Symbol.iterator]()}var cg=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new xe}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=Rx(e);(this._changesDetected=!Ax(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=Wk};function qD(t){return(t.flags&128)===128}var GD=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(GD||{}),WD=new Map,Kk=0;function Qk(){return Kk++}function Yk(t){WD.set(t[Nl],t)}function ug(t){WD.delete(t[Nl])}var cT="__ngContext__";function Bo(t,e){Dr(e)?(t[cT]=e[Nl],Yk(e)):t[cT]=e}function KD(t){return YD(t[fa])}function QD(t){return YD(t[tn])}function YD(t){for(;t!==null&&!Hn(t);)t=t[tn];return t}var lg;function JD(t){lg=t}function Jk(){if(lg!==void 0)return lg;if(typeof document<"u")return document;throw new F(210,!1)}var Ul=new $("",{providedIn:"root",factory:()=>Zk}),Zk="ng",wm=new $(""),Ea=new $("",{providedIn:"platform",factory:()=>"unknown"});var zG=new $(""),Tm=new $("",{providedIn:"root",factory:()=>Jk().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Xk="h",eO="b";var ZD=!1,tO=new $("",{providedIn:"root",factory:()=>ZD});var Dm=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(Dm||{}),$o=new $(""),uT=new Set;function wi(t){uT.has(t)||(uT.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var bm=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=nO}return t})();function nO(){return new bm(G(),lt())}var go=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(go||{}),XD=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}return t})(),rO=[go.EarlyRead,go.Write,go.MixedReadWrite,go.Read],iO=(()=>{class t{ngZone=x(Le);scheduler=x(vi);errorHandler=x(gn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){x($o,{optional:!0})}execute(){let n=this.sequences.size>0;n&&_e(16),this.executing=!0;for(let r of rO)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&_e(17)}register(n){let{view:r}=n;r!==void 0?((r[yo]??=[]).push(n),Lo(r),r[J]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(Dm.AFTER_NEXT_RENDER,n):n()}static \u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}return t})(),dg=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,i,o,s=null){this.impl=e,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[yo];e&&(this.view[yo]=e.filter(n=>n!==this))}};function oO(t,e){!e?.injector&&rm(oO);let n=e?.injector??x(zt);return wi("NgAfterRender"),tb(t,n,e,!1)}function eb(t,e){!e?.injector&&rm(eb);let n=e?.injector??x(zt);return wi("NgAfterNextRender"),tb(t,n,e,!0)}function sO(t,e){if(t instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[e]=t,n}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function tb(t,e,n,r){let i=e.get(XD);i.impl??=e.get(iO);let o=e.get($o,null,{optional:!0}),s=n?.phase??go.MixedReadWrite,a=n?.manualCleanup!==!0?e.get(Vo):null,u=e.get(bm,null,{optional:!0}),l=new dg(i.impl,sO(t,s),u?.view,r,a,o?.snapshot(null));return i.impl.register(l),l}var aO=()=>null;function nb(t,e,n=!1){return aO(t,e,n)}function rb(t,e){let n=t.contentQueries;if(n!==null){let r=se(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Ol(o),a.contentQueries(2,e[s],s)}}}finally{se(r)}}}function hg(t,e,n){Ol(0);let r=se(null);try{e(t,n)}finally{se(r)}}function Cm(t,e,n){if(im(e)){let r=se(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{se(r)}}}var mn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(mn||{}),Hu;function cO(){if(Hu===void 0&&(Hu=null,wr.trustedTypes))try{Hu=wr.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Hu}function jl(t){return cO()?.createHTML(t)||t}var jn=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${xT})`}},fg=class extends jn{getTypeName(){return"HTML"}},pg=class extends jn{getTypeName(){return"Style"}},gg=class extends jn{getTypeName(){return"Script"}},mg=class extends jn{getTypeName(){return"URL"}},yg=class extends jn{getTypeName(){return"ResourceURL"}};function Gn(t){return t instanceof jn?t.changingThisBreaksApplicationSecurity:t}function Ti(t,e){let n=uO(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${xT})`)}return n===e}function uO(t){return t instanceof jn&&t.getTypeName()||null}function ib(t){return new fg(t)}function ob(t){return new pg(t)}function sb(t){return new gg(t)}function ab(t){return new mg(t)}function cb(t){return new yg(t)}function lO(t){let e=new _g(t);return dO()?new vg(e):e}var vg=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let n=new window.DOMParser().parseFromString(jl(e),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(e):(n.firstChild?.remove(),n)}catch{return null}}},_g=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let n=this.inertDocument.createElement("template");return n.innerHTML=jl(e),n}};function dO(){try{return!!new window.DOMParser().parseFromString(jl(""),"text/html")}catch{return!1}}var hO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Bl(t){return t=String(t),t.match(hO)?t:"unsafe:"+t}function Wn(t){let e={};for(let n of t.split(","))e[n]=!0;return e}function wa(...t){let e={};for(let n of t)for(let r in n)n.hasOwnProperty(r)&&(e[r]=!0);return e}var ub=Wn("area,br,col,hr,img,wbr"),lb=Wn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),db=Wn("rp,rt"),fO=wa(db,lb),pO=wa(lb,Wn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),gO=wa(db,Wn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),lT=wa(ub,pO,gO,fO),hb=Wn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),mO=Wn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),yO=Wn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),vO=wa(hb,mO,yO),_O=Wn("script,style,template"),Ig=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let n=e.firstChild,r=!0,i=[];for(;n;){if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild){i.push(n),n=wO(n);continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let o=EO(n);if(o){n=o;break}n=i.pop()}}return this.buf.join("")}startElement(e){let n=dT(e).toLowerCase();if(!lT.hasOwnProperty(n))return this.sanitizedSomething=!0,!_O.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let r=e.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,a=s.toLowerCase();if(!vO.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let u=o.value;hb[a]&&(u=Bl(u)),this.buf.push(" ",s,'="',hT(u),'"')}return this.buf.push(">"),!0}endElement(e){let n=dT(e).toLowerCase();lT.hasOwnProperty(n)&&!ub.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(hT(e))}};function IO(t,e){return(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function EO(t){let e=t.nextSibling;if(e&&t!==e.previousSibling)throw fb(e);return e}function wO(t){let e=t.firstChild;if(e&&IO(t,e))throw fb(e);return e}function dT(t){let e=t.nodeName;return typeof e=="string"?e:"FORM"}function fb(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}var TO=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,DO=/([^\#-~ |!])/g;function hT(t){return t.replace(/&/g,"&amp;").replace(TO,function(e){let n=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((n-55296)*1024+(r-56320)+65536)+";"}).replace(DO,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var zu;function pb(t,e){let n=null;try{zu=zu||lO(t);let r=e?String(e):"";n=zu.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=zu.getInertBodyElement(r)}while(r!==o);let a=new Ig().sanitizeChildren(fT(n)||n);return jl(a)}finally{if(n){let r=fT(n)||n;for(;r.firstChild;)r.firstChild.remove()}}}function fT(t){return"content"in t&&bO(t)?t.content:null}function bO(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var Kn=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Kn||{});function qG(t){let e=CO();return e?e.sanitize(Kn.URL,t)||"":Ti(t,"URL")?Gn(t):Bl(_o(t))}function CO(){let t=G();return t&&t[Vn].sanitizer}var SO=/^>|^->|<!--|-->|--!>|<!-$/g,AO=/(<|>)/g,RO="\u200B$1\u200B";function NO(t){return t.replace(SO,e=>e.replace(AO,RO))}function gb(t){return t instanceof Function?t():t}function MO(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var mb="ng-template";function PO(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&MO(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Sm(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Sm(t){return t.type===4&&t.value!==mb}function xO(t,e,n){let r=t.type===4&&!n?mb:t.value;return e===r}function kO(t,e,n){let r=4,i=t.attrs,o=i!==null?FO(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Xt(r)&&!Xt(u))return!1;if(s&&Xt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!xO(t,u,n)||u===""&&e.length===1){if(Xt(r))return!1;s=!0}}else if(r&8){if(i===null||!PO(t,i,u,n)){if(Xt(r))return!1;s=!0}}else{let l=e[++a],h=OO(u,i,Sm(t),n);if(h===-1){if(Xt(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Xt(r))return!1;s=!0}}}}return Xt(r)||s}function Xt(t){return(t&1)===0}function OO(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return VO(e,t)}function yb(t,e,n=!1){for(let r=0;r<e.length;r++)if(kO(t,e[r],n))return!0;return!1}function LO(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if((n&1)===0)return e[n+1]}return null}function FO(t){for(let e=0;e<t.length;e++){let n=t[e];if(bD(n))return e}return t.length}function VO(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function UO(t,e){e:for(let n=0;n<e.length;n++){let r=e[n];if(t.length===r.length){for(let i=0;i<t.length;i++)if(t[i]!==r[i])continue e;return!0}}return!1}function pT(t,e){return t?":not("+e.trim()+")":e}function jO(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Xt(s)&&(e+=pT(o,i),i=""),r=s,o=o||!Xt(r);n++}return i!==""&&(e+=pT(o,i)),e}function BO(t){return t.map(jO).join(",")}function $O(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Xt(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var At={};function HO(t,e){return t.createText(e)}function zO(t,e,n){t.setValue(e,n)}function qO(t,e){return t.createComment(NO(e))}function vb(t,e,n){return t.createElement(e,n)}function fl(t,e,n,r,i){t.insertBefore(e,n,r,i)}function _b(t,e,n){t.appendChild(e,n)}function gT(t,e,n,r,i){r!==null?fl(t,e,n,r,i):_b(t,e,n)}function GO(t,e,n){t.removeChild(null,e,n)}function WO(t,e,n){t.setAttribute(e,"style",n)}function KO(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Ib(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&wk(t,e,r),i!==null&&KO(t,e,i),o!==null&&WO(t,e,o)}function Am(t,e,n,r,i,o,s,a,u,l,h){let p=Ve+r,g=p+i,m=QO(p,g),w=typeof l=="function"?l():l;return m[te]={type:t,blueprint:m,template:n,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:w,incompleteFirstPass:!1,ssrId:h}}function QO(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:At);return n}function YO(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Am(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Rm(t,e,n,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[$n]=i,p[J]=r|4|128|8|64|1024,(l!==null||t&&t[J]&2048)&&(p[J]|=2048),hD(p),p[ut]=p[xo]=t,p[Ge]=n,p[Vn]=s||t&&t[Vn],p[Se]=a||t&&t[Se],p[di]=u||t&&t[di]||null,p[St]=o,p[Nl]=Qk(),p[wo]=h,p[iD]=l,p[kt]=e.type==2?t[kt]:p,p}function JO(t,e,n){let r=yn(e,t),i=YO(n),o=t[Vn].rendererFactory,s=Nm(t,Rm(t,i,null,Eb(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function Eb(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function wb(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Nm(t,e){return t[fa]?t[Yw][tn]=e:t[fa]=e,t[Yw]=e,e}function GG(t=1){Tb(De(),G(),zn()+t,!1)}function Tb(t,e,n,r){if(!r)if((e[J]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Wu(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Ku(e,o,0,n)}mi(n)}var $l=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}($l||{});function Eg(t,e,n,r){let i=se(null);try{let[o,s,a]=t.inputs[n],u=null;(s&$l.SignalBased)!==0&&(u=e[o][Et]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):sD(e,u,o,r)}finally{se(i)}}function Db(t,e,n,r,i){let o=zn(),s=r&2;try{mi(-1),s&&e.length>Ve&&Tb(t,e,Ve,!1),_e(s?2:0,i),n(r,i)}finally{mi(o),_e(s?3:1,i)}}function Hl(t,e,n){r1(t,e,n),(n.flags&64)===64&&i1(t,e,n)}function Mm(t,e,n=yn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function ZO(t,e,n,r){let o=r.get(tO,ZD)||n===mn.ShadowDom,s=t.selectRootElement(e,o);return XO(s),s}function XO(t){e1(t)}var e1=()=>null;function t1(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Ta(t,e,n,r,i,o,s,a){if(!a&&xm(e,t,n,r,i)){ko(e)&&n1(n,e.index);return}if(e.type&3){let u=yn(e,n);r=t1(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)}else e.type&12}function n1(t,e){let n=pn(e,t);n[J]&16||(n[J]|=64)}function r1(t,e,n){let r=n.directiveStart,i=n.directiveEnd;ko(n)&&JO(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||ll(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],u=pa(e,t,s,n);if(Bo(u,e),o!==null&&c1(e,s-r,u,a,n,o),hn(a)){let l=pn(n.index,e);l[Ge]=pa(e,t,s,n)}}}function i1(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=hk();try{mi(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];tg(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&o1(u,l)}}finally{mi(-1),tg(s)}}function o1(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Pm(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];yb(e,o.selectors,!1)&&(r??=[],hn(o)?r.unshift(o):r.push(o))}return r}function s1(t,e,n,r,i,o){let s=yn(t,e);a1(e[Se],s,o,t.value,n,r,i)}function a1(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?_o(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function c1(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];Eg(r,n,u,l)}}function u1(t,e){let n=t[di],r=n?n.get(gn,null):null;r&&r.handleError(e)}function xm(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];Eg(p,n[l],h,i),a=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];Eg(h,l,r,i),a=!0}return a}function l1(t,e){let n=pn(e,t),r=n[te];d1(r,n);let i=n[$n];i!==null&&n[wo]===null&&(n[wo]=nb(i,n[di])),_e(18),km(r,n,n[Ge]),_e(19,n[Ge])}function d1(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function km(t,e,n){gm(e);try{let r=t.viewQuery;r!==null&&hg(1,r,n);let i=t.template;i!==null&&Db(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Un]?.finishViewCreation(t),t.staticContentQueries&&rb(t,e),t.staticViewQueries&&hg(2,t.viewQuery,n);let o=t.components;o!==null&&h1(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[J]&=-5,mm()}}function h1(t,e){for(let n=0;n<e.length;n++)l1(t,e[n])}function Da(t,e,n,r){let i=se(null);try{let o=e.tView,a=t[J]&4096?4096:16,u=Rm(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[hi]=l;let h=t[Un];return h!==null&&(u[Un]=h.createEmbeddedView(o)),km(o,u,n),u}finally{se(i)}}function bo(t,e){return!e||e.firstChild===null||qD(t)}var f1;function Om(t,e){return f1(t,e)}var Bn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Bn||{});function Lm(t){return(t.flags&32)===32}function mo(t,e,n,r,i){if(r!=null){let o,s=!1;Hn(r)?o=r:Dr(r)&&(s=!0,r=r[$n]);let a=fn(r);t===0&&n!==null?i==null?_b(e,n,a):fl(e,n,a,i||null,!0):t===1&&n!==null?fl(e,n,a,i||null,!0):t===2?GO(e,a,s):t===3&&e.destroyNode(a),o!=null&&T1(e,t,o,n,i)}}function p1(t,e){bb(t,e),e[$n]=null,e[St]=null}function g1(t,e,n,r,i,o){r[$n]=i,r[St]=e,Gl(t,r,n,1,i,o)}function bb(t,e){e[Vn].changeDetectionScheduler?.notify(9),Gl(t,e,e[Se],2,null,null)}function m1(t){let e=t[fa];if(!e)return Op(t[te],t);for(;e;){let n=null;if(Dr(e))n=e[fa];else{let r=e[ct];r&&(n=r)}if(!n){for(;e&&!e[tn]&&e!==t;)Dr(e)&&Op(e[te],e),e=e[ut];e===null&&(e=t),Dr(e)&&Op(e[te],e),n=e&&e[tn]}e=n}}function Fm(t,e){let n=t[To],r=n.indexOf(e);n.splice(r,1)}function zl(t,e){if(Oo(e))return;let n=e[Se];n.destroyNode&&Gl(t,e,n,3,null,null),m1(e)}function Op(t,e){if(Oo(e))return;let n=se(null);try{e[J]&=-129,e[J]|=256,e[Ht]&&ea(e[Ht]),v1(t,e),y1(t,e),e[te].type===1&&e[Se].destroy();let r=e[hi];if(r!==null&&Hn(e[ut])){r!==e[ut]&&Fm(r,e);let i=e[Un];i!==null&&i.detachView(t)}ug(e)}finally{se(n)}}function y1(t,e){let n=t.cleanup,r=e[rl];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[rl]=null);let i=e[Tr];if(i!==null){e[Tr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[fi];if(o!==null){e[fi]=null;for(let s of o)s.destroy()}}function v1(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof yi)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];_e(4,a,u);try{u.call(a)}finally{_e(5,a,u)}}else{_e(4,i,o);try{o.call(i)}finally{_e(5,i,o)}}}}}function Cb(t,e,n){return _1(t,e.parent,n)}function _1(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[$n];if(ko(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===mn.None||i===mn.Emulated)return null}return yn(r,n)}function Sb(t,e,n){return E1(t,e,n)}function I1(t,e,n){return t.type&40?yn(t,n):null}var E1=I1,mT;function ql(t,e,n,r){let i=Cb(t,r,e),o=e[Se],s=r.parent||e[St],a=Sb(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)gT(o,i,n[u],a,!1);else gT(o,i,n,a,!1);mT!==void 0&&mT(o,r,e,n,i)}function la(t,e){if(e!==null){let n=e.type;if(n&3)return yn(e,t);if(n&4)return wg(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return la(t,r);{let i=t[e.index];return Hn(i)?wg(-1,i):fn(i)}}else{if(n&128)return la(t,e.next);if(n&32)return Om(e,t)()||fn(t[e.index]);{let r=Ab(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=gi(t[kt]);return la(i,r)}else return la(t,e.next)}}}return null}function Ab(t,e){if(e!==null){let r=t[kt][St],i=e.projection;return r.projection[i]}return null}function wg(t,e){let n=ct+t+1;if(n<e.length){let r=e[n],i=r[te].firstChild;if(i!==null)return la(r,i)}return e[pi]}function Vm(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(s&&e===0&&(a&&Bo(fn(a),r),n.flags|=2),!Lm(n))if(u&8)Vm(t,e,n.child,r,i,o,!1),mo(e,t,i,a,o);else if(u&32){let l=Om(n,r),h;for(;h=l();)mo(e,t,i,h,o);mo(e,t,i,a,o)}else u&16?Rb(t,e,r,n,i,o):mo(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Gl(t,e,n,r,i,o){Vm(n,r,t.firstChild,e,i,o,!1)}function w1(t,e,n){let r=e[Se],i=Cb(t,n,e),o=n.parent||e[St],s=Sb(o,n,e);Rb(r,0,e,n,i,s)}function Rb(t,e,n,r,i,o){let s=n[kt],u=s[St].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];mo(e,t,i,h,o)}else{let l=u,h=s[ut];qD(r)&&(l.flags|=128),Vm(t,e,l,h,i,o,!0)}}function T1(t,e,n,r,i){let o=n[pi],s=fn(n);o!==s&&mo(e,t,r,o,i);for(let a=ct;a<n.length;a++){let u=n[a];Gl(u[te],u,t,e,r,o)}}function D1(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Bn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Bn.Important),t.setStyle(n,r,i,o))}}function pl(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(fn(o)),Hn(o)&&b1(o,r);let s=n.type;if(s&8)pl(t,e,n.child,r);else if(s&32){let a=Om(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=Ab(e,n);if(Array.isArray(a))r.push(...a);else{let u=gi(e[kt]);pl(u[te],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function b1(t,e){for(let n=ct;n<t.length;n++){let r=t[n],i=r[te].firstChild;i!==null&&pl(r[te],r,i,e)}t[pi]!==t[$n]&&e.push(t[pi])}function Nb(t){if(t[yo]!==null){for(let e of t[yo])e.impl.addSequence(e);t[yo].length=0}}var Mb=[];function C1(t){return t[Ht]??S1(t)}function S1(t){let e=Mb.pop()??Object.create(R1);return e.lView=t,e}function A1(t){t.lView[Ht]!==t&&(t.lView=null,Mb.push(t))}var R1=ye(U({},to),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Lo(t.lView)},consumerOnSignalRead(){this.lView[Ht]=this}});function N1(t){let e=t[Ht]??Object.create(M1);return e.lView=t,e}var M1=ye(U({},to),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=gi(t.lView);for(;e&&!Pb(e[te]);)e=gi(e);e&&fD(e)},consumerOnSignalRead(){this.lView[Ht]=this}});function Pb(t){return t.type!==2}function xb(t){if(t[fi]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[fi])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[J]&8192)}}var P1=100;function kb(t,e=!0,n=0){let i=t[Vn].rendererFactory,o=!1;o||i.begin?.();try{x1(t,n)}catch(s){throw e&&u1(t,s),s}finally{o||i.end?.()}}function x1(t,e){let n=yD();try{sl(!0),Tg(t,e);let r=0;for(;xl(t);){if(r===P1)throw new F(103,!1);r++,Tg(t,1)}}finally{sl(n)}}function k1(t,e,n,r){if(Oo(e))return;let i=e[J],o=!1,s=!1;gm(e);let a=!0,u=null,l=null;o||(Pb(t)?(l=C1(e),u=Xs(l)):rp()===null?(a=!1,l=N1(e),u=Xs(l)):e[Ht]&&(ea(e[Ht]),e[Ht]=null));try{hD(e),uk(t.bindingStartIndex),n!==null&&Db(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let m=t.preOrderCheckHooks;m!==null&&Wu(e,m,null)}else{let m=t.preOrderHooks;m!==null&&Ku(e,m,0,null),xp(e,0)}if(s||O1(e),xb(e),Ob(e,0),t.contentQueries!==null&&rb(t,e),!o)if(h){let m=t.contentCheckHooks;m!==null&&Wu(e,m)}else{let m=t.contentHooks;m!==null&&Ku(e,m,1),xp(e,1)}F1(t,e);let p=t.components;p!==null&&Fb(e,p,0);let g=t.viewQuery;if(g!==null&&hg(2,g,r),!o)if(h){let m=t.viewCheckHooks;m!==null&&Wu(e,m)}else{let m=t.viewHooks;m!==null&&Ku(e,m,2),xp(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Pp]){for(let m of e[Pp])m();e[Pp]=null}o||(Nb(e),e[J]&=-73)}catch(h){throw o||Lo(e),h}finally{l!==null&&(su(l,u),a&&A1(l)),mm()}}function Ob(t,e){for(let n=KD(t);n!==null;n=QD(n))for(let r=ct;r<n.length;r++){let i=n[r];Lb(i,e)}}function O1(t){for(let e=KD(t);e!==null;e=QD(e)){if(!(e[J]&2))continue;let n=e[To];for(let r=0;r<n.length;r++){let i=n[r];fD(i)}}}function L1(t,e,n){_e(18);let r=pn(e,t);Lb(r,n),_e(19,r[Ge])}function Lb(t,e){am(t)&&Tg(t,e)}function Tg(t,e){let r=t[te],i=t[J],o=t[Ht],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&au(o)),s||=!1,o&&(o.dirty=!1),t[J]&=-9217,s)k1(r,t,r.template,t[Ge]);else if(i&8192){xb(t),Ob(t,1);let a=r.components;a!==null&&Fb(t,a,1),Nb(t)}}function Fb(t,e,n){for(let r=0;r<e.length;r++)L1(t,e[r],n)}function F1(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)mi(~i);else{let o=i,s=n[++r],a=n[++r];dk(s,o);let u=e[o];_e(24,u),a(2,u),_e(25,u)}}}finally{mi(-1)}}function Um(t,e){let n=yD()?64:1088;for(t[Vn].changeDetectionScheduler?.notify(e);t;){t[J]|=n;let r=gi(t);if(ol(t)&&!r)return t;t=r}return null}function Vb(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Ub(t,e){let n=ct+e;if(n<t.length)return t[n]}function ba(t,e,n,r=!0){let i=e[te];if(V1(i,e,t,n),r){let s=wg(n,t),a=e[Se],u=a.parentNode(t[pi]);u!==null&&g1(i,t[St],a,e,u,s)}let o=e[wo];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function jb(t,e){let n=ma(t,e);return n!==void 0&&zl(n[te],n),n}function ma(t,e){if(t.length<=ct)return;let n=ct+e,r=t[n];if(r){let i=r[hi];i!==null&&i!==t&&Fm(i,r),e>0&&(t[n-1][tn]=r[tn]);let o=tl(t,ct+e);p1(r[te],r);let s=o[Un];s!==null&&s.detachView(o[te]),r[ut]=null,r[tn]=null,r[J]&=-129}return r}function V1(t,e,n,r){let i=ct+r,o=n.length;r>0&&(n[i-1][tn]=e),r<o-ct?(e[tn]=n[i],QT(n,ct+r,e)):(n.push(e),e[tn]=null),e[ut]=n;let s=e[hi];s!==null&&n!==s&&Bb(s,e);let a=e[Un];a!==null&&a.insertView(t),Xp(e),e[J]|=128}function Bb(t,e){let n=t[To],r=e[ut];if(Dr(r))t[J]|=2;else{let i=r[ut][kt];e[kt]!==i&&(t[J]|=2)}n===null?t[To]=[e]:n.push(e)}var ya=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,n=e[te];return pl(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r}get context(){return this._lView[Ge]}set context(e){this._lView[Ge]=e}get destroyed(){return Oo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ut];if(Hn(e)){let n=e[il],r=n?n.indexOf(this):-1;r>-1&&(ma(e,r),tl(n,r))}this._attachedToViewContainer=!1}zl(this._lView[te],this._lView)}onDestroy(e){pD(this._lView,e)}markForCheck(){Um(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[J]&=-129}reattach(){Xp(this._lView),this._lView[J]|=128}detectChanges(){this._lView[J]|=1024,kb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new F(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ol(this._lView),n=this._lView[hi];n!==null&&!e&&Fm(n,this._lView),bb(this._lView[te],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new F(902,!1);this._appRef=e;let n=ol(this._lView),r=this._lView[hi];r!==null&&!n&&Bb(r,this._lView),Xp(this._lView)}};var _i=(()=>{class t{static __NG_ELEMENT_ID__=B1}return t})(),U1=_i,j1=class extends U1{_declarationLView;_declarationTContainer;elementRef;constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=Da(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new ya(i)}};function B1(){return Wl(lt(),G())}function Wl(t,e){return t.type&4?new j1(e,t,Uo(t,e)):null}function Ho(t,e,n,r,i){let o=t.data[e];if(o===null)o=$1(t,e,n,r,i),lk()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=sk();o.injectorIndex=s===null?-1:s.injectorIndex}return Sr(o,!0),o}function $1(t,e,n,r,i){let o=mD(),s=dm(),a=s?o:o&&o.parent,u=t.data[e]=z1(t,a,n,e,r,i);return H1(t,u,o,s),u}function H1(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function z1(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return gD()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var QG=new RegExp(`^(\\d+)*(${eO}|${Xk})*(.*)`);var q1=()=>null;function Co(t,e){return q1(t,e)}var G1=class{},$b=class{},Dg=class{resolveComponentFactory(e){throw Error(`No component factory found for ${bt(e)}.`)}},Kl=class{static NULL=new Dg},So=class{},Hb=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>W1()}return t})();function W1(){let t=G(),e=lt(),n=pn(e.index,t);return(Dr(n)?n:t)[Se]}var K1=(()=>{class t{static \u0275prov=H({token:t,providedIn:"root",factory:()=>null})}return t})();var Lp={},bg=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Cl(r);let i=this.injector.get(e,Lp,r);return i!==Lp||n===Lp?i:this.parentInjector.get(e,n,r)}};function Cg(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=qp(i,a);else if(o==2){let u=a,l=e[++s];r=qp(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function tt(t,e=oe.Default){let n=G();if(n===null)return W(t,e);let r=lt();return PD(r,n,vt(t),e)}function XG(){let t="invalid";throw new Error(t)}function jm(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a,u=null,l=null,h=Y1(s);h===null?a=s:[a,u,l]=h,X1(t,e,n,a,o,u,l)}o!==null&&r!==null&&Q1(n,r,o)}function Q1(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new F(-301,!1);r.push(e[i],o)}}function Y1(t){let e=null,n=!1;for(let s=0;s<t.length;s++){let a=t[s];if(s===0&&hn(a)&&(e=a),a.findHostDirectiveDefs!==null){n=!0;break}}if(!n)return null;let r=null,i=null,o=null;for(let s of t)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,J1(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?t:t.slice(1)),[r,i,o]):null}function J1(t,e,n,r){let i=e.length;t.findHostDirectiveDefs(t,e,r),n.set(t,[i,e.length-1])}function Z1(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function X1(t,e,n,r,i,o,s){let a=r.length,u=!1;for(let g=0;g<a;g++){let m=r[g];!u&&hn(m)&&(u=!0,Z1(t,n,g)),rg(ll(n,e),t,m.type)}oL(n,t.data.length,a);for(let g=0;g<a;g++){let m=r[g];m.providersResolver&&m.providersResolver(m)}let l=!1,h=!1,p=wb(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let g=0;g<a;g++){let m=r[g];if(n.mergedAttrs=Do(n.mergedAttrs,m.hostAttrs),tL(t,n,e,p,m),iL(p,m,i),s!==null&&s.has(m)){let[A,R]=s.get(m);n.directiveToIndex.set(m.type,[p,A+n.directiveStart,R+n.directiveStart])}else(o===null||!o.has(m))&&n.directiveToIndex.set(m.type,p);m.contentQueries!==null&&(n.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(n.flags|=64);let w=m.type.prototype;!l&&(w.ngOnChanges||w.ngOnInit||w.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(w.ngOnChanges||w.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}eL(t,n,o)}function eL(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))yT(0,e,i,r),yT(1,e,i,r),_T(e,r,!1);else{let o=n.get(i);vT(0,e,o,r),vT(1,e,o,r),_T(e,r,!0)}}}function yT(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),zb(e,o)}}function vT(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),zb(e,s)}}function zb(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function _T(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||Sm(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function tL(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=ci(i.type,!0)),s=new yi(o,hn(i),tt);t.blueprint[r]=s,n[r]=s,nL(t,e,r,wb(t,n,i.hostVars,At),i)}function nL(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;rL(s)!=a&&s.push(a),s.push(n,r,o)}}function rL(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function iL(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;hn(e)&&(n[""]=t)}}function oL(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function qb(t,e,n,r,i,o,s,a){let u=e.consts,l=br(u,s),h=Ho(e,t,2,r,l);return o&&jm(e,n,h,br(u,a),i),h.mergedAttrs=Do(h.mergedAttrs,h.attrs),h.attrs!==null&&Cg(h,h.attrs,!1),h.mergedAttrs!==null&&Cg(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function Gb(t,e){ym(t,e),im(e)&&t.queries.elementEnd(e)}var gl=class extends Kl{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=li(e);return new Ao(n,this.ngModule)}};function sL(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&$l.SignalBased)!==0};return i&&(o.transform=i),o})}function aL(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function cL(t,e,n){let r=e instanceof Ct?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new bg(n,r):n}function uL(t){let e=t.get(So,null);if(e===null)throw new F(407,!1);let n=t.get(K1,null),r=t.get(vi,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r}}function lL(t,e){let n=(t.selectors[0][0]||"div").toLowerCase();return vb(e,n,n==="svg"?lD:n==="math"?Qx:null)}var Ao=class extends $b{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=sL(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=aL(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=BO(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i){_e(22);let o=se(null);try{let s=this.componentDef,a=r?["ng-version","19.2.10"]:$O(this.componentDef.selectors[0]),u=Am(0,null,null,1,0,null,null,null,null,[a],null),l=cL(s,i||this.ngModule,e),h=uL(l),p=h.rendererFactory.createRenderer(null,s),g=r?ZO(p,r,s.encapsulation,l):lL(s,p),m=Rm(null,u,null,512|Eb(s),null,null,h,p,l,null,nb(g,l,!0));m[Ve]=g,gm(m);let w=null;try{let A=qb(Ve,u,m,"#host",()=>[this.componentDef],!0,0);g&&(Ib(p,g,A),Bo(g,m)),Hl(u,m,A),Cm(u,A,m),Gb(u,A),n!==void 0&&dL(A,this.ngContentSelectors,n),w=pn(A.index,m),m[Ge]=w[Ge],km(u,m,null)}catch(A){throw w!==null&&ug(w),ug(m),A}finally{_e(23),mm()}return new Sg(this.componentType,m)}finally{se(o)}}},Sg=class extends G1{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n){super(),this._rootLView=n,this._tNode=om(n[te],Ve),this.location=Uo(this._tNode,n),this.instance=pn(this._tNode.index,n)[Ge],this.hostView=this.changeDetectorRef=new ya(n,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=xm(r,i[te],i,e,n);this.previousInputValues.set(e,n);let s=pn(r.index,i);Um(s,1)}get injector(){return new ai(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function dL(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Qn=(()=>{class t{static __NG_ELEMENT_ID__=hL}return t})();function hL(){let t=lt();return Kb(t,G())}var fL=Qn,Wb=class extends fL{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Uo(this._hostTNode,this._hostLView)}get injector(){return new ai(this._hostTNode,this._hostLView)}get parentInjector(){let e=vm(this._hostTNode,this._hostLView);if(CD(e)){let n=cl(e,this._hostLView),r=al(e),i=n[te].data[r+8];return new ai(i,n)}else return new ai(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=IT(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-ct}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Co(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,bo(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!qx(e),a;if(s)a=n;else{let w=n||{};a=w.index,r=w.injector,i=w.projectableNodes,o=w.environmentInjector||w.ngModuleRef}let u=s?e:new Ao(li(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let A=(s?l:this.parentInjector).get(Ct,null);A&&(o=A)}let h=li(u.componentType??{}),p=Co(this._lContainer,h?.id??null),g=p?.firstChild??null,m=u.create(l,i,g,o);return this.insertImpl(m.hostView,a,bo(this._hostTNode,p)),m}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(Jx(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[ut],l=new Wb(u,u[St],u[ut]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return ba(s,i,o,r),e.attachToViewContainerRef(),QT(Fp(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=IT(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=ma(this._lContainer,n);r&&(tl(Fp(this._lContainer),n),zl(r[te],r))}detach(e){let n=this._adjustIndex(e,-1),r=ma(this._lContainer,n);return r&&tl(Fp(this._lContainer),n)!=null?new ya(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function IT(t){return t[il]}function Fp(t){return t[il]||(t[il]=[])}function Kb(t,e){let n,r=e[t.index];return Hn(r)?n=r:(n=Vb(r,e,null,t),e[t.index]=n,Nm(e,n)),gL(n,e,t,r),new Wb(n,t,e)}function pL(t,e){let n=t[Se],r=n.createComment(""),i=yn(e,t),o=n.parentNode(i);return fl(n,o,r,n.nextSibling(i),!1),r}var gL=vL,mL=()=>!1;function yL(t,e,n){return mL(t,e,n)}function vL(t,e,n,r){if(t[pi])return;let i;n.type&8?i=fn(r):i=pL(e,n),t[pi]=i}var Ag=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Rg=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)$m(e,n).matches!==null&&this.queries[n].setDirty()}},ml=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=DL(e):this.predicate=e}},Ng=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Mg=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,_L(n,o)),this.matchTNodeWithReadOption(e,n,Qu(n,e,o,!1,!1))}else r===_i?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Qu(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===jo||i===Qn||i===_i&&n.type&4)this.addMatch(n.index,-2);else{let o=Qu(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function _L(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function IL(t,e){return t.type&11?Uo(t,e):t.type&4?Wl(t,e):null}function EL(t,e,n,r){return n===-1?IL(e,t):n===-2?wL(t,e,r):pa(t,t[te],n,e)}function wL(t,e,n){if(n===jo)return Uo(e,t);if(n===_i)return Wl(e,t);if(n===Qn)return Kb(e,t)}function Qb(t,e,n,r){let i=e[Un].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let h=o[l];a.push(EL(e,h,s[u+1],n.metadata.read))}}i.matches=a}return i.matches}function Pg(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=Qb(t,e,i,n);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-u];for(let p=ct;p<h.length;p++){let g=h[p];g[hi]===g[ut]&&Pg(g[te],g,l,r)}if(h[To]!==null){let p=h[To];for(let g=0;g<p.length;g++){let m=p[g];Pg(m[te],m,l,r)}}}}}return r}function Bm(t,e){return t[Un].queries[e].queryList}function Yb(t,e,n){let r=new cg((n&4)===4);return ek(t,e,r,r.destroy),(e[Un]??=new Rg).queries.push(new Ag(r))-1}function TL(t,e,n){let r=De();return r.firstCreatePass&&(Zb(r,new ml(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),Yb(r,G(),e)}function Jb(t,e,n,r){let i=De();if(i.firstCreatePass){let o=lt();Zb(i,new ml(e,n,r),o.index),bL(i,t),(n&2)===2&&(i.staticContentQueries=!0)}return Yb(i,G(),n)}function DL(t){return t.split(",").map(e=>e.trim())}function Zb(t,e,n){t.queries===null&&(t.queries=new Ng),t.queries.track(new Mg(e,n))}function bL(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function $m(t,e){return t.queries.getByIndex(e)}function Xb(t,e){let n=t[te],r=$m(n,e);return r.crossesNgTemplate?Pg(n,t,e,[]):Qb(n,t,r,e)}function eC(t,e,n){let r,i=lu(()=>{r._dirtyCounter();let o=RL(r,t);if(e&&o===void 0)throw new F(-951,!1);return o});return r=i[Et],r._dirtyCounter=qk(0),r._flatValue=void 0,i}function CL(t){return eC(!0,!1,t)}function SL(t){return eC(!0,!0,t)}function AL(t,e){let n=t[Et];n._lView=G(),n._queryIndex=e,n._queryList=Bm(n._lView,e),n._queryList.onDirty(()=>n._dirtyCounter.update(r=>r+1))}function RL(t,e){let n=t._lView,r=t._queryIndex;if(n===void 0||r===void 0||n[J]&4)return e?void 0:_t;let i=Bm(n,r),o=Xb(n,r);return i.reset(o,HD),e?i.first:i._changesDetected||t._flatValue===void 0?t._flatValue=i.toArray():t._flatValue}function ET(t,e){return CL(e)}function NL(t,e){return SL(e)}var tW=(ET.required=NL,ET);var Ro=class{},Hm=class{};var xg=class extends Ro{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new gl(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=ZT(e);this._bootstrapComponents=gb(o.bootstrap),this._r3Injector=LD(e,n,[{provide:Ro,useValue:this},{provide:Kl,useValue:this.componentFactoryResolver},...r],bt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},kg=class extends Hm{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new xg(this.moduleType,e,[])}};var yl=class extends Ro{injector;componentFactoryResolver=new gl(this);instance=null;constructor(e){super();let n=new ha([...e.providers,{provide:Ro,useValue:this},{provide:Kl,useValue:this.componentFactoryResolver}],e.parent||Rl(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ql(t,e,n=null){return new yl({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var ML=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=XT(!1,n.type),i=r.length>0?Ql([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=H({token:t,providedIn:"environment",factory:()=>new t(W(Ct))})}return t})();function tC(t){return _a(()=>{let e=nC(t),n=ye(U({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===GD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(ML).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||mn.Emulated,styles:t.styles||_t,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&wi("NgStandalone"),rC(n);let r=t.dependencies;return n.directiveDefs=wT(r,!1),n.pipeDefs=wT(r,!0),n.id=LL(n),n})}function PL(t){return li(t)||xx(t)}function xL(t){return t!==null}function zo(t){return _a(()=>({type:t.type,bootstrap:t.bootstrap||_t,declarations:t.declarations||_t,imports:t.imports||_t,exports:t.exports||_t,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function kL(t,e){if(t==null)return ui;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=$l.None,u=null),n[o]=[r,a,u],e[o]=s}return n}function OL(t){if(t==null)return ui;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Di(t){return _a(()=>{let e=nC(t);return rC(e),e})}function zm(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function nC(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||ui,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||_t,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:kL(t.inputs,e),outputs:OL(t.outputs),debugInfo:null}}function rC(t){t.features?.forEach(e=>e(t))}function wT(t,e){if(!t)return null;let n=e?kx:PL;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(xL)}function LL(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function FL(t){return Object.getPrototypeOf(t.prototype).constructor}function VL(t){let e=FL(t.type),n=!0,r=[t];for(;e;){let i;if(hn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new F(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Vp(t.inputs),s.declaredInputs=Vp(t.declaredInputs),s.outputs=Vp(t.outputs);let a=i.hostBindings;a&&HL(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&BL(t,u),l&&$L(t,l),UL(t,i),lx(t.outputs,i.outputs),hn(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===VL&&(n=!1)}}e=Object.getPrototypeOf(e)}jL(r)}function UL(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function jL(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Do(i.hostAttrs,n=Do(n,i.hostAttrs))}}function Vp(t){return t===ui?{}:t===_t?[]:t}function BL(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function $L(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function HL(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function iC(t){return qL(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function zL(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function qL(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function oC(t,e,n){return t[e]=n}function qt(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function sC(t,e,n,r){let i=qt(t,e,n);return qt(t,e+1,r)||i}function GL(t,e,n,r,i,o,s,a,u){let l=e.consts,h=Ho(e,t,4,s||null,a||null);lm()&&jm(e,n,h,br(l,u),Pm),h.mergedAttrs=Do(h.mergedAttrs,h.attrs),ym(e,h);let p=h.tView=Am(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function vl(t,e,n,r,i,o,s,a,u,l){let h=n+Ve,p=e.firstCreatePass?GL(h,e,t,r,i,o,s,a,u):e.data[h];Sr(p,!1);let g=KL(e,t,p,n);Ll()&&ql(e,t,g,p),Bo(g,t);let m=Vb(g,t,g,p);return t[h]=m,Nm(t,m),yL(m,p,t),Ml(p)&&Hl(e,t,p),u!=null&&Mm(t,p,l),p}function WL(t,e,n,r,i,o,s,a){let u=G(),l=De(),h=br(l.consts,o);return vl(u,l,t,e,n,r,i,h,s,a),WL}var KL=QL;function QL(t,e,n,r){return Fl(!0),e[Se].createComment("")}var qm=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var aC=new $("");var cC=(()=>{class t{static \u0275prov=H({token:t,providedIn:"root",factory:()=>new Og})}return t})(),Og=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,n]of this.queues)e===null?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(let n of e)e.delete(n),this.queuedEffectCount--,n.run()}};function Ca(t){return!!t&&typeof t.then=="function"}function uC(t){return!!t&&typeof t.subscribe=="function"}var YL=new $("");var lC=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=x(YL,{optional:!0})??[];injector=x(zt);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=Ot(this.injector,i);if(Ca(o))n.push(o);else if(uC(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Gm=new $("");function JL(){ap(()=>{throw new F(600,!1)})}function ZL(t){return t.isBoundToModule}var XL=10;var Cr=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=x(Bk);afterRenderManager=x(XD);zonelessEnabled=x(Vl);rootEffectScheduler=x(cC);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new xe;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=x(qn).hasPendingTasks.pipe(ce(n=>!n));constructor(){x($o,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=x(Ct);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=zt.NULL){_e(10);let o=n instanceof $b;if(!this._injector.get(lC).done){let m="";throw new F(405,m)}let a;o?a=n:a=this._injector.get(Kl).resolveComponentFactory(n),this.componentTypes.push(a.componentType);let u=ZL(a)?void 0:this._injector.get(Ro),l=r||a.selector,h=a.create(i,[],l,u),p=h.location.nativeElement,g=h.injector.get(aC,null);return g?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),Yu(this.components,h),g?.unregisterApplication(p)}),this._loadComponent(h),_e(11,h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){_e(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Dm.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new F(101,!1);let n=se(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,se(n),this.afterTick.next(),_e(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(So,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<XL;)_e(14),this.synchronizeOnce(),_e(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let n=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)eF(r,i,n,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>xl(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Yu(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(Gm,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Yu(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new F(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Yu(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function eF(t,e,n,r){if(!n&&!xl(t))return;kb(t,e,n&&!r?0:1)}function tF(t,e,n,r){let i=G(),o=Ei();if(qt(i,o,e)){let s=De(),a=Fo();s1(a,i,t,e,n,r)}return tF}function Wm(t,e,n,r){return qt(t,Ei(),n)?e+_o(n)+r:At}function dC(t,e,n,r,i,o){let s=ck(),a=sC(t,s,n,i);return fm(2),a?e+_o(n)+r+_o(i)+o:At}function qu(t,e){return t<<17|e<<2}function Ii(t){return t>>17&32767}function nF(t){return(t&2)==2}function rF(t,e){return t&131071|e<<17}function Lg(t){return t|2}function No(t){return(t&131068)>>2}function Up(t,e){return t&-131069|e<<2}function iF(t){return(t&1)===1}function Fg(t){return t|1}function oF(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ii(s),u=No(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||Ia(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let g=Ii(t[a+1]);t[r+1]=qu(g,a),g!==0&&(t[g+1]=Up(t[g+1],r)),t[a+1]=rF(t[a+1],r)}else t[r+1]=qu(a,0),a!==0&&(t[a+1]=Up(t[a+1],r)),a=r;else t[r+1]=qu(u,0),a===0?a=r:t[u+1]=Up(t[u+1],r),u=r;l&&(t[r+1]=Lg(t[r+1])),TT(t,h,r,!0),TT(t,h,r,!1),sF(e,h,t,r,o),s=qu(a,u),o?e.classBindings=s:e.styleBindings=s}function sF(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Ia(o,e)>=0&&(n[r+1]=Fg(n[r+1]))}function TT(t,e,n,r){let i=t[n+1],o=e===null,s=r?Ii(i):No(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];aF(u,e)&&(a=!0,t[s+1]=r?Fg(l):Lg(l)),s=r?Ii(l):No(l)}a&&(t[n+1]=r?Lg(i):Fg(i))}function aF(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Ia(t,e)>=0:!1}var en={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function cF(t){return t.substring(en.key,en.keyEnd)}function uF(t){return lF(t),hC(t,fC(t,0,en.textEnd))}function hC(t,e){let n=en.textEnd;return n===e?-1:(e=en.keyEnd=dF(t,en.key=e,n),fC(t,e,n))}function lF(t){en.key=0,en.keyEnd=0,en.value=0,en.valueEnd=0,en.textEnd=t.length}function fC(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function dF(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function hF(t,e,n){let r=G(),i=Ei();if(qt(r,i,e)){let o=De(),s=Fo();Ta(o,s,r,t,e,r[Se],n,!1)}return hF}function Vg(t,e,n,r,i){xm(e,t,n,i?"class":"style",r)}function fF(t,e,n){return gC(t,e,n,!1),fF}function pF(t,e){return gC(t,e,null,!0),pF}function iW(t){mC(IF,pC,t,!0)}function pC(t,e){for(let n=uF(e);n>=0;n=hC(e,n))Sl(t,cF(e),!0)}function gC(t,e,n,r){let i=G(),o=De(),s=fm(2);if(o.firstUpdatePass&&vC(o,t,s,r),e!==At&&qt(i,s,e)){let a=o.data[zn()];_C(o,a,i,i[Se],t,i[s+1]=wF(e,n),r,s)}}function mC(t,e,n,r){let i=De(),o=fm(2);i.firstUpdatePass&&vC(i,null,o,r);let s=G();if(n!==At&&qt(s,o,n)){let a=i.data[zn()];if(IC(a,r)&&!yC(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(n=qp(u,n||"")),Vg(i,a,s,n,r)}else EF(i,a,s,s[Se],s[o+1],s[o+1]=_F(t,e,n),r,o)}}function yC(t,e){return e>=t.expandoStartIndex}function vC(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[zn()],s=yC(t,n);IC(o,r)&&e===null&&!s&&(e=!1),e=gF(i,o,e,r),oF(i,o,e,n,s,r)}}function gF(t,e,n,r){let i=fk(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=jp(null,t,e,n,r),n=va(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=jp(i,t,e,n,r),o===null){let u=mF(t,e,r);u!==void 0&&Array.isArray(u)&&(u=jp(null,t,e,u[1],r),u=va(u,e.attrs,r),yF(t,e,r,u))}else o=vF(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function mF(t,e,n){let r=n?e.classBindings:e.styleBindings;if(No(r)!==0)return t[Ii(r)]}function yF(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Ii(i)]=r}function vF(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=va(r,s,n)}return va(r,e.attrs,n)}function jp(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=va(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function va(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Sl(t,s,n?!0:e[++o]))}return t===void 0?null:t}function _F(t,e,n){if(n==null||n==="")return _t;let r=[],i=Gn(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function IF(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&Sl(t,r,n)}function EF(t,e,n,r,i,o,s,a){i===At&&(i=_t);let u=0,l=0,h=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;h!==null||p!==null;){let g=u<i.length?i[u+1]:void 0,m=l<o.length?o[l+1]:void 0,w=null,A;h===p?(u+=2,l+=2,g!==m&&(w=p,A=m)):p===null||h!==null&&h<p?(u+=2,w=h):(l+=2,w=p,A=m),w!==null&&_C(t,e,n,r,w,A,s,a),h=u<i.length?i[u]:null,p=l<o.length?o[l]:null}}function _C(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=iF(l)?DT(u,e,n,i,No(l),s):void 0;if(!_l(h)){_l(o)||nF(l)&&(o=DT(u,null,n,i,a,s));let p=dD(zn(),n);D1(r,s,p,i,o)}}function DT(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,g=n[i+1];g===At&&(g=p?_t:void 0);let m=p?Np(g,r):h===r?g:void 0;if(l&&!_l(m)&&(m=Np(u,r)),_l(m)&&(a=m,s))return a;let w=t[i+1];i=s?Ii(w):No(w)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Np(u,r))}return a}function _l(t){return t!==void 0}function wF(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=bt(Gn(t)))),t}function IC(t,e){return(t.flags&(e?8:16))!==0}function oW(t,e,n){let r=G(),i=Wm(r,t,e,n);mC(Sl,pC,i,!0)}var Ug=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function Bp(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function TF(t,e,n){let r,i,o=0,s=t.length-1,a=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=s&&o<=u;){let l=t.at(o),h=e[o],p=Bp(o,l,o,h,n);if(p!==0){p<0&&t.updateValue(o,h),o++;continue}let g=t.at(s),m=e[u],w=Bp(s,g,u,m,n);if(w!==0){w<0&&t.updateValue(s,m),s--,u--;continue}let A=n(o,l),R=n(s,g),k=n(o,h);if(Object.is(k,R)){let V=n(u,m);Object.is(V,A)?(t.swap(o,s),t.updateValue(s,m),u--,s--):t.move(s,o),t.updateValue(o,h),o++;continue}if(r??=new Il,i??=CT(t,o,s,n),jg(t,r,o,k))t.updateValue(o,h),o++,s++;else if(i.has(k))r.set(A,t.detach(o)),s--;else{let V=t.create(o,e[o]);t.attach(o,V),o++,s++}}for(;o<=u;)bT(t,r,n,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&o<=s;){let h=t.at(o),p=l.value,g=Bp(o,h,o,p,n);if(g!==0)g<0&&t.updateValue(o,p),o++,l=u.next();else{r??=new Il,i??=CT(t,o,s,n);let m=n(o,p);if(jg(t,r,o,m))t.updateValue(o,p),o++,s++,l=u.next();else if(!i.has(m))t.attach(o,t.create(o,p)),o++,s++,l=u.next();else{let w=n(o,h);r.set(w,t.detach(o)),s--}}}for(;!l.done;)bT(t,r,n,t.length,l.value),l=u.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(u=>{t.destroy(u)})}function jg(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function bT(t,e,n,r,i){if(jg(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function CT(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var Il=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function sW(t,e){wi("NgControlFlow");let n=G(),r=Ei(),i=n[r]!==At?n[r]:-1,o=i!==-1?El(n,Ve+i):void 0,s=0;if(qt(n,r,t)){let a=se(null);try{if(o!==void 0&&jb(o,s),t!==-1){let u=Ve+t,l=El(n,u),h=zg(n[te],u),p=Co(l,h.tView.ssrId),g=Da(n,h,e,{dehydratedView:p});ba(l,g,s,bo(h,p))}}finally{se(a)}}else if(o!==void 0){let a=Ub(o,s);a!==void 0&&(a[Ge]=e)}}var Bg=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-ct}};function aW(t,e){return e}var $g=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function cW(t,e,n,r,i,o,s,a,u,l,h,p,g){wi("NgControlFlow");let m=G(),w=De(),A=u!==void 0,R=G(),k=a?s.bind(R[kt][Ge]):s,V=new $g(A,k);R[Ve+t]=V,vl(m,w,t+1,e,n,r,i,br(w.consts,o)),A&&vl(m,w,t+2,u,l,h,p,br(w.consts,g))}var Hg=class extends Ug{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-ct}at(e){return this.getLView(e)[Ge].$implicit}attach(e,n){let r=n[wo];this.needsIndexUpdate||=e!==this.length,ba(this.lContainer,n,e,bo(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,DF(this.lContainer,e)}create(e,n){let r=Co(this.lContainer,this.templateTNode.tView.ssrId),i=Da(this.hostLView,this.templateTNode,new Bg(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){zl(e[te],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[Ge].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Ge].$index=e}getLView(e){return bF(this.lContainer,e)}};function uW(t){let e=se(null),n=zn();try{let r=G(),i=r[te],o=r[n],s=n+1,a=El(r,s);if(o.liveCollection===void 0){let l=zg(i,s);o.liveCollection=new Hg(a,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(TF(u,t,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let l=Ei(),h=u.length===0;if(qt(r,l,h)){let p=n+2,g=El(r,p);if(h){let m=zg(i,p),w=Co(g,m.tView.ssrId),A=Da(r,m,void 0,{dehydratedView:w});ba(g,A,0,bo(m,w))}else jb(g,0)}}}finally{se(e)}}function El(t,e){return t[e]}function DF(t,e){return ma(t,e)}function bF(t,e){return Ub(t,e)}function zg(t,e){return om(t,e)}function EC(t,e,n,r){let i=G(),o=De(),s=Ve+t,a=i[Se],u=o.firstCreatePass?qb(s,o,i,e,Pm,lm(),n,r):o.data[s],l=CF(o,i,u,a,e,t);i[s]=l;let h=Ml(u);return Sr(u,!0),Ib(a,l,u),!Lm(u)&&Ll()&&ql(o,i,l,u),(tk()===0||h)&&Bo(l,i),nk(),h&&(Hl(o,i,u),Cm(o,u,i)),r!==null&&Mm(i,u),EC}function wC(){let t=lt();dm()?hm():(t=t.parent,Sr(t,!1));let e=t;ik(e)&&ok(),rk();let n=De();return n.firstCreatePass&&Gb(n,e),e.classesWithoutHost!=null&&Ik(e)&&Vg(n,e,G(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Ek(e)&&Vg(n,e,G(),e.stylesWithoutHost,!1),wC}function Km(t,e,n,r){return EC(t,e,n,r),wC(),Km}var CF=(t,e,n,r,i,o)=>(Fl(!0),vb(r,i,yk()));function SF(t,e,n,r,i){let o=e.consts,s=br(o,r),a=Ho(e,t,8,"ng-container",s);s!==null&&Cg(a,s,!0);let u=br(o,i);return lm()&&jm(e,n,a,u,Pm),a.mergedAttrs=Do(a.mergedAttrs,a.attrs),e.queries!==null&&e.queries.elementStart(e,a),a}function TC(t,e,n){let r=G(),i=De(),o=t+Ve,s=i.firstCreatePass?SF(o,i,r,e,n):i.data[o];Sr(s,!0);let a=RF(i,r,s,t);return r[o]=a,Ll()&&ql(i,r,a,s),Bo(a,r),Ml(s)&&(Hl(i,r,s),Cm(i,s,r)),n!=null&&Mm(r,s),TC}function DC(){let t=lt(),e=De();return dm()?hm():(t=t.parent,Sr(t,!1)),e.firstCreatePass&&(ym(e,t),im(t)&&e.queries.elementEnd(t)),DC}function AF(t,e,n){return TC(t,e,n),DC(),AF}var RF=(t,e,n,r)=>(Fl(!0),qO(e[Se],""));function lW(){return G()}function NF(t,e,n){let r=G(),i=Ei();if(qt(r,i,e)){let o=De(),s=Fo();Ta(o,s,r,t,e,r[Se],n,!0)}return NF}var oi=void 0;function MF(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var PF=["en",[["a","p"],["AM","PM"],oi],[["AM","PM"],oi,oi],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],oi,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],oi,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",oi,"{1} 'at' {0}",oi],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",MF],$p={};function Lt(t){let e=xF(t),n=ST(e);if(n)return n;let r=e.split("-")[0];if(n=ST(r),n)return n;if(r==="en")return PF;throw new F(701,!1)}function ST(t){return t in $p||($p[t]=wr.ng&&wr.ng.common&&wr.ng.common.locales&&wr.ng.common.locales[t]),$p[t]}var ke=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(ke||{});function xF(t){return t.toLowerCase().replace(/_/g,"-")}var wl="en-US";var kF=wl;function OF(t){typeof t=="string"&&(kF=t.toLowerCase().replace(/_/g,"-"))}function AT(t,e,n){return function r(i){if(i===Function)return n;let o=ko(t)?pn(t.index,e):e;Um(o,5);let s=e[Ge],a=RT(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)a=RT(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function RT(t,e,n,r){let i=se(null);try{return _e(6,e,n),n(r)!==!1}catch(o){return LF(t,o),!1}finally{_e(7,e,n),se(i)}}function LF(t,e){let n=t[di],r=n?n.get(gn,null):null;r&&r.handleError(e)}function NT(t,e,n,r,i,o){let s=e[n],a=e[te],l=a.data[n].outputs[r],h=s[l],p=a.firstCreatePass?um(a):null,g=cm(e),m=h.subscribe(o),w=g.length;g.push(o,m),p&&p.push(i,t.index,w,-(w+1))}var FF=new Map;function VF(t,e,n,r){let i=G(),o=De(),s=lt();return bC(o,i,i[Se],s,t,e,r),VF}function UF(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[rl],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function bC(t,e,n,r,i,o,s){let a=Ml(r),l=t.firstCreatePass?um(t):null,h=cm(e),p=!0;if(r.type&3||s){let g=yn(r,e),m=s?s(g):g,w=h.length,A=s?k=>s(fn(k[r.index])):r.index,R=null;if(!s&&a&&(R=UF(t,e,i,r.index)),R!==null){let k=R.__ngLastListenerFn__||R;k.__ngNextListenerFn__=o,R.__ngLastListenerFn__=o,p=!1}else{o=AT(r,e,o);let k=e[di].get(Ul);FF.get(k)?.(m,i,o);let B=n.listen(m,i,o);h.push(o,B),l&&l.push(i,A,w,w+1)}}else o=AT(r,e,o);if(p){let g=r.outputs?.[i],m=r.hostDirectiveOutputs?.[i];if(m&&m.length)for(let w=0;w<m.length;w+=2){let A=m[w],R=m[w+1];NT(r,e,A,R,i,o)}if(g&&g.length)for(let w of g)NT(r,e,w,i,i,o)}}function dW(t=1){return gk(t)}function jF(t,e){let n=null,r=LO(t);for(let i=0;i<e.length;i++){let o=e[i];if(o==="*"){n=i;continue}if(r===null?yb(t,o,!0):UO(r,o))return i}return n}function hW(t){let e=G()[kt][St];if(!e.projection){let n=t?t.length:1,r=e.projection=Nx(n,null),i=r.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=t?jF(o,t):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function fW(t,e=0,n,r,i,o){let s=G(),a=De(),u=r?t+1:null;u!==null&&vl(s,a,u,r,i,o,null,n);let l=Ho(a,Ve+t,16,null,n||null);l.projection===null&&(l.projection=e),hm();let p=!s[wo]||gD();s[kt][St].projection[l.projection]===null&&u!==null?BF(s,a,u):p&&!Lm(l)&&w1(a,s,l)}function BF(t,e,n){let r=Ve+n,i=e.data[r],o=t[r],s=Co(o,i.tView.ssrId),a=Da(t,i,void 0,{dehydratedView:s});ba(o,a,0,bo(i,s))}function $F(t,e,n){return CC(t,"",e,"",n),$F}function CC(t,e,n,r,i){let o=G(),s=Wm(o,e,n,r);if(s!==At){let a=De(),u=Fo();Ta(a,u,o,t,s,o[Se],i,!1)}return CC}function HF(t,e,n,r,i,o,s){let a=G(),u=dC(a,e,n,r,i,o);if(u!==At){let l=De(),h=Fo();Ta(l,h,a,t,u,a[Se],s,!1)}return HF}function pW(t,e,n,r){Jb(t,e,n,r)}function gW(t,e,n){TL(t,e,n)}function mW(t){let e=G(),n=De(),r=pm();Ol(r+1);let i=$m(n,r);if(t.dirty&&Yx(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=Xb(e,r);t.reset(o,HD),t.notifyOnChanges()}return!0}return!1}function yW(){return Bm(G(),pm())}function vW(t,e,n,r,i){AL(e,Jb(t,n,r,i))}function _W(t=1){Ol(pm()+t)}function SC(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function IW(t){let e=ak();return sm(e,Ve+t)}function EW(t,e=""){let n=G(),r=De(),i=t+Ve,o=r.firstCreatePass?Ho(r,i,1,e,null):r.data[i],s=zF(r,n,o,e,t);n[i]=s,Ll()&&ql(r,n,s,o),Sr(o,!1)}var zF=(t,e,n,r,i)=>(Fl(!0),HO(e[Se],r));function qF(t){return AC("",t,""),qF}function AC(t,e,n){let r=G(),i=Wm(r,t,e,n);return i!==At&&RC(r,zn(),i),AC}function GF(t,e,n,r,i){let o=G(),s=dC(o,t,e,n,r,i);return s!==At&&RC(o,zn(),s),GF}function RC(t,e,n){let r=dD(e,t);zO(t[Se],r,n)}function WF(t,e,n){zD(e)&&(e=e());let r=G(),i=Ei();if(qt(r,i,e)){let o=De(),s=Fo();Ta(o,s,r,t,e,r[Se],n,!1)}return WF}function wW(t,e){let n=zD(t);return n&&t.set(e),n}function KF(t,e){let n=G(),r=De(),i=lt();return bC(r,n,n[Se],i,t,e),KF}var QF={};function YF(t){let e=De(),n=G(),r=t+Ve,i=Ho(e,r,128,null,null);return Sr(i,!1),SC(e,n,r,QF),YF}function JF(t,e,n){let r=De();if(r.firstCreatePass){let i=hn(t);qg(n,r.data,r.blueprint,i,!0),qg(e,r.data,r.blueprint,i,!1)}}function qg(t,e,n,r,i){if(t=vt(t),Array.isArray(t))for(let o=0;o<t.length;o++)qg(t[o],e,n,r,i);else{let o=De(),s=G(),a=lt(),u=Eo(t)?t:vt(t.provide),l=nD(t),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(Eo(t)||!t.multi){let m=new yi(l,i,tt),w=zp(u,e,i?h:h+g,p);w===-1?(rg(ll(a,s),o,u),Hp(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(m),s.push(m)):(n[w]=m,s[w]=m)}else{let m=zp(u,e,h+g,p),w=zp(u,e,h,h+g),A=m>=0&&n[m],R=w>=0&&n[w];if(i&&!R||!i&&!A){rg(ll(a,s),o,u);let k=eV(i?XF:ZF,n.length,i,r,l);!i&&R&&(n[w].providerFactory=k),Hp(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(k),s.push(k)}else{let k=NC(n[i?w:m],l,!i&&r);Hp(o,t,m>-1?m:w,k)}!i&&r&&R&&n[w].componentProviders++}}}function Hp(t,e,n,r){let i=Eo(e),o=Ux(e);if(i||o){let u=(o?vt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function NC(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function zp(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function ZF(t,e,n,r,i){return Gg(this.multi,[])}function XF(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=pa(r,r[te],this.providerFactory.index,i);s=u.slice(0,a),Gg(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],Gg(o,s);return s}function Gg(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function eV(t,e,n,r,i){let o=new yi(t,n,tt);return o.multi=[],o.index=e,o.componentProviders=0,NC(o,i,r&&!n),o}function TW(t,e=[]){return n=>{n.providersResolver=(r,i)=>JF(r,i?i(t):t,e)}}function DW(t,e,n,r){return PC(G(),kl(),t,e,n,r)}function bW(t,e,n,r,i){return xC(G(),kl(),t,e,n,r,i)}function MC(t,e){let n=t[e];return n===At?void 0:n}function PC(t,e,n,r,i,o){let s=e+n;return qt(t,s,i)?oC(t,s+1,o?r.call(o,i):r(i)):MC(t,s+1)}function xC(t,e,n,r,i,o,s){let a=e+n;return sC(t,a,i,o)?oC(t,a+2,s?r.call(s,i,o):r(i,o)):MC(t,a+2)}function CW(t,e){let n=De(),r,i=t+Ve;n.firstCreatePass?(r=tV(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=ci(r.type,!0)),s,a=Tt(tt);try{let u=ul(!1),l=o();return ul(u),SC(n,G(),i,l),l}finally{Tt(a)}}function tV(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function SW(t,e,n){let r=t+Ve,i=G(),o=sm(i,r);return kC(i,r)?PC(i,kl(),e,o.transform,n,o):o.transform(n)}function AW(t,e,n,r){let i=t+Ve,o=G(),s=sm(o,i);return kC(o,i)?xC(o,kl(),e,s.transform,n,r,s):s.transform(n,r)}function kC(t,e){return t[te].data[e].pure}function RW(t,e){return Wl(t,e)}var Tl=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},NW=new Tl("19.2.10"),Wg=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},OC=(()=>{class t{compileModuleSync(n){return new kg(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=ZT(n),o=gb(i.declarations).reduce((s,a)=>{let u=li(a);return u&&s.push(new Ao(u)),s},[]);return new Wg(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var nV=(()=>{class t{zone=x(Le);changeDetectionScheduler=x(vi);applicationRef=x(Cr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),rV=new $("",{factory:()=>!1});function LC({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new Le(ye(U({},FC()),{scheduleInRootZone:n})),[{provide:Le,useFactory:t},{provide:Io,multi:!0,useFactory:()=>{let r=x(nV,{optional:!0});return()=>r.initialize()}},{provide:Io,multi:!0,useFactory:()=>{let r=x(iV);return()=>{r.initialize()}}},e===!0?{provide:VD,useValue:!0}:[],{provide:UD,useValue:n??FD}]}function MW(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=LC({ngZoneFactory:()=>{let i=FC(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&wi("NgZone_CoalesceEvent"),new Le(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return Po([{provide:rV,useValue:!0},{provide:Vl,useValue:!1},r])}function FC(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var iV=(()=>{class t{subscription=new Pe;initialized=!1;zone=x(Le);pendingTasks=x(qn);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Le.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Le.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var oV=(()=>{class t{appRef=x(Cr);taskService=x(qn);ngZone=x(Le);zonelessEnabled=x(Vl);tracing=x($o,{optional:!0});disableScheduling=x(VD,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Pe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(hl):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(x(UD,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ag||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?iT:jD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(hl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,iT(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function sV(){return typeof $localize<"u"&&$localize.locale||wl}var Sa=new $("",{providedIn:"root",factory:()=>x(Sa,oe.Optional|oe.SkipSelf)||sV()});var Kg=new $(""),aV=new $("");function ca(t){return!t.moduleRef}function cV(t){let e=ca(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Le);return n.run(()=>{ca(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(gn,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),ca(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Kg);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Kg);s.add(o),t.moduleRef.onDestroy(()=>{Yu(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return lV(r,n,()=>{let o=e.get(lC);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Sa,wl);if(OF(s||wl),!e.get(aV,!0))return ca(t)?e.get(Cr):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(ca(t)){let u=e.get(Cr);return t.rootComponent!==void 0&&u.bootstrap(t.rootComponent),u}else return uV(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function uV(t,e){let n=t.injector.get(Cr);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new F(-403,!1);e.push(t)}function lV(t,e,n){try{let r=n();return Ca(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Ju=null;function dV(t=[],e){return zt.create({name:e,providers:[{provide:Al,useValue:"platform"},{provide:Kg,useValue:new Set([()=>Ju=null])},...t]})}function hV(t=[]){if(Ju)return Ju;let e=dV(t);return Ju=e,JL(),fV(e),e}function fV(t){let e=t.get(wm,null);Ot(t,()=>{e?.forEach(n=>n())})}var Qm=(()=>{class t{static __NG_ELEMENT_ID__=pV}return t})();function pV(t){return gV(lt(),G(),(t&16)===16)}function gV(t,e,n){if(ko(t)&&!n){let r=pn(t.index,e);return new ya(r,r)}else if(t.type&175){let r=e[kt];return new ya(r,e)}return null}var Qg=class{constructor(){}supports(e){return iC(e)}create(e){return new Yg(e)}},mV=(t,e)=>e,Yg=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||mV}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<MT(r,i,o)?n:r,a=MT(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let g=0;g<l;g++){let m=g<o.length?o[g]:o[g]=0,w=m+g;h<=w&&w<l&&(o[g]=m+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!iC(e))throw new F(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,zL(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new Jg(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Dl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Dl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Jg=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,n){this.item=e,this.trackById=n}},Zg=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Dl=class{map=new Map;put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Zg,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function MT(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function PT(){return new Ym([new Qg])}var Ym=(()=>{class t{factories;static \u0275prov=H({token:t,providedIn:"root",factory:PT});constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||PT()),deps:[[t,new Sx,new KT]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new F(901,!1)}}return t})();function VC(t){_e(8);try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=hV(r),o=[LC({}),{provide:vi,useExisting:oV},...n||[]],s=new yl({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return cV({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{_e(9)}}function yV(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function PW(t,e=NaN){return!isNaN(parseFloat(t))&&!isNaN(Number(t))?Number(t):e}function vV(t){return lp(t)}function xW(t,e){return lu(t,e?.equal)}var Xg=class{[Et];constructor(e){this[Et]=e}destroy(){this[Et].destroy()}};function _V(t,e){!e?.injector&&rm(_V);let n=e?.injector??x(zt),r=e?.manualCleanup!==!0?n.get(Vo):null,i,o=n.get(bm,null,{optional:!0}),s=n.get(vi);return o!==null&&!e?.forceRoot?(i=wV(o.view,s,t),r instanceof dl&&r._lView===o.view&&(r=null)):i=TV(t,n.get(cC),s),i.injector=n,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new Xg(i)}var UC=ye(U({},to),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:ga,run(){if(this.dirty=!1,this.hasRun&&!au(this))return;this.hasRun=!0;let t=r=>(this.cleanupFns??=[]).push(r),e=Xs(this),n=sl(!1);try{this.maybeCleanup(),this.fn(t)}finally{sl(n),su(this,e)}},maybeCleanup(){if(this.cleanupFns?.length)try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[]}}}),IV=ye(U({},UC),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){ea(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),EV=ye(U({},UC),{consumerMarkedDirty(){this.view[J]|=8192,Lo(this.view),this.notifier.notify(13)},destroy(){ea(this),this.onDestroyFn(),this.maybeCleanup(),this.view[fi]?.delete(this)}});function wV(t,e,n){let r=Object.create(EV);return r.view=t,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=n,t[fi]??=new Set,t[fi].add(r),r.consumerMarkedDirty(r),r}function TV(t,e,n){let r=Object.create(IV);return r.fn=t,r.scheduler=e,r.notifier=n,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.schedule(r),r.notifier.notify(12),r}function kW(t,e){let n=li(t),r=e.elementInjector||Rl();return new Ao(n).create(r,e.projectableNodes,e.hostElement,e.environmentInjector)}var We=new $("");var $C=null;function Yn(){return $C}function Jm(t){$C??=t}var Aa=class{},Zm=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>x(HC),providedIn:"platform"})}return t})();var HC=(()=>{class t extends Zm{_location;_history;_doc=x(We);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Yn().getBaseHref(this._doc)}onPopState(n){let r=Yn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Yn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function zC(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function jC(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function Rr(t){return t&&t[0]!=="?"?`?${t}`:t}var Yl=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>x(GC),providedIn:"root"})}return t})(),qC=new $(""),GC=(()=>{class t extends Yl{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??x(We).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return zC(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Rr(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Rr(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Rr(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(W(Zm),W(qC,8))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),qo=(()=>{class t{_subject=new xe;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=CV(jC(BC(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Rr(r))}normalize(n){return t.stripTrailingSlash(bV(this._basePath,BC(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Rr(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Rr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Rr;static joinWithSlash=zC;static stripTrailingSlash=jC;static \u0275fac=function(r){return new(r||t)(W(Yl))};static \u0275prov=H({token:t,factory:()=>DV(),providedIn:"root"})}return t})();function DV(){return new qo(W(Yl))}function bV(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function BC(t){return t.replace(/\/index.html$/,"")}function CV(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var oy=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(oy||{});var dt=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(dt||{}),Ie=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(Ie||{}),Rt=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(Rt||{}),Nt={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function ZC(t){return Lt(t)[ke.LocaleId]}function XC(t,e,n){let r=Lt(t),i=[r[ke.DayPeriodsFormat],r[ke.DayPeriodsStandalone]],o=Gt(i,e);return Gt(o,n)}function eS(t,e,n){let r=Lt(t),i=[r[ke.DaysFormat],r[ke.DaysStandalone]],o=Gt(i,e);return Gt(o,n)}function tS(t,e,n){let r=Lt(t),i=[r[ke.MonthsFormat],r[ke.MonthsStandalone]],o=Gt(i,e);return Gt(o,n)}function nS(t,e){let r=Lt(t)[ke.Eras];return Gt(r,e)}function Ra(t,e){let n=Lt(t);return Gt(n[ke.DateFormat],e)}function Na(t,e){let n=Lt(t);return Gt(n[ke.TimeFormat],e)}function Ma(t,e){let r=Lt(t)[ke.DateTimeFormat];return Gt(r,e)}function vn(t,e){let n=Lt(t),r=n[ke.NumberSymbols][e];if(typeof r>"u"){if(e===Nt.CurrencyDecimal)return n[ke.NumberSymbols][Nt.Decimal];if(e===Nt.CurrencyGroup)return n[ke.NumberSymbols][Nt.Group]}return r}function rS(t,e){return Lt(t)[ke.NumberFormats][e]}function iS(t){if(!t[ke.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[ke.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function oS(t){let e=Lt(t);return iS(e),(e[ke.ExtraData][2]||[]).map(r=>typeof r=="string"?Xm(r):[Xm(r[0]),Xm(r[1])])}function sS(t,e,n){let r=Lt(t);iS(r);let i=[r[ke.ExtraData][0],r[ke.ExtraData][1]],o=Gt(i,e)||[];return Gt(o,n)||[]}function Gt(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function Xm(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var SV=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Jl={},AV=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function aS(t,e,n,r){let i=FV(t);e=Jn(n,e)||e;let s=[],a;for(;e;)if(a=AV.exec(e),a){s=s.concat(a.slice(1));let h=s.pop();if(!h)break;e=h}else{s.push(e);break}let u=i.getTimezoneOffset();r&&(u=uS(r,u),i=LV(i,r));let l="";return s.forEach(h=>{let p=kV(h);l+=p?p(i,n,u):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function nd(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Jn(t,e){let n=ZC(t);if(Jl[n]??={},Jl[n][e])return Jl[n][e];let r="";switch(e){case"shortDate":r=Ra(t,Rt.Short);break;case"mediumDate":r=Ra(t,Rt.Medium);break;case"longDate":r=Ra(t,Rt.Long);break;case"fullDate":r=Ra(t,Rt.Full);break;case"shortTime":r=Na(t,Rt.Short);break;case"mediumTime":r=Na(t,Rt.Medium);break;case"longTime":r=Na(t,Rt.Long);break;case"fullTime":r=Na(t,Rt.Full);break;case"short":let i=Jn(t,"shortTime"),o=Jn(t,"shortDate");r=Zl(Ma(t,Rt.Short),[i,o]);break;case"medium":let s=Jn(t,"mediumTime"),a=Jn(t,"mediumDate");r=Zl(Ma(t,Rt.Medium),[s,a]);break;case"long":let u=Jn(t,"longTime"),l=Jn(t,"longDate");r=Zl(Ma(t,Rt.Long),[u,l]);break;case"full":let h=Jn(t,"fullTime"),p=Jn(t,"fullDate");r=Zl(Ma(t,Rt.Full),[h,p]);break}return r&&(Jl[n][e]=r),r}function Zl(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function nn(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function RV(t,e){return nn(t,3).substring(0,e)}function Ue(t,e,n=0,r=!1,i=!1){return function(o,s){let a=NV(t,o);if((n>0||a>-n)&&(a+=n),t===3)a===0&&n===-12&&(a=12);else if(t===6)return RV(a,e);let u=vn(s,Nt.MinusSign);return nn(a,e,u,r,i)}}function NV(t,e){switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}function be(t,e,n=dt.Format,r=!1){return function(i,o){return MV(i,o,t,e,n,r)}}function MV(t,e,n,r,i,o){switch(n){case 2:return tS(e,i,r)[t.getMonth()];case 1:return eS(e,i,r)[t.getDay()];case 0:let s=t.getHours(),a=t.getMinutes();if(o){let l=oS(e),h=sS(e,i,r),p=l.findIndex(g=>{if(Array.isArray(g)){let[m,w]=g,A=s>=m.hours&&a>=m.minutes,R=s<w.hours||s===w.hours&&a<w.minutes;if(m.hours<w.hours){if(A&&R)return!0}else if(A||R)return!0}else if(g.hours===s&&g.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return XC(e,i,r)[s<12?0:1];case 3:return nS(e,r)[t.getFullYear()<=0?0:1];default:let u=n;throw new Error(`unexpected translation type ${u}`)}}function Xl(t){return function(e,n,r){let i=-1*r,o=vn(n,Nt.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case 0:return(i>=0?"+":"")+nn(s,2,o)+nn(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+nn(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+nn(s,2,o)+":"+nn(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+nn(s,2,o)+":"+nn(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}var PV=0,td=4;function xV(t){let e=nd(t,PV,1).getDay();return nd(t,0,1+(e<=td?td:td+7)-e)}function cS(t){let e=t.getDay(),n=e===0?-3:td-e;return nd(t.getFullYear(),t.getMonth(),t.getDate()+n)}function ey(t,e=!1){return function(n,r){let i;if(e){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{let o=cS(n),s=xV(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return nn(i,t,vn(r,Nt.MinusSign))}}function ed(t,e=!1){return function(n,r){let o=cS(n).getFullYear();return nn(o,t,vn(r,Nt.MinusSign),e)}}var ty={};function kV(t){if(ty[t])return ty[t];let e;switch(t){case"G":case"GG":case"GGG":e=be(3,Ie.Abbreviated);break;case"GGGG":e=be(3,Ie.Wide);break;case"GGGGG":e=be(3,Ie.Narrow);break;case"y":e=Ue(0,1,0,!1,!0);break;case"yy":e=Ue(0,2,0,!0,!0);break;case"yyy":e=Ue(0,3,0,!1,!0);break;case"yyyy":e=Ue(0,4,0,!1,!0);break;case"Y":e=ed(1);break;case"YY":e=ed(2,!0);break;case"YYY":e=ed(3);break;case"YYYY":e=ed(4);break;case"M":case"L":e=Ue(1,1,1);break;case"MM":case"LL":e=Ue(1,2,1);break;case"MMM":e=be(2,Ie.Abbreviated);break;case"MMMM":e=be(2,Ie.Wide);break;case"MMMMM":e=be(2,Ie.Narrow);break;case"LLL":e=be(2,Ie.Abbreviated,dt.Standalone);break;case"LLLL":e=be(2,Ie.Wide,dt.Standalone);break;case"LLLLL":e=be(2,Ie.Narrow,dt.Standalone);break;case"w":e=ey(1);break;case"ww":e=ey(2);break;case"W":e=ey(1,!0);break;case"d":e=Ue(2,1);break;case"dd":e=Ue(2,2);break;case"c":case"cc":e=Ue(7,1);break;case"ccc":e=be(1,Ie.Abbreviated,dt.Standalone);break;case"cccc":e=be(1,Ie.Wide,dt.Standalone);break;case"ccccc":e=be(1,Ie.Narrow,dt.Standalone);break;case"cccccc":e=be(1,Ie.Short,dt.Standalone);break;case"E":case"EE":case"EEE":e=be(1,Ie.Abbreviated);break;case"EEEE":e=be(1,Ie.Wide);break;case"EEEEE":e=be(1,Ie.Narrow);break;case"EEEEEE":e=be(1,Ie.Short);break;case"a":case"aa":case"aaa":e=be(0,Ie.Abbreviated);break;case"aaaa":e=be(0,Ie.Wide);break;case"aaaaa":e=be(0,Ie.Narrow);break;case"b":case"bb":case"bbb":e=be(0,Ie.Abbreviated,dt.Standalone,!0);break;case"bbbb":e=be(0,Ie.Wide,dt.Standalone,!0);break;case"bbbbb":e=be(0,Ie.Narrow,dt.Standalone,!0);break;case"B":case"BB":case"BBB":e=be(0,Ie.Abbreviated,dt.Format,!0);break;case"BBBB":e=be(0,Ie.Wide,dt.Format,!0);break;case"BBBBB":e=be(0,Ie.Narrow,dt.Format,!0);break;case"h":e=Ue(3,1,-12);break;case"hh":e=Ue(3,2,-12);break;case"H":e=Ue(3,1);break;case"HH":e=Ue(3,2);break;case"m":e=Ue(4,1);break;case"mm":e=Ue(4,2);break;case"s":e=Ue(5,1);break;case"ss":e=Ue(5,2);break;case"S":e=Ue(6,1);break;case"SS":e=Ue(6,2);break;case"SSS":e=Ue(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Xl(0);break;case"ZZZZZ":e=Xl(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Xl(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Xl(2);break;default:return null}return ty[t]=e,e}function uS(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function OV(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function LV(t,e,n){let i=t.getTimezoneOffset(),o=uS(e,i);return OV(t,-1*(o-i))}function FV(t){if(WC(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,o=1,s=1]=t.split("-").map(a=>+a);return nd(i,o-1,s)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(SV))return VV(r)}let e=new Date(t);if(!WC(e))throw new Error(`Unable to convert "${t}" into a date`);return e}function VV(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return o.call(e,s,a,u,l),e}function WC(t){return t instanceof Date&&!isNaN(t.valueOf())}var UV=/^(\d+)?\.((\d+)(-(\d+))?)?$/,KC=22,rd=".",Pa="0",jV=";",BV=",",ny="#";function $V(t,e,n,r,i,o,s=!1){let a="",u=!1;if(!isFinite(t))a=vn(n,Nt.Infinity);else{let l=qV(t);s&&(l=zV(l));let h=e.minInt,p=e.minFrac,g=e.maxFrac;if(o){let V=o.match(UV);if(V===null)throw new Error(`${o} is not a valid digit info`);let B=V[1],de=V[3],Fe=V[5];B!=null&&(h=ry(B)),de!=null&&(p=ry(de)),Fe!=null?g=ry(Fe):de!=null&&p>g&&(g=p)}GV(l,p,g);let m=l.digits,w=l.integerLen,A=l.exponent,R=[];for(u=m.every(V=>!V);w<h;w++)m.unshift(0);for(;w<0;w++)m.unshift(0);w>0?R=m.splice(w,m.length):(R=m,m=[0]);let k=[];for(m.length>=e.lgSize&&k.unshift(m.splice(-e.lgSize,m.length).join(""));m.length>e.gSize;)k.unshift(m.splice(-e.gSize,m.length).join(""));m.length&&k.unshift(m.join("")),a=k.join(vn(n,r)),R.length&&(a+=vn(n,i)+R.join("")),A&&(a+=vn(n,Nt.Exponential)+"+"+A)}return t<0&&!u?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function lS(t,e,n){let r=rS(e,oy.Decimal),i=HV(r,vn(e,Nt.MinusSign));return $V(t,i,e,Nt.Group,Nt.Decimal,n)}function HV(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(jV),i=r[0],o=r[1],s=i.indexOf(rd)!==-1?i.split(rd):[i.substring(0,i.lastIndexOf(Pa)+1),i.substring(i.lastIndexOf(Pa)+1)],a=s[0],u=s[1]||"";n.posPre=a.substring(0,a.indexOf(ny));for(let h=0;h<u.length;h++){let p=u.charAt(h);p===Pa?n.minFrac=n.maxFrac=h+1:p===ny?n.maxFrac=h+1:n.posSuf+=p}let l=a.split(BV);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let h=i.length-n.posPre.length-n.posSuf.length,p=o.indexOf(ny);n.negPre=o.substring(0,p).replace(/'/g,""),n.negSuf=o.slice(p+h).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function zV(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function qV(t){let e=Math.abs(t)+"",n=0,r,i,o,s,a;for((i=e.indexOf(rd))>-1&&(e=e.replace(rd,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===Pa;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===Pa;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>KC&&(r=r.splice(0,KC-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function GV(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen,o=Math.min(Math.max(e,i),n),s=o+t.integerLen,a=r[s];if(s>0){r.splice(Math.max(t.integerLen,s));for(let p=s;p<r.length;p++)r[p]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let p=1;p<s;p++)r[p]=0}if(a>=5)if(s-1<0){for(let p=0;p>s;p--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let u=o!==0,l=e+t.integerLen,h=r.reduceRight(function(p,g,m,w){return g=g+p,w[m]=g<10?g:g-10,u&&(w[m]===0&&m>=l?w.pop():u=!1),g>=10?1:0},0);h&&(r.unshift(h),t.integerLen++)}function ry(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}var iy=/\s+/,QC=[],WV=(()=>{class t{_ngEl;_renderer;initialClasses=QC;rawClass;stateMap=new Map;constructor(n,r){this._ngEl=n,this._renderer=r}set klass(n){this.initialClasses=n!=null?n.trim().split(iy):QC}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(iy):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(iy).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||t)(tt(jo),tt(Hb))};static \u0275dir=Di({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return t})();var id=class{$implicit;ngForOf;index;count;constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},dS=(()=>{class t{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new id(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),YC(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);YC(o,i)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(tt(Qn),tt(_i),tt(Ym))};static \u0275dir=Di({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return t})();function YC(t,e){t.context.$implicit=e.item}var KV=(()=>{class t{_viewContainer;_context=new od;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){JC(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){JC(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(tt(Qn),tt(_i))};static \u0275dir=Di({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return t})(),od=class{$implicit=null;ngIf=null};function JC(t,e){if(t&&!t.createEmbeddedView)throw new F(2020,!1)}var QV=(()=>{class t{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(n){this._viewContainerRef=n}ngOnChanges(n){if(this._shouldRecreateView(n)){let r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let i=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,i,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(n){return!!n.ngTemplateOutlet||!!n.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(n,r,i)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,r,i):!1,get:(n,r,i)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,i)}})}static \u0275fac=function(r){return new(r||t)(tt(Qn))};static \u0275dir=Di({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[Pl]})}return t})();function hS(t,e){return new F(2100,!1)}var YV="mediumDate",fS=new $(""),pS=new $(""),JV=(()=>{class t{locale;defaultTimezone;defaultOptions;constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,o){if(n==null||n===""||n!==n)return null;try{let s=r??this.defaultOptions?.dateFormat??YV,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return aS(n,s,o||this.locale,a)}catch(s){throw hS(t,s.message)}}static \u0275fac=function(r){return new(r||t)(tt(Sa,16),tt(fS,24),tt(pS,24))};static \u0275pipe=zm({name:"date",type:t,pure:!0})}return t})();var ZV=(()=>{class t{_locale;constructor(n){this._locale=n}transform(n,r,i){if(!XV(n))return null;i||=this._locale;try{let o=e2(n);return lS(o,i,r)}catch(o){throw hS(t,o.message)}}static \u0275fac=function(r){return new(r||t)(tt(Sa,16))};static \u0275pipe=zm({name:"number",type:t,pure:!0})}return t})();function XV(t){return!(t==null||t===""||t!==t)}function e2(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new Error(`${t} is not a number`);return t}var gS=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=zo({type:t});static \u0275inj=Mo({})}return t})();function xa(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var sd="browser",mS="server";function t2(t){return t===sd}function ad(t){return t===mS}var bi=class{};var ld=new $(""),uy=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new F(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(W(ld),W(Le))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),ka=class{_doc;constructor(e){this._doc=e}manager},cd="ng-app-id";function yS(t){for(let e of t)e.remove()}function vS(t,e){let n=e.createElement("style");return n.textContent=t,n}function n2(t,e,n,r){let i=t.head?.querySelectorAll(`style[${cd}="${e}"],link[${cd}="${e}"]`);if(i)for(let o of i)o.removeAttribute(cd),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function ay(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var ly=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.isServer=ad(o),n2(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,vS);r?.forEach(i=>this.addUsage(i,this.external,ay))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(yS(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])yS(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,vS(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,ay(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(cd,this.appId),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(W(We),W(Ul),W(Tm,8),W(Ea))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),sy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},dy=/%COMP%/g;var IS="%COMP%",r2=`_nghost-${IS}`,i2=`_ngcontent-${IS}`,o2=!0,s2=new $("",{providedIn:"root",factory:()=>o2});function a2(t){return i2.replace(dy,t)}function c2(t){return r2.replace(dy,t)}function ES(t,e){return e.map(n=>n.replace(dy,t))}var hy=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,u,l=null,h=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=ad(a),this.defaultRenderer=new Oa(n,s,u,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===mn.ShadowDom&&(r=ye(U({},r),{encapsulation:mn.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof ud?i.applyToHost(n):i instanceof La&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case mn.Emulated:o=new ud(u,l,r,this.appId,h,s,a,p,g);break;case mn.ShadowDom:return new cy(u,l,n,r,s,a,this.nonce,p,g);default:o=new La(u,l,r,h,s,a,p,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(W(uy),W(ly),W(Ul),W(s2),W(We),W(Ea),W(Le),W(Tm),W($o,8))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),Oa=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(sy[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(_S(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(_S(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new F(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=sy[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=sy[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Bn.DashCase|Bn.Important)?e.style.setProperty(n,r,i&Bn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Bn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=Yn().getGlobalEventTarget(this.doc,e),!e))throw new F(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function _S(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var cy=class extends Oa{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=ES(i.id,h);for(let g of h){let m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=g,this.shadowRoot.appendChild(m)}let p=i.getExternalStyles?.();if(p)for(let g of p){let m=ay(g,o);a&&m.setAttribute("nonce",a),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},La=class extends Oa{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?ES(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},ud=class extends La{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,n,r,o,s,a,u,l,h),this.contentAttr=a2(h),this.hostAttr=c2(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var dd=class t extends Aa{supportsDOMEvents=!0;static makeCurrent(){Jm(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=u2();return n==null?null:l2(n)}resetBaseElement(){Fa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return xa(document.cookie,e)}},Fa=null;function u2(){return Fa=Fa||document.querySelector("base"),Fa?Fa.getAttribute("href"):null}function l2(t){return new URL(t,document.baseURI).pathname}var d2=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),TS=(()=>{class t extends ka{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(W(We))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),wS=["alt","control","meta","shift"],h2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},f2={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},DS=(()=>{class t extends ka{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Yn().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),wS.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=h2[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),wS.forEach(s=>{if(s!==i){let a=f2[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(W(We))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})();function p2(t,e){return VC(U({rootComponent:t},g2(e)))}function g2(t){return{appProviders:[...I2,...t?.providers??[]],platformProviders:_2}}function m2(){dd.makeCurrent()}function y2(){return new gn}function v2(){return JD(document),document}var _2=[{provide:Ea,useValue:sd},{provide:wm,useValue:m2,multi:!0},{provide:We,useFactory:v2}];var I2=[{provide:Al,useValue:"root"},{provide:gn,useFactory:y2},{provide:ld,useClass:TS,multi:!0,deps:[We]},{provide:ld,useClass:DS,multi:!0,deps:[We]},hy,ly,uy,{provide:So,useExisting:hy},{provide:bi,useClass:d2},[]];var Wo=class{},Va=class{},Nr=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=n.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(e,n){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var fd=class{encodeKey(e){return bS(e)}encodeValue(e){return bS(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function E2(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=n.get(s)||[];u.push(a),n.set(s,u)}),n}var w2=/%(\d[a-f0-9])/gi,T2={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function bS(t){return encodeURIComponent(t).replace(w2,(e,n)=>T2[n]??e)}function hd(t){return`${t}`}var Zn=class t{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new fd,e.fromString){if(e.fromObject)throw new F(2805,!1);this.map=E2(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(hd):[hd(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(hd(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(hd(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var pd=class{map=new Map;set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function D2(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function CS(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function SS(t){return typeof Blob<"u"&&t instanceof Blob}function AS(t){return typeof FormData<"u"&&t instanceof FormData}function b2(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var RS="Content-Type",NS="Accept",PS="X-Request-URL",xS="text/plain",kS="application/json",C2=`${kS}, ${xS}, */*`,Go=class t{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,n,r,i){this.url=n,this.method=e.toUpperCase();let o;if(D2(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Nr,this.context??=new pd,!this.params)this.params=new Zn,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),u=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+u+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||CS(this.body)||SS(this.body)||AS(this.body)||b2(this.body)?this.body:this.body instanceof Zn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||AS(this.body)?null:SS(this.body)?this.body.type||null:CS(this.body)?null:typeof this.body=="string"?xS:this.body instanceof Zn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?kS:null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,l=e.headers||this.headers,h=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((g,m)=>g.set(m,e.setHeaders[m]),l)),e.setParams&&(h=Object.keys(e.setParams).reduce((g,m)=>g.set(m,e.setParams[m]),h)),new t(n,r,s,{params:h,headers:l,context:p,reportProgress:u,responseType:i,withCredentials:a,transferCache:o})}},Ci=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Ci||{}),Ko=class{headers;status;statusText;url;ok;type;constructor(e,n=200,r="OK"){this.headers=e.headers||new Nr,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},gd=class t extends Ko{constructor(e={}){super(e)}type=Ci.ResponseHeader;clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Ua=class t extends Ko{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Ci.Response;clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ja=class extends Ko{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},S2=200,A2=204;function fy(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var OS=(()=>{class t{handler;constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof Go)o=n;else{let u;i.headers instanceof Nr?u=i.headers:u=new Nr(i.headers);let l;i.params&&(i.params instanceof Zn?l=i.params:l=new Zn({fromObject:i.params})),o=new Go(n,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=Y(o).pipe(_r(u=>this.handler.handle(u)));if(n instanceof Go||i.observe==="events")return s;let a=s.pipe(yt(u=>u instanceof Ua));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(ce(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new F(2806,!1);return u.body}));case"blob":return a.pipe(ce(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new F(2807,!1);return u.body}));case"text":return a.pipe(ce(u=>{if(u.body!==null&&typeof u.body!="string")throw new F(2808,!1);return u.body}));case"json":default:return a.pipe(ce(u=>u.body))}case"response":return a;default:throw new F(2809,!1)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new Zn().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,fy(i,r))}post(n,r,i={}){return this.request("POST",n,fy(i,r))}put(n,r,i={}){return this.request("PUT",n,fy(i,r))}static \u0275fac=function(r){return new(r||t)(W(Wo))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})();var R2=new $("");function LS(t,e){return e(t)}function N2(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}function M2(t,e,n){return(r,i)=>Ot(n,()=>e(r,o=>t(o,i)))}var FS=new $(""),gy=new $(""),VS=new $(""),my=new $("",{providedIn:"root",factory:()=>!0});function P2(){let t=null;return(e,n)=>{t===null&&(t=(x(FS,{optional:!0})??[]).reduceRight(N2,LS));let r=x(qn);if(x(my)){let o=r.add();return t(e,n).pipe(Er(()=>r.remove(o)))}else return t(e,n)}}var md=(()=>{class t extends Wo{backend;injector;chain=null;pendingTasks=x(qn);contributeToStability=x(my);constructor(n,r){super(),this.backend=n,this.injector=r}handle(n){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(gy),...this.injector.get(VS,[])]));this.chain=r.reduceRight((i,o)=>M2(i,o,this.injector),LS)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(Er(()=>this.pendingTasks.remove(r)))}else return this.chain(n,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||t)(W(Va),W(Ct))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})();var x2=/^\)\]\}',?\n/,k2=RegExp(`^${PS}:`,"m");function O2(t){return"responseURL"in t&&t.responseURL?t.responseURL:k2.test(t.getAllResponseHeaders())?t.getResponseHeader(PS):null}var py=(()=>{class t{xhrFactory;constructor(n){this.xhrFactory=n}handle(n){if(n.method==="JSONP")throw new F(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Ae(r.\u0275loadImpl()):Y(null)).pipe(xt(()=>new he(o=>{let s=r.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((A,R)=>s.setRequestHeader(A,R.join(","))),n.headers.has(NS)||s.setRequestHeader(NS,C2),!n.headers.has(RS)){let A=n.detectContentTypeHeader();A!==null&&s.setRequestHeader(RS,A)}if(n.responseType){let A=n.responseType.toLowerCase();s.responseType=A!=="json"?A:"text"}let a=n.serializeBody(),u=null,l=()=>{if(u!==null)return u;let A=s.statusText||"OK",R=new Nr(s.getAllResponseHeaders()),k=O2(s)||n.url;return u=new gd({headers:R,status:s.status,statusText:A,url:k}),u},h=()=>{let{headers:A,status:R,statusText:k,url:V}=l(),B=null;R!==A2&&(B=typeof s.response>"u"?s.responseText:s.response),R===0&&(R=B?S2:0);let de=R>=200&&R<300;if(n.responseType==="json"&&typeof B=="string"){let Fe=B;B=B.replace(x2,"");try{B=B!==""?JSON.parse(B):null}catch(ge){B=Fe,de&&(de=!1,B={error:ge,text:B})}}de?(o.next(new Ua({body:B,headers:A,status:R,statusText:k,url:V||void 0})),o.complete()):o.error(new ja({error:B,headers:A,status:R,statusText:k,url:V||void 0}))},p=A=>{let{url:R}=l(),k=new ja({error:A,status:s.status||0,statusText:s.statusText||"Unknown Error",url:R||void 0});o.error(k)},g=!1,m=A=>{g||(o.next(l()),g=!0);let R={type:Ci.DownloadProgress,loaded:A.loaded};A.lengthComputable&&(R.total=A.total),n.responseType==="text"&&s.responseText&&(R.partialText=s.responseText),o.next(R)},w=A=>{let R={type:Ci.UploadProgress,loaded:A.loaded};A.lengthComputable&&(R.total=A.total),o.next(R)};return s.addEventListener("load",h),s.addEventListener("error",p),s.addEventListener("timeout",p),s.addEventListener("abort",p),n.reportProgress&&(s.addEventListener("progress",m),a!==null&&s.upload&&s.upload.addEventListener("progress",w)),s.send(a),o.next({type:Ci.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",h),s.removeEventListener("timeout",p),n.reportProgress&&(s.removeEventListener("progress",m),a!==null&&s.upload&&s.upload.removeEventListener("progress",w)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||t)(W(bi))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),US=new $(""),L2="XSRF-TOKEN",F2=new $("",{providedIn:"root",factory:()=>L2}),V2="X-XSRF-TOKEN",U2=new $("",{providedIn:"root",factory:()=>V2}),Ba=class{},j2=(()=>{class t{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(n,r){this.doc=n,this.cookieName=r}getToken(){let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=xa(n,this.cookieName),this.lastCookieString=n),this.lastToken}static \u0275fac=function(r){return new(r||t)(W(We),W(F2))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})();function B2(t,e){let n=t.url.toLowerCase();if(!x(US)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=x(Ba).getToken(),i=x(U2);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var yy=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(yy||{});function $2(t,e){return{\u0275kind:t,\u0275providers:e}}function jS(...t){let e=[OS,py,md,{provide:Wo,useExisting:md},{provide:Va,useFactory:()=>x(R2,{optional:!0})??x(py)},{provide:gy,useValue:B2,multi:!0},{provide:US,useValue:!0},{provide:Ba,useClass:j2}];for(let n of t)e.push(...n.\u0275providers);return Po(e)}var MS=new $("");function BS(){return $2(yy.LegacyInterceptors,[{provide:MS,useFactory:P2},{provide:gy,useExisting:MS,multi:!0}])}var H2=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=zo({type:t});static \u0275inj=Mo({providers:[jS(BS())]})}return t})();var $S=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(W(We))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var z2=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:function(r){let i=null;return r?i=new(r||t):i=W(q2),i},providedIn:"root"})}return t})(),q2=(()=>{class t extends z2{_doc;constructor(n){super(),this._doc=n}sanitize(n,r){if(r==null)return null;switch(n){case Kn.NONE:return r;case Kn.HTML:return Ti(r,"HTML")?Gn(r):pb(this._doc,String(r)).toString();case Kn.STYLE:return Ti(r,"Style")?Gn(r):r;case Kn.SCRIPT:if(Ti(r,"Script"))return Gn(r);throw new F(5200,!1);case Kn.URL:return Ti(r,"URL")?Gn(r):Bl(String(r));case Kn.RESOURCE_URL:if(Ti(r,"ResourceURL"))return Gn(r);throw new F(5201,!1);default:throw new F(5202,!1)}}bypassSecurityTrustHtml(n){return ib(n)}bypassSecurityTrustStyle(n){return ob(n)}bypassSecurityTrustScript(n){return sb(n)}bypassSecurityTrustUrl(n){return ab(n)}bypassSecurityTrustResourceUrl(n){return cb(n)}static \u0275fac=function(r){return new(r||t)(W(We))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ie="primary",tc=Symbol("RouteTitle"),wy=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Ri(t){return new wy(t)}function YS(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function W2(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!_n(t[n],e[n]))return!1;return!0}function _n(t,e){let n=t?Ty(t):void 0,r=e?Ty(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!JS(t[i],e[i]))return!1;return!0}function Ty(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function JS(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function ZS(t){return t.length>0?t[t.length-1]:null}function xr(t){return Tp(t)?t:Ca(t)?Ae(Promise.resolve(t)):Y(t)}var K2={exact:e0,subset:t0},XS={exact:Q2,subset:Y2,ignored:()=>!0};function HS(t,e,n){return K2[n.paths](t.root,e.root,n.matrixParams)&&XS[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function Q2(t,e){return _n(t,e)}function e0(t,e,n){if(!Si(t.segments,e.segments)||!_d(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!e0(t.children[r],e.children[r],n))return!1;return!0}function Y2(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>JS(t[n],e[n]))}function t0(t,e,n){return n0(t,e,e.segments,n)}function n0(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Si(i,n)||e.hasChildren()||!_d(i,n,r))}else if(t.segments.length===n.length){if(!Si(t.segments,n)||!_d(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!t0(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Si(t.segments,i)||!_d(t.segments,i,r)||!t.children[ie]?!1:n0(t.children[ie],e,o,r)}}function _d(t,e,n){return e.every((r,i)=>XS[n](t[i].parameters,r.parameters))}var En=class{root;queryParams;fragment;_queryParamMap;constructor(e=new me([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ri(this.queryParams),this._queryParamMap}toString(){return X2.serialize(this)}},me=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Id(this)}},Mr=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Ri(this.parameters),this._parameterMap}toString(){return i0(this)}};function J2(t,e){return Si(t,e)&&t.every((n,r)=>_n(n.parameters,e[r].parameters))}function Si(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function Z2(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ie&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ie&&(n=n.concat(e(i,r)))}),n}var nc=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>new Ni,providedIn:"root"})}return t})(),Ni=class{parse(e){let n=new by(e);return new En(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${$a(e.root,!0)}`,r=nU(e.queryParams),i=typeof e.fragment=="string"?`#${eU(e.fragment)}`:"";return`${n}${r}${i}`}},X2=new Ni;function Id(t){return t.segments.map(e=>i0(e)).join("/")}function $a(t,e){if(!t.hasChildren())return Id(t);if(e){let n=t.children[ie]?$a(t.children[ie],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==ie&&r.push(`${i}:${$a(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=Z2(t,(r,i)=>i===ie?[$a(t.children[ie],!1)]:[`${i}:${$a(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ie]!=null?`${Id(t)}/${n[0]}`:`${Id(t)}/(${n.join("//")})`}}function r0(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yd(t){return r0(t).replace(/%3B/gi,";")}function eU(t){return encodeURI(t)}function Dy(t){return r0(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ed(t){return decodeURIComponent(t)}function zS(t){return Ed(t.replace(/\+/g,"%20"))}function i0(t){return`${Dy(t.path)}${tU(t.parameters)}`}function tU(t){return Object.entries(t).map(([e,n])=>`;${Dy(e)}=${Dy(n)}`).join("")}function nU(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${yd(n)}=${yd(i)}`).join("&"):`${yd(n)}=${yd(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var rU=/^[^\/()?;#]+/;function vy(t){let e=t.match(rU);return e?e[0]:""}var iU=/^[^\/()?;=#]+/;function oU(t){let e=t.match(iU);return e?e[0]:""}var sU=/^[^=?&#]+/;function aU(t){let e=t.match(sU);return e?e[0]:""}var cU=/^[^&#]+/;function uU(t){let e=t.match(cU);return e?e[0]:""}var by=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new me([],{}):new me([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ie]=new me(e,n)),r}parseSegment(){let e=vy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new F(4009,!1);return this.capture(e),new Mr(Ed(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=oU(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=vy(this.remaining);i&&(r=i,this.capture(r))}e[Ed(n)]=Ed(r)}parseQueryParam(e){let n=aU(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=uU(this.remaining);s&&(r=s,this.capture(r))}let i=zS(n),o=zS(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=vy(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new F(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ie);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[ie]:new me([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new F(4011,!1)}};function o0(t){return t.segments.length>0?new me([],{[ie]:t}):t}function s0(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=s0(i);if(r===ie&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new me(t.segments,e);return lU(n)}function lU(t){if(t.numberOfChildren===1&&t.children[ie]){let e=t.children[ie];return new me(t.segments.concat(e.segments),e.children)}return t}function Xo(t){return t instanceof En}function a0(t,e,n=null,r=null){let i=c0(t);return u0(i,e,n,r)}function c0(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new me(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=o0(r);return e??i}function u0(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return _y(i,i,i,n,r);let o=dU(e);if(o.toRoot())return _y(i,i,new me([],{}),n,r);let s=hU(o,i,t),a=s.processChildren?za(s.segmentGroup,s.index,o.commands):d0(s.segmentGroup,s.index,o.commands);return _y(i,s.segmentGroup,a,n,r)}function Td(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ga(t){return typeof t=="object"&&t!=null&&t.outlets}function _y(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;t===e?s=n:s=l0(t,e,n);let a=o0(s0(s));return new En(a,o,i)}function l0(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=l0(o,e,n)}),new me(t.segments,r)}var Dd=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Td(r[0]))throw new F(4003,!1);let i=r.find(Ga);if(i&&i!==ZS(r))throw new F(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function dU(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Dd(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Dd(n,e,r)}var Jo=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function hU(t,e,n){if(t.isAbsolute)return new Jo(e,!0,0);if(!n)return new Jo(e,!1,NaN);if(n.parent===null)return new Jo(n,!0,0);let r=Td(t.commands[0])?0:1,i=n.segments.length-1+r;return fU(n,i,t.numberOfDoubleDots)}function fU(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new F(4005,!1);i=r.segments.length}return new Jo(r,!1,i-o)}function pU(t){return Ga(t[0])?t[0].outlets:{[ie]:t}}function d0(t,e,n){if(t??=new me([],{}),t.segments.length===0&&t.hasChildren())return za(t,e,n);let r=gU(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new me(t.segments.slice(0,r.pathIndex),{});return o.children[ie]=new me(t.segments.slice(r.pathIndex),t.children),za(o,0,i)}else return r.match&&i.length===0?new me(t.segments,{}):r.match&&!t.hasChildren()?Cy(t,e,n):r.match?za(t,0,i):Cy(t,e,n)}function za(t,e,n){if(n.length===0)return new me(t.segments,{});{let r=pU(n),i={};if(Object.keys(r).some(o=>o!==ie)&&t.children[ie]&&t.numberOfChildren===1&&t.children[ie].segments.length===0){let o=za(t.children[ie],e,n);return new me(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=d0(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new me(t.segments,i)}}function gU(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(Ga(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!GS(u,l,s))return o;r+=2}else{if(!GS(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Cy(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Ga(o)){let u=mU(o.outlets);return new me(r,u)}if(i===0&&Td(n[0])){let u=t.segments[e];r.push(new Mr(u.path,qS(n[0]))),i++;continue}let s=Ga(o)?o.outlets[ie]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Td(a)?(r.push(new Mr(s,qS(a))),i+=2):(r.push(new Mr(s,{})),i++)}return new me(r,{})}function mU(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Cy(new me([],{}),0,r))}),e}function qS(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function GS(t,e,n){return t==n.path&&_n(e,n.parameters)}var wd="imperative",Ke=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Ke||{}),Vt=class{id;url;constructor(e,n){this.id=e,this.url=n}},Mi=class extends Vt{type=Ke.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Xn=class extends Vt{urlAfterRedirects;type=Ke.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Mt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Mt||{}),Wa=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Wa||{}),In=class extends Vt{reason;code;type=Ke.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},er=class extends Vt{reason;code;type=Ke.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},es=class extends Vt{error;target;type=Ke.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ka=class extends Vt{urlAfterRedirects;state;type=Ke.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bd=class extends Vt{urlAfterRedirects;state;type=Ke.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Cd=class extends Vt{urlAfterRedirects;state;shouldActivate;type=Ke.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Sd=class extends Vt{urlAfterRedirects;state;type=Ke.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ad=class extends Vt{urlAfterRedirects;state;type=Ke.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Rd=class{route;type=Ke.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Nd=class{route;type=Ke.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Md=class{snapshot;type=Ke.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pd=class{snapshot;type=Ke.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xd=class{snapshot;type=Ke.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},kd=class{snapshot;type=Ke.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Qa=class{},ts=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function yU(t,e){return t.providers&&!t._injector&&(t._injector=Ql(t.providers,e,`Route: ${t.path}`)),t._injector??e}function rn(t){return t.outlet||ie}function vU(t,e){let n=t.filter(r=>rn(r)===e);return n.push(...t.filter(r=>rn(r)!==e)),n}function rc(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Od=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return rc(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new is(this.rootInjector)}},is=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Od(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(W(Ct))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ld=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Sy(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Sy(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Ay(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Ay(e,this._root).map(n=>n.value)}};function Sy(t,e){if(t===e.value)return e;for(let n of e.children){let r=Sy(t,n);if(r)return r}return null}function Ay(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Ay(t,n);if(r.length)return r.unshift(e),r}return[]}var Ft=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Yo(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Ya=class extends Ld{snapshot;constructor(e,n){super(e),this.snapshot=n,Ly(this,e)}toString(){return this.snapshot.toString()}};function h0(t){let e=_U(t),n=new Xe([new Mr("",{})]),r=new Xe({}),i=new Xe({}),o=new Xe({}),s=new Xe(""),a=new Pr(n,r,o,s,i,ie,t,e.root);return a.snapshot=e.root,new Ya(new Ft(a,[]),e)}function _U(t){let e={},n={},r={},i="",o=new Ai([],e,r,i,n,ie,t,null,{});return new Ja("",new Ft(o,[]))}var Pr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ce(l=>l[tc]))??Y(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ce(e=>Ri(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ce(e=>Ri(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Fd(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:U(U({},e.params),t.params),data:U(U({},e.data),t.data),resolve:U(U(U(U({},t.data),e.data),i?.data),t._resolvedData)}:r={params:U({},t.params),data:U({},t.data),resolve:U(U({},t.data),t._resolvedData??{})},i&&p0(i)&&(r.resolve[tc]=i.title),r}var Ai=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[tc]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ri(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ri(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Ja=class extends Ld{url;constructor(e,n){super(n),this.url=e,Ly(this,n)}toString(){return f0(this._root)}};function Ly(t,e){e.value._routerState=t,e.children.forEach(n=>Ly(t,n))}function f0(t){let e=t.children.length>0?` { ${t.children.map(f0).join(", ")} } `:"";return`${t.value}${e}`}function Iy(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,_n(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),_n(e.params,n.params)||t.paramsSubject.next(n.params),W2(e.url,n.url)||t.urlSubject.next(n.url),_n(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Ry(t,e){let n=_n(t.params,e.params)&&J2(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Ry(t.parent,e.parent))}function p0(t){return typeof t.title=="string"||t.title===null}var g0=new $(""),Fy=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ie;activateEvents=new Dt;deactivateEvents=new Dt;attachEvents=new Dt;detachEvents=new Dt;routerOutletData=$D(void 0);parentContexts=x(is);location=x(Qn);changeDetector=x(Qm);inputBinder=x(Bd,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new F(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new F(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new F(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new F(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Ny(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Di({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Pl]})}return t})(),Ny=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===Pr?this.route:e===is?this.childContexts:e===g0?this.outletData:this.parent.get(e,n)}},Bd=new $("");function IU(t,e,n){let r=Za(t,e._root,n?n._root:void 0);return new Ya(r,e)}function Za(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=EU(t,e,n);return new Ft(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Za(t,a)),s}}let r=wU(e.value),i=e.children.map(o=>Za(t,o));return new Ft(r,i)}}function EU(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Za(t,r,i);return Za(t,r)})}function wU(t){return new Pr(new Xe(t.url),new Xe(t.params),new Xe(t.queryParams),new Xe(t.fragment),new Xe(t.data),t.outlet,t.component,t)}var ns=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},m0="ngNavigationCancelingError";function Vd(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Xo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=y0(!1,Mt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function y0(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[m0]=!0,n.cancellationCode=e,n}function TU(t){return v0(t)&&Xo(t.url)}function v0(t){return!!t&&t[m0]}var DU=(t,e,n,r)=>ce(i=>(new My(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),My=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Iy(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Yo(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Yo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Yo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Yo(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new kd(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Pd(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Iy(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Iy(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Ud=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Zo=class{component;route;constructor(e,n){this.component=e,this.route=n}};function bU(t,e,n){let r=t._root,i=e?e._root:null;return Ha(r,i,n,[r.value])}function CU(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function os(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!jT(t)?t:e.get(t):r}function Ha(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Yo(e);return t.children.forEach(s=>{SU(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>qa(a,n.getContext(s),i)),i}function SU(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=AU(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Ud(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Ha(t,e,a?a.children:null,r,i):Ha(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Zo(a.outlet.component,s))}else s&&qa(e,a,i),i.canActivateChecks.push(new Ud(r)),o.component?Ha(t,null,a?a.children:null,r,i):Ha(t,null,n,r,i);return i}function AU(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Si(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Si(t.url,e.url)||!_n(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ry(t,e)||!_n(t.queryParams,e.queryParams);case"paramsChange":default:return!Ry(t,e)}}function qa(t,e,n){let r=Yo(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?qa(s,e.children.getContext(o),n):qa(s,null,n):qa(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Zo(e.outlet.component,i)):n.canDeactivateChecks.push(new Zo(null,i)):n.canDeactivateChecks.push(new Zo(null,i))}function ic(t){return typeof t=="function"}function RU(t){return typeof t=="boolean"}function NU(t){return t&&ic(t.canLoad)}function MU(t){return t&&ic(t.canActivate)}function PU(t){return t&&ic(t.canActivateChild)}function xU(t){return t&&ic(t.canDeactivate)}function kU(t){return t&&ic(t.canMatch)}function _0(t){return t instanceof On||t?.name==="EmptyError"}var vd=Symbol("INITIAL_VALUE");function rs(){return xt(t=>Vu(t.map(e=>e.pipe(Ln(1),Ap(vd)))).pipe(ce(e=>{for(let n of e)if(n!==!0){if(n===vd)return vd;if(n===!1||OU(n))return n}return!0}),yt(e=>e!==vd),Ln(1)))}function OU(t){return Xo(t)||t instanceof ns}function LU(t,e){return qe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?Y(ye(U({},n),{guardsResult:!0})):FU(s,r,i,t).pipe(qe(a=>a&&RU(a)?VU(r,o,t,e):Y(a)),ce(a=>ye(U({},n),{guardsResult:a})))})}function FU(t,e,n,r){return Ae(t).pipe(qe(i=>HU(i.component,i.route,n,e,r)),Fn(i=>i!==!0,!0))}function VU(t,e,n,r){return Ae(e).pipe(_r(i=>lo(jU(i.route.parent,r),UU(i.route,r),$U(t,i.path,n),BU(t,i.route,n))),Fn(i=>i!==!0,!0))}function UU(t,e){return t!==null&&e&&e(new xd(t)),Y(!0)}function jU(t,e){return t!==null&&e&&e(new Md(t)),Y(!0)}function BU(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Y(!0);let i=r.map(o=>ju(()=>{let s=rc(e)??n,a=os(o,s),u=MU(a)?a.canActivate(e,t):Ot(s,()=>a(e,t));return xr(u).pipe(Fn())}));return Y(i).pipe(rs())}function $U(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>CU(s)).filter(s=>s!==null).map(s=>ju(()=>{let a=s.guards.map(u=>{let l=rc(s.node)??n,h=os(u,l),p=PU(h)?h.canActivateChild(r,t):Ot(l,()=>h(r,t));return xr(p).pipe(Fn())});return Y(a).pipe(rs())}));return Y(o).pipe(rs())}function HU(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Y(!0);let s=o.map(a=>{let u=rc(e)??i,l=os(a,u),h=xU(l)?l.canDeactivate(t,e,n,r):Ot(u,()=>l(t,e,n,r));return xr(h).pipe(Fn())});return Y(s).pipe(rs())}function zU(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return Y(!0);let o=i.map(s=>{let a=os(s,t),u=NU(a)?a.canLoad(e,n):Ot(t,()=>a(e,n));return xr(u)});return Y(o).pipe(rs(),I0(r))}function I0(t){return yp(et(e=>{if(typeof e!="boolean")throw Vd(t,e)}),ce(e=>e===!0))}function qU(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return Y(!0);let o=i.map(s=>{let a=os(s,t),u=kU(a)?a.canMatch(e,n):Ot(t,()=>a(e,n));return xr(u)});return Y(o).pipe(rs(),I0(r))}var Xa=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},ec=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Qo(t){return uo(new Xa(t))}function GU(t){return uo(new F(4e3,!1))}function WU(t){return uo(y0(!1,Mt.GuardRejected))}var Py=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Y(r);if(i.numberOfChildren>1||!i.children[ie])return GU(`${e.redirectTo}`);i=i.children[ie]}}applyRedirectCommands(e,n,r,i,o){if(typeof n!="string"){let a=n,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:g,params:m,data:w,title:A}=i,R=Ot(o,()=>a({params:m,data:w,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:g,title:A}));if(R instanceof En)throw new ec(R);n=R}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new ec(s);return s}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new En(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new me(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new F(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},xy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function KU(t,e,n,r,i){let o=E0(t,e,n);return o.matched?(r=yU(e,r),qU(r,e,n,i).pipe(ce(s=>s===!0?o:U({},xy)))):Y(o)}function E0(t,e,n){if(e.path==="**")return QU(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?U({},xy):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||YS)(n,t,e);if(!i)return U({},xy);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?U(U({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function QU(t){return{matched:!0,parameters:t.length>0?ZS(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function WS(t,e,n,r){return n.length>0&&ZU(t,n,r)?{segmentGroup:new me(e,JU(r,new me(n,t.children))),slicedSegments:[]}:n.length===0&&XU(t,n,r)?{segmentGroup:new me(t.segments,YU(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new me(t.segments,t.children),slicedSegments:n}}function YU(t,e,n,r){let i={};for(let o of n)if($d(t,e,o)&&!r[rn(o)]){let s=new me([],{});i[rn(o)]=s}return U(U({},r),i)}function JU(t,e){let n={};n[ie]=e;for(let r of t)if(r.path===""&&rn(r)!==ie){let i=new me([],{});n[rn(r)]=i}return n}function ZU(t,e,n){return n.some(r=>$d(t,e,r)&&rn(r)!==ie)}function XU(t,e,n){return n.some(r=>$d(t,e,r))}function $d(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function ej(t,e,n){return e.length===0&&!t.children[n]}var ky=class{};function tj(t,e,n,r,i,o,s="emptyOnly"){return new Oy(t,e,n,r,i,s,o).recognize()}var nj=31,Oy=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Py(this.urlSerializer,this.urlTree)}noMatchError(e){return new F(4002,`'${e.segmentGroup}'`)}recognize(){let e=WS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ce(({children:n,rootSnapshot:r})=>{let i=new Ft(r,n),o=new Ja("",i),s=a0(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Ai([],Object.freeze({}),Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ie,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ie,n).pipe(ce(r=>({children:r,rootSnapshot:n})),vr(r=>{if(r instanceof ec)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Xa?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(ce(s=>s instanceof Ft?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ae(o).pipe(_r(s=>{let a=r.children[s],u=vU(n,s);return this.processSegmentGroup(e,u,a,s,i)}),bp((s,a)=>(s.push(...a),s)),Ir(null),Dp(),qe(s=>{if(s===null)return Qo(r);let a=w0(s);return rj(a),Y(a)}))}processSegment(e,n,r,i,o,s,a){return Ae(n).pipe(_r(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a).pipe(vr(l=>{if(l instanceof Xa)return Y(null);throw l}))),Fn(u=>!!u),vr(u=>{if(_0(u))return ej(r,i,o)?Y(new ky):Qo(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,u){return rn(r)!==s&&(s===ie||!$d(i,o,r))?Qo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):Qo(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=E0(n,i,o);if(!u)return Qo(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>nj&&(this.allowRedirects=!1));let m=new Ai(o,l,Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,KS(i),rn(i),i.component??i._loadedComponent??null,i,QS(i)),w=Fd(m,a,this.paramsInheritanceStrategy);m.params=Object.freeze(w.params),m.data=Object.freeze(w.data);let A=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,m,e);return this.applyRedirects.lineralizeSegments(i,A).pipe(qe(R=>this.processSegment(e,r,n,R.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=KU(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(xt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(xt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:m}=u,w=new Ai(g,p,Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,KS(r),rn(r),r.component??r._loadedComponent??null,r,QS(r)),A=Fd(w,s,this.paramsInheritanceStrategy);w.params=Object.freeze(A.params),w.data=Object.freeze(A.data);let{segmentGroup:R,slicedSegments:k}=WS(n,g,m,l);if(k.length===0&&R.hasChildren())return this.processChildren(h,l,R,w).pipe(ce(B=>new Ft(w,B)));if(l.length===0&&k.length===0)return Y(new Ft(w,[]));let V=rn(r)===o;return this.processSegment(h,l,R,k,V?ie:o,!0,w).pipe(ce(B=>new Ft(w,B instanceof Ft?[B]:[])))}))):Qo(n)))}getChildConfig(e,n,r){return n.children?Y({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?Y({routes:n._loadedRoutes,injector:n._loadedInjector}):zU(e,n,r,this.urlSerializer).pipe(qe(i=>i?this.configLoader.loadChildren(e,n).pipe(et(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):WU(n))):Y({routes:[],injector:e})}};function rj(t){t.sort((e,n)=>e.value.outlet===ie?-1:n.value.outlet===ie?1:e.value.outlet.localeCompare(n.value.outlet))}function ij(t){let e=t.value.routeConfig;return e&&e.path===""}function w0(t){let e=[],n=new Set;for(let r of t){if(!ij(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=w0(r.children);e.push(new Ft(r.value,i))}return e.filter(r=>!n.has(r))}function KS(t){return t.data||{}}function QS(t){return t.resolve||{}}function oj(t,e,n,r,i,o){return qe(s=>tj(t,e,n,r,s.extractedUrl,i,o).pipe(ce(({state:a,tree:u})=>ye(U({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function sj(t,e){return qe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Y(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of T0(u))s.add(l);let a=0;return Ae(s).pipe(_r(u=>o.has(u)?aj(u,r,t,e):(u.data=Fd(u,u.parent,t).resolve,Y(void 0))),et(()=>a++),ho(1),qe(u=>a===s.size?Y(n):at))})}function T0(t){let e=t.children.map(n=>T0(n)).flat();return[t,...e]}function aj(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!p0(i)&&(o[tc]=i.title),cj(o,t,e,r).pipe(ce(s=>(t._resolvedData=s,t.data=Fd(t,t.parent,n).resolve,null)))}function cj(t,e,n,r){let i=Ty(t);if(i.length===0)return Y({});let o={};return Ae(i).pipe(qe(s=>uj(t[s],e,n,r).pipe(Fn(),et(a=>{if(a instanceof ns)throw Vd(new Ni,a);o[s]=a}))),ho(1),ce(()=>o),vr(s=>_0(s)?at:uo(s)))}function uj(t,e,n,r){let i=rc(e)??r,o=os(t,i),s=o.resolve?o.resolve(e,n):Ot(i,()=>o(e,n));return xr(s)}function Ey(t){return xt(e=>{let n=t(e);return n?Ae(n).pipe(ce(()=>e)):Y(e)})}var Vy=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ie);return r}getResolvedTitleForRoute(n){return n.data[tc]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>x(D0),providedIn:"root"})}return t})(),D0=(()=>{class t extends Vy{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(W($S))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),oc=new $("",{providedIn:"root",factory:()=>({})}),Uy=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=tC({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Km(0,"router-outlet")},dependencies:[Fy],encapsulation:2})}return t})();function jy(t){let e=t.children&&t.children.map(jy),n=e?ye(U({},t),{children:e}):U({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ie&&(n.component=Uy),n}var sc=new $(""),b0=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=x(OC);loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return Y(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=xr(n.loadComponent()).pipe(ce(S0),et(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),Er(()=>{this.componentLoaders.delete(n)})),i=new ao(r,()=>new xe).pipe(so());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Y({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=C0(r,this.compiler,n,this.onLoadEndListener).pipe(Er(()=>{this.childrenLoaders.delete(r)})),s=new ao(o,()=>new xe).pipe(so());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function C0(t,e,n,r){return xr(t.loadChildren()).pipe(ce(S0),qe(i=>i instanceof Hm||Array.isArray(i)?Y(i):Ae(e.compileModuleAsync(i))),ce(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(sc,[],{optional:!0,self:!0}).flat()),{routes:s.map(jy),injector:o}}))}function lj(t){return t&&typeof t=="object"&&"default"in t}function S0(t){return lj(t)?t.default:t}var Hd=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>x(dj),providedIn:"root"})}return t})(),dj=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),A0=new $("");var R0=new $(""),N0=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new xe;transitionAbortSubject=new xe;configLoader=x(b0);environmentInjector=x(Ct);destroyRef=x(Vo);urlSerializer=x(nc);rootContexts=x(is);location=x(qo);inputBindingEnabled=x(Bd,{optional:!0})!==null;titleStrategy=x(Vy);options=x(oc,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=x(Hd);createViewTransition=x(A0,{optional:!0});navigationErrorHandler=x(R0,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Y(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new Rd(i)),r=i=>this.events.next(new Nd(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(ye(U({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(n){return this.transitions=new Xe(null),this.transitions.pipe(yt(r=>r!==null),xt(r=>{let i=!1,o=!1;return Y(r).pipe(xt(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Mt.SupersededByNewNavigation),at;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?ye(U({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=s.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!a&&u!=="reload"){let l="";return this.events.next(new er(s.id,this.urlSerializer.serialize(s.rawUrl),l,Wa.IgnoredSameUrlNavigation)),s.resolve(!1),at}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return Y(s).pipe(xt(l=>(this.events.next(new Mi(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?at:Promise.resolve(l))),oj(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),et(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation=ye(U({},this.currentNavigation),{finalUrl:l.urlAfterRedirects});let h=new Ka(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:l,extractedUrl:h,source:p,restoredState:g,extras:m}=s,w=new Mi(l,this.urlSerializer.serialize(h),p,g);this.events.next(w);let A=h0(this.rootComponentType).snapshot;return this.currentTransition=r=ye(U({},s),{targetSnapshot:A,urlAfterRedirects:h,extras:ye(U({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,Y(r)}else{let l="";return this.events.next(new er(s.id,this.urlSerializer.serialize(s.extractedUrl),l,Wa.IgnoredByUrlHandlingStrategy)),s.resolve(!1),at}}),et(s=>{let a=new bd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),ce(s=>(this.currentTransition=r=ye(U({},s),{guards:bU(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),LU(this.environmentInjector,s=>this.events.next(s)),et(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Vd(this.urlSerializer,s.guardsResult);let a=new Cd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),yt(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Mt.GuardRejected),!1)),Ey(s=>{if(s.guards.canActivateChecks.length!==0)return Y(s).pipe(et(a=>{let u=new Sd(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),xt(a=>{let u=!1;return Y(a).pipe(sj(this.paramsInheritanceStrategy,this.environmentInjector),et({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",Mt.NoDataFromResolver)}}))}),et(a=>{let u=new Ad(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),Ey(s=>{let a=u=>{let l=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(u.routeConfig).pipe(et(h=>{u.component=h}),ce(()=>{})));for(let h of u.children)l.push(...a(h));return l};return Vu(a(s.targetSnapshot.root)).pipe(Ir(null),Ln(1))}),Ey(()=>this.afterPreactivation()),xt(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,u=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return u?Ae(u).pipe(ce(()=>r)):Y(r)}),ce(s=>{let a=IU(n.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=ye(U({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),et(()=>{this.events.next(new Qa)}),DU(this.rootContexts,n.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Ln(1),et({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Xn(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Rp(this.transitionAbortSubject.pipe(et(s=>{throw s}))),Er(()=>{!i&&!o&&this.cancelNavigationTransition(r,"",Mt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),vr(s=>{if(this.destroyed)return r.resolve(!1),at;if(o=!0,v0(s))this.events.next(new In(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),TU(s)?this.events.next(new ts(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new es(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let u=Ot(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof ns){let{message:l,cancellationCode:h}=Vd(this.urlSerializer,u);this.events.next(new In(r.id,this.urlSerializer.serialize(r.extractedUrl),l,h)),this.events.next(new ts(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return at}))}))}cancelNavigationTransition(n,r,i){let o=new In(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function hj(t){return t!==wd}var M0=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>x(fj),providedIn:"root"})}return t})(),jd=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},fj=(()=>{class t extends jd{static \u0275fac=(()=>{let n;return function(i){return(n||(n=_m(t)))(i||t)}})();static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),P0=(()=>{class t{urlSerializer=x(nc);options=x(oc,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=x(qo);urlHandlingStrategy=x(Hd);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new En;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof En?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=h0(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>x(pj),providedIn:"root"})}return t})(),pj=(()=>{class t extends P0{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof Mi?this.updateStateMemento():n instanceof er?this.commitTransition(r):n instanceof Ka?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Qa?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof In&&(n.code===Mt.GuardRejected||n.code===Mt.NoDataFromResolver)?this.restoreHistory(r):n instanceof es?this.restoreHistory(r,!0):n instanceof Xn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,u=U(U({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",u)}else{let a=U(U({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=_m(t)))(i||t)}})();static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function By(t,e){t.events.pipe(yt(n=>n instanceof Xn||n instanceof In||n instanceof es||n instanceof er),ce(n=>n instanceof Xn||n instanceof er?0:(n instanceof In?n.code===Mt.Redirect||n.code===Mt.SupersededByNewNavigation:!1)?2:1),yt(n=>n!==2),Ln(1)).subscribe(()=>{e()})}var gj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},mj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},zd=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=x(qm);stateManager=x(P0);options=x(oc,{optional:!0})||{};pendingTasks=x(qn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=x(N0);urlSerializer=x(nc);location=x(qo);urlHandlingStrategy=x(Hd);_events=new xe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=x(M0);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=x(sc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!x(Bd,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Pe;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof In&&r.code!==Mt.Redirect&&r.code!==Mt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Xn)this.navigated=!0;else if(r instanceof ts){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=U({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||hj(i.source)},s);this.scheduleNavigation(a,wd,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}vj(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),wd,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=U({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(jy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=U(U({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=c0(g)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return u0(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Xo(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,wd,null,r)}navigate(n,r={skipLocationChange:!1}){return yj(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=U({},gj):r===!1?i=U({},mj):i=r,Xo(n))return HS(this.currentUrlTree,n,i);let o=this.parseUrl(n);return HS(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,g)=>{a=p,u=g});let h=this.pendingTasks.add();return By(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function yj(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new F(4008,!1)}function vj(t){return!(t instanceof Qa)&&!(t instanceof ts)}var Ij=new $("");function Ej(t,...e){return Po([{provide:sc,multi:!0,useValue:t},[],{provide:Pr,useFactory:wj,deps:[zd]},{provide:Gm,multi:!0,useFactory:Tj},e.map(n=>n.\u0275providers)])}function wj(t){return t.routerState.root}function Tj(){let t=x(zt);return e=>{let n=t.get(Cr);if(e!==n.components[0])return;let r=t.get(zd),i=t.get(Dj);t.get(bj)===1&&r.initialNavigation(),t.get(Cj,null,oe.Optional)?.setUpPreloading(),t.get(Ij,null,oe.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Dj=new $("",{factory:()=>new xe}),bj=new $("",{providedIn:"root",factory:()=>1});var Cj=new $("");var x0=()=>{};var L0=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Aj=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},F0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,m=l&63;u||(m=64,s||(g=64)),r.push(n[h],n[p],n[g],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(L0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Aj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new Hy;let g=o<<2|a>>4;if(r.push(g),l!==64){let m=a<<4&240|l>>2;if(r.push(m),p!==64){let w=l<<6&192|p;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Hy=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Rj=function(t){let e=L0(t);return F0.encodeByteArray(e,!0)},cc=function(t){return Rj(t).replace(/\./g,"")},Gd=function(t){try{return F0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function V0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Nj=()=>V0().__FIREBASE_DEFAULTS__,Mj=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Pj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Gd(t[1]);return e&&JSON.parse(e)},Wd=()=>{try{return x0()||Nj()||Mj()||Pj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},qy=t=>{var e,n;return(n=(e=Wd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},U0=t=>{let e=qy(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Gy=()=>{var t;return(t=Wd())===null||t===void 0?void 0:t.config},Wy=t=>{var e;return(e=Wd())===null||e===void 0?void 0:e[`_${t}`]};var qd=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function kr(t){return t.endsWith(".cloudworkstations.dev")}function Kd(t){return E(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function j0(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[cc(JSON.stringify(n)),cc(JSON.stringify(s)),""].join(".")}var ac={};function xj(){let t={prod:[],emulator:[]};for(let e of Object.keys(ac))ac[e]?t.emulator.push(e):t.prod.push(e);return t}function kj(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var k0=!1;function Qd(t,e){if(typeof window>"u"||typeof document>"u"||!kr(window.location.host)||ac[t]===e||ac[t]||k0)return;ac[t]=e;function n(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=xj().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,m){g.setAttribute("width","24"),g.setAttribute("id",m),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{k0=!0,s()},g}function h(g,m){g.setAttribute("id",m),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=kj(r),m=n("text"),w=document.getElementById(m)||document.createElement("span"),A=n("learnmore"),R=document.getElementById(A)||document.createElement("a"),k=n("preprendIcon"),V=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let B=g.element;a(B),h(R,A);let de=l();u(V,k),B.append(V,w,R,de),document.body.appendChild(B)}o?(w.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Qe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function B0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qe())}function Oj(){var t;let e=(t=Wd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function H0(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function z0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function q0(){let t=Qe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function G0(){return!Oj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ky(){try{return typeof indexedDB=="object"}catch{return!1}}function W0(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var Lj="FirebaseError",Ut=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Lj,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tr.prototype.create)}},tr=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?Fj(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Ut(i,a,r)}};function Fj(t,e){return t.replace(Vj,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Vj=/\{\$([^}]+)}/g;function K0(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function wn(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(O0(o)&&O0(s)){if(!wn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function O0(t){return t!==null&&typeof t=="object"}function uc(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Q0(t,e){let n=new zy(t,e);return n.subscribe.bind(n)}var zy=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Uj(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=$y),i.error===void 0&&(i.error=$y),i.complete===void 0&&(i.complete=$y);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Uj(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function $y(){}var IY=4*60*60*1e3;function je(t){return t&&t._delegate?t._delegate:t}var Wt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Pi="[DEFAULT]";var Qy=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new qd;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Bj(e))try{this.getOrInitializeService({instanceIdentifier:Pi})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Pi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return E(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Pi){return this.instances.has(e)}getOptions(e=Pi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:jj(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Pi){return this.component?this.component.multipleInstances?e:Pi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function jj(t){return t===Pi?void 0:t}function Bj(t){return t.instantiationMode==="EAGER"}var Yd=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Qy(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var $j=[],ue=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ue||{}),Hj={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},zj=ue.INFO,qj={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},Gj=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=qj[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Or=class{constructor(e){this.name=e,this._logLevel=zj,this._logHandler=Gj,this._userLogHandler=null,$j.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Hj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}};var Wj=(t,e)=>e.some(n=>t instanceof n),Y0,J0;function Kj(){return Y0||(Y0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Qj(){return J0||(J0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Z0=new WeakMap,Jy=new WeakMap,X0=new WeakMap,Yy=new WeakMap,Xy=new WeakMap;function Yj(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Tn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&Z0.set(n,t)}).catch(()=>{}),Xy.set(e,t),e}function Jj(t){if(Jy.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Jy.set(t,e)}var Zy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Jy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||X0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Tn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function eA(t){Zy=t(Zy)}function Zj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Jd(this),e,...n);return X0.set(r,e.sort?e.sort():[e]),Tn(r)}:Qj().includes(t)?function(...e){return t.apply(Jd(this),e),Tn(Z0.get(this))}:function(...e){return Tn(t.apply(Jd(this),e))}}function Xj(t){return typeof t=="function"?Zj(t):(t instanceof IDBTransaction&&Jj(t),Wj(t,Kj())?new Proxy(t,Zy):t)}function Tn(t){if(t instanceof IDBRequest)return Yj(t);if(Yy.has(t))return Yy.get(t);let e=Xj(t);return e!==t&&(Yy.set(t,e),Xy.set(e,t)),e}var Jd=t=>Xy.get(t);function nA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Tn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Tn(s.result),u.oldVersion,u.newVersion,Tn(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var eB=["get","getKey","getAll","getAllKeys","count"],tB=["put","add","delete","clear"],ev=new Map;function tA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ev.get(e))return ev.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=tB.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||eB.includes(n)))return;let o=function(s,...a){return E(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return ev.set(e,o),o}eA(t=>ye(U({},t),{get:(e,n,r)=>tA(e,n)||t.get(e,n,r),has:(e,n)=>!!tA(e,n)||t.has(e,n)}));var nv=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(nB(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function nB(t){let e=t.getComponent();return e?.type==="VERSION"}var rv="@firebase/app",rA="0.13.1";var nr=new Or("@firebase/app"),rB="@firebase/app-compat",iB="@firebase/analytics-compat",oB="@firebase/analytics",sB="@firebase/app-check-compat",aB="@firebase/app-check",cB="@firebase/auth",uB="@firebase/auth-compat",lB="@firebase/database",dB="@firebase/data-connect",hB="@firebase/database-compat",fB="@firebase/functions",pB="@firebase/functions-compat",gB="@firebase/installations",mB="@firebase/installations-compat",yB="@firebase/messaging",vB="@firebase/messaging-compat",_B="@firebase/performance",IB="@firebase/performance-compat",EB="@firebase/remote-config",wB="@firebase/remote-config-compat",TB="@firebase/storage",DB="@firebase/storage-compat",bB="@firebase/firestore",CB="@firebase/ai",SB="@firebase/firestore-compat",AB="firebase",RB="11.9.0";var iv="[DEFAULT]",NB={[rv]:"fire-core",[rB]:"fire-core-compat",[oB]:"fire-analytics",[iB]:"fire-analytics-compat",[aB]:"fire-app-check",[sB]:"fire-app-check-compat",[cB]:"fire-auth",[uB]:"fire-auth-compat",[lB]:"fire-rtdb",[dB]:"fire-data-connect",[hB]:"fire-rtdb-compat",[fB]:"fire-fn",[pB]:"fire-fn-compat",[gB]:"fire-iid",[mB]:"fire-iid-compat",[yB]:"fire-fcm",[vB]:"fire-fcm-compat",[_B]:"fire-perf",[IB]:"fire-perf-compat",[EB]:"fire-rc",[wB]:"fire-rc-compat",[TB]:"fire-gcs",[DB]:"fire-gcs-compat",[bB]:"fire-fst",[SB]:"fire-fst-compat",[CB]:"fire-vertex","fire-js":"fire-js",[AB]:"fire-js-all"};var Zd=new Map,MB=new Map,ov=new Map;function iA(t,e){try{t.container.addComponent(e)}catch(n){nr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Fr(t){let e=t.name;if(ov.has(e))return nr.debug(`There were multiple attempts to register component ${e}.`),!1;ov.set(e,t);for(let n of Zd.values())iA(n,t);for(let n of MB.values())iA(n,t);return!0}function dc(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function jt(t){return t==null?!1:t.settings!==void 0}var PB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Lr=new tr("app","Firebase",PB);var sv=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Wt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Lr.create("app-deleted",{appName:this._name})}};var Vr=RB;function uv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:iv,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Lr.create("bad-app-name",{appName:String(i)});if(n||(n=Gy()),!n)throw Lr.create("no-options");let o=Zd.get(i);if(o){if(wn(n,o.options)&&wn(r,o.config))return o;throw Lr.create("duplicate-app",{appName:i})}let s=new Yd(i);for(let u of ov.values())s.addComponent(u);let a=new sv(n,r,s);return Zd.set(i,a),a}function Xd(t=iv){let e=Zd.get(t);if(!e&&t===iv&&Gy())return uv();if(!e)throw Lr.create("no-app",{appName:t});return e}function on(t,e,n){var r;let i=(r=NB[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),nr.warn(a.join(" "));return}Fr(new Wt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var xB="firebase-heartbeat-database",kB=1,lc="firebase-heartbeat-store",tv=null;function cA(){return tv||(tv=nA(xB,kB,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(lc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Lr.create("idb-open",{originalErrorMessage:t.message})})),tv}function OB(t){return E(this,null,function*(){try{let n=(yield cA()).transaction(lc),r=yield n.objectStore(lc).get(uA(t));return yield n.done,r}catch(e){if(e instanceof Ut)nr.warn(e.message);else{let n=Lr.create("idb-get",{originalErrorMessage:e?.message});nr.warn(n.message)}}})}function oA(t,e){return E(this,null,function*(){try{let r=(yield cA()).transaction(lc,"readwrite");yield r.objectStore(lc).put(e,uA(t)),yield r.done}catch(n){if(n instanceof Ut)nr.warn(n.message);else{let r=Lr.create("idb-set",{originalErrorMessage:n?.message});nr.warn(r.message)}}})}function uA(t){return`${t.name}!${t.options.appId}`}var LB=1024,FB=30,av=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new cv(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return E(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=sA();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>FB){let s=UB(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){nr.warn(r)}})}getHeartbeatsHeader(){return E(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=sA(),{heartbeatsToSend:r,unsentEntries:i}=VB(this._heartbeatsCache.heartbeats),o=cc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return nr.warn(n),""}})}};function sA(){return new Date().toISOString().substring(0,10)}function VB(t,e=LB){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),aA(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),aA(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var cv=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return E(this,null,function*(){return Ky()?W0().then(()=>!0).catch(()=>!1):!1})}read(){return E(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield OB(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return E(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return oA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return E(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return oA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function aA(t){return cc(JSON.stringify({version:2,heartbeats:t})).length}function UB(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function jB(t){Fr(new Wt("platform-logger",e=>new nv(e),"PRIVATE")),Fr(new Wt("heartbeat",e=>new av(e),"PRIVATE")),on(rv,rA,t),on(rv,rA,"esm2017"),on("fire-js","")}jB("");var BB="firebase",$B="11.9.1";on(BB,$B,"app");function DA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var bA=DA,CA=new tr("auth","Firebase",DA());var oh=new Or("@firebase/auth");function HB(t,...e){oh.logLevel<=ue.WARN&&oh.warn(`Auth (${Vr}): ${t}`,...e)}function th(t,...e){oh.logLevel<=ue.ERROR&&oh.error(`Auth (${Vr}): ${t}`,...e)}function $r(t,...e){throw Rv(t,...e)}function xi(t,...e){return Rv(t,...e)}function SA(t,e,n){let r=Object.assign(Object.assign({},bA()),{[e]:n});return new tr("auth","Firebase",r).create(e,{appName:t.name})}function Br(t){return SA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Rv(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return CA.create(t,...e)}function Z(t,e,...n){if(!t)throw Rv(e,...n)}function rr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw th(e),new Error(e)}function Hr(t,e){t||rr(e)}function fv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function zB(){return lA()==="http:"||lA()==="https:"}function lA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function qB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zB()||H0()||"connection"in navigator)?navigator.onLine:!0}function GB(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var ki=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Hr(n>e,"Short delay should be less than long delay!"),this.isMobile=B0()||z0()}get(){return qB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Nv(t,e){Hr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var sh=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var WB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var KB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],QB=new ki(3e4,6e4);function yh(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function ss(o,s,a,u){return E(this,arguments,function*(t,e,n,r,i={}){return AA(t,i,()=>E(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=uc(Object.assign({key:t.config.apiKey},h)).slice(1),g=yield t._getAdditionalHeaders();g["Content-Type"]="application/json",t.languageCode&&(g["X-Firebase-Locale"]=t.languageCode);let m=Object.assign({method:e,headers:g},l);return $0()||(m.referrerPolicy="no-referrer"),t.emulatorConfig&&kr(t.emulatorConfig.host)&&(m.credentials="include"),sh.fetch()(yield NA(t,t.config.apiHost,n,p),m)}))})}function AA(t,e,n){return E(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},WB),e);try{let i=new pv(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw eh(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw eh(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw eh(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw eh(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw SA(t,h,l);$r(t,h)}}catch(i){if(i instanceof Ut)throw i;$r(t,"network-request-failed",{message:String(i)})}})}function RA(o,s,a,u){return E(this,arguments,function*(t,e,n,r,i={}){let l=yield ss(t,e,n,r,i);return"mfaPendingCredential"in l&&$r(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function NA(t,e,n,r){return E(this,null,function*(){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?Nv(t.config,i):`${t.config.apiScheme}://${i}`;return KB.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var pv=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(xi(this.auth,"network-request-failed")),QB.get())})}};function eh(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=xi(t,e,r);return i.customData._tokenResponse=n,i}function YB(t,e){return E(this,null,function*(){return ss(t,"POST","/v1/accounts:delete",e)})}function ah(t,e){return E(this,null,function*(){return ss(t,"POST","/v1/accounts:lookup",e)})}function hc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function MA(t,e=!1){return E(this,null,function*(){let n=je(t),r=yield n.getIdToken(e),i=Mv(r);Z(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:hc(lv(i.auth_time)),issuedAtTime:hc(lv(i.iat)),expirationTime:hc(lv(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function lv(t){return Number(t)*1e3}function Mv(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return th("JWT malformed, contained fewer than 3 sections"),null;try{let i=Gd(n);return i?JSON.parse(i):(th("Failed to decode base64 JWT payload"),null)}catch(i){return th("Caught error parsing JWT payload as JSON",i?.toString()),null}}function dA(t){let e=Mv(t);return Z(e,"internal-error"),Z(typeof e.exp<"u","internal-error"),Z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function pc(t,e,n=!1){return E(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Ut&&JB(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function JB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var gv=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>E(this,null,function*(){yield this.iteration()}),n)}iteration(){return E(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var gc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=hc(this.lastLoginAt),this.creationTime=hc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function ch(t){return E(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield pc(t,ah(n,{idToken:r}));Z(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?xA(o.providerUserInfo):[],a=ZB(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new gc(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function PA(t){return E(this,null,function*(){let e=je(t);yield ch(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function ZB(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function xA(t){return t.map(e=>{var{providerId:n}=e,r=wp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function XB(t,e){return E(this,null,function*(){let n=yield AA(t,{},()=>E(null,null,function*(){let r=uc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield NA(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return t.emulatorConfig&&kr(t.emulatorConfig.host)&&(u.credentials="include"),sh.fetch()(s,u)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function e$(t,e){return E(this,null,function*(){return ss(t,"POST","/v2/accounts:revokeToken",yh(t,e))})}var fc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Z(e.idToken,"internal-error"),Z(typeof e.idToken<"u","internal-error"),Z(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Z(e.length!==0,"internal-error");let n=dA(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return E(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return E(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield XB(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(Z(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Z(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Z(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return rr("not implemented")}};function Ur(t,e){Z(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var jr=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=wp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new gc(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return E(this,null,function*(){let n=yield pc(this,this.stsTokenManager.getToken(this.auth,e));return Z(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return MA(this,e)}reload(){return PA(this)}_assign(e){this!==e&&(Z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return E(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield ch(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return E(this,null,function*(){if(jt(this.auth.app))return Promise.reject(Br(this.auth));let e=yield this.getIdToken();return yield pc(this,YB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,m=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,w=(s=n.photoURL)!==null&&s!==void 0?s:void 0,A=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,k=(l=n.createdAt)!==null&&l!==void 0?l:void 0,V=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:B,emailVerified:de,isAnonymous:Fe,providerData:ge,stsTokenManager:D}=n;Z(B&&D,e,"internal-error");let v=fc.fromJSON(this.name,D);Z(typeof B=="string",e,"internal-error"),Ur(p,e.name),Ur(g,e.name),Z(typeof de=="boolean",e,"internal-error"),Z(typeof Fe=="boolean",e,"internal-error"),Ur(m,e.name),Ur(w,e.name),Ur(A,e.name),Ur(R,e.name),Ur(k,e.name),Ur(V,e.name);let I=new t({uid:B,auth:e,email:g,emailVerified:de,displayName:p,isAnonymous:Fe,photoURL:w,phoneNumber:m,tenantId:A,stsTokenManager:v,createdAt:k,lastLoginAt:V});return ge&&Array.isArray(ge)&&(I.providerData=ge.map(T=>Object.assign({},T))),R&&(I._redirectEventId=R),I}static _fromIdTokenResponse(e,n,r=!1){return E(this,null,function*(){let i=new fc;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield ch(o),o})}static _fromGetAccountInfoResponse(e,n,r){return E(this,null,function*(){let i=n.users[0];Z(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?xA(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new fc;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new gc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var hA=new Map;function ir(t){Hr(t instanceof Function,"Expected a class definition");let e=hA.get(t);return e?(Hr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,hA.set(t,e),e)}var t$=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return E(this,null,function*(){return!0})}_set(n,r){return E(this,null,function*(){this.storage[n]=r})}_get(n){return E(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return E(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),mv=t$;function nh(t,e,n){return`firebase:${t}:${e}:${n}`}var uh=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=nh(this.userKey,i.apiKey,o),this.fullPersistenceKey=nh("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return E(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield ah(this.auth,{idToken:e}).catch(()=>{});return n?jr._fromGetAccountInfoResponse(this.auth,n,e):null}return jr._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return E(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return E(this,null,function*(){if(!n.length)return new t(ir(mv),e,r);let i=(yield Promise.all(n.map(l=>E(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||ir(mv),s=nh(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let g=yield ah(e,{idToken:h}).catch(()=>{});if(!g)break;p=yield jr._fromGetAccountInfoResponse(e,g,h)}else p=jr._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>E(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function fA(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(FA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(UA(e))return"Blackberry";if(jA(e))return"Webos";if(OA(e))return"Safari";if((e.includes("chrome/")||LA(e))&&!e.includes("edge/"))return"Chrome";if(VA(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function kA(t=Qe()){return/firefox\//i.test(t)}function OA(t=Qe()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function LA(t=Qe()){return/crios\//i.test(t)}function FA(t=Qe()){return/iemobile/i.test(t)}function VA(t=Qe()){return/android/i.test(t)}function UA(t=Qe()){return/blackberry/i.test(t)}function jA(t=Qe()){return/webos/i.test(t)}function Pv(t=Qe()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function n$(t=Qe()){var e;return Pv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function r$(){return q0()&&document.documentMode===10}function BA(t=Qe()){return Pv(t)||VA(t)||jA(t)||UA(t)||/windows phone/i.test(t)||FA(t)}function $A(t,e=[]){let n;switch(t){case"Browser":n=fA(Qe());break;case"Worker":n=`${fA(Qe())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Vr}/${r}`}var yv=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return E(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function i$(n){return E(this,arguments,function*(t,e={}){return ss(t,"GET","/v2/passwordPolicy",yh(t,e))})}var o$=6,vv=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:o$,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var _v=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lh(this),this.idTokenSubscription=new lh(this),this.beforeStateQueue=new yv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=CA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ir(n)),this._initializationPromise=this.queue(()=>E(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield uh.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return E(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return E(this,null,function*(){try{let n=yield ah(this,{idToken:e}),r=yield jr._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return E(this,null,function*(){var n;if(jt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Z(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return E(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return E(this,null,function*(){try{yield ch(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=GB()}_delete(){return E(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return E(this,null,function*(){if(jt(this.app))return Promise.reject(Br(this));let n=e?je(e):null;return n&&Z(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return E(this,null,function*(){if(!this._deleted)return e&&Z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>E(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return E(this,null,function*(){return jt(this.app)?Promise.reject(Br(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return jt(this.app)?Promise.reject(Br(this)):this.queue(()=>E(this,null,function*(){yield this.assertedPersistence.setPersistence(ir(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return E(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return E(this,null,function*(){let e=yield i$(this),n=new vv(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new tr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return E(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield e$(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return E(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return E(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&ir(e)||this._popupRedirectResolver;Z(n,this,"argument-error"),this.redirectPersistenceManager=yield uh.create(this,[ir(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return E(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>E(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return E(this,null,function*(){if(e===this.currentUser)return this.queue(()=>E(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Z(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return E(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$A(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return E(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return E(this,null,function*(){var e;if(jt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&HB(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function vh(t){return je(t)}var lh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Q0(n=>this.observer=n)}get next(){return Z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var xv={loadJS(){return E(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function s$(t){xv=t}function a$(t){return xv.loadJS(t)}function c$(){return xv.gapiScript}function HA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function zA(t,e){let n=dc(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(wn(o,e??{}))return i;$r(i,"already-initialized")}return n.initialize({options:e})}function u$(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ir);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function qA(t,e,n){let r=vh(t);Z(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=GA(e),{host:s,port:a}=l$(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Z(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Z(wn(l,r.config.emulator)&&wn(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,kr(s)?(Kd(`${o}//${s}${u}`),Qd("Auth",!0)):i||d$()}function GA(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function l$(t){let e=GA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:pA(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:pA(s)}}}function pA(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function d$(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var dh=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return rr("not implemented")}_getIdTokenResponse(e){return rr("not implemented")}_linkToIdToken(e,n){return rr("not implemented")}_getReauthenticationResolver(e){return rr("not implemented")}};function dv(t,e){return E(this,null,function*(){return RA(t,"POST","/v1/accounts:signInWithIdp",yh(t,e))})}var hh=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Iv=class extends hh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function h$(t,e){return E(this,null,function*(){return RA(t,"POST","/v1/accounts:signUp",yh(t,e))})}var Oi=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return E(this,null,function*(){let o=yield jr._fromIdTokenResponse(e,r,i),s=gA(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return E(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=gA(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function gA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}function as(t){return E(this,null,function*(){var e;if(jt(t.app))return Promise.reject(Br(t));let n=vh(t);if(yield n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Oi({user:n.currentUser,providerId:null,operationType:"signIn"});let r=yield h$(n,{returnSecureToken:!0}),i=yield Oi._fromIdTokenResponse(n,"signIn",r,!0);return yield n._updateCurrentUser(i.user),i})}var Ev=class t extends Ut{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function WA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Ev._fromErrorAndOperation(t,o,e,r):o})}function f$(t,e,n=!1){return E(this,null,function*(){let r=yield pc(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Oi._forOperation(t,"link",r)})}function p$(t,e,n=!1){return E(this,null,function*(){let{auth:r}=t;if(jt(r.app))return Promise.reject(Br(r));let i="reauthenticate";try{let o=yield pc(t,WA(r,i,e,t),n);Z(o.idToken,r,"internal-error");let s=Mv(o.idToken);Z(s,r,"internal-error");let{sub:a}=s;return Z(t.uid===a,r,"user-mismatch"),Oi._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&$r(r,"user-mismatch"),o}})}function g$(t,e,n=!1){return E(this,null,function*(){if(jt(t.app))return Promise.reject(Br(t));let r="signIn",i=yield WA(t,r,e),o=yield Oi._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function KA(t,e,n,r){return je(t).onIdTokenChanged(e,n,r)}function QA(t,e,n){return je(t).beforeAuthStateChanged(e,n)}function kv(t,e,n,r){return je(t).onAuthStateChanged(e,n,r)}var fh="__sak";var ph=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(fh,"1"),this.storage.removeItem(fh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var m$=1e3,y$=10,v$=(()=>{class t extends ph{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BA(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);r$()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,y$):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},m$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return E(this,null,function*(){yield yr(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return E(this,null,function*(){let r=yield yr(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return E(this,null,function*(){yield yr(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),YA=v$;var _$=(()=>{class t extends ph{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Ov=_$;function I$(t){return Promise.all(t.map(e=>E(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var E$=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return E(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>E(this,null,function*(){return h(r.origin,s)})),l=yield I$(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function JA(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var wv=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return E(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=JA("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Dn(){return window}function w$(t){Dn().location.href=t}function ZA(){return typeof Dn().WorkerGlobalScope<"u"&&typeof Dn().importScripts=="function"}function T$(){return E(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function D$(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function b$(){return ZA()?self:null}var XA="firebaseLocalStorageDb",C$=1,gh="firebaseLocalStorage",eR="fbase_key",Li=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function _h(t,e){return t.transaction([gh],e?"readwrite":"readonly").objectStore(gh)}function S$(){let t=indexedDB.deleteDatabase(XA);return new Li(t).toPromise()}function Tv(){let t=indexedDB.open(XA,C$);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(gh,{keyPath:eR})}catch(i){n(i)}}),t.addEventListener("success",()=>E(null,null,function*(){let r=t.result;r.objectStoreNames.contains(gh)?e(r):(r.close(),yield S$(),e(yield Tv()))}))})}function mA(t,e,n){return E(this,null,function*(){let r=_h(t,!0).put({[eR]:e,value:n});return new Li(r).toPromise()})}function A$(t,e){return E(this,null,function*(){let n=_h(t,!1).get(e),r=yield new Li(n).toPromise();return r===void 0?null:r.value})}function yA(t,e){let n=_h(t,!0).delete(e);return new Li(n).toPromise()}var R$=800,N$=3,M$=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return E(this,null,function*(){return this.db?this.db:(this.db=yield Tv(),this.db)})}_withRetries(n){return E(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>N$)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return E(this,null,function*(){return ZA()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return E(this,null,function*(){this.receiver=E$._getInstance(b$()),this.receiver._subscribe("keyChanged",(n,r)=>E(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>E(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return E(this,null,function*(){var n,r;if(this.activeServiceWorker=yield T$(),!this.activeServiceWorker)return;this.sender=new wv(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return E(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||D$()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return E(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Tv();return yield mA(n,fh,"1"),yield yA(n,fh),!0}catch{}return!1})}_withPendingWrite(n){return E(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(i=>mA(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return E(this,null,function*(){let r=yield this._withRetries(i=>A$(i,n));return this.localCache[n]=r,r})}_remove(n){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(r=>yA(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return E(this,null,function*(){let n=yield this._withRetries(o=>{let s=_h(o,!1).getAll();return new Li(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>E(this,null,function*(){return this._poll()}),R$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),tR=M$;var XY=HA("rcb"),eJ=new ki(3e4,6e4);function P$(t,e){return e?ir(e):(Z(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var mc=class extends dh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return dv(e,this._buildIdpRequest())}_linkToIdToken(e,n){return dv(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return dv(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function x$(t){return g$(t.auth,new mc(t),t.bypassAuthState)}function k$(t){let{auth:e,user:n}=t;return Z(n,e,"internal-error"),p$(n,new mc(t),t.bypassAuthState)}function O$(t){return E(this,null,function*(){let{auth:e,user:n}=t;return Z(n,e,"internal-error"),f$(n,new mc(t),t.bypassAuthState)})}var Dv=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>E(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return E(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return x$;case"linkViaPopup":case"linkViaRedirect":return O$;case"reauthViaPopup":case"reauthViaRedirect":return k$;default:$r(this.auth,"internal-error")}}resolve(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var tJ=new ki(2e3,1e4);var L$="pendingRedirect",rh=new Map,bv=class t extends Dv{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return E(this,null,function*(){let e=rh.get(this.auth._key());if(!e){try{let r=(yield F$(this.resolver,this.auth))?yield yr(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}rh.set(this.auth._key(),e)}return this.bypassAuthState||rh.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return E(this,null,function*(){if(e.type==="signInViaRedirect")return yr(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,yr(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return E(this,null,function*(){})}cleanUp(){}};function F$(t,e){return E(this,null,function*(){let n=j$(e),r=U$(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function V$(t,e){rh.set(t._key(),e)}function U$(t){return ir(t._redirectPersistence)}function j$(t){return nh(L$,t.config.apiKey,t.name)}function B$(t,e,n=!1){return E(this,null,function*(){if(jt(t.app))return Promise.reject(Br(t));let r=vh(t),i=P$(r,e),s=yield new bv(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var $$=10*60*1e3,Cv=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!H$(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!nR(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(xi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$$&&this.cachedEventUids.clear(),this.cachedEventUids.has(vA(e))}saveEventToCache(e){this.cachedEventUids.add(vA(e)),this.lastProcessedEventTime=Date.now()}};function vA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function nR({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function H$(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nR(t);default:return!1}}function z$(n){return E(this,arguments,function*(t,e={}){return ss(t,"GET","/v1/projects",e)})}var q$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,G$=/^https?/;function W$(t){return E(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield z$(t);for(let n of e)try{if(K$(n))return}catch{}$r(t,"unauthorized-domain")})}function K$(t){let e=fv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!G$.test(n))return!1;if(q$.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var Q$=new ki(3e4,6e4);function _A(){let t=Dn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Y$(t){return new Promise((e,n)=>{var r,i,o;function s(){_A(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_A(),n(xi(t,"network-request-failed"))},timeout:Q$.get()})}if(!((i=(r=Dn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Dn().gapi)===null||o===void 0)&&o.load)s();else{let a=HA("iframefcb");return Dn()[a]=()=>{gapi.load?s():n(xi(t,"network-request-failed"))},a$(`${c$()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw ih=null,e})}var ih=null;function J$(t){return ih=ih||Y$(t),ih}var Z$=new ki(5e3,15e3),X$="__/auth/iframe",eH="emulator/auth/iframe",tH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rH(t){let e=t.config;Z(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Nv(e,eH):`https://${t.config.authDomain}/${X$}`,r={apiKey:e.apiKey,appName:t.name,v:Vr},i=nH.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${uc(r).slice(1)}`}function iH(t){return E(this,null,function*(){let e=yield J$(t),n=Dn().gapi;return Z(n,t,"internal-error"),e.open({where:document.body,url:rH(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tH,dontclear:!0},r=>new Promise((i,o)=>E(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=xi(t,"network-request-failed"),a=Dn().setTimeout(()=>{o(s)},Z$.get());function u(){Dn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var oH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},sH=500,aH=600,cH="_blank",uH="http://localhost",mh=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function lH(t,e,n,r=sH,i=aH){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},oH),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Qe().toLowerCase();n&&(a=LA(l)?cH:n),kA(l)&&(e=e||uH,u.scrollbars="yes");let h=Object.entries(u).reduce((g,[m,w])=>`${g}${m}=${w},`,"");if(n$(l)&&a!=="_self")return dH(e||"",a),new mh(null);let p=window.open(e||"",a,h);Z(p,t,"popup-blocked");try{p.focus()}catch{}return new mh(p)}function dH(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var hH="__/auth/handler",fH="emulator/auth/handler",pH=encodeURIComponent("fac");function IA(t,e,n,r,i,o){return E(this,null,function*(){Z(t.config.authDomain,t,"auth-domain-config-required"),Z(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Vr,eventId:i};if(e instanceof hh){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",K0(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof Iv){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${pH}=${encodeURIComponent(u)}`:"";return`${gH(t)}?${uc(a).slice(1)}${l}`})}function gH({config:t}){return t.emulator?Nv(t,fH):`https://${t.authDomain}/${hH}`}var hv="webStorageSupport",Sv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ov,this._completeRedirectFn=B$,this._overrideRedirectResult=V$}_openPopup(e,n,r,i){return E(this,null,function*(){var o;Hr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield IA(e,n,r,fv(),i);return lH(e,s,JA())})}_openRedirect(e,n,r,i){return E(this,null,function*(){yield this._originValidation(e);let o=yield IA(e,n,r,fv(),i);return w$(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Hr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return E(this,null,function*(){let n=yield iH(e),r=new Cv(e);return n.register("authEvent",i=>(Z(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(hv,{type:hv},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[hv];s!==void 0&&n(!!s),$r(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=W$(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return BA()||OA()||Pv()}},rR=Sv;var EA="@firebase/auth",wA="1.10.7";var Av=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return E(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function mH(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function yH(t){Fr(new Wt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Z(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$A(t)},l=new _v(r,i,o,u);return u$(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Fr(new Wt("auth-internal",e=>{let n=vh(e.getProvider("auth").getImmediate());return(r=>new Av(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),on(EA,wA,mH(t)),on(EA,wA,"esm2017")}var vH=5*60,_H=Wy("authIdTokenMaxAge")||vH,TA=null,IH=t=>e=>E(null,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>_H)return;let i=n?.token;TA!==i&&(TA=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Lv(t=Xd()){let e=dc(t,"auth");if(e.isInitialized())return e.getImmediate();let n=zA(t,{popupRedirectResolver:rR,persistence:[tR,YA,Ov]}),r=Wy("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=IH(o.toString());QA(n,s,()=>s(n.currentUser)),KA(n,a=>s(a))}}let i=qy("auth");return i&&qA(n,`http://${i}`),n}function EH(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}s$({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=xi("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",EH().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});yH("Browser");var iR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},oR={};var or,Fv;(function(){var t;function e(D,v){function I(){}I.prototype=v.prototype,D.D=v.prototype,D.prototype=new I,D.prototype.constructor=D,D.C=function(T,b,S){for(var _=Array(arguments.length-2),Nn=2;Nn<arguments.length;Nn++)_[Nn-2]=arguments[Nn];return v.prototype[b].apply(T,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,v,I){I||(I=0);var T=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)T[b]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(b=0;16>b;++b)T[b]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=D.g[0],I=D.g[1],b=D.g[2];var S=D.g[3],_=v+(S^I&(b^S))+T[0]+3614090360&4294967295;v=I+(_<<7&4294967295|_>>>25),_=S+(b^v&(I^b))+T[1]+3905402710&4294967295,S=v+(_<<12&4294967295|_>>>20),_=b+(I^S&(v^I))+T[2]+606105819&4294967295,b=S+(_<<17&4294967295|_>>>15),_=I+(v^b&(S^v))+T[3]+3250441966&4294967295,I=b+(_<<22&4294967295|_>>>10),_=v+(S^I&(b^S))+T[4]+4118548399&4294967295,v=I+(_<<7&4294967295|_>>>25),_=S+(b^v&(I^b))+T[5]+1200080426&4294967295,S=v+(_<<12&4294967295|_>>>20),_=b+(I^S&(v^I))+T[6]+2821735955&4294967295,b=S+(_<<17&4294967295|_>>>15),_=I+(v^b&(S^v))+T[7]+4249261313&4294967295,I=b+(_<<22&4294967295|_>>>10),_=v+(S^I&(b^S))+T[8]+1770035416&4294967295,v=I+(_<<7&4294967295|_>>>25),_=S+(b^v&(I^b))+T[9]+2336552879&4294967295,S=v+(_<<12&4294967295|_>>>20),_=b+(I^S&(v^I))+T[10]+4294925233&4294967295,b=S+(_<<17&4294967295|_>>>15),_=I+(v^b&(S^v))+T[11]+2304563134&4294967295,I=b+(_<<22&4294967295|_>>>10),_=v+(S^I&(b^S))+T[12]+1804603682&4294967295,v=I+(_<<7&4294967295|_>>>25),_=S+(b^v&(I^b))+T[13]+4254626195&4294967295,S=v+(_<<12&4294967295|_>>>20),_=b+(I^S&(v^I))+T[14]+2792965006&4294967295,b=S+(_<<17&4294967295|_>>>15),_=I+(v^b&(S^v))+T[15]+1236535329&4294967295,I=b+(_<<22&4294967295|_>>>10),_=v+(b^S&(I^b))+T[1]+4129170786&4294967295,v=I+(_<<5&4294967295|_>>>27),_=S+(I^b&(v^I))+T[6]+3225465664&4294967295,S=v+(_<<9&4294967295|_>>>23),_=b+(v^I&(S^v))+T[11]+643717713&4294967295,b=S+(_<<14&4294967295|_>>>18),_=I+(S^v&(b^S))+T[0]+3921069994&4294967295,I=b+(_<<20&4294967295|_>>>12),_=v+(b^S&(I^b))+T[5]+3593408605&4294967295,v=I+(_<<5&4294967295|_>>>27),_=S+(I^b&(v^I))+T[10]+38016083&4294967295,S=v+(_<<9&4294967295|_>>>23),_=b+(v^I&(S^v))+T[15]+3634488961&4294967295,b=S+(_<<14&4294967295|_>>>18),_=I+(S^v&(b^S))+T[4]+3889429448&4294967295,I=b+(_<<20&4294967295|_>>>12),_=v+(b^S&(I^b))+T[9]+568446438&4294967295,v=I+(_<<5&4294967295|_>>>27),_=S+(I^b&(v^I))+T[14]+3275163606&4294967295,S=v+(_<<9&4294967295|_>>>23),_=b+(v^I&(S^v))+T[3]+4107603335&4294967295,b=S+(_<<14&4294967295|_>>>18),_=I+(S^v&(b^S))+T[8]+1163531501&4294967295,I=b+(_<<20&4294967295|_>>>12),_=v+(b^S&(I^b))+T[13]+2850285829&4294967295,v=I+(_<<5&4294967295|_>>>27),_=S+(I^b&(v^I))+T[2]+4243563512&4294967295,S=v+(_<<9&4294967295|_>>>23),_=b+(v^I&(S^v))+T[7]+1735328473&4294967295,b=S+(_<<14&4294967295|_>>>18),_=I+(S^v&(b^S))+T[12]+2368359562&4294967295,I=b+(_<<20&4294967295|_>>>12),_=v+(I^b^S)+T[5]+4294588738&4294967295,v=I+(_<<4&4294967295|_>>>28),_=S+(v^I^b)+T[8]+2272392833&4294967295,S=v+(_<<11&4294967295|_>>>21),_=b+(S^v^I)+T[11]+1839030562&4294967295,b=S+(_<<16&4294967295|_>>>16),_=I+(b^S^v)+T[14]+4259657740&4294967295,I=b+(_<<23&4294967295|_>>>9),_=v+(I^b^S)+T[1]+2763975236&4294967295,v=I+(_<<4&4294967295|_>>>28),_=S+(v^I^b)+T[4]+1272893353&4294967295,S=v+(_<<11&4294967295|_>>>21),_=b+(S^v^I)+T[7]+4139469664&4294967295,b=S+(_<<16&4294967295|_>>>16),_=I+(b^S^v)+T[10]+3200236656&4294967295,I=b+(_<<23&4294967295|_>>>9),_=v+(I^b^S)+T[13]+681279174&4294967295,v=I+(_<<4&4294967295|_>>>28),_=S+(v^I^b)+T[0]+3936430074&4294967295,S=v+(_<<11&4294967295|_>>>21),_=b+(S^v^I)+T[3]+3572445317&4294967295,b=S+(_<<16&4294967295|_>>>16),_=I+(b^S^v)+T[6]+76029189&4294967295,I=b+(_<<23&4294967295|_>>>9),_=v+(I^b^S)+T[9]+3654602809&4294967295,v=I+(_<<4&4294967295|_>>>28),_=S+(v^I^b)+T[12]+3873151461&4294967295,S=v+(_<<11&4294967295|_>>>21),_=b+(S^v^I)+T[15]+530742520&4294967295,b=S+(_<<16&4294967295|_>>>16),_=I+(b^S^v)+T[2]+3299628645&4294967295,I=b+(_<<23&4294967295|_>>>9),_=v+(b^(I|~S))+T[0]+4096336452&4294967295,v=I+(_<<6&4294967295|_>>>26),_=S+(I^(v|~b))+T[7]+1126891415&4294967295,S=v+(_<<10&4294967295|_>>>22),_=b+(v^(S|~I))+T[14]+2878612391&4294967295,b=S+(_<<15&4294967295|_>>>17),_=I+(S^(b|~v))+T[5]+4237533241&4294967295,I=b+(_<<21&4294967295|_>>>11),_=v+(b^(I|~S))+T[12]+1700485571&4294967295,v=I+(_<<6&4294967295|_>>>26),_=S+(I^(v|~b))+T[3]+2399980690&4294967295,S=v+(_<<10&4294967295|_>>>22),_=b+(v^(S|~I))+T[10]+4293915773&4294967295,b=S+(_<<15&4294967295|_>>>17),_=I+(S^(b|~v))+T[1]+2240044497&4294967295,I=b+(_<<21&4294967295|_>>>11),_=v+(b^(I|~S))+T[8]+1873313359&4294967295,v=I+(_<<6&4294967295|_>>>26),_=S+(I^(v|~b))+T[15]+4264355552&4294967295,S=v+(_<<10&4294967295|_>>>22),_=b+(v^(S|~I))+T[6]+2734768916&4294967295,b=S+(_<<15&4294967295|_>>>17),_=I+(S^(b|~v))+T[13]+1309151649&4294967295,I=b+(_<<21&4294967295|_>>>11),_=v+(b^(I|~S))+T[4]+4149444226&4294967295,v=I+(_<<6&4294967295|_>>>26),_=S+(I^(v|~b))+T[11]+3174756917&4294967295,S=v+(_<<10&4294967295|_>>>22),_=b+(v^(S|~I))+T[2]+718787259&4294967295,b=S+(_<<15&4294967295|_>>>17),_=I+(S^(b|~v))+T[9]+3951481745&4294967295,D.g[0]=D.g[0]+v&4294967295,D.g[1]=D.g[1]+(b+(_<<21&4294967295|_>>>11))&4294967295,D.g[2]=D.g[2]+b&4294967295,D.g[3]=D.g[3]+S&4294967295}r.prototype.u=function(D,v){v===void 0&&(v=D.length);for(var I=v-this.blockSize,T=this.B,b=this.h,S=0;S<v;){if(b==0)for(;S<=I;)i(this,D,S),S+=this.blockSize;if(typeof D=="string"){for(;S<v;)if(T[b++]=D.charCodeAt(S++),b==this.blockSize){i(this,T),b=0;break}}else for(;S<v;)if(T[b++]=D[S++],b==this.blockSize){i(this,T),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var v=1;v<D.length-8;++v)D[v]=0;var I=8*this.o;for(v=D.length-8;v<D.length;++v)D[v]=I&255,I/=256;for(this.u(D),D=Array(16),v=I=0;4>v;++v)for(var T=0;32>T;T+=8)D[I++]=this.g[v]>>>T&255;return D};function o(D,v){var I=a;return Object.prototype.hasOwnProperty.call(I,D)?I[D]:I[D]=v(D)}function s(D,v){this.h=v;for(var I=[],T=!0,b=D.length-1;0<=b;b--){var S=D[b]|0;T&&S==v||(I[b]=S,T=!1)}this.g=I}var a={};function u(D){return-128<=D&&128>D?o(D,function(v){return new s([v|0],0>v?-1:0)}):new s([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return R(l(-D));for(var v=[],I=1,T=0;D>=I;T++)v[T]=D/I|0,I*=4294967296;return new s(v,0)}function h(D,v){if(D.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(D.charAt(0)=="-")return R(h(D.substring(1),v));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),T=p,b=0;b<D.length;b+=8){var S=Math.min(8,D.length-b),_=parseInt(D.substring(b,b+S),v);8>S?(S=l(Math.pow(v,S)),T=T.j(S).add(l(_))):(T=T.j(I),T=T.add(l(_)))}return T}var p=u(0),g=u(1),m=u(16777216);t=s.prototype,t.m=function(){if(A(this))return-R(this).m();for(var D=0,v=1,I=0;I<this.g.length;I++){var T=this.i(I);D+=(0<=T?T:4294967296+T)*v,v*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(w(this))return"0";if(A(this))return"-"+R(this).toString(D);for(var v=l(Math.pow(D,6)),I=this,T="";;){var b=de(I,v).g;I=k(I,b.j(v));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(D);if(I=b,w(I))return S+T;for(;6>S.length;)S="0"+S;T=S+T}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function w(D){if(D.h!=0)return!1;for(var v=0;v<D.g.length;v++)if(D.g[v]!=0)return!1;return!0}function A(D){return D.h==-1}t.l=function(D){return D=k(this,D),A(D)?-1:w(D)?0:1};function R(D){for(var v=D.g.length,I=[],T=0;T<v;T++)I[T]=~D.g[T];return new s(I,~D.h).add(g)}t.abs=function(){return A(this)?R(this):this},t.add=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],T=0,b=0;b<=v;b++){var S=T+(this.i(b)&65535)+(D.i(b)&65535),_=(S>>>16)+(this.i(b)>>>16)+(D.i(b)>>>16);T=_>>>16,S&=65535,_&=65535,I[b]=_<<16|S}return new s(I,I[I.length-1]&-2147483648?-1:0)};function k(D,v){return D.add(R(v))}t.j=function(D){if(w(this)||w(D))return p;if(A(this))return A(D)?R(this).j(R(D)):R(R(this).j(D));if(A(D))return R(this.j(R(D)));if(0>this.l(m)&&0>D.l(m))return l(this.m()*D.m());for(var v=this.g.length+D.g.length,I=[],T=0;T<2*v;T++)I[T]=0;for(T=0;T<this.g.length;T++)for(var b=0;b<D.g.length;b++){var S=this.i(T)>>>16,_=this.i(T)&65535,Nn=D.i(b)>>>16,Ps=D.i(b)&65535;I[2*T+2*b]+=_*Ps,V(I,2*T+2*b),I[2*T+2*b+1]+=S*Ps,V(I,2*T+2*b+1),I[2*T+2*b+1]+=_*Nn,V(I,2*T+2*b+1),I[2*T+2*b+2]+=S*Nn,V(I,2*T+2*b+2)}for(T=0;T<v;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=v;T<2*v;T++)I[T]=0;return new s(I,0)};function V(D,v){for(;(D[v]&65535)!=D[v];)D[v+1]+=D[v]>>>16,D[v]&=65535,v++}function B(D,v){this.g=D,this.h=v}function de(D,v){if(w(v))throw Error("division by zero");if(w(D))return new B(p,p);if(A(D))return v=de(R(D),v),new B(R(v.g),R(v.h));if(A(v))return v=de(D,R(v)),new B(R(v.g),v.h);if(30<D.g.length){if(A(D)||A(v))throw Error("slowDivide_ only works with positive integers.");for(var I=g,T=v;0>=T.l(D);)I=Fe(I),T=Fe(T);var b=ge(I,1),S=ge(T,1);for(T=ge(T,2),I=ge(I,2);!w(T);){var _=S.add(T);0>=_.l(D)&&(b=b.add(I),S=_),T=ge(T,1),I=ge(I,1)}return v=k(D,b.j(v)),new B(b,v)}for(b=p;0<=D.l(v);){for(I=Math.max(1,Math.floor(D.m()/v.m())),T=Math.ceil(Math.log(I)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),S=l(I),_=S.j(v);A(_)||0<_.l(D);)I-=T,S=l(I),_=S.j(v);w(S)&&(S=g),b=b.add(S),D=k(D,_)}return new B(b,D)}t.A=function(D){return de(this,D).h},t.and=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)&D.i(T);return new s(I,this.h&D.h)},t.or=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)|D.i(T);return new s(I,this.h|D.h)},t.xor=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)^D.i(T);return new s(I,this.h^D.h)};function Fe(D){for(var v=D.g.length+1,I=[],T=0;T<v;T++)I[T]=D.i(T)<<1|D.i(T-1)>>>31;return new s(I,D.h)}function ge(D,v){var I=v>>5;v%=32;for(var T=D.g.length-I,b=[],S=0;S<T;S++)b[S]=0<v?D.i(S+I)>>>v|D.i(S+I+1)<<32-v:D.i(S+I);return new s(b,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Fv=oR.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,or=oR.Integer=s}).apply(typeof iR<"u"?iR:typeof self<"u"?self:typeof window<"u"?window:{});var Ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},sr={};var Vv,wH,cs,Uv,yc,Eh,jv,Bv,$v;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ih=="object"&&Ih];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var y=0;y<c.length-1;y++){var C=c[y];if(!(C in f))break e;f=f[C]}c=c[c.length-1],y=f[c],d=d(y),d!=y&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,y=!1,C={next:function(){if(!y&&f<c.length){var N=f++;return{value:d(N,c[N]),done:!1}}return y=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,y),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function g(c,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function m(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var y=f.slice();return y.push.apply(y,arguments),c.apply(this,y)}}function w(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(y,C,N){for(var O=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)O[Ee-2]=arguments[Ee];return d.prototype[C].apply(y,O)}}function A(c){let d=c.length;if(0<d){let f=Array(d);for(let y=0;y<d;y++)f[y]=c[y];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let y=arguments[f];if(u(y)){let C=c.length||0,N=y.length||0;c.length=C+N;for(let O=0;O<N;O++)c[C+O]=y[O]}else c.push(y)}}class k{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function V(c){return/^[\s\xa0]*$/.test(c)}function B(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function de(c){return de[" "](c),c}de[" "]=function(){};var Fe=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function ge(c,d,f){for(let y in c)d.call(f,c[y],y,c)}function D(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(c,d){let f,y;for(let C=1;C<arguments.length;C++){y=arguments[C];for(f in y)c[f]=y[f];for(let N=0;N<I.length;N++)f=I[N],Object.prototype.hasOwnProperty.call(y,f)&&(c[f]=y[f])}}function b(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function _(){var c=Sf;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Nn{constructor(){this.h=this.g=null}add(d,f){let y=Ps.get();y.set(d,f),this.h?this.h.next=y:this.g=y,this.h=y}}var Ps=new k(()=>new OM,c=>c.reset());class OM{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let xs,ks=!1,Sf=new Nn,cE=()=>{let c=a.Promise.resolve(void 0);xs=()=>{c.then(LM)}};var LM=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(f){S(f)}var d=Ps;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}ks=!1};function fr(){this.s=this.s,this.C=this.C}fr.prototype.s=!1,fr.prototype.ma=function(){this.s||(this.s=!0,this.N())},fr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function rt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}rt.prototype.h=function(){this.defaultPrevented=!0};var FM=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Os(c,d){if(rt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,y=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Fe){e:{try{de(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:VM[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Os.aa.h.call(this)}}w(Os,rt);var VM={2:"touch",3:"pen",4:"mouse"};Os.prototype.h=function(){Os.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ls="closure_listenable_"+(1e6*Math.random()|0),UM=0;function jM(c,d,f,y,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!y,this.ha=C,this.key=++UM,this.da=this.fa=!1}function Bc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function $c(c){this.src=c,this.g={},this.h=0}$c.prototype.add=function(c,d,f,y,C){var N=c.toString();c=this.g[N],c||(c=this.g[N]=[],this.h++);var O=Rf(c,d,y,C);return-1<O?(d=c[O],f||(d.fa=!1)):(d=new jM(d,this.src,N,!!y,C),d.fa=f,c.push(d)),d};function Af(c,d){var f=d.type;if(f in c.g){var y=c.g[f],C=Array.prototype.indexOf.call(y,d,void 0),N;(N=0<=C)&&Array.prototype.splice.call(y,C,1),N&&(Bc(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Rf(c,d,f,y){for(var C=0;C<c.length;++C){var N=c[C];if(!N.da&&N.listener==d&&N.capture==!!f&&N.ha==y)return C}return-1}var Nf="closure_lm_"+(1e6*Math.random()|0),Mf={};function uE(c,d,f,y,C){if(y&&y.once)return dE(c,d,f,y,C);if(Array.isArray(d)){for(var N=0;N<d.length;N++)uE(c,d[N],f,y,C);return null}return f=Of(f),c&&c[Ls]?c.K(d,f,l(y)?!!y.capture:!!y,C):lE(c,d,f,!1,y,C)}function lE(c,d,f,y,C,N){if(!d)throw Error("Invalid event type");var O=l(C)?!!C.capture:!!C,Ee=xf(c);if(Ee||(c[Nf]=Ee=new $c(c)),f=Ee.add(d,f,y,O,N),f.proxy)return f;if(y=BM(),f.proxy=y,y.src=c,y.listener=f,c.addEventListener)FM||(C=O),C===void 0&&(C=!1),c.addEventListener(d.toString(),y,C);else if(c.attachEvent)c.attachEvent(fE(d.toString()),y);else if(c.addListener&&c.removeListener)c.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return f}function BM(){function c(f){return d.call(c.src,c.listener,f)}let d=$M;return c}function dE(c,d,f,y,C){if(Array.isArray(d)){for(var N=0;N<d.length;N++)dE(c,d[N],f,y,C);return null}return f=Of(f),c&&c[Ls]?c.L(d,f,l(y)?!!y.capture:!!y,C):lE(c,d,f,!0,y,C)}function hE(c,d,f,y,C){if(Array.isArray(d))for(var N=0;N<d.length;N++)hE(c,d[N],f,y,C);else y=l(y)?!!y.capture:!!y,f=Of(f),c&&c[Ls]?(c=c.i,d=String(d).toString(),d in c.g&&(N=c.g[d],f=Rf(N,f,y,C),-1<f&&(Bc(N[f]),Array.prototype.splice.call(N,f,1),N.length==0&&(delete c.g[d],c.h--)))):c&&(c=xf(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Rf(d,f,y,C)),(f=-1<c?d[c]:null)&&Pf(f))}function Pf(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Ls])Af(d.i,c);else{var f=c.type,y=c.proxy;d.removeEventListener?d.removeEventListener(f,y,c.capture):d.detachEvent?d.detachEvent(fE(f),y):d.addListener&&d.removeListener&&d.removeListener(y),(f=xf(d))?(Af(f,c),f.h==0&&(f.src=null,d[Nf]=null)):Bc(c)}}}function fE(c){return c in Mf?Mf[c]:Mf[c]="on"+c}function $M(c,d){if(c.da)c=!0;else{d=new Os(d,this);var f=c.listener,y=c.ha||c.src;c.fa&&Pf(c),c=f.call(y,d)}return c}function xf(c){return c=c[Nf],c instanceof $c?c:null}var kf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Of(c){return typeof c=="function"?c:(c[kf]||(c[kf]=function(d){return c.handleEvent(d)}),c[kf])}function it(){fr.call(this),this.i=new $c(this),this.M=this,this.F=null}w(it,fr),it.prototype[Ls]=!0,it.prototype.removeEventListener=function(c,d,f,y){hE(this,c,d,f,y)};function pt(c,d){var f,y=c.F;if(y)for(f=[];y;y=y.F)f.push(y);if(c=c.M,y=d.type||d,typeof d=="string")d=new rt(d,c);else if(d instanceof rt)d.target=d.target||c;else{var C=d;d=new rt(y,c),T(d,C)}if(C=!0,f)for(var N=f.length-1;0<=N;N--){var O=d.g=f[N];C=Hc(O,y,!0,d)&&C}if(O=d.g=c,C=Hc(O,y,!0,d)&&C,C=Hc(O,y,!1,d)&&C,f)for(N=0;N<f.length;N++)O=d.g=f[N],C=Hc(O,y,!1,d)&&C}it.prototype.N=function(){if(it.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],y=0;y<f.length;y++)Bc(f[y]);delete c.g[d],c.h--}}this.F=null},it.prototype.K=function(c,d,f,y){return this.i.add(String(c),d,!1,f,y)},it.prototype.L=function(c,d,f,y){return this.i.add(String(c),d,!0,f,y)};function Hc(c,d,f,y){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,N=0;N<d.length;++N){var O=d[N];if(O&&!O.da&&O.capture==f){var Ee=O.listener,Ze=O.ha||O.src;O.fa&&Af(c.i,O),C=Ee.call(Ze,y)!==!1&&C}}return C&&!y.defaultPrevented}function pE(c,d,f){if(typeof c=="function")f&&(c=g(c,f));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function gE(c){c.g=pE(()=>{c.g=null,c.i&&(c.i=!1,gE(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class HM extends fr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:gE(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fs(c){fr.call(this),this.h=c,this.g={}}w(Fs,fr);var mE=[];function yE(c){ge(c.g,function(d,f){this.g.hasOwnProperty(f)&&Pf(d)},c),c.g={}}Fs.prototype.N=function(){Fs.aa.N.call(this),yE(this)},Fs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Lf=a.JSON.stringify,zM=a.JSON.parse,qM=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Ff(){}Ff.prototype.h=null;function vE(c){return c.h||(c.h=c.i())}function _E(){}var Vs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Vf(){rt.call(this,"d")}w(Vf,rt);function Uf(){rt.call(this,"c")}w(Uf,rt);var Jr={},IE=null;function zc(){return IE=IE||new it}Jr.La="serverreachability";function EE(c){rt.call(this,Jr.La,c)}w(EE,rt);function Us(c){let d=zc();pt(d,new EE(d))}Jr.STAT_EVENT="statevent";function wE(c,d){rt.call(this,Jr.STAT_EVENT,c),this.stat=d}w(wE,rt);function gt(c){let d=zc();pt(d,new wE(d,c))}Jr.Ma="timingevent";function TE(c,d){rt.call(this,Jr.Ma,c),this.size=d}w(TE,rt);function js(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Bs(){this.g=!0}Bs.prototype.xa=function(){this.g=!1};function GM(c,d,f,y,C,N){c.info(function(){if(c.g)if(N)for(var O="",Ee=N.split("&"),Ze=0;Ze<Ee.length;Ze++){var pe=Ee[Ze].split("=");if(1<pe.length){var ot=pe[0];pe=pe[1];var st=ot.split("_");O=2<=st.length&&st[1]=="type"?O+(ot+"="+pe+"&"):O+(ot+"=redacted&")}}else O=null;else O=N;return"XMLHTTP REQ ("+y+") [attempt "+C+"]: "+d+`
`+f+`
`+O})}function WM(c,d,f,y,C,N,O){c.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+C+"]: "+d+`
`+f+`
`+N+" "+O})}function Ji(c,d,f,y){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+QM(c,f)+(y?" "+y:"")})}function KM(c,d){c.info(function(){return"TIMEOUT: "+d})}Bs.prototype.info=function(){};function QM(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var y=f[c];if(!(2>y.length)){var C=y[1];if(Array.isArray(C)&&!(1>C.length)){var N=C[0];if(N!="noop"&&N!="stop"&&N!="close")for(var O=1;O<C.length;O++)C[O]=""}}}}return Lf(f)}catch{return d}}var qc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},DE={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},jf;function Gc(){}w(Gc,Ff),Gc.prototype.g=function(){return new XMLHttpRequest},Gc.prototype.i=function(){return{}},jf=new Gc;function pr(c,d,f,y){this.j=c,this.i=d,this.l=f,this.R=y||1,this.U=new Fs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new bE}function bE(){this.i=null,this.g="",this.h=!1}var CE={},Bf={};function $f(c,d,f){c.L=1,c.v=Yc(Mn(d)),c.m=f,c.P=!0,SE(c,null)}function SE(c,d){c.F=Date.now(),Wc(c),c.A=Mn(c.v);var f=c.A,y=c.R;Array.isArray(y)||(y=[String(y)]),BE(f.i,"t",y),c.C=0,f=c.j.J,c.h=new bE,c.g=ow(c.j,f?d:null,!c.m),0<c.O&&(c.M=new HM(g(c.Y,c,c.g),c.O)),d=c.U,f=c.g,y=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(mE[0]=C.toString()),C=mE);for(var N=0;N<C.length;N++){var O=uE(f,C[N],y||d.handleEvent,!1,d.h||d);if(!O)break;d.g[O.key]=O}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Us(),GM(c.i,c.u,c.A,c.l,c.R,c.m)}pr.prototype.ca=function(c){c=c.target;let d=this.M;d&&Pn(c)==3?d.j():this.Y(c)},pr.prototype.Y=function(c){try{if(c==this.g)e:{let st=Pn(this.g);var d=this.g.Ba();let eo=this.g.Z();if(!(3>st)&&(st!=3||this.g&&(this.h.h||this.g.oa()||KE(this.g)))){this.J||st!=4||d==7||(d==8||0>=eo?Us(3):Us(2)),Hf(this);var f=this.g.Z();this.X=f;t:if(AE(this)){var y=KE(this.g);c="";var C=y.length,N=Pn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zr(this),$s(this);var O="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(y[d],{stream:!(N&&d==C-1)});y.length=0,this.h.g+=c,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=f==200,WM(this.i,this.u,this.A,this.l,this.R,st,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,Ze=this.g;if((Ee=Ze.g?Ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(Ee)){var pe=Ee;break t}}pe=null}if(f=pe)Ji(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zf(this,f);else{this.o=!1,this.s=3,gt(12),Zr(this),$s(this);break e}}if(this.P){f=!0;let Jt;for(;!this.J&&this.C<O.length;)if(Jt=YM(this,O),Jt==Bf){st==4&&(this.s=4,gt(14),f=!1),Ji(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==CE){this.s=4,gt(15),Ji(this.i,this.l,O,"[Invalid Chunk]"),f=!1;break}else Ji(this.i,this.l,Jt,null),zf(this,Jt);if(AE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||O.length!=0||this.h.h||(this.s=1,gt(16),f=!1),this.o=this.o&&f,!f)Ji(this.i,this.l,O,"[Invalid Chunked Response]"),Zr(this),$s(this);else if(0<O.length&&!this.W){this.W=!0;var ot=this.j;ot.g==this&&ot.ba&&!ot.M&&(ot.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),Yf(ot),ot.M=!0,gt(11))}}else Ji(this.i,this.l,O,null),zf(this,O);st==4&&Zr(this),this.o&&!this.J&&(st==4?tw(this.j,this):(this.o=!1,Wc(this)))}else fP(this.g),f==400&&0<O.indexOf("Unknown SID")?(this.s=3,gt(12)):(this.s=0,gt(13)),Zr(this),$s(this)}}}catch{}finally{}};function AE(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function YM(c,d){var f=c.C,y=d.indexOf(`
`,f);return y==-1?Bf:(f=Number(d.substring(f,y)),isNaN(f)?CE:(y+=1,y+f>d.length?Bf:(d=d.slice(y,y+f),c.C=y+f,d)))}pr.prototype.cancel=function(){this.J=!0,Zr(this)};function Wc(c){c.S=Date.now()+c.I,RE(c,c.I)}function RE(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=js(g(c.ba,c),d)}function Hf(c){c.B&&(a.clearTimeout(c.B),c.B=null)}pr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(KM(this.i,this.A),this.L!=2&&(Us(),gt(17)),Zr(this),this.s=2,$s(this)):RE(this,this.S-c)};function $s(c){c.j.G==0||c.J||tw(c.j,c)}function Zr(c){Hf(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,yE(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function zf(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||qf(f.h,c))){if(!c.K&&qf(f.h,c)&&f.G==3){try{var y=f.Da.g.parse(d)}catch{y=null}if(Array.isArray(y)&&y.length==3){var C=y;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)tu(f),Xc(f);else break e;Qf(f),gt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=js(g(f.Za,f),6e3));if(1>=PE(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ei(f,11)}else if((c.K||f.g==c)&&tu(f),!V(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let pe=C[d];if(f.T=pe[0],pe=pe[1],f.G==2)if(pe[0]=="c"){f.K=pe[1],f.ia=pe[2];let ot=pe[3];ot!=null&&(f.la=ot,f.j.info("VER="+f.la));let st=pe[4];st!=null&&(f.Aa=st,f.j.info("SVER="+f.Aa));let eo=pe[5];eo!=null&&typeof eo=="number"&&0<eo&&(y=1.5*eo,f.L=y,f.j.info("backChannelRequestTimeoutMs_="+y)),y=f;let Jt=c.g;if(Jt){let ru=Jt.g?Jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ru){var N=y.h;N.g||ru.indexOf("spdy")==-1&&ru.indexOf("quic")==-1&&ru.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(Gf(N,N.h),N.h=null))}if(y.D){let Jf=Jt.g?Jt.g.getResponseHeader("X-HTTP-Session-Id"):null;Jf&&(y.ya=Jf,Ce(y.I,y.D,Jf))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),y=f;var O=c;if(y.qa=iw(y,y.J?y.ia:null,y.W),O.K){xE(y.h,O);var Ee=O,Ze=y.L;Ze&&(Ee.I=Ze),Ee.B&&(Hf(Ee),Wc(Ee)),y.g=O}else XE(y);0<f.i.length&&eu(f)}else pe[0]!="stop"&&pe[0]!="close"||ei(f,7);else f.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?ei(f,7):Kf(f):pe[0]!="noop"&&f.l&&f.l.ta(pe),f.v=0)}}Us(4)}catch{}}var JM=class{constructor(c,d){this.g=c,this.map=d}};function NE(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ME(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function PE(c){return c.h?1:c.g?c.g.size:0}function qf(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Gf(c,d){c.g?c.g.add(d):c.h=d}function xE(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}NE.prototype.cancel=function(){if(this.i=kE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function kE(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return A(c.i)}function ZM(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,y=0;y<f;y++)d.push(c[y]);return d}d=[],f=0;for(y in c)d[f++]=c[y];return d}function XM(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let y in c)d[f++]=y;return d}}}function OE(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=XM(c),y=ZM(c),C=y.length,N=0;N<C;N++)d.call(void 0,y[N],f&&f[N],c)}var LE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eP(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var y=c[f].indexOf("="),C=null;if(0<=y){var N=c[f].substring(0,y);C=c[f].substring(y+1)}else N=c[f];d(N,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Xr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Xr){this.h=c.h,Kc(this,c.j),this.o=c.o,this.g=c.g,Qc(this,c.s),this.l=c.l;var d=c.i,f=new qs;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),FE(this,f),this.m=c.m}else c&&(d=String(c).match(LE))?(this.h=!1,Kc(this,d[1]||"",!0),this.o=Hs(d[2]||""),this.g=Hs(d[3]||"",!0),Qc(this,d[4]),this.l=Hs(d[5]||"",!0),FE(this,d[6]||"",!0),this.m=Hs(d[7]||"")):(this.h=!1,this.i=new qs(null,this.h))}Xr.prototype.toString=function(){var c=[],d=this.j;d&&c.push(zs(d,VE,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(zs(d,VE,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(zs(f,f.charAt(0)=="/"?rP:nP,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",zs(f,oP)),c.join("")};function Mn(c){return new Xr(c)}function Kc(c,d,f){c.j=f?Hs(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Qc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function FE(c,d,f){d instanceof qs?(c.i=d,sP(c.i,c.h)):(f||(d=zs(d,iP)),c.i=new qs(d,c.h))}function Ce(c,d,f){c.i.set(d,f)}function Yc(c){return Ce(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Hs(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function zs(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,tP),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function tP(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var VE=/[#\/\?@]/g,nP=/[#\?:]/g,rP=/[#\?]/g,iP=/[#\?@]/g,oP=/#/g;function qs(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function gr(c){c.g||(c.g=new Map,c.h=0,c.i&&eP(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=qs.prototype,t.add=function(c,d){gr(this),this.i=null,c=Zi(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function UE(c,d){gr(c),d=Zi(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function jE(c,d){return gr(c),d=Zi(c,d),c.g.has(d)}t.forEach=function(c,d){gr(this),this.g.forEach(function(f,y){f.forEach(function(C){c.call(d,C,y,this)},this)},this)},t.na=function(){gr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let y=0;y<d.length;y++){let C=c[y];for(let N=0;N<C.length;N++)f.push(d[y])}return f},t.V=function(c){gr(this);let d=[];if(typeof c=="string")jE(this,c)&&(d=d.concat(this.g.get(Zi(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return gr(this),this.i=null,c=Zi(this,c),jE(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function BE(c,d,f){UE(c,d),0<f.length&&(c.i=null,c.g.set(Zi(c,d),A(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var y=d[f];let N=encodeURIComponent(String(y)),O=this.V(y);for(y=0;y<O.length;y++){var C=N;O[y]!==""&&(C+="="+encodeURIComponent(String(O[y]))),c.push(C)}}return this.i=c.join("&")};function Zi(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function sP(c,d){d&&!c.j&&(gr(c),c.i=null,c.g.forEach(function(f,y){var C=y.toLowerCase();y!=C&&(UE(this,y),BE(this,C,f))},c)),c.j=d}function aP(c,d){let f=new Bs;if(a.Image){let y=new Image;y.onload=m(mr,f,"TestLoadImage: loaded",!0,d,y),y.onerror=m(mr,f,"TestLoadImage: error",!1,d,y),y.onabort=m(mr,f,"TestLoadImage: abort",!1,d,y),y.ontimeout=m(mr,f,"TestLoadImage: timeout",!1,d,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=c}else d(!1)}function cP(c,d){let f=new Bs,y=new AbortController,C=setTimeout(()=>{y.abort(),mr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:y.signal}).then(N=>{clearTimeout(C),N.ok?mr(f,"TestPingServer: ok",!0,d):mr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),mr(f,"TestPingServer: error",!1,d)})}function mr(c,d,f,y,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),y(f)}catch{}}function uP(){this.g=new qM}function lP(c,d,f){let y=f||"";try{OE(c,function(C,N){let O=C;l(C)&&(O=Lf(C)),d.push(y+N+"="+encodeURIComponent(O))})}catch(C){throw d.push(y+"type="+encodeURIComponent("_badmap")),C}}function Gs(c){this.l=c.Ub||null,this.j=c.eb||!1}w(Gs,Ff),Gs.prototype.g=function(){return new Jc(this.l,this.j)},Gs.prototype.i=function(c){return function(){return c}}({});function Jc(c,d){it.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Jc,it),t=Jc.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Ks(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ws(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ks(this)),this.g&&(this.readyState=3,Ks(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$E(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function $E(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Ws(this):Ks(this),this.readyState==3&&$E(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Ws(this))},t.Qa=function(c){this.g&&(this.response=c,Ws(this))},t.ga=function(){this.g&&Ws(this)};function Ws(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ks(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Ks(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Jc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function HE(c){let d="";return ge(c,function(f,y){d+=y,d+=":",d+=f,d+=`\r
`}),d}function Wf(c,d,f){e:{for(y in f){var y=!1;break e}y=!0}y||(f=HE(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Ce(c,d,f))}function Me(c){it.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Me,it);var dP=/^https?$/i,hP=["POST","PUT"];t=Me.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():jf.g(),this.v=this.o?vE(this.o):vE(jf),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(N){zE(this,N);return}if(c=f||"",f=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var C in y)f.set(C,y[C]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(let N of y.keys())f.set(N,y.get(N));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(f.keys()).find(N=>N.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(hP,d,void 0))||y||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[N,O]of f)this.g.setRequestHeader(N,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{WE(this),this.u=!0,this.g.send(c),this.u=!1}catch(N){zE(this,N)}};function zE(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,qE(c),Zc(c)}function qE(c){c.A||(c.A=!0,pt(c,"complete"),pt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,pt(this,"complete"),pt(this,"abort"),Zc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zc(this,!0)),Me.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?GE(this):this.bb())},t.bb=function(){GE(this)};function GE(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Pn(c)!=4||c.Z()!=2)){if(c.u&&Pn(c)==4)pE(c.Ea,0,c);else if(pt(c,"readystatechange"),Pn(c)==4){c.h=!1;try{let O=c.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var y;if(y=O===0){var C=String(c.D).match(LE)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),y=!dP.test(C?C.toLowerCase():"")}f=y}if(f)pt(c,"complete"),pt(c,"success");else{c.m=6;try{var N=2<Pn(c)?c.g.statusText:""}catch{N=""}c.l=N+" ["+c.Z()+"]",qE(c)}}finally{Zc(c)}}}}function Zc(c,d){if(c.g){WE(c);let f=c.g,y=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||pt(c,"ready");try{f.onreadystatechange=y}catch{}}}function WE(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Pn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Pn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),zM(d)}};function KE(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function fP(c){let d={};c=(c.g&&2<=Pn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<c.length;y++){if(V(c[y]))continue;var f=b(c[y]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let N=d[C]||[];d[C]=N,N.push(f)}D(d,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qs(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function QE(c){this.Aa=0,this.i=[],this.j=new Bs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qs("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qs("baseRetryDelayMs",5e3,c),this.cb=Qs("retryDelaySeedMs",1e4,c),this.Wa=Qs("forwardChannelMaxRetries",2,c),this.wa=Qs("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new NE(c&&c.concurrentRequestLimit),this.Da=new uP,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=QE.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,y){gt(0),this.W=c,this.H=d||{},f&&y!==void 0&&(this.H.OSID=f,this.H.OAID=y),this.F=this.X,this.I=iw(this,null,this.W),eu(this)};function Kf(c){if(YE(c),c.G==3){var d=c.U++,f=Mn(c.I);if(Ce(f,"SID",c.K),Ce(f,"RID",d),Ce(f,"TYPE","terminate"),Ys(c,f),d=new pr(c,c.j,d),d.L=2,d.v=Yc(Mn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=ow(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Wc(d)}rw(c)}function Xc(c){c.g&&(Yf(c),c.g.cancel(),c.g=null)}function YE(c){Xc(c),c.u&&(a.clearTimeout(c.u),c.u=null),tu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function eu(c){if(!ME(c.h)&&!c.s){c.s=!0;var d=c.Ga;xs||cE(),ks||(xs(),ks=!0),Sf.add(d,c),c.B=0}}function pP(c,d){return PE(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=js(g(c.Ga,c,d),nw(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new pr(this,this.j,c),N=this.o;if(this.S&&(N?(N=v(N),T(N,this.S)):N=this.S),this.m!==null||this.O||(C.H=N,N=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var y=this.i[f];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(d+=y,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=ZE(this,C,d),f=Mn(this.I),Ce(f,"RID",c),Ce(f,"CVER",22),this.D&&Ce(f,"X-HTTP-Session-Id",this.D),Ys(this,f),N&&(this.O?d="headers="+encodeURIComponent(String(HE(N)))+"&"+d:this.m&&Wf(f,this.m,N)),Gf(this.h,C),this.Ua&&Ce(f,"TYPE","init"),this.P?(Ce(f,"$req",d),Ce(f,"SID","null"),C.T=!0,$f(C,f,null)):$f(C,f,d),this.G=2}}else this.G==3&&(c?JE(this,c):this.i.length==0||ME(this.h)||JE(this))};function JE(c,d){var f;d?f=d.l:f=c.U++;let y=Mn(c.I);Ce(y,"SID",c.K),Ce(y,"RID",f),Ce(y,"AID",c.T),Ys(c,y),c.m&&c.o&&Wf(y,c.m,c.o),f=new pr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=ZE(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Gf(c.h,f),$f(f,y,d)}function Ys(c,d){c.H&&ge(c.H,function(f,y){Ce(d,y,f)}),c.l&&OE({},function(f,y){Ce(d,y,f)})}function ZE(c,d,f){f=Math.min(c.i.length,f);var y=c.l?g(c.l.Na,c.l,c):null;e:{var C=c.i;let N=-1;for(;;){let O=["count="+f];N==-1?0<f?(N=C[0].g,O.push("ofs="+N)):N=0:O.push("ofs="+N);let Ee=!0;for(let Ze=0;Ze<f;Ze++){let pe=C[Ze].g,ot=C[Ze].map;if(pe-=N,0>pe)N=Math.max(0,C[Ze].g-100),Ee=!1;else try{lP(ot,O,"req"+pe+"_")}catch{y&&y(ot)}}if(Ee){y=O.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,y}function XE(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;xs||cE(),ks||(xs(),ks=!0),Sf.add(d,c),c.v=0}}function Qf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=js(g(c.Fa,c),nw(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,ew(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=js(g(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gt(10),Xc(this),ew(this))};function Yf(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function ew(c){c.g=new pr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Mn(c.qa);Ce(d,"RID","rpc"),Ce(d,"SID",c.K),Ce(d,"AID",c.T),Ce(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ce(d,"TO",c.ja),Ce(d,"TYPE","xmlhttp"),Ys(c,d),c.m&&c.o&&Wf(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Yc(Mn(d)),f.m=null,f.P=!0,SE(f,c)}t.Za=function(){this.C!=null&&(this.C=null,Xc(this),Qf(this),gt(19))};function tu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function tw(c,d){var f=null;if(c.g==d){tu(c),Yf(c),c.g=null;var y=2}else if(qf(c.h,d))f=d.D,xE(c.h,d),y=1;else return;if(c.G!=0){if(d.o)if(y==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;y=zc(),pt(y,new TE(y,f)),eu(c)}else XE(c);else if(C=d.s,C==3||C==0&&0<d.X||!(y==1&&pP(c,d)||y==2&&Qf(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:ei(c,5);break;case 4:ei(c,10);break;case 3:ei(c,6);break;default:ei(c,2)}}}function nw(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function ei(c,d){if(c.j.info("Error code "+d),d==2){var f=g(c.fb,c),y=c.Xa;let C=!y;y=new Xr(y||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Kc(y,"https"),Yc(y),C?aP(y.toString(),f):cP(y.toString(),f)}else gt(2);c.G=0,c.l&&c.l.sa(d),rw(c),YE(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function rw(c){if(c.G=0,c.ka=[],c.l){let d=kE(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,A(c.i),c.i.length=0),c.l.ra()}}function iw(c,d,f){var y=f instanceof Xr?Mn(f):new Xr(f);if(y.g!="")d&&(y.g=d+"."+y.g),Qc(y,y.s);else{var C=a.location;y=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var N=new Xr(null);y&&Kc(N,y),d&&(N.g=d),C&&Qc(N,C),f&&(N.l=f),y=N}return f=c.D,d=c.ya,f&&d&&Ce(y,f,d),Ce(y,"VER",c.la),Ys(c,y),y}function ow(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Me(new Gs({eb:f})):new Me(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function sw(){}t=sw.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function nu(){}nu.prototype.g=function(c,d){return new Pt(c,d)};function Pt(c,d){it.call(this),this.g=new QE(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!V(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!V(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Xi(this)}w(Pt,it),Pt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Pt.prototype.close=function(){Kf(this.g)},Pt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Lf(c),c=f);d.i.push(new JM(d.Ya++,c)),d.G==3&&eu(d)},Pt.prototype.N=function(){this.g.l=null,delete this.j,Kf(this.g),delete this.g,Pt.aa.N.call(this)};function aw(c){Vf.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}w(aw,Vf);function cw(){Uf.call(this),this.status=1}w(cw,Uf);function Xi(c){this.g=c}w(Xi,sw),Xi.prototype.ua=function(){pt(this.g,"a")},Xi.prototype.ta=function(c){pt(this.g,new aw(c))},Xi.prototype.sa=function(c){pt(this.g,new cw)},Xi.prototype.ra=function(){pt(this.g,"b")},nu.prototype.createWebChannel=nu.prototype.g,Pt.prototype.send=Pt.prototype.o,Pt.prototype.open=Pt.prototype.m,Pt.prototype.close=Pt.prototype.close,$v=sr.createWebChannelTransport=function(){return new nu},Bv=sr.getStatEventTarget=function(){return zc()},jv=sr.Event=Jr,Eh=sr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qc.NO_ERROR=0,qc.TIMEOUT=8,qc.HTTP_ERROR=6,yc=sr.ErrorCode=qc,DE.COMPLETE="complete",Uv=sr.EventType=DE,_E.EventType=Vs,Vs.OPEN="a",Vs.CLOSE="b",Vs.ERROR="c",Vs.MESSAGE="d",it.prototype.listen=it.prototype.K,cs=sr.WebChannel=_E,wH=sr.FetchXmlHttpFactory=Gs,Me.prototype.listenOnce=Me.prototype.L,Me.prototype.getLastError=Me.prototype.Ka,Me.prototype.getLastErrorCode=Me.prototype.Ba,Me.prototype.getStatus=Me.prototype.Z,Me.prototype.getResponseJson=Me.prototype.Oa,Me.prototype.getResponseText=Me.prototype.oa,Me.prototype.send=Me.prototype.ea,Me.prototype.setWithCredentials=Me.prototype.Ha,Vv=sr.XhrIo=Me}).apply(typeof Ih<"u"?Ih:typeof self<"u"?self:typeof window<"u"?window:{});var sR="@firebase/firestore",aR="4.7.17";var Ye=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ye.UNAUTHENTICATED=new Ye(null),Ye.GOOGLE_CREDENTIALS=new Ye("google-credentials-uid"),Ye.FIRST_PARTY=new Ye("first-party-uid"),Ye.MOCK_USER=new Ye("mock-user");var As="11.9.0";var ji=new Or("@firebase/firestore");function us(){return ji.logLevel}function j(t,...e){if(ji.logLevel<=ue.DEBUG){let n=e.map(OI);ji.debug(`Firestore (${As}): ${t}`,...n)}}function ar(t,...e){if(ji.logLevel<=ue.ERROR){let n=e.map(OI);ji.error(`Firestore (${As}): ${t}`,...n)}}function ms(t,...e){if(ji.logLevel<=ue.WARN){let n=e.map(OI);ji.warn(`Firestore (${As}): ${t}`,...n)}}function OI(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function q(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,ZR(t,r,n)}function ZR(t,e,n){let r=`FIRESTORE (${As}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ar(r),new Error(r)}function ve(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||ZR(e,i,r)}function X(t,e){return t}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=class extends Ut{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var sn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Ah=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Kv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ye.UNAUTHENTICATED))}shutdown(){}},Qv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Yv=class{constructor(e){this.t=e,this.currentUser=Ye.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ve(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new sn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new sn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>E(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new sn)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string",31837,{l:r}),new Ah(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string",2055,{h:e}),new Ye(e)}},Jv=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ye.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Zv=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Jv(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ye.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Rh=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Xv=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ve(this.o===void 0,3512);let r=o=>{o.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,j("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Rh(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ve(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Rh(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function TH(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function XR(){return new TextEncoder}var Nh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=TH(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function ae(t,e){return t<e?-1:t>e?1:0}function e_(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return ae(r,i);{let o=XR(),s=DH(o.encode(cR(t,n)),o.encode(cR(e,n)));return s!==0?s:ae(r,i)}}n+=r>65535?2:1}return ae(t.length,e.length)}function cR(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function DH(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ae(t[n],e[n]);return ae(t.length,e.length)}function ys(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var uR=-62135596800,lR=1e6,nt=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*lR);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<uR)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/lR}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-uR;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ne=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new nt(0,0))}static max(){return new t(new nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var dR="__name__",Mh=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&q(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&q(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return ae(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):e_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return or.fromString(e.substring(4,e.length-2))}},Ne=class t extends Mh{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new L(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},bH=/^[_a-zA-Z][_a-zA-Z0-9]*$/,$t=class t extends Mh{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return bH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===dR}static keyField(){return new t([dR])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new L(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new L(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new L(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new L(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var z=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ne.fromString(e))}static fromName(e){return new t(Ne.fromString(e).popFirst(5))}static empty(){return new t(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ne(e.slice()))}};var Tc=-1,t_=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};t_.UNKNOWN_ID=-1;function CH(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ne.fromTimestamp(r===1e9?new nt(n+1,0):new nt(n,r));return new Bi(i,z.empty(),e)}function SH(t){return new Bi(t.readTime,t.key,Tc)}var Bi=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ne.min(),z.empty(),Tc)}static max(){return new t(ne.max(),z.empty(),Tc)}};function AH(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=z.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}var RH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",n_=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Rs(t){return E(this,null,function*(){if(t.code!==M.FAILED_PRECONDITION||t.message!==RH)throw t;j("LocalStore","Unexpectedly lost primary lease")})}var P=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function NH(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ns(t){return t.name==="IndexedDbTransactionError"}var LI=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>r.writeSequenceNumber(i))}ue(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ce&&this.ce(n),n}}t.le=-1;return t})(),FI=-1;function ff(t){return t==null}function Dc(t){return t===0&&1/t==-1/0}function MH(t){return typeof t=="number"&&Number.isInteger(t)&&!Dc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var eN="";function PH(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=hR(e)),e=xH(t.get(n),e);return hR(e)}function xH(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case eN:n+="";break;default:n+=o}}return n}function hR(t){return t+eN+""}var kH="remoteDocuments",tN="owner";var nN="mutationQueues";var rN="mutations";var iN="documentMutations",OH="remoteDocumentsV14";var oN="remoteDocumentGlobal";var sN="targets";var aN="targetDocuments";var cN="targetGlobal",uN="collectionParents";var lN="clientMetadata";var dN="bundles";var hN="namedQueries";var LH="indexConfiguration";var FH="indexState";var VH="indexEntries";var fN="documentOverlays";var UH="globals";var jH=[nN,rN,iN,kH,sN,tN,cN,aN,lN,oN,uN,dN,hN],UZ=[...jH,fN],BH=[nN,rN,iN,OH,sN,tN,cN,aN,lN,oN,uN,dN,hN,fN],$H=BH,HH=[...$H,LH,FH,VH];var jZ=[...HH,UH];function fR(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Qr(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function pN(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Oe=class t{constructor(e,n){this.comparator=e,this.root=n||bn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,bn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fs(this.root,e,this.comparator,!1)}getReverseIterator(){return new fs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fs(this.root,e,this.comparator,!0)}},fs=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},bn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw q(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw q(27949);return e+(this.isRed()?0:1)}};bn.EMPTY=null,bn.RED=!0,bn.BLACK=!1;bn.EMPTY=new class{constructor(){this.size=0}get key(){throw q(57766)}get value(){throw q(16141)}get color(){throw q(16727)}get left(){throw q(29726)}get right(){throw q(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new bn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Je=class t{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ph(this.data.getIterator())}getIteratorFrom(e){return new Ph(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Ph=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Qt=class t{constructor(e){this.fields=e,e.sort($t.comparator)}static empty(){return new t([])}unionWith(e){let n=new Je($t.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ys(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var xh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ft=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new xh("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ft.EMPTY_BYTE_STRING=new ft("");var zH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cr(t){if(ve(!!t,39018),typeof t=="string"){let e=0,n=zH.exec(t);if(ve(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Re(t.seconds),nanos:Re(t.nanos)}}function Re(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ur(t){return typeof t=="string"?ft.fromBase64String(t):ft.fromUint8Array(t)}var gN="server_timestamp",mN="__type__",yN="__previous_value__",vN="__local_write_time__";function VI(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[mN])===null||n===void 0?void 0:n.stringValue)===gN}function pf(t){let e=t.mapValue.fields[yN];return VI(e)?pf(e):e}function bc(t){let e=cr(t.mapValue.fields[vN].timestampValue);return new nt(e.seconds,e.nanos)}var r_=class{constructor(e,n,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},kh="(default)",Oh=class t{constructor(e,n){this.projectId=e,this.database=n||kh}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===kh}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var UI="__type__",_N="__max__",wh={mapValue:{fields:{__type__:{stringValue:_N}}}},jI="__vector__",vs="value";function qr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?VI(t)?4:EN(t)?9007199254740991:IN(t)?10:11:q(28295,{value:t})}function An(t,e){if(t===e)return!0;let n=qr(t);if(n!==qr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return bc(t).isEqual(bc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=cr(i.timestampValue),a=cr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return ur(i.bytesValue).isEqual(ur(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Re(i.geoPointValue.latitude)===Re(o.geoPointValue.latitude)&&Re(i.geoPointValue.longitude)===Re(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Re(i.integerValue)===Re(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Re(i.doubleValue),a=Re(o.doubleValue);return s===a?Dc(s)===Dc(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return ys(t.arrayValue.values||[],e.arrayValue.values||[],An);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(fR(s)!==fR(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!An(s[u],a[u])))return!1;return!0}(t,e);default:return q(52216,{left:t})}}function Cc(t,e){return(t.values||[]).find(n=>An(n,e))!==void 0}function _s(t,e){if(t===e)return 0;let n=qr(t),r=qr(e);if(n!==r)return ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Re(o.integerValue||o.doubleValue),u=Re(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return pR(t.timestampValue,e.timestampValue);case 4:return pR(bc(t),bc(e));case 5:return e_(t.stringValue,e.stringValue);case 6:return function(o,s){let a=ur(o),u=ur(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ae(a[l],u[l]);if(h!==0)return h}return ae(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ae(Re(o.latitude),Re(s.latitude));return a!==0?a:ae(Re(o.longitude),Re(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return gR(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},g=s.fields||{},m=(a=p[vs])===null||a===void 0?void 0:a.arrayValue,w=(u=g[vs])===null||u===void 0?void 0:u.arrayValue,A=ae(((l=m?.values)===null||l===void 0?void 0:l.length)||0,((h=w?.values)===null||h===void 0?void 0:h.length)||0);return A!==0?A:gR(m,w)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===wh.mapValue&&s===wh.mapValue)return 0;if(o===wh.mapValue)return 1;if(s===wh.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let g=e_(u[p],h[p]);if(g!==0)return g;let m=_s(a[u[p]],l[h[p]]);if(m!==0)return m}return ae(u.length,h.length)}(t.mapValue,e.mapValue);default:throw q(23264,{Pe:n})}}function pR(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);let n=cr(t),r=cr(e),i=ae(n.seconds,r.seconds);return i!==0?i:ae(n.nanos,r.nanos)}function gR(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=_s(n[i],r[i]);if(o)return o}return ae(n.length,r.length)}function Is(t){return i_(t)}function i_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=cr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ur(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=i_(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${i_(n.fields[s])}`;return i+"}"}(t.mapValue):q(61005,{value:t})}function bh(t){switch(qr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=pf(t);return e?16+bh(e):16;case 5:return 2*t.stringValue.length;case 6:return ur(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+bh(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Qr(r.fields,(o,s)=>{i+=o.length+bh(s)}),i}(t.mapValue);default:throw q(13486,{value:t})}}function mR(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function o_(t){return!!t&&"integerValue"in t}function BI(t){return!!t&&"arrayValue"in t}function yR(t){return!!t&&"nullValue"in t}function vR(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ch(t){return!!t&&"mapValue"in t}function IN(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[UI])===null||n===void 0?void 0:n.stringValue)===jI}function _c(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Qr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=_c(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_c(t.arrayValue.values[n]);return e}return Object.assign({},t)}function EN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===_N}var $Z={mapValue:{fields:{[UI]:{stringValue:jI},[vs]:{arrayValue:{}}}}};var Bt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ch(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_c(n)}setAll(e){let n=$t.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=_c(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Ch(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return An(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ch(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Qr(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(_c(this.value))}};function wN(t){let e=[];return Qr(t.fields,(n,r)=>{let i=new $t([n]);if(Ch(r)){let o=wN(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Qt(e)}var an=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ne.min(),ne.min(),ne.min(),Bt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ne.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ne.min(),ne.min(),Bt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ne.min(),ne.min(),Bt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Es=class{constructor(e,n){this.position=e,this.inclusive=n}};function _R(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=z.comparator(z.fromName(s.referenceValue),n.key):r=_s(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function IR(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!An(t.position[n],e.position[n]))return!1;return!0}var $i=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function qH(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Lh=class{},He=class t extends Lh{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new a_(e,n,r):n==="array-contains"?new l_(e,r):n==="in"?new d_(e,r):n==="not-in"?new h_(e,r):n==="array-contains-any"?new f_(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new c_(e,r):new u_(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(_s(n,this.value)):n!==null&&qr(this.value)===qr(n)&&this.matchesComparison(_s(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},cn=class t extends Lh{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new t(e,n)}matches(e){return TN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}};function TN(t){return t.op==="and"}function DN(t){return GH(t)&&TN(t)}function GH(t){for(let e of t.filters)if(e instanceof cn)return!1;return!0}function s_(t){if(t instanceof He)return t.field.canonicalString()+t.op.toString()+Is(t.value);if(DN(t))return t.filters.map(e=>s_(e)).join(",");{let e=t.filters.map(n=>s_(n)).join(",");return`${t.op}(${e})`}}function bN(t,e){return t instanceof He?function(r,i){return i instanceof He&&r.op===i.op&&r.field.isEqual(i.field)&&An(r.value,i.value)}(t,e):t instanceof cn?function(r,i){return i instanceof cn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&bN(s,i.filters[a]),!0):!1}(t,e):void q(19439)}function CN(t){return t instanceof He?function(n){return`${n.field.canonicalString()} ${n.op} ${Is(n.value)}`}(t):t instanceof cn?function(n){return n.op.toString()+" {"+n.getFilters().map(CN).join(" ,")+"}"}(t):"Filter"}var a_=class extends He{constructor(e,n,r){super(e,n,r),this.key=z.fromName(r.referenceValue)}matches(e){let n=z.comparator(e.key,this.key);return this.matchesComparison(n)}},c_=class extends He{constructor(e,n){super(e,"in",n),this.keys=SN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},u_=class extends He{constructor(e,n){super(e,"not-in",n),this.keys=SN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function SN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>z.fromName(r.referenceValue))}var l_=class extends He{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return BI(n)&&Cc(n.arrayValue,this.value)}},d_=class extends He{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Cc(this.value.arrayValue,n)}},h_=class extends He{constructor(e,n){super(e,"not-in",n)}matches(e){if(Cc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Cc(this.value.arrayValue,n)}},f_=class extends He{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!BI(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Cc(this.value.arrayValue,r))}};var p_=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Ie=null}};function ER(t,e=null,n=[],r=[],i=null,o=null,s=null){return new p_(t,e,n,r,i,o,s)}function $I(t){let e=X(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>s_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),ff(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Is(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Is(r)).join(",")),e.Ie=n}return e.Ie}function HI(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!qH(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!bN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!IR(t.startAt,e.startAt)&&IR(t.endAt,e.endAt)}function g_(t){return z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Gr=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}};function WH(t,e,n,r,i,o,s,a){return new Gr(t,e,n,r,i,o,s,a)}function zI(t){return new Gr(t)}function wR(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function AN(t){return t.collectionGroup!==null}function Ic(t){let e=X(t);if(e.Ee===null){e.Ee=[];let n=new Set;for(let o of e.explicitOrderBy)e.Ee.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Je($t.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new $i(o,r))}),n.has($t.keyField().canonicalString())||e.Ee.push(new $i($t.keyField(),r))}return e.Ee}function Cn(t){let e=X(t);return e.de||(e.de=KH(e,Ic(t))),e.de}function KH(t,e){if(t.limitType==="F")return ER(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new $i(i.field,o)});let n=t.endAt?new Es(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Es(t.startAt.position,t.startAt.inclusive):null;return ER(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function m_(t,e){let n=t.filters.concat([e]);return new Gr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function y_(t,e,n){return new Gr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function gf(t,e){return HI(Cn(t),Cn(e))&&t.limitType===e.limitType}function RN(t){return`${$I(Cn(t))}|lt:${t.limitType}`}function ls(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>CN(i)).join(", ")}]`),ff(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Is(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Is(i)).join(",")),`Target(${r})`}(Cn(t))}; limitType=${t.limitType})`}function mf(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):z.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of Ic(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=_R(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Ic(r),i)||r.endAt&&!function(s,a,u){let l=_R(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Ic(r),i))}(t,e)}function QH(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function NN(t){return(e,n)=>{let r=!1;for(let i of Ic(t)){let o=YH(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function YH(t,e,n){let r=t.field.isKeyField()?z.comparator(e.key,n.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?_s(u,l):q(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return q(19790,{direction:t.dir})}}var lr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Qr(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return pN(this.inner)}size(){return this.innerSize}};var JH=new Oe(z.comparator);function dr(){return JH}var MN=new Oe(z.comparator);function vc(...t){let e=MN;for(let n of t)e=e.insert(n.key,n);return e}function PN(t){let e=MN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Fi(){return Ec()}function xN(){return Ec()}function Ec(){return new lr(t=>t.toString(),(t,e)=>t.isEqual(e))}var ZH=new Oe(z.comparator),XH=new Je(z.comparator);function le(...t){let e=XH;for(let n of t)e=e.add(n);return e}var e4=new Je(ae);function t4(){return e4}function qI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dc(e)?"-0":e}}function kN(t){return{integerValue:""+t}}function ON(t,e){return MH(e)?kN(e):qI(t,e)}var ws=class{constructor(){this._=void 0}};function n4(t,e,n){return t instanceof Ts?function(i,o){let s={fields:{[mN]:{stringValue:gN},[vN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&VI(o)&&(o=pf(o)),o&&(s.fields[yN]=o),{mapValue:s}}(n,e):t instanceof Hi?FN(t,e):t instanceof zi?VN(t,e):function(i,o){let s=LN(i,o),a=TR(s)+TR(i.Re);return o_(s)&&o_(i.Re)?kN(a):qI(i.serializer,a)}(t,e)}function r4(t,e,n){return t instanceof Hi?FN(t,e):t instanceof zi?VN(t,e):n}function LN(t,e){return t instanceof qi?function(r){return o_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Ts=class extends ws{},Hi=class extends ws{constructor(e){super(),this.elements=e}};function FN(t,e){let n=UN(e);for(let r of t.elements)n.some(i=>An(i,r))||n.push(r);return{arrayValue:{values:n}}}var zi=class extends ws{constructor(e){super(),this.elements=e}};function VN(t,e){let n=UN(e);for(let r of t.elements)n=n.filter(i=>!An(i,r));return{arrayValue:{values:n}}}var qi=class extends ws{constructor(e,n){super(),this.serializer=e,this.Re=n}};function TR(t){return Re(t.integerValue||t.doubleValue)}function UN(t){return BI(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var v_=class{constructor(e,n){this.field=e,this.transform=n}};function i4(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Hi&&i instanceof Hi||r instanceof zi&&i instanceof zi?ys(r.elements,i.elements,An):r instanceof qi&&i instanceof qi?An(r.Re,i.Re):r instanceof Ts&&i instanceof Ts}(t.transform,e.transform)}var __=class{constructor(e,n){this.version=e,this.transformResults=n}},Yt=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Sh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Ds=class{};function jN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Sc(t.key,Yt.none()):new Gi(t.key,t.data,Yt.none());{let n=t.data,r=Bt.empty(),i=new Je($t.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Rn(t.key,r,new Qt(i.toArray()),Yt.none())}}function o4(t,e,n){t instanceof Gi?function(i,o,s){let a=i.value.clone(),u=bR(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Rn?function(i,o,s){if(!Sh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=bR(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(BN(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function wc(t,e,n,r){return t instanceof Gi?function(o,s,a,u){if(!Sh(o.precondition,s))return a;let l=o.value.clone(),h=CR(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Rn?function(o,s,a,u){if(!Sh(o.precondition,s))return a;let l=CR(o.fieldTransforms,u,s),h=s.data;return h.setAll(BN(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,a){return Sh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function s4(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=LN(r.transform,i||null);o!=null&&(n===null&&(n=Bt.empty()),n.set(r.field,o))}return n||null}function DR(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ys(r,i,(o,s)=>i4(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Gi=class extends Ds{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Rn=class extends Ds{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function BN(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function bR(t,e,n){let r=new Map;ve(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,r4(s,a,n[i]))}return r}function CR(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,n4(o,s,e))}return r}var Sc=class extends Ds{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},I_=class extends Ds{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var E_=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&o4(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=wc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=wc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=xN();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=jN(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&ys(this.mutations,e.mutations,(n,r)=>DR(n,r))&&ys(this.baseMutations,e.baseMutations,(n,r)=>DR(n,r))}},w_=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ve(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return ZH}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var T_=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var D_=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Be,fe;function a4(t){switch(t){case M.OK:return q(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return q(15467,{code:t})}}function $N(t){if(t===void 0)return ar("GRPC error has no .code"),M.UNKNOWN;switch(t){case Be.OK:return M.OK;case Be.CANCELLED:return M.CANCELLED;case Be.UNKNOWN:return M.UNKNOWN;case Be.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Be.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Be.INTERNAL:return M.INTERNAL;case Be.UNAVAILABLE:return M.UNAVAILABLE;case Be.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Be.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Be.NOT_FOUND:return M.NOT_FOUND;case Be.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Be.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Be.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Be.ABORTED:return M.ABORTED;case Be.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Be.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Be.DATA_LOSS:return M.DATA_LOSS;default:return q(39323,{code:t})}}(fe=Be||(Be={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";var SR=null;var c4=new or([4294967295,4294967295],0);function AR(t){let e=XR().encode(t),n=new Fv;return n.update(e),new Uint8Array(n.digest())}function RR(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new or([n,r],0),new or([i,o],0)]}var b_=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Vi(`Invalid padding: ${n}`);if(r<0)throw new Vi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Vi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Vi(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=or.fromNumber(this.pe)}we(e,n,r){let i=e.add(n.multiply(or.fromNumber(r)));return i.compare(c4)===1&&(i=new or([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;let n=AR(e),[r,i]=RR(n);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);if(!this.be(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.pe===0)return;let n=AR(e),[r,i]=RR(n);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);this.Se(s)}}Se(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Vi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Fh=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Ac.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ne.min(),i,new Oe(ae),dr(),le())}},Ac=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,le(),le(),le())}};var ps=class{constructor(e,n,r,i){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=i}},Vh=class{constructor(e,n){this.targetId=e,this.Ce=n}},Uh=class{constructor(e,n,r=ft.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},jh=class{constructor(){this.Fe=0,this.Me=NR(),this.xe=ft.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=le(),n=le(),r=le();return this.Me.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:q(38017,{changeType:o})}}),new Ac(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=NR()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ve(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}},C_=class{constructor(e){this.ze=e,this.je=new Map,this.He=dr(),this.Je=Th(),this.Ye=Th(),this.Ze=new Oe(ae)}Xe(e){for(let n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(let n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{let r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:q(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,i)=>{this.it(i)&&n(i)})}ot(e){let n=e.targetId,r=e.Ce.count,i=this._t(n);if(i){let o=i.target;if(g_(o))if(r===0){let s=new z(o.path);this.tt(n,s,an.newNoDocument(s,ne.min()))}else ve(r===1,20013,{expectedCount:r});else{let s=this.ut(n);if(s!==r){let a=this.ct(e),u=a?this.lt(a,e,s):1;if(u!==0){this.st(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,l)}SR?.ht(function(h,p,g,m,w){var A,R,k,V,B,de;let Fe={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},ge=p.unchangedNames;return ge&&(Fe.bloomFilter={applied:w===0,hashCount:(A=ge?.hashCount)!==null&&A!==void 0?A:0,bitmapLength:(V=(k=(R=ge?.bits)===null||R===void 0?void 0:R.bitmap)===null||k===void 0?void 0:k.length)!==null&&V!==void 0?V:0,padding:(de=(B=ge?.bits)===null||B===void 0?void 0:B.padding)!==null&&de!==void 0?de:0,mightContain:D=>{var v;return(v=m?.mightContain(D))!==null&&v!==void 0&&v}}),Fe}(s,e.Ce,this.ze.Pt(),a,u))}}}}ct(e){let n=e.Ce.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=ur(r).toUint8Array()}catch(u){if(u instanceof xh)return ms("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new b_(s,i,o)}catch(u){return ms(u instanceof Vi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.pe===0?null:a}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){let r=this.ze.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.ze.Pt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.tt(n,o,null),i++)}),i}It(e){let n=new Map;this.je.forEach((o,s)=>{let a=this._t(s);if(a){if(o.current&&g_(a.target)){let u=new z(a.target.path);this.Et(u).has(s)||this.dt(s,u)||this.tt(s,u,an.newNoDocument(u,e))}o.Le&&(n.set(s,o.qe()),o.Qe())}});let r=le();this.Ye.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this._t(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.He.forEach((o,s)=>s.setReadTime(e));let i=new Fh(e,n,this.Ze,this.He,r);return this.He=dr(),this.Je=Th(),this.Ye=Th(),this.Ze=new Oe(ae),i}et(e,n){if(!this.it(e))return;let r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;let i=this.rt(e);this.dt(e,n)?i.$e(n,1):i.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){let n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new jh,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Je(ae),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Je(ae),this.Je=this.Je.insert(e,n)),n}it(e){let n=this._t(e)!==null;return n||j("WatchChangeAggregator","Detected inactive target",e),n}_t(e){let n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new jh),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}};function Th(){return new Oe(z.comparator)}function NR(){return new Oe(z.comparator)}var u4={asc:"ASCENDING",desc:"DESCENDING"},l4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},d4={and:"AND",or:"OR"},S_=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function A_(t,e){return t.useProto3Json||ff(e)?e:{value:e}}function Bh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function HN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function h4(t,e){return Bh(t,e.toTimestamp())}function Sn(t){return ve(!!t,49232),ne.fromTimestamp(function(n){let r=cr(n);return new nt(r.seconds,r.nanos)}(t))}function GI(t,e){return R_(t,e).canonicalString()}function R_(t,e){let n=function(i){return new Ne(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function zN(t){let e=Ne.fromString(t);return ve(QN(e),10190,{key:e.toString()}),e}function N_(t,e){return GI(t.databaseId,e.path)}function Hv(t,e){let n=zN(e);if(n.get(1)!==t.databaseId.projectId)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new z(GN(n))}function qN(t,e){return GI(t.databaseId,e)}function f4(t){let e=zN(t);return e.length===4?Ne.emptyPath():GN(e)}function M_(t){return new Ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function GN(t){return ve(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function MR(t,e,n){return{name:N_(t,e),fields:n.value.mapValue.fields}}function p4(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:q(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(ve(h===void 0||typeof h=="string",58123),ft.fromBase64String(h||"")):(ve(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ft.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?M.UNKNOWN:$N(l.code);return new L(h,l.message||"")}(s);n=new Uh(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Hv(t,r.document.name),o=Sn(r.document.updateTime),s=r.document.createTime?Sn(r.document.createTime):ne.min(),a=new Bt({mapValue:{fields:r.document.fields}}),u=an.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new ps(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Hv(t,r.document),o=r.readTime?Sn(r.readTime):ne.min(),s=an.newNoDocument(i,o),a=r.removedTargetIds||[];n=new ps([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Hv(t,r.document),o=r.removedTargetIds||[];n=new ps([],o,i,null)}else{if(!("filter"in e))return q(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new D_(i,o),a=r.targetId;n=new Vh(a,s)}}return n}function g4(t,e){let n;if(e instanceof Gi)n={update:MR(t,e.key,e.value)};else if(e instanceof Sc)n={delete:N_(t,e.key)};else if(e instanceof Rn)n={update:MR(t,e.key,e.data),updateMask:D4(e.fieldMask)};else{if(!(e instanceof I_))return q(16599,{ft:e.type});n={verify:N_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Ts)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Hi)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof zi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof qi)return{fieldPath:s.field.canonicalString(),increment:a.Re};throw q(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:h4(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:q(27497)}(t,e.precondition)),n}function m4(t,e){return t&&t.length>0?(ve(e!==void 0,14353),t.map(n=>function(i,o){let s=i.updateTime?Sn(i.updateTime):Sn(o);return s.isEqual(ne.min())&&(s=Sn(o)),new __(s,i.transformResults||[])}(n,e))):[]}function y4(t,e){return{documents:[qN(t,e.path)]}}function v4(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=qN(t,i);let o=function(l){if(l.length!==0)return KN(cn.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(g){return{field:ds(g.field),direction:E4(g.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=A_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{gt:n,parent:i}}function _4(t){let e=f4(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ve(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){let g=WN(p);return g instanceof cn&&DN(g)?g.getFilters():[g]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(g=>function(w){return new $i(hs(w.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,ff(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){let g=!!p.before,m=p.values||[];return new Es(m,g)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let g=!p.before,m=p.values||[];return new Es(m,g)}(n.endAt)),WH(e,i,s,o,a,"F",u,l)}function I4(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return q(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function WN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=hs(n.unaryFilter.field);return He.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=hs(n.unaryFilter.field);return He.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=hs(n.unaryFilter.field);return He.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=hs(n.unaryFilter.field);return He.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return q(61313);default:return q(60726)}}(t):t.fieldFilter!==void 0?function(n){return He.create(hs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return q(58110);default:return q(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return cn.create(n.compositeFilter.filters.map(r=>WN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return q(1026)}}(n.compositeFilter.op))}(t):q(30097,{filter:t})}function E4(t){return u4[t]}function w4(t){return l4[t]}function T4(t){return d4[t]}function ds(t){return{fieldPath:t.canonicalString()}}function hs(t){return $t.fromServerFormat(t.fieldPath)}function KN(t){return t instanceof He?function(n){if(n.op==="=="){if(vR(n.value))return{unaryFilter:{field:ds(n.field),op:"IS_NAN"}};if(yR(n.value))return{unaryFilter:{field:ds(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(vR(n.value))return{unaryFilter:{field:ds(n.field),op:"IS_NOT_NAN"}};if(yR(n.value))return{unaryFilter:{field:ds(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ds(n.field),op:w4(n.op),value:n.value}}}(t):t instanceof cn?function(n){let r=n.getFilters().map(i=>KN(i));return r.length===1?r[0]:{compositeFilter:{op:T4(n.op),filters:r}}}(t):q(54877,{filter:t})}function D4(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function QN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Rc=class t{constructor(e,n,r,i,o=ne.min(),s=ne.min(),a=ft.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var P_=class{constructor(e){this.wt=e}};function b4(t){let e=_4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?y_(e,e.limit,"L"):e}var $h=class{constructor(){}vt(e,n){this.Ct(e,n),n.Ft()}Ct(e,n){if("nullValue"in e)this.Mt(n,5);else if("booleanValue"in e)this.Mt(n,10),n.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(n,15),n.xt(Re(e.integerValue));else if("doubleValue"in e){let r=Re(e.doubleValue);isNaN(r)?this.Mt(n,13):(this.Mt(n,15),Dc(r)?n.xt(0):n.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(n,20),typeof r=="string"&&(r=cr(r)),n.Ot(`${r.seconds||""}`),n.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,n),this.Bt(n);else if("bytesValue"in e)this.Mt(n,30),n.Lt(ur(e.bytesValue)),this.Bt(n);else if("referenceValue"in e)this.kt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Mt(n,45),n.xt(r.latitude||0),n.xt(r.longitude||0)}else"mapValue"in e?EN(e)?this.Mt(n,Number.MAX_SAFE_INTEGER):IN(e)?this.qt(e.mapValue,n):(this.Qt(e.mapValue,n),this.Bt(n)):"arrayValue"in e?(this.$t(e.arrayValue,n),this.Bt(n)):q(19022,{Ut:e})}Nt(e,n){this.Mt(n,25),this.Kt(e,n)}Kt(e,n){n.Ot(e)}Qt(e,n){let r=e.fields||{};this.Mt(n,55);for(let i of Object.keys(r))this.Nt(i,n),this.Ct(r[i],n)}qt(e,n){var r,i;let o=e.fields||{};this.Mt(n,53);let s=vs,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Mt(n,15),n.xt(Re(a)),this.Nt(s,n),this.Ct(o[s],n)}$t(e,n){let r=e.values||[];this.Mt(n,50);for(let i of r)this.Ct(i,n)}kt(e,n){this.Mt(n,37),z.fromName(e).path.forEach(r=>{this.Mt(n,60),this.Kt(r,n)})}Mt(e,n){e.xt(n)}Bt(e){e.xt(2)}};$h.Wt=new $h;var x_=class{constructor(){this.Cn=new k_}addToCollectionParentIndex(e,n){return this.Cn.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(Bi.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(Bi.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}},k_=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Je(Ne.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Je(Ne.comparator)).toArray()}};var HZ=new Uint8Array(0);var PR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},YN=41943040,Kt=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};Kt.DEFAULT_COLLECTION_PERCENTILE=10,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kt.DEFAULT=new Kt(YN,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kt.DISABLED=new Kt(-1,0,0);var Nc=class t{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new t(0)}static lr(){return new t(-1)}};var xR="LruGarbageCollector",C4=1048576;function kR([t,e],[n,r]){let i=ae(t,n);return i===0?ae(e,r):i}var O_=class{constructor(e){this.Er=e,this.buffer=new Je(kR),this.dr=0}Ar(){return++this.dr}Rr(e){let n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();kR(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},L_=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){j(xR,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>E(this,null,function*(){this.Vr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ns(n)?j(xR,"Ignoring IndexedDB error during garbage collection: ",n):yield Rs(n)}yield this.mr(3e5)}))}},F_=class{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return P.resolve(LI.le);let r=new O_(n);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(j("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(PR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),PR):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),us()<=ue.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function S4(t,e){return new F_(t,e)}var V_=class{constructor(){this.changes=new lr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,an.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var U_=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var j_=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&wc(r.mutation,i,Qt.empty(),nt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=le()){let i=Fi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=vc();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Fi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,le()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=dr(),s=Ec(),a=function(){return Ec()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Rn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),wc(h.mutation,l,h.mutation.getFieldMask(),nt.now())):s.set(l.key,Qt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new U_(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Ec(),i=new Oe((s,a)=>s-a),o=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Qt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||le()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=xN();h.forEach(g=>{if(!o.has(g)){let m=jN(n.get(g),r.get(g));m!==null&&p.set(g,m),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return z.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):AN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):P.resolve(Fi()),a=Tc,u=o;return s.next(l=>P.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?P.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,le())).next(h=>({batchId:a,changes:PN(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new z(n)).next(r=>{let i=vc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=vc();return this.indexManager.getCollectionParents(e,o).next(a=>P.forEach(a,u=>{let l=function(p,g){return new Gr(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,an.newInvalidDocument(h)))});let a=vc();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&wc(h.mutation,l,Qt.empty(),nt.now()),mf(n,l)&&(a=a.insert(u,l))}),a})}};var B_=class{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return P.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Sn(i.createTime)}}(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(i){return{name:i.name,query:b4(i.bundledQuery),readTime:Sn(i.readTime)}}(n)),P.resolve()}};var $_=class{constructor(){this.overlays=new Oe(z.comparator),this.Qr=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Fi();return P.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.St(e,n,o)}),P.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Qr.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){let i=Fi(),o=n.length+1,s=new z(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Oe((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Fi(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Fi(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return P.resolve(a)}St(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new T_(n,r));let o=this.Qr.get(n);o===void 0&&(o=le(),this.Qr.set(n,o)),this.Qr.set(n,o.add(r.key))}};var H_=class{constructor(){this.sessionToken=ft.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,P.resolve()}};var Mc=class{constructor(){this.$r=new Je($e.Ur),this.Kr=new Je($e.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){let r=new $e(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new $e(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){let n=new z(new Ne([])),r=new $e(n,e),i=new $e(n,e+1),o=[];return this.Kr.forEachInRange([r,i],s=>{this.zr(s),o.push(s.key)}),o}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){let n=new z(new Ne([])),r=new $e(n,e),i=new $e(n,e+1),o=le();return this.Kr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new $e(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},$e=class{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return z.comparator(e.key,n.key)||ae(e.Zr,n.Zr)}static Wr(e,n){return ae(e.Zr,n.Zr)||z.comparator(e.key,n.key)}};var z_=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Je($e.Ur)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new E_(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Xr=this.Xr.add(new $e(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(s)}lookupMutationBatch(e,n){return P.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.ti(r),o=i<0?0:i;return P.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?FI:this.nr-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new $e(n,0),i=new $e(n,Number.POSITIVE_INFINITY),o=[];return this.Xr.forEachInRange([r,i],s=>{let a=this.ei(s.Zr);o.push(a)}),P.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Je(ae);return n.forEach(i=>{let o=new $e(i,0),s=new $e(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([o,s],a=>{r=r.add(a.Zr)})}),P.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;z.isDocumentKey(o)||(o=o.child(""));let s=new $e(new z(o),0),a=new Je(ae);return this.Xr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Zr)),!0)},s),P.resolve(this.ni(a))}ni(e){let n=[];return e.forEach(r=>{let i=this.ei(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ve(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return P.forEach(n.mutations,i=>{let o=new $e(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){let r=new $e(n,0),i=this.Xr.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){let n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var q_=class{constructor(e){this.ii=e,this.docs=function(){return new Oe(z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():an.newInvalidDocument(n))}getEntries(e,n){let r=dr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():an.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=dr(),s=n.path,a=new z(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||AH(SH(h),r)<=0||(i.has(h.key)||mf(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return P.resolve(o)}getAllFromCollectionGroup(e,n,r,i){q(9500)}si(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new G_(this)}getSize(e){return P.resolve(this.size)}},G_=class extends V_{constructor(e){super(),this.Br=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}};var W_=class{constructor(e){this.persistence=e,this.oi=new lr(n=>$I(n),HI),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this._i=0,this.ai=new Mc,this.targetCount=0,this.ui=Nc.cr()}forEachTarget(e,n){return this.oi.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),P.resolve()}Tr(e){this.oi.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.ui=new Nc(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.Tr(n),P.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.oi.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.oi.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(o).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){let r=this.oi.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),P.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),P.resolve()}getMatchingKeysForTargetId(e,n){let r=this.ai.Yr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.ai.containsKey(n))}};var Hh=class{constructor(e,n){this.ci={},this.overlays={},this.li=new LI(0),this.hi=!1,this.hi=!0,this.Pi=new H_,this.referenceDelegate=e(this),this.Ti=new W_(this),this.indexManager=new x_,this.remoteDocumentCache=function(i){return new q_(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new P_(n),this.Ei=new B_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $_,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new z_(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){j("MemoryPersistence","Starting transaction:",e);let i=new K_(this.li.next());return this.referenceDelegate.di(),r(i).next(o=>this.referenceDelegate.Ai(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ri(e,n){return P.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}},K_=class extends n_{constructor(e){super(),this.currentSequenceNumber=e}},Q_=class t{constructor(e){this.persistence=e,this.Vi=new Mc,this.mi=null}static fi(e){return new t(e)}get gi(){if(this.mi)return this.mi;throw q(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),P.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(i=>this.gi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.gi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.gi,r=>{let i=z.fromPath(r);return this.pi(e,i).next(o=>{o||n.removeEntry(i,ne.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return P.or([()=>P.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}},zh=class t{constructor(e,n){this.persistence=e,this.yi=new lr(r=>PH(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=S4(this,n)}static fi(e,n){return new t(e,n)}di(){}Ai(e){return P.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){let n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}br(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return P.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(o=>o?P.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.si(e,s=>this.Dr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,ne.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),P.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),P.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=bh(e.data.value)),n}Dr(e,n,r){return P.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.yi.get(n);return P.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Y_=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ds=r,this.As=i}static Rs(e,n){let r=le(),i=le();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var J_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Z_=class{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return G0()?8:NH(Qe())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ws(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.bs(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new J_;return this.Ss(e,n,s).next(a=>{if(o.result=a,this.fs)return this.Ds(e,n,s,a.size)})}).next(()=>o.result)}Ds(e,n,r,i){return r.documentReadCount<this.gs?(us()<=ue.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",ls(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),P.resolve()):(us()<=ue.DEBUG&&j("QueryEngine","Query:",ls(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(us()<=ue.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",ls(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cn(n))):P.resolve())}ws(e,n){if(wR(n))return P.resolve(null);let r=Cn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=y_(n,null,"F"),r=Cn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=le(...o);return this.ys.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.vs(n,a);return this.Cs(n,l,s,u.readTime)?this.ws(e,y_(n,null,"F")):this.Fs(e,l,n,u)}))})))}bs(e,n,r,i){return wR(n)||i.isEqual(ne.min())?P.resolve(null):this.ys.getDocuments(e,r).next(o=>{let s=this.vs(n,o);return this.Cs(n,s,r,i)?P.resolve(null):(us()<=ue.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ls(n)),this.Fs(e,s,n,CH(i,Tc)).next(a=>a))})}vs(e,n){let r=new Je(NN(e));return n.forEach((i,o)=>{mf(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return us()<=ue.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",ls(n)),this.ys.getDocumentsMatchingQuery(e,n,Bi.min(),r)}Fs(e,n,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var WI="LocalStore",A4=3e8,X_=class{constructor(e,n,r,i){this.persistence=e,this.Ms=n,this.serializer=i,this.xs=new Oe(ae),this.Os=new lr(o=>$I(o),HI),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new j_(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}};function R4(t,e,n,r){return new X_(t,e,n,r)}function JN(t,e){return E(this,null,function*(){let n=X(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=le();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({ks:l,removedBatchIds:s,addedBatchIds:a}))})})})}function N4(t,e){let n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Bs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,g=p.keys(),m=P.resolve();return g.forEach(w=>{m=m.next(()=>h.getEntry(u,w)).next(A=>{let R=l.docVersions.get(w);ve(R!==null,48541),A.version.compareTo(R)<0&&(p.applyToRemoteDocument(A,l),A.isValidDocument()&&(A.setReadTime(l.commitVersion),h.addEntry(A)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=le();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function ZN(t){let e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function M4(t,e){let n=X(t),r=e.snapshotVersion,i=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Bs.newChangeBuffer({trackRemovals:!0});i=n.xs;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(n.Ti.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.Ti.addMatchingKeys(o,h.addedDocuments,p)));let m=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?m=m.withResumeToken(ft.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),i=i.insert(p,m),function(A,R,k){return A.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=A4?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(g,m,h)&&a.push(n.Ti.updateTargetData(o,m))});let u=dr(),l=le();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(P4(o,s,e.documentUpdates).next(h=>{u=h.qs,l=h.Qs})),!r.isEqual(ne.min())){let h=n.Ti.getLastRemoteSnapshotVersion(o).next(p=>n.Ti.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return P.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.xs=i,o))}function P4(t,e,n){let r=le(),i=le();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=dr();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ne.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):j(WI,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{qs:s,Qs:i}})}function x4(t,e){let n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=FI),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function k4(t,e){let n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ti.getTargetData(r,e).next(o=>o?(i=o,P.resolve(i)):n.Ti.allocateTargetId(r).next(s=>(i=new Rc(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}function eI(t,e,n){return E(this,null,function*(){let r=X(t),i=r.xs.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ns(s))throw s;j(WI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)})}function OR(t,e,n){let r=X(t),i=ne.min(),o=le();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=X(u),g=p.Os.get(h);return g!==void 0?P.resolve(p.xs.get(g)):p.Ti.getTargetData(l,h)}(r,s,Cn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Ms.getDocumentsMatchingQuery(s,e,n?i:ne.min(),n?o:le())).next(a=>(O4(r,QH(e),a),{documents:a,$s:o})))}function O4(t,e,n){let r=t.Ns.get(e)||ne.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Ns.set(e,r)}var qh=class{constructor(){this.activeTargetIds=t4()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var tI=class{constructor(){this.xo=new qh,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new qh,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var nI=class{No(e){}shutdown(){}};var LR="ConnectivityMonitor",Gh=class{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){j(LR,"Network connectivity changed: AVAILABLE");for(let e of this.Qo)e(0)}qo(){j(LR,"Network connectivity changed: UNAVAILABLE");for(let e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Dh=null;function rI(){return Dh===null?Dh=function(){return 268435456+Math.round(2147483648*Math.random())}():Dh++,"0x"+Dh.toString(16)}var zv="RestConnection",L4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},iI=class{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===kh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,n,r,i,o){let s=rI(),a=this.jo(e,n.toUriEncodedString());j(zv,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(u,i,o);let{host:l}=new URL(a),h=kr(l);return this.Jo(e,a,u,r,h).then(p=>(j(zv,`Received RPC '${e}' ${s}: `,p),p),p=>{throw ms(zv,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Yo(e,n,r,i,o,s){return this.zo(e,n,r,i,o)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+As}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}jo(e,n){let r=L4[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}};var oI=class{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}};var ht="WebChannelConnection",sI=class extends iI{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){let s=rI();return new Promise((a,u)=>{let l=new Vv;l.setWithCredentials(!0),l.listenOnce(Uv.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case yc.NO_ERROR:let p=l.getResponseJson();j(ht,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case yc.TIMEOUT:j(ht,`RPC '${e}' ${s} timed out`),u(new L(M.DEADLINE_EXCEEDED,"Request time out"));break;case yc.HTTP_ERROR:let g=l.getStatus();if(j(ht,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);let w=m?.error;if(w&&w.status&&w.message){let A=function(k){let V=k.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(V)>=0?V:M.UNKNOWN}(w.status);u(new L(A,w.message))}else u(new L(M.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new L(M.UNAVAILABLE,"Connection failed."));break;default:q(9055,{h_:e,streamId:s,P_:l.getLastErrorCode(),T_:l.getLastError()})}}finally{j(ht,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);j(ht,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}I_(e,n,r){let i=rI(),o=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=$v(),a=Bv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Ho(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");j(ht,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.E_(p);let g=!1,m=!1,w=new oI({Zo:R=>{m?j(ht,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(g||(j(ht,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),j(ht,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Xo:()=>p.close()}),A=(R,k,V)=>{R.listen(k,B=>{try{V(B)}catch(de){setTimeout(()=>{throw de},0)}})};return A(p,cs.EventType.OPEN,()=>{m||(j(ht,`RPC '${e}' stream ${i} transport opened.`),w.__())}),A(p,cs.EventType.CLOSE,()=>{m||(m=!0,j(ht,`RPC '${e}' stream ${i} transport closed`),w.u_(),this.d_(p))}),A(p,cs.EventType.ERROR,R=>{m||(m=!0,ms(ht,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),w.u_(new L(M.UNAVAILABLE,"The operation could not be completed")))}),A(p,cs.EventType.MESSAGE,R=>{var k;if(!m){let V=R.data[0];ve(!!V,16349);let B=V,de=B?.error||((k=B[0])===null||k===void 0?void 0:k.error);if(de){j(ht,`RPC '${e}' stream ${i} received error:`,de);let Fe=de.status,ge=function(I){let T=Be[I];if(T!==void 0)return $N(T)}(Fe),D=de.message;ge===void 0&&(ge=M.INTERNAL,D="Unknown error status: "+Fe+" with message "+de.message),m=!0,w.u_(new L(ge,D)),p.close()}else j(ht,`RPC '${e}' stream ${i} received:`,V),w.c_(V)}}),A(a,jv.STAT_EVENT,R=>{R.stat===Eh.PROXY?j(ht,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Eh.NOPROXY&&j(ht,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.a_()},0),w}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}};function qv(){return typeof document<"u"?document:null}function yf(t){return new S_(t,!0)}var Wh=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.xi=e,this.timerId=n,this.A_=r,this.R_=i,this.V_=o,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();let n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),i=Math.max(0,n-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}};var FR="PersistentStream",Kh=class{constructor(e,n,r,i,o,s,a,u){this.xi=e,this.S_=r,this.D_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new Wh(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}stop(){return E(this,null,function*(){this.O_()&&(yield this.close(0))})}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}q_(){return E(this,null,function*(){if(this.N_())return this.close(0)})}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}close(e,n){return E(this,null,function*(){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(ar(n.toString()),ar("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.i_(n)})}W_(){}auth(){this.state=1;let e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.v_===n&&this.z_(r,i)},r=>{e(()=>{let i=new L(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(i)})})}z_(e,n){let r=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.j_(i))}),this.stream.onMessage(i=>{r(()=>++this.M_==1?this.J_(i):this.onNext(i))})}B_(){this.state=5,this.x_.y_(()=>E(this,null,function*(){this.state=0,this.start()}))}j_(e){return j(FR,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(j(FR,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},aI=class extends Kh{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();let n=p4(this.serializer,e),r=function(o){if(!("targetChange"in o))return ne.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ne.min():s.readTime?Sn(s.readTime):ne.min()}(e);return this.listener.Y_(n,r)}Z_(e){let n={};n.database=M_(this.serializer),n.addTarget=function(o,s){let a,u=s.target;if(a=g_(u)?{documents:y4(o,u)}:{query:v4(o,u).gt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=HN(o,s.resumeToken);let l=A_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ne.min())>0){a.readTime=Bh(o,s.snapshotVersion.toTimestamp());let l=A_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=I4(this.serializer,e);r&&(n.labels=r),this.Q_(n)}X_(e){let n={};n.database=M_(this.serializer),n.removeTarget=e,this.Q_(n)}},cI=class extends Kh{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();let n=m4(e.writeResults,e.commitTime),r=Sn(e.commitTime);return this.listener.ra(r,n)}ia(){let e={};e.database=M_(this.serializer),this.Q_(e)}ta(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>g4(this.serializer,r))};this.Q_(n)}};var uI=class{},lI=class extends uI{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.sa=!1}oa(){if(this.sa)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.zo(e,R_(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(M.UNKNOWN,o.toString())})}Yo(e,n,r,i,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Yo(e,R_(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(M.UNKNOWN,s.toString())})}terminate(){this.sa=!0,this.connection.terminate()}},dI=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(ar(n),this.ua=!1):j("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}};var Wi="RemoteStore",hI=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=o,this.Ra.No(s=>{r.enqueueAndForget(()=>E(this,null,function*(){Yi(this)&&(j(Wi,"Restarting streams for network reachability change."),yield function(u){return E(this,null,function*(){let l=X(u);l.da.add(4),yield Lc(l),l.Va.set("Unknown"),l.da.delete(4),yield vf(l)})}(this))}))}),this.Va=new dI(r,i)}};function vf(t){return E(this,null,function*(){if(Yi(t))for(let e of t.Aa)yield e(!0)})}function Lc(t){return E(this,null,function*(){for(let e of t.Aa)yield e(!1)})}function XN(t,e){let n=X(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),JI(n)?YI(n):Ms(n).N_()&&QI(n,e))}function KI(t,e){let n=X(t),r=Ms(n);n.Ea.delete(e),r.N_()&&eM(n,e),n.Ea.size===0&&(r.N_()?r.k_():Yi(n)&&n.Va.set("Unknown"))}function QI(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ms(t).Z_(e)}function eM(t,e){t.ma.Ke(e),Ms(t).X_(e)}function YI(t){t.ma=new C_({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Ms(t).start(),t.Va.ca()}function JI(t){return Yi(t)&&!Ms(t).O_()&&t.Ea.size>0}function Yi(t){return X(t).da.size===0}function tM(t){t.ma=void 0}function F4(t){return E(this,null,function*(){t.Va.set("Online")})}function V4(t){return E(this,null,function*(){t.Ea.forEach((e,n)=>{QI(t,e)})})}function U4(t,e){return E(this,null,function*(){tM(t),JI(t)?(t.Va.Pa(e),YI(t)):t.Va.set("Unknown")})}function j4(t,e,n){return E(this,null,function*(){if(t.Va.set("Online"),e instanceof Uh&&e.state===2&&e.cause)try{yield function(i,o){return E(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ea.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ea.delete(a),i.ma.removeTarget(a))})}(t,e)}catch(r){j(Wi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Qh(t,r)}else if(e instanceof ps?t.ma.Xe(e):e instanceof Vh?t.ma.ot(e):t.ma.nt(e),!n.isEqual(ne.min()))try{let r=yield ZN(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.ma.It(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ea.get(l);h&&o.Ea.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ea.get(u);if(!h)return;o.Ea.set(u,h.withResumeToken(ft.EMPTY_BYTE_STRING,h.snapshotVersion)),eM(o,u);let p=new Rc(h.target,u,l,h.sequenceNumber);QI(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){j(Wi,"Failed to raise snapshot:",r),yield Qh(t,r)}})}function Qh(t,e,n){return E(this,null,function*(){if(!Ns(e))throw e;t.da.add(1),yield Lc(t),t.Va.set("Offline"),n||(n=()=>ZN(t.localStore)),t.asyncQueue.enqueueRetryable(()=>E(null,null,function*(){j(Wi,"Retrying IndexedDB access"),yield n(),t.da.delete(1),yield vf(t)}))})}function nM(t,e){return e().catch(n=>Qh(t,n,e))}function _f(t){return E(this,null,function*(){let e=X(t),n=Wr(e),r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:FI;for(;B4(e);)try{let i=yield x4(e.localStore,r);if(i===null){e.Ia.length===0&&n.k_();break}r=i.batchId,$4(e,i)}catch(i){yield Qh(e,i)}rM(e)&&iM(e)})}function B4(t){return Yi(t)&&t.Ia.length<10}function $4(t,e){t.Ia.push(e);let n=Wr(t);n.N_()&&n.ea&&n.ta(e.mutations)}function rM(t){return Yi(t)&&!Wr(t).O_()&&t.Ia.length>0}function iM(t){Wr(t).start()}function H4(t){return E(this,null,function*(){Wr(t).ia()})}function z4(t){return E(this,null,function*(){let e=Wr(t);for(let n of t.Ia)e.ta(n.mutations)})}function q4(t,e,n){return E(this,null,function*(){let r=t.Ia.shift(),i=w_.from(r,e,n);yield nM(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield _f(t)})}function G4(t,e){return E(this,null,function*(){e&&Wr(t).ea&&(yield function(r,i){return E(this,null,function*(){if(function(s){return a4(s)&&s!==M.ABORTED}(i.code)){let o=r.Ia.shift();Wr(r).L_(),yield nM(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield _f(r)}})}(t,e)),rM(t)&&iM(t)})}function VR(t,e){return E(this,null,function*(){let n=X(t);n.asyncQueue.verifyOperationInProgress(),j(Wi,"RemoteStore received new credentials");let r=Yi(n);n.da.add(3),yield Lc(n),r&&n.Va.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),yield vf(n)})}function W4(t,e){return E(this,null,function*(){let n=X(t);e?(n.da.delete(2),yield vf(n)):e||(n.da.add(2),yield Lc(n),n.Va.set("Unknown"))})}function Ms(t){return t.fa||(t.fa=function(n,r,i){let o=X(n);return o.oa(),new aI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{e_:F4.bind(null,t),n_:V4.bind(null,t),i_:U4.bind(null,t),Y_:j4.bind(null,t)}),t.Aa.push(e=>E(null,null,function*(){e?(t.fa.L_(),JI(t)?YI(t):t.Va.set("Unknown")):(yield t.fa.stop(),tM(t))}))),t.fa}function Wr(t){return t.ga||(t.ga=function(n,r,i){let o=X(n);return o.oa(),new cI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:H4.bind(null,t),i_:G4.bind(null,t),na:z4.bind(null,t),ra:q4.bind(null,t)}),t.Aa.push(e=>E(null,null,function*(){e?(t.ga.L_(),yield _f(t)):(yield t.ga.stop(),t.Ia.length>0&&(j(Wi,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))}))),t.ga}var fI=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new sn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ZI(t,e){if(ar("AsyncQueue",`${e}: ${t}`),Ns(t))return new L(M.UNAVAILABLE,`${e}: ${t}`);throw t}var Yh=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||z.comparator(n.key,r.key):(n,r)=>z.comparator(n.key,r.key),this.keyedMap=vc(),this.sortedSet=new Oe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Jh=class{constructor(){this.pa=new Oe(z.comparator)}track(e){let n=e.doc.key,r=this.pa.get(n);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(n,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(n):e.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):q(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(n,e)}wa(){let e=[];return this.pa.inorderTraversal((n,r)=>{e.push(r)}),e}},bs=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Yh.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var pI=class{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}},gI=class{constructor(){this.queries=UR(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){let i=X(n),o=i.queries;i.queries=UR(),o.forEach((s,a)=>{for(let u of a.Sa)u.onError(r)})})(this,new L(M.ABORTED,"Firestore shutting down"))}};function UR(){return new lr(t=>RN(t),gf)}function oM(t,e){return E(this,null,function*(){let n=X(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Da()&&e.va()&&(r=2):(o=new pI,r=e.va()?0:1);try{switch(r){case 0:o.ba=yield n.onListen(i,!0);break;case 1:o.ba=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=ZI(s,`Initialization of query '${ls(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.Sa.push(e),e.Fa(n.onlineState),o.ba&&e.Ma(o.ba)&&XI(n)})}function sM(t,e){return E(this,null,function*(){let n=X(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.va()?0:1:!o.Da()&&e.va()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function K4(t,e){let n=X(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.Sa)a.Ma(i)&&(r=!0);s.ba=i}}r&&XI(n)}function Q4(t,e,n){let r=X(t),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(n);r.queries.delete(e)}function XI(t){t.Ca.forEach(e=>{e.next()})}var mI,jR;(jR=mI||(mI={})).xa="default",jR.Cache="cache";var Zh=class{constructor(e,n,r){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new bs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;let r=n!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;let n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=bs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==mI.Cache}};var Xh=class{constructor(e){this.key=e}},ef=class{constructor(e){this.key=e}},yI=class{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=le(),this.mutatedKeys=le(),this.Za=NN(e),this.Xa=new Yh(this.Za)}get eu(){return this.Ha}tu(e,n){let r=n?n.nu:new Jh,i=n?n.Xa:this.Xa,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),m=mf(this.query,p)?p:null,w=!!g&&this.mutatedKeys.has(g.key),A=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),R=!1;g&&m?g.data.isEqual(m.data)?w!==A&&(r.track({type:3,doc:m}),R=!0):this.ru(g,m)||(r.track({type:2,doc:m}),R=!0,(u&&this.Za(m,u)>0||l&&this.Za(m,l)<0)&&(a=!0)):!g&&m?(r.track({type:0,doc:m}),R=!0):g&&!m&&(r.track({type:1,doc:g}),R=!0,(u||l)&&(a=!0)),R&&(m?(s=s.add(m),o=A?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Xa:s,nu:r,Cs:a,mutatedKeys:o}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;let s=e.nu.wa();s.sort((h,p)=>function(m,w){let A=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q(20277,{Vt:R})}};return A(m)-A(w)}(h.type,p.type)||this.Za(h.doc,p.doc)),this.iu(r),i=i!=null&&i;let a=n&&!i?this.su():[],u=this.Ya.size===0&&this.current&&!i?1:0,l=u!==this.Ja;return this.Ja=u,s.length!==0||l?{snapshot:new bs(this.query,e.Xa,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:a}:{ou:a}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Jh,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];let e=this.Ya;this.Ya=le(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});let n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new ef(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new Xh(r))}),n}au(e){this.Ha=e.$s,this.Ya=le();let n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return bs.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}},eE="SyncEngine",vI=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},_I=class{constructor(e){this.key=e,this.cu=!1}},II=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.lu={},this.hu=new lr(a=>RN(a),gf),this.Pu=new Map,this.Tu=new Set,this.Iu=new Oe(z.comparator),this.Eu=new Map,this.du=new Mc,this.Au={},this.Ru=new Map,this.Vu=Nc.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}};function Y4(t,e,n=!0){return E(this,null,function*(){let r=hM(t),i,o=r.hu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.uu()):i=yield aM(r,e,n,!0),i})}function J4(t,e){return E(this,null,function*(){let n=hM(t);yield aM(n,e,!0,!1)})}function aM(t,e,n,r){return E(this,null,function*(){let i=yield k4(t.localStore,Cn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=yield Z4(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&XN(t.remoteStore,i),a})}function Z4(t,e,n,r,i){return E(this,null,function*(){t.fu=(p,g,m)=>function(A,R,k,V){return E(this,null,function*(){let B=R.view.tu(k);B.Cs&&(B=yield OR(A.localStore,R.query,!1).then(({documents:D})=>R.view.tu(D,B)));let de=V&&V.targetChanges.get(R.targetId),Fe=V&&V.targetMismatches.get(R.targetId)!=null,ge=R.view.applyChanges(B,A.isPrimaryClient,de,Fe);return $R(A,R.targetId,ge.ou),ge.snapshot})}(t,p,g,m);let o=yield OR(t.localStore,e,!0),s=new yI(e,o.$s),a=s.tu(o.documents),u=Ac.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);$R(t,n,l.ou);let h=new vI(e,n,s);return t.hu.set(e,h),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),l.snapshot})}function X4(t,e,n){return E(this,null,function*(){let r=X(t),i=r.hu.get(e),o=r.Pu.get(i.targetId);if(o.length>1)return r.Pu.set(i.targetId,o.filter(s=>!gf(s,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield eI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&KI(r.remoteStore,i.targetId),EI(r,i.targetId)}).catch(Rs))):(EI(r,i.targetId),yield eI(r.localStore,i.targetId,!0))})}function ez(t,e){return E(this,null,function*(){let n=X(t),r=n.hu.get(e),i=n.Pu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),KI(n.remoteStore,r.targetId))})}function tz(t,e,n){return E(this,null,function*(){let r=cz(t);try{let i=yield function(s,a){let u=X(s),l=nt.now(),h=a.reduce((m,w)=>m.add(w.key),le()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",m=>{let w=dr(),A=le();return u.Bs.getEntries(m,h).next(R=>{w=R,w.forEach((k,V)=>{V.isValidDocument()||(A=A.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(m,w)).next(R=>{p=R;let k=[];for(let V of a){let B=s4(V,p.get(V.key).overlayedDocument);B!=null&&k.push(new Rn(V.key,B,wN(B.value.mapValue),Yt.exists(!0)))}return u.mutationQueue.addMutationBatch(m,l,k,a)}).next(R=>{g=R;let k=R.applyToLocalDocumentSet(p,A);return u.documentOverlayCache.saveOverlays(m,R.batchId,k)})}).then(()=>({batchId:g.batchId,changes:PN(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Au[s.currentUser.toKey()];l||(l=new Oe(ae)),l=l.insert(a,u),s.Au[s.currentUser.toKey()]=l}(r,i.batchId,n),yield Fc(r,i.changes),yield _f(r.remoteStore)}catch(i){let o=ZI(i,"Failed to persist write");n.reject(o)}})}function cM(t,e){return E(this,null,function*(){let n=X(t);try{let r=yield M4(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Eu.get(o);s&&(ve(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.cu=!0:i.modifiedDocuments.size>0?ve(s.cu,14607):i.removedDocuments.size>0&&(ve(s.cu,42227),s.cu=!1))}),yield Fc(n,r,e)}catch(r){yield Rs(r)}})}function BR(t,e,n){let r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.hu.forEach((o,s)=>{let a=s.view.Fa(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=X(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let g of p.Sa)g.Fa(a)&&(l=!0)}),l&&XI(u)}(r.eventManager,e),i.length&&r.lu.Y_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function nz(t,e,n){return E(this,null,function*(){let r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Oe(z.comparator);s=s.insert(o,an.newNoDocument(o,ne.min()));let a=le().add(o),u=new Fh(ne.min(),new Map,new Oe(ae),s,a);yield cM(r,u),r.Iu=r.Iu.remove(o),r.Eu.delete(e),tE(r)}else yield eI(r.localStore,e,!1).then(()=>EI(r,e,n)).catch(Rs)})}function rz(t,e){return E(this,null,function*(){let n=X(t),r=e.batch.batchId;try{let i=yield N4(n.localStore,e);lM(n,r,null),uM(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Fc(n,i)}catch(i){yield Rs(i)}})}function iz(t,e,n){return E(this,null,function*(){let r=X(t);try{let i=yield function(s,a){let u=X(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(ve(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);lM(r,e,n),uM(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Fc(r,i)}catch(i){yield Rs(i)}})}function uM(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function lM(t,e,n){let r=X(t),i=r.Au[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Au[r.currentUser.toKey()]=i}}function EI(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Pu.get(e))t.hu.delete(r),n&&t.lu.gu(r,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(r=>{t.du.containsKey(r)||dM(t,r)})}function dM(t,e){t.Tu.delete(e.path.canonicalString());let n=t.Iu.get(e);n!==null&&(KI(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),tE(t))}function $R(t,e,n){for(let r of n)r instanceof Xh?(t.du.addReference(r.key,e),oz(t,r)):r instanceof ef?(j(eE,"Document no longer in limbo: "+r.key),t.du.removeReference(r.key,e),t.du.containsKey(r.key)||dM(t,r.key)):q(19791,{pu:r})}function oz(t,e){let n=e.key,r=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(r)||(j(eE,"New document in limbo: "+n),t.Tu.add(r),tE(t))}function tE(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){let e=t.Tu.values().next().value;t.Tu.delete(e);let n=new z(Ne.fromString(e)),r=t.Vu.next();t.Eu.set(r,new _I(n)),t.Iu=t.Iu.insert(n,r),XN(t.remoteStore,new Rc(Cn(zI(n.path)),r,"TargetPurposeLimboResolution",LI.le))}}function Fc(t,e,n){return E(this,null,function*(){let r=X(t),i=[],o=[],s=[];r.hu.isEmpty()||(r.hu.forEach((a,u)=>{s.push(r.fu(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Y_.Rs(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.lu.Y_(i),yield function(u,l){return E(this,null,function*(){let h=X(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,g=>P.forEach(g.ds,m=>h.persistence.referenceDelegate.addReference(p,g.targetId,m)).next(()=>P.forEach(g.As,m=>h.persistence.referenceDelegate.removeReference(p,g.targetId,m)))))}catch(p){if(!Ns(p))throw p;j(WI,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let m=h.xs.get(g),w=m.snapshotVersion,A=m.withLastLimboFreeSnapshotVersion(w);h.xs=h.xs.insert(g,A)}}})}(r.localStore,o))})}function sz(t,e){return E(this,null,function*(){let n=X(t);if(!n.currentUser.isEqual(e)){j(eE,"User change. New user:",e.toKey());let r=yield JN(n.localStore,e);n.currentUser=e,function(o,s){o.Ru.forEach(a=>{a.forEach(u=>{u.reject(new L(M.CANCELLED,s))})}),o.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Fc(n,r.ks)}})}function az(t,e){let n=X(t),r=n.Eu.get(e);if(r&&r.cu)return le().add(r.key);{let i=le(),o=n.Pu.get(e);if(!o)return i;for(let s of o){let a=n.hu.get(s);i=i.unionWith(a.view.eu)}return i}}function hM(t){let e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=cM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=az.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nz.bind(null,e),e.lu.Y_=K4.bind(null,e.eventManager),e.lu.gu=Q4.bind(null,e.eventManager),e}function cz(t){let e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iz.bind(null,e),e}var fM=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return E(this,null,function*(){this.serializer=yf(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Su(n),yield this.persistence.start(),this.localStore=this.Du(n),this.gcScheduler=this.vu(n,this.localStore),this.indexBackfillerScheduler=this.Cu(n,this.localStore)})}vu(n,r){return null}Cu(n,r){return null}Du(n){return R4(this.persistence,new Z_,n.initialUser,this.serializer)}Su(n){return new Hh(Q_.fi,this.serializer)}bu(n){return new tI}terminate(){return E(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})(),wI=class extends fM{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){ve(this.persistence.referenceDelegate instanceof zh,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new L_(r,e.asyncQueue,n)}Su(e){let n=this.cacheSizeBytes!==void 0?Kt.withCacheSize(this.cacheSizeBytes):Kt.DEFAULT;return new Hh(r=>zh.fi(r,n),this.serializer)}};var uz=(()=>{class t{initialize(n,r){return E(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>BR(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=sz.bind(null,this.syncEngine),yield W4(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new gI}()}createDatastore(n){let r=yf(n.databaseInfo.databaseId),i=function(s){return new sI(s)}(n.databaseInfo);return function(s,a,u,l){return new lI(s,a,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,o,s,a,u){return new hI(i,o,s,a,u)}(this.localStore,this.datastore,n.asyncQueue,r=>BR(this.syncEngine,r,0),function(){return Gh.C()?new Gh:new nI}())}createSyncEngine(n,r){return function(o,s,a,u,l,h,p){let g=new II(o,s,a,u,l,h);return p&&(g.mu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return E(this,null,function*(){var n,r;yield function(o){return E(this,null,function*(){let s=X(o);j(Wi,"RemoteStore shutting down."),s.da.add(5),yield Lc(s),s.Ra.shutdown(),s.Va.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var tf=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):ar("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Kr="FirestoreClient",TI=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ye.UNAUTHENTICATED,this.clientId=Nh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>E(this,null,function*(){j(Kr,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(j(Kr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new sn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>E(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=ZI(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Gv(t,e){return E(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),j(Kr,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>E(null,null,function*(){r.isEqual(i)||(yield JN(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function HR(t,e){return E(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield lz(t);j(Kr,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>VR(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>VR(e.remoteStore,i)),t._onlineComponents=e})}function lz(t){return E(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){j(Kr,"Using user provided OfflineComponentProvider");try{yield Gv(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ms("Error using user provided cache. Falling back to memory cache: "+n),yield Gv(t,new fM)}}else j(Kr,"Using default OfflineComponentProvider"),yield Gv(t,new wI(void 0));return t._offlineComponents})}function pM(t){return E(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(j(Kr,"Using user provided OnlineComponentProvider"),yield HR(t,t._uninitializedComponentsProvider._online)):(j(Kr,"Using default OnlineComponentProvider"),yield HR(t,new uz))),t._onlineComponents})}function dz(t){return pM(t).then(e=>e.syncEngine)}function gM(t){return E(this,null,function*(){let e=yield pM(t),n=e.eventManager;return n.onListen=Y4.bind(null,e.syncEngine),n.onUnlisten=X4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=J4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ez.bind(null,e.syncEngine),n})}function hz(t,e,n={}){let r=new sn;return t.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return function(o,s,a,u,l){let h=new tf({next:g=>{h.xu(),s.enqueueAndForget(()=>sM(o,p));let m=g.docs.has(a);!m&&g.fromCache?l.reject(new L(M.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&g.fromCache&&u&&u.source==="server"?l.reject(new L(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new Zh(zI(a.path),h,{includeMetadataChanges:!0,Qa:!0});return oM(o,p)}(yield gM(t),t.asyncQueue,e,n,r)})),r.promise}function fz(t,e,n={}){let r=new sn;return t.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return function(o,s,a,u,l){let h=new tf({next:g=>{h.xu(),s.enqueueAndForget(()=>sM(o,p)),g.fromCache&&u.source==="server"?l.reject(new L(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new Zh(a,h,{includeMetadataChanges:!0,Qa:!0});return oM(o,p)}(yield gM(t),t.asyncQueue,e,n,r)})),r.promise}function mM(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var zR=new Map;function yM(t,e,n){if(!n)throw new L(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function pz(t,e,n,r){if(e===!0&&r===!0)throw new L(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function qR(t){if(!z.isDocumentKey(t))throw new L(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function GR(t){if(z.isDocumentKey(t))throw new L(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function If(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":q(12329,{type:typeof t})}function un(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new L(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=If(t);throw new L(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var vM="firestore.googleapis.com",WR=!0,nf=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new L(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=vM,this.ssl=WR}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:WR;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=YN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<C4)throw new L(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}pz("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Cs=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new L(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Kv;switch(r.type){case"firstParty":return new Zv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return E(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=zR.get(n);r&&(j("ComponentProvider","Removing Datastore"),zR.delete(n),r.terminate())}(this),Promise.resolve()}};function gz(t,e,n,r={}){var i;t=un(t,Cs);let o=kr(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o&&(Kd(`https://${u}`),Qd("Firestore",!0)),s.host!==vM&&s.host!==u&&ms("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!wn(l,a)&&(t._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Ye.MOCK_USER;else{h=j0(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new L(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Ye(g)}t._authCredentials=new Qv(new Ah(h,p))}}var Ki=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},It=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},zr=class t extends Ki{constructor(e,n,r){super(e,n,zI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new It(this.firestore,null,new z(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function Vc(t,e,...n){if(t=je(t),yM("collection","path",e),t instanceof Cs){let r=Ne.fromString(e,...n);return GR(r),new zr(t,null,r)}{if(!(t instanceof It||t instanceof zr))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ne.fromString(e,...n));return GR(r),new zr(t.firestore,null,r)}}function Yr(t,e,...n){if(t=je(t),arguments.length===1&&(e=Nh.newId()),yM("doc","path",e),t instanceof Cs){let r=Ne.fromString(e,...n);return qR(r),new It(t,null,new z(r))}{if(!(t instanceof It||t instanceof zr))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ne.fromString(e,...n));return qR(r),new It(t.firestore,t instanceof zr?t.converter:null,new z(r))}}var KR="AsyncQueue",rf=class{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new Wh(this,"async_queue_retry"),this.rc=()=>{let r=qv();r&&j(KR,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;let n=qv();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;let n=qv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});let n=new sn;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}ac(){return E(this,null,function*(){if(this.Ju.length!==0){try{yield this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Ns(e))throw e;j(KR,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}})}_c(e){let n=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,ar("INTERNAL UNHANDLED ERROR: ",QR(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(e,n,r){this.oc(),this.nc.indexOf(e)>-1&&(n=0);let i=fI.createAndSchedule(this,e,n,r,o=>this.uc(o));return this.Zu.push(i),i}oc(){this.Xu&&q(47125,{cc:QR(this.Xu)})}verifyOperationInProgress(){}lc(){return E(this,null,function*(){let e;do e=this.sc,yield e;while(e!==this.sc)})}hc(e){for(let n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){let n=this.Zu.indexOf(e);this.Zu.splice(n,1)}};function QR(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}var hr=class extends Cs{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new rf,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return E(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new rf(e),this._firestoreClient=void 0,yield e}})}};function _M(t,e){let n=typeof t=="object"?t:Xd(),r=typeof t=="string"?t:e||kh,i=dc(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=U0("firestore");o&&gz(i,...o)}return i}function Ef(t){if(t._terminated)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||mz(t),t._firestoreClient}function mz(t){var e,n,r;let i=t._freezeSettings(),o=function(a,u,l,h){return new r_(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,mM(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new TI(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(t._componentsProvider))}var Pc=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(ft.fromBase64String(e))}catch(n){throw new L(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Qi=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new L(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ss=class{constructor(e){this._methodName=e}};var xc=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new L(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new L(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}};var kc=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var yz=/^__.*__$/,DI=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Rn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Gi(e,this.data,n,this.fieldTransforms)}},of=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Rn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function IM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q(40011,{Ic:t})}}var bI=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ec(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.dc({path:r,Rc:!1});return i.Vc(e),i}mc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.dc({path:r,Rc:!1});return i.Ec(),i}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return af(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(IM(this.Ic)&&yz.test(e))throw this.gc('Document fields cannot begin and end with "__"')}},CI=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||yf(e)}bc(e,n,r,i=!1){return new bI({Ic:e,methodName:n,wc:r,path:$t.emptyPath(),Rc:!1,yc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Uc(t){let e=t._freezeSettings(),n=yf(t._databaseId);return new CI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function nE(t,e,n,r,i,o={}){let s=t.bc(o.merge||o.mergeFields?2:0,e,n,i);rE("Data must be an object, but it was:",s,r);let a=TM(r,s),u,l;if(o.merge)u=new Qt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=AI(e,p,n);if(!s.contains(g))throw new L(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);bM(h,g)||h.push(g)}u=new Qt(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new DI(new Bt(a),u,l)}var sf=class t extends Ss{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};var SI=class t extends Ss{constructor(e,n){super(e),this.Dc=n}_toFieldTransform(e){let n=new qi(e.serializer,ON(e.serializer,this.Dc));return new v_(e.path,n)}isEqual(e){return e instanceof t&&this.Dc===e.Dc}};function EM(t,e,n,r){let i=t.bc(1,e,n);rE("Data must be an object, but it was:",i,r);let o=[],s=Bt.empty();Qr(r,(u,l)=>{let h=iE(e,u,n);l=je(l);let p=i.mc(h);if(l instanceof sf)o.push(h);else{let g=jc(l,p);g!=null&&(o.push(h),s.set(h,g))}});let a=new Qt(o);return new of(s,a,i.fieldTransforms)}function wM(t,e,n,r,i,o){let s=t.bc(1,e,n),a=[AI(e,r,n)],u=[i];if(o.length%2!=0)throw new L(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(AI(e,o[g])),u.push(o[g+1]);let l=[],h=Bt.empty();for(let g=a.length-1;g>=0;--g)if(!bM(l,a[g])){let m=a[g],w=u[g];w=je(w);let A=s.mc(m);if(w instanceof sf)l.push(m);else{let R=jc(w,A);R!=null&&(l.push(m),h.set(m,R))}}let p=new Qt(l);return new of(h,p,s.fieldTransforms)}function vz(t,e,n,r=!1){return jc(n,t.bc(r?4:3,e))}function jc(t,e){if(DM(t=je(t)))return rE("Unsupported field value:",e,t),TM(t,e);if(t instanceof Ss)return function(r,i){if(!IM(i.Ic))throw i.gc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=jc(a,i.fc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=je(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ON(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=nt.fromDate(r);return{timestampValue:Bh(i.serializer,o)}}if(r instanceof nt){let o=new nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bh(i.serializer,o)}}if(r instanceof xc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pc)return{bytesValue:HN(i.serializer,r._byteString)};if(r instanceof It){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.gc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:GI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof kc)return function(s,a){return{mapValue:{fields:{[UI]:{stringValue:jI},[vs]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.gc("VectorValues must only contain numeric values.");return qI(a.serializer,l)})}}}}}}(r,i);throw i.gc(`Unsupported field value: ${If(r)}`)}(t,e)}function TM(t,e){let n={};return pN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qr(t,(r,i)=>{let o=jc(i,e.Ac(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function DM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof nt||t instanceof xc||t instanceof Pc||t instanceof It||t instanceof Ss||t instanceof kc)}function rE(t,e,n){if(!DM(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=If(n);throw r==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+r)}}function AI(t,e,n){if((e=je(e))instanceof Qi)return e._internalPath;if(typeof e=="string")return iE(t,e);throw af("Field path arguments must be of type string or ",t,!1,void 0,n)}var _z=new RegExp("[~\\*/\\[\\]]");function iE(t,e,n){if(e.search(_z)>=0)throw af(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Qi(...e.split("."))._internalPath}catch{throw af(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function af(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new L(M.INVALID_ARGUMENT,a+t+u)}function bM(t,e){return t.some(n=>n.isEqual(e))}var cf=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new It(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new RI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(wf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},RI=class extends cf{data(){return super.data()}};function wf(t,e){return typeof e=="string"?iE(t,e):e instanceof Qi?e._internalPath:e._delegate._internalPath}function Iz(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new L(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Oc=class{},uf=class extends Oc{};function Tf(t,e,...n){let r=[];e instanceof Oc&&r.push(e),r=r.concat(n),function(o){let s=o.filter(u=>u instanceof NI).length,a=o.filter(u=>u instanceof lf).length;if(s>1||s>0&&a>0)throw new L(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var lf=class t extends uf{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return SM(e._query,n),new Ki(e.firestore,e.converter,m_(e._query,n))}_parse(e){let n=Uc(e.firestore);return function(o,s,a,u,l,h,p){let g;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new L(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){JR(p,h);let w=[];for(let A of p)w.push(YR(u,o,A));g={arrayValue:{values:w}}}else g=YR(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||JR(p,h),g=vz(a,s,p,h==="in"||h==="not-in");return He.create(l,h,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function CM(t,e,n){let r=e,i=wf("where",t);return lf._create(i,r,n)}var NI=class t extends Oc{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:cn.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)SM(s,u),s=m_(s,u)}(e._query,n),new Ki(e.firestore,e.converter,m_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var MI=class t extends uf{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new L(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new L(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $i(o,s)}(e._query,this._field,this._direction);return new Ki(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Gr(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function oE(t,e="asc"){let n=e,r=wf("orderBy",t);return MI._create(r,n)}function YR(t,e,n){if(typeof(n=je(n))=="string"){if(n==="")throw new L(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!AN(e)&&n.indexOf("/")!==-1)throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Ne.fromString(n));if(!z.isDocumentKey(r))throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return mR(t,new z(r))}if(n instanceof It)return mR(t,n._key);throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${If(n)}.`)}function JR(t,e){if(!Array.isArray(t)||t.length===0)throw new L(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function SM(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new L(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new L(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var PI=class{convertValue(e,n="none"){switch(qr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Re(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ur(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw q(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Qr(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[vs].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Re(s.doubleValue));return new kc(o)}convertGeoPoint(e){return new xc(Re(e.latitude),Re(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=pf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(bc(e));default:return null}}convertTimestamp(e){let n=cr(e);return new nt(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Ne.fromString(e);ve(QN(r),9688,{name:e});let i=new Oh(r.get(1),r.get(3)),o=new z(r.popFirst(5));return i.isEqual(n)||ar(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function sE(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Ui=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},df=class extends cf{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new gs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(wf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},gs=class extends df{data(e={}){return super.data(e)}},xI=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ui(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new gs(this._firestore,this._userDataWriter,r.key,r,new Ui(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new L(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new gs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ui(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new gs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ui(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:Ez(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function Ez(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q(61501,{type:t})}}function Df(t){t=un(t,It);let e=un(t.firestore,hr);return hz(Ef(e),t._key).then(n=>wz(e,t,n))}var hf=class extends PI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pc(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new It(this.firestore,null,n)}};function bf(t){t=un(t,Ki);let e=un(t.firestore,hr),n=Ef(e),r=new hf(e);return Iz(t._query),fz(n,t._query).then(i=>new xI(e,r,t,i))}function AM(t,e,n){t=un(t,It);let r=un(t.firestore,hr),i=sE(t.converter,e,n);return Cf(r,[nE(Uc(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Yt.none())])}function aE(t,e,n,...r){t=un(t,It);let i=un(t.firestore,hr),o=Uc(i),s;return s=typeof(e=je(e))=="string"||e instanceof Qi?wM(o,"updateDoc",t._key,e,n,r):EM(o,"updateDoc",t._key,e),Cf(i,[s.toMutation(t._key,Yt.exists(!0))])}function RM(t,e){let n=un(t.firestore,hr),r=Yr(t),i=sE(t.converter,e);return Cf(n,[nE(Uc(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Yt.exists(!1))]).then(()=>r)}function Cf(t,e){return function(r,i){let o=new sn;return r.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return tz(yield dz(r),i,o)})),o.promise}(Ef(t),e)}function wz(t,e,n){let r=n.docs.get(e._key),i=new hf(t);return new df(t,i,e._key,r,new Ui(n.hasPendingWrites,n.fromCache),e.converter)}var kI=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Uc(e)}set(e,n,r){this._verifyNotCommitted();let i=Wv(e,this._firestore),o=sE(i.converter,n,r),s=nE(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Yt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let o=Wv(e,this._firestore),s;return s=typeof(n=je(n))=="string"||n instanceof Qi?wM(this._dataReader,"WriteBatch.update",o._key,n,r,i):EM(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,Yt.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=Wv(e,this._firestore);return this._mutations=this._mutations.concat(new Sc(n._key,Yt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new L(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Wv(t,e){if((t=je(t)).firestore!==e)throw new L(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function NM(t){return new SI("increment",t)}function MM(t){return Ef(t=un(t,hr)),new kI(t,e=>Cf(t,e))}(function(e,n=!0){(function(i){As=i})(Vr),Fr(new Wt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new hr(new Yv(r.getProvider("auth-internal")),new Xv(s,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new L(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oh(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),on(sR,aR,e),on(sR,aR,"esm2017")})();var PM={production:!0,apiKey:"AIzaSyDuGRux4dWqKV8r38gzW1Kp0gXWKqdmGzg"};var Tz=PM.apiKey,Dz={apiKey:Tz,authDomain:"country-trivia-ae5d2.firebaseapp.com",projectId:"country-trivia-ae5d2",storageBucket:"country-trivia-ae5d2.appspot.com",messagingSenderId:"424976519112",appId:"1:424976519112:web:38d32b0ea3fca32ed17afd",measurementId:"G-GXS9HBLD7F"},xM=uv(Dz),kM=class t{auth=Lv(xM);firestore=_M(xM);currentUser=null;constructor(){kv(this.auth,e=>{e?(this.currentUser=e,localStorage.setItem("uid",e.uid)):this.signInAnonymously()})}signInAnonymously(){return E(this,null,function*(){let e=yield as(this.auth);this.currentUser=e.user,localStorage.setItem("uid",e.user.uid)})}createUserProfile(e){return E(this,null,function*(){if(!this.currentUser)throw new Error("No authenticated user");let n=this.currentUser.uid,r=Yr(this.firestore,"users",n);yield AM(r,{name:e,highScore:0,gamesPlayed:0,createdAt:new Date,uid:this.currentUser.uid})})}loadUserProfile(){return E(this,null,function*(){let e=localStorage.getItem("uid");if(!e){let i=yield as(this.auth);e=i.user.uid,this.currentUser=i.user,localStorage.setItem("uid",e)}let n=Yr(this.firestore,"users",e),r=yield Df(n);return r.exists()?r.data():null})}updateHighScore(e){return E(this,null,function*(){if(!this.currentUser)throw new Error("No authenticated user");let n=this.currentUser.uid,r=Yr(this.firestore,"users",n);yield aE(r,{highScore:e})})}incrementGamesPlayed(){return E(this,null,function*(){if(!this.currentUser)throw new Error("No authenticated user");let e=this.currentUser.uid,n=Yr(this.firestore,"users",e);yield aE(n,{gamesPlayed:NM(1)})})}getCurrentUid(){return this.currentUser?.uid??null}saveScore(e,n){return E(this,null,function*(){yield RM(Vc(this.firestore,"scores"),{name:e,score:n,date:new Date})})}getScores(){return E(this,null,function*(){let e=Tf(Vc(this.firestore,"scores"),oE("score","desc"));return(yield bf(e)).docs.map(r=>r.data())})}getUsers(){return E(this,null,function*(){let e=Tf(Vc(this.firestore,"users"),oE("gamesPlayed","desc"));return(yield bf(e)).docs.map(r=>r.data())})}getHighScore(){return E(this,null,function*(){let e=localStorage.getItem("uid");if(!e){let i=yield as(this.auth);e=i.user.uid,this.currentUser=i.user,localStorage.setItem("uid",e)}let n=Yr(this.firestore,"users",e),r=yield Df(n);return r.exists()?r.data().highScore:null})}getUserName(){return E(this,null,function*(){let e=localStorage.getItem("uid");if(!e){let i=yield as(this.auth);e=i.user.uid,this.currentUser=i.user,localStorage.setItem("uid",e)}let n=Yr(this.firestore,"users",e),r=yield Df(n);return r.exists()?r.data().name:null})}deleteScoresByName(e){return E(this,null,function*(){let n=Vc(this.firestore,"scores"),r=Tf(n,CM("name","==",e)),i=yield bf(r),o=MM(this.firestore);i.forEach(s=>{o.delete(s.ref)}),yield o.commit()})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})};export{U as a,ye as b,E as c,Pe as d,he as e,ao as f,xe as g,Xe as h,oa as i,Ae as j,Y as k,uo as l,Tp as m,ce as n,Vu as o,lo as p,ju as q,YP as r,JP as s,yt as t,ZP as u,vr as v,XP as w,Ln as x,ex as y,Er as z,rx as A,Sp as B,ix as C,ox as D,Ap as E,xt as F,Rp as G,sx as H,et as I,F as J,VT as K,H as L,Mo as M,$ as N,W as O,x as P,KT as Q,Sx as R,Ct as S,Pl as T,jG as U,BG as V,$G as W,HG as X,_m as Y,zt as Z,rT as _,Vo as $,Dt as aa,Le as ba,gn as ca,jo as da,zk as ea,qk as fa,cg as ga,Ul as ha,Ea as ia,zG as ja,Tm as ka,oO as la,eb as ma,Kn as na,qG as oa,GG as pa,_i as qa,So as ra,Hb as sa,tt as ta,XG as ua,Qn as va,tW as wa,Ro as xa,tC as ya,zo as za,Di as Aa,zm as Ba,VL as Ca,WL as Da,Ca as Ea,Cr as Fa,tF as Ga,hF as Ha,fF as Ia,pF as Ja,iW as Ka,oW as La,sW as Ma,aW as Na,cW as Oa,uW as Pa,EC as Qa,wC as Ra,Km as Sa,TC as Ta,DC as Ua,AF as Va,lW as Wa,NF as Xa,VF as Ya,dW as Za,hW as _a,fW as $a,$F as ab,HF as bb,pW as cb,gW as db,mW as eb,yW as fb,vW as gb,_W as hb,IW as ib,EW as jb,qF as kb,AC as lb,GF as mb,WF as nb,wW as ob,KF as pb,YF as qb,TW as rb,DW as sb,bW as tb,CW as ub,SW as vb,AW as wb,RW as xb,NW as yb,MW as zb,Sa as Ab,Qm as Bb,Ym as Cb,yV as Db,PW as Eb,vV as Fb,xW as Gb,_V as Hb,kW as Ib,We as Jb,Yn as Kb,qo as Lb,WV as Mb,dS as Nb,KV as Ob,QV as Pb,JV as Qb,ZV as Rb,gS as Sb,t2 as Tb,p2 as Ub,Nr as Vb,OS as Wb,H2 as Xb,z2 as Yb,Fy as Zb,zd as _b,Ej as $b,kM as ac};
