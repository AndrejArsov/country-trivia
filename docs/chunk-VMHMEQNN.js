var lN=Object.defineProperty,dN=Object.defineProperties;var hN=Object.getOwnPropertyDescriptors;var YI=Object.getOwnPropertySymbols,fN=Object.getPrototypeOf,pN=Object.prototype.hasOwnProperty,gN=Object.prototype.propertyIsEnumerable,mN=Reflect.get;var JI=(t,e,n)=>e in t?lN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,U=(t,e)=>{for(var n in e||={})pN.call(e,n)&&JI(t,n,e[n]);if(YI)for(var n of YI(e))gN.call(e,n)&&JI(t,n,e[n]);return t},Ie=(t,e)=>dN(t,hN(e));var Xn=(t,e,n)=>mN(fN(t),n,e);var E=(t,e,n)=>new Promise((r,i)=>{var o=u=>{try{a(n.next(u))}catch(l){i(l)}},s=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((n=n.apply(t,e)).next())});function Xh(t,e){return Object.is(t,e)}var Ve=null,bc=!1,ef=1,Mt=Symbol("SIGNAL");function se(t){let e=Ve;return Ve=t,e}function tf(){return Ve}var bs={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Cs(t){if(bc)throw new Error("");if(Ve===null)return;Ve.consumerOnSignalRead(t);let e=Ve.nextProducerIndex++;if(Rc(Ve),e<Ve.producerNode.length&&Ve.producerNode[e]!==t&&Ds(Ve)){let n=Ve.producerNode[e];Ac(n,Ve.producerIndexOfThis[e])}Ve.producerNode[e]!==t&&(Ve.producerNode[e]=t,Ve.producerIndexOfThis[e]=Ds(Ve)?XI(t,Ve,e):0),Ve.producerLastReadVersion[e]=t.version}function ZI(){ef++}function nf(t){if(!(Ds(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===ef)){if(!t.producerMustRecompute(t)&&!af(t)){Zh(t);return}t.producerRecomputeValue(t),Zh(t)}}function rf(t){if(t.liveConsumerNode===void 0)return;let e=bc;bc=!0;try{for(let n of t.liveConsumerNode)n.dirty||yN(n)}finally{bc=e}}function of(){return Ve?.consumerAllowSignalWrites!==!1}function yN(t){t.dirty=!0,rf(t),t.consumerMarkedDirty?.(t)}function Zh(t){t.dirty=!1,t.lastCleanEpoch=ef}function Sc(t){return t&&(t.nextProducerIndex=0),se(t)}function sf(t,e){if(se(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Ds(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Ac(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function af(t){Rc(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(nf(n),r!==n.version))return!0}return!1}function cf(t){if(Rc(t),Ds(t))for(let e=0;e<t.producerNode.length;e++)Ac(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function XI(t,e,n){if(eE(t),t.liveConsumerNode.length===0&&tE(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=XI(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Ac(t,e){if(eE(t),t.liveConsumerNode.length===1&&tE(t))for(let r=0;r<t.producerNode.length;r++)Ac(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Rc(i),i.producerIndexOfThis[r]=e}}function Ds(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Rc(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function eE(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function tE(t){return t.producerNode!==void 0}function uf(t,e){let n=Object.create(vN);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(nf(n),Cs(n),n.value===Cc)throw n.error;return n.value};return r[Mt]=n,r}var Yh=Symbol("UNSET"),Jh=Symbol("COMPUTING"),Cc=Symbol("ERRORED"),vN=Ie(U({},bs),{value:Yh,dirty:!0,error:null,equal:Xh,kind:"computed",producerMustRecompute(t){return t.value===Yh||t.value===Jh},producerRecomputeValue(t){if(t.value===Jh)throw new Error("Detected cycle in computations.");let e=t.value;t.value=Jh;let n=Sc(t),r,i=!1;try{r=t.computation(),se(null),i=e!==Yh&&e!==Cc&&r!==Cc&&t.equal(e,r)}catch(o){r=Cc,t.error=o}finally{sf(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function _N(){throw new Error}var nE=_N;function rE(t){nE(t)}function lf(t){nE=t}var IN=null;function df(t,e){let n=Object.create(Nc);n.value=t,e!==void 0&&(n.equal=e);let r=()=>(Cs(n),n.value);return r[Mt]=n,r}function Ss(t,e){of()||rE(t),t.equal(t.value,e)||(t.value=e,EN(t))}function hf(t,e){of()||rE(t),Ss(t,e(t.value))}var Nc=Ie(U({},bs),{equal:Xh,value:void 0,kind:"signal"});function EN(t){t.version++,ZI(),rf(t),IN?.()}function ff(t){let e=se(null);try{return t()}finally{se(e)}}var pf;function As(){return pf}function Tn(t){let e=pf;return pf=t,e}var Mc=Symbol("NotFound");function J(t){return typeof t=="function"}function Ri(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Pc=Ri(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function kr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Re=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(J(r))try{r()}catch(o){e=o instanceof Pc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{iE(o)}catch(s){e=e??[],s instanceof Pc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Pc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)iE(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&kr(n,e)}remove(e){let{_finalizers:n}=this;n&&kr(n,e),e instanceof t&&e._removeParent(this)}};Re.EMPTY=(()=>{let t=new Re;return t.closed=!0,t})();var gf=Re.EMPTY;function xc(t){return t instanceof Re||t&&"closed"in t&&J(t.remove)&&J(t.add)&&J(t.unsubscribe)}function iE(t){J(t)?t():t.unsubscribe()}var Vt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ni={setTimeout(t,e,...n){let{delegate:r}=Ni;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Ni;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function kc(t){Ni.setTimeout(()=>{let{onUnhandledError:e}=Vt;if(e)e(t);else throw t})}function Rs(){}var oE=mf("C",void 0,void 0);function sE(t){return mf("E",void 0,t)}function aE(t){return mf("N",t,void 0)}function mf(t,e,n){return{kind:t,value:e,error:n}}var Or=null;function Mi(t){if(Vt.useDeprecatedSynchronousErrorHandling){let e=!Or;if(e&&(Or={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Or;if(Or=null,n)throw r}}else t()}function cE(t){Vt.useDeprecatedSynchronousErrorHandling&&Or&&(Or.errorThrown=!0,Or.error=t)}var Lr=class extends Re{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,xc(e)&&e.add(this)):this.destination=SN}static create(e,n,r){return new Pi(e,n,r)}next(e){this.isStopped?vf(aE(e),this):this._next(e)}error(e){this.isStopped?vf(sE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?vf(oE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},bN=Function.prototype.bind;function yf(t,e){return bN.call(t,e)}var _f=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Oc(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Oc(r)}else Oc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Oc(n)}}},Pi=class extends Lr{constructor(e,n,r){super();let i;if(J(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Vt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&yf(e.next,o),error:e.error&&yf(e.error,o),complete:e.complete&&yf(e.complete,o)}):i=e}this.destination=new _f(i)}};function Oc(t){Vt.useDeprecatedSynchronousErrorHandling?cE(t):kc(t)}function CN(t){throw t}function vf(t,e){let{onStoppedNotification:n}=Vt;n&&Ni.setTimeout(()=>n(t,e))}var SN={closed:!0,next:Rs,error:CN,complete:Rs};var xi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function st(t){return t}function If(...t){return Ef(t)}function Ef(t){return t.length===0?st:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var he=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=RN(n)?n:new Pi(n,r,i);return Mi(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=uE(r),new r((i,o)=>{let s=new Pi({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[xi](){return this}pipe(...n){return Ef(n)(this)}toPromise(n){return n=uE(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function uE(t){var e;return(e=t??Vt.Promise)!==null&&e!==void 0?e:Promise}function AN(t){return t&&J(t.next)&&J(t.error)&&J(t.complete)}function RN(t){return t&&t instanceof Lr||AN(t)&&xc(t)}function wf(t){return J(t?.lift)}function ae(t){return e=>{if(wf(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ee(t,e,n,r,i){return new Tf(t,e,n,r,i)}var Tf=class extends Lr{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ki(){return ae((t,e)=>{let n=null;t._refCount++;let r=ee(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Oi=class extends he{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,wf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Re;let n=this.getSubject();e.add(this.source.subscribe(ee(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Re.EMPTY)}return e}refCount(){return ki()(this)}};var lE=Ri(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var je=(()=>{class t extends he{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Lc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new lE}next(n){Mi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Mi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Mi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?gf:(this.currentObservers=null,o.push(n),new Re(()=>{this.currentObservers=null,kr(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new he;return n.source=this,n}}return t.create=(e,n)=>new Lc(e,n),t})(),Lc=class extends je{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:gf}};var We=class extends je{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Df={now(){return(Df.delegate||Date).now()},delegate:void 0};var Fc=class extends Re{constructor(e,n){super()}schedule(e,n=0){return this}};var Ns={setInterval(t,e,...n){let{delegate:r}=Ns;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Ns;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Vc=class extends Fc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Ns.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Ns.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,kr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Li=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Li.now=Df.now;var Uc=class extends Li{constructor(e,n=Li.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var bf=new Uc(Vc),dE=bf;var et=new he(t=>t.complete());function jc(t){return t&&J(t.schedule)}function Cf(t){return t[t.length-1]}function Bc(t){return J(Cf(t))?t.pop():void 0}function Jt(t){return jc(Cf(t))?t.pop():void 0}function hE(t,e){return typeof Cf(t)=="number"?t.pop():e}function Sf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function pE(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function fE(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Fr(t){return this instanceof Fr?(this.v=t,this):new Fr(t)}function gE(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(w){return Promise.resolve(w).then(y,p)}}function a(y,w){r[y]&&(i[y]=function(R){return new Promise(function(N,O){o.push([y,R,N,O])>1||u(y,R)})},w&&(i[y]=w(i[y])))}function u(y,w){try{l(r[y](w))}catch(R){g(o[0][3],R)}}function l(y){y.value instanceof Fr?Promise.resolve(y.value.v).then(h,p):g(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function g(y,w){y(w),o.shift(),o.length&&u(o[0][0],o[0][1])}}function mE(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof fE=="function"?fE(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var $c=t=>t&&typeof t.length=="number"&&typeof t!="function";function Hc(t){return J(t?.then)}function zc(t){return J(t[xi])}function qc(t){return Symbol.asyncIterator&&J(t?.[Symbol.asyncIterator])}function Gc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function NN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Wc=NN();function Kc(t){return J(t?.[Wc])}function Qc(t){return gE(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Fr(n.read());if(i)return yield Fr(void 0);yield yield Fr(r)}}finally{n.releaseLock()}})}function Yc(t){return J(t?.getReader)}function Te(t){if(t instanceof he)return t;if(t!=null){if(zc(t))return MN(t);if($c(t))return PN(t);if(Hc(t))return xN(t);if(qc(t))return yE(t);if(Kc(t))return kN(t);if(Yc(t))return ON(t)}throw Gc(t)}function MN(t){return new he(e=>{let n=t[xi]();if(J(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function PN(t){return new he(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function xN(t){return new he(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,kc)})}function kN(t){return new he(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function yE(t){return new he(e=>{LN(t,e).catch(n=>e.error(n))})}function ON(t){return yE(Qc(t))}function LN(t,e){var n,r,i,o;return pE(this,void 0,void 0,function*(){try{for(n=mE(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function ht(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Jc(t,e=0){return ae((n,r)=>{n.subscribe(ee(r,i=>ht(r,t,()=>r.next(i),e),()=>ht(r,t,()=>r.complete(),e),i=>ht(r,t,()=>r.error(i),e)))})}function Zc(t,e=0){return ae((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function vE(t,e){return Te(t).pipe(Zc(e),Jc(e))}function _E(t,e){return Te(t).pipe(Zc(e),Jc(e))}function IE(t,e){return new he(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function EE(t,e){return new he(n=>{let r;return ht(n,e,()=>{r=t[Wc](),ht(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>J(r?.return)&&r.return()})}function Xc(t,e){if(!t)throw new Error("Iterable cannot be null");return new he(n=>{ht(n,e,()=>{let r=t[Symbol.asyncIterator]();ht(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function wE(t,e){return Xc(Qc(t),e)}function TE(t,e){if(t!=null){if(zc(t))return vE(t,e);if($c(t))return IE(t,e);if(Hc(t))return _E(t,e);if(qc(t))return Xc(t,e);if(Kc(t))return EE(t,e);if(Yc(t))return wE(t,e)}throw Gc(t)}function De(t,e){return e?TE(t,e):Te(t)}function G(...t){let e=Jt(t);return De(t,e)}function Fi(t,e){let n=J(t)?t:()=>t,r=i=>i.error(n());return new he(e?i=>e.schedule(r,0,i):r)}function Af(t){return!!t&&(t instanceof he||J(t.lift)&&J(t.subscribe))}var Dn=Ri(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function DE(t){return t instanceof Date&&!isNaN(t)}function ce(t,e){return ae((n,r)=>{let i=0;n.subscribe(ee(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:FN}=Array;function VN(t,e){return FN(e)?t(...e):t(e)}function eu(t){return ce(e=>VN(t,e))}var{isArray:UN}=Array,{getPrototypeOf:jN,prototype:BN,keys:$N}=Object;function tu(t){if(t.length===1){let e=t[0];if(UN(e))return{args:e,keys:null};if(HN(e)){let n=$N(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function HN(t){return t&&typeof t=="object"&&jN(t)===BN}function nu(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function ru(...t){let e=Jt(t),n=Bc(t),{args:r,keys:i}=tu(t);if(r.length===0)return De([],e);let o=new he(zN(r,e,i?s=>nu(i,s):st));return n?o.pipe(eu(n)):o}function zN(t,e,n=st){return r=>{bE(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)bE(e,()=>{let l=De(t[u],e),h=!1;l.subscribe(ee(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function bE(t,e,n){t?ht(n,t,e):e()}function CE(t,e,n,r,i,o,s,a){let u=[],l=0,h=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},y=R=>l<r?w(R):u.push(R),w=R=>{o&&e.next(R),l++;let N=!1;Te(n(R,h++)).subscribe(ee(e,O=>{i?.(O),o?y(O):e.next(O)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;u.length&&l<r;){let O=u.shift();s?ht(e,s,()=>w(O)):w(O)}g()}catch(O){e.error(O)}}))};return t.subscribe(ee(e,y,()=>{p=!0,g()})),()=>{a?.()}}function Ue(t,e,n=1/0){return J(e)?Ue((r,i)=>ce((o,s)=>e(r,o,i,s))(Te(t(r,i))),n):(typeof e=="number"&&(n=e),ae((r,i)=>CE(r,i,t,n)))}function iu(t=1/0){return Ue(st,t)}function SE(){return iu(1)}function Vi(...t){return SE()(De(t,Jt(t)))}function ou(t){return new he(e=>{Te(t()).subscribe(e)})}function qN(...t){let e=Bc(t),{args:n,keys:r}=tu(t),i=new he(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Te(n[h]).subscribe(ee(o,g=>{p||(p=!0,l--),a[h]=g},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?nu(r,a):a),o.complete())}))}});return e?i.pipe(eu(e)):i}function AE(t=0,e,n=dE){let r=-1;return e!=null&&(jc(e)?n=e:r=e),new he(i=>{let o=DE(t)?+t-n.now():t;o<0&&(o=0);let s=0;return n.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function GN(...t){let e=Jt(t),n=hE(t,1/0),r=t;return r.length?r.length===1?Te(r[0]):iu(n)(De(r,e)):et}function at(t,e){return ae((n,r)=>{let i=0;n.subscribe(ee(r,o=>t.call(e,o,i++)&&r.next(o)))})}function RE(t){return ae((e,n)=>{let r=!1,i=null,o=null,s=!1,a=()=>{if(o?.unsubscribe(),o=null,r){r=!1;let l=i;i=null,n.next(l)}s&&n.complete()},u=()=>{o=null,s&&n.complete()};e.subscribe(ee(n,l=>{r=!0,i=l,o||Te(t(l)).subscribe(o=ee(n,a,u))},()=>{s=!0,(!r||!o||o.closed)&&n.complete()}))})}function WN(t,e=bf){return RE(()=>AE(t,e))}function er(t){return ae((e,n)=>{let r=null,i=!1,o;r=e.subscribe(ee(n,void 0,void 0,s=>{o=Te(t(s,er(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function NE(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(ee(s,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function tr(t,e){return J(e)?Ue(t,e,1):Ue(t,1)}function nr(t){return ae((e,n)=>{let r=!1;e.subscribe(ee(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function bn(t){return t<=0?()=>et:ae((e,n)=>{let r=0;e.subscribe(ee(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function KN(t,e=st){return t=t??QN,ae((n,r)=>{let i,o=!0;n.subscribe(ee(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function QN(t,e){return t===e}function su(t=YN){return ae((e,n)=>{let r=!1;e.subscribe(ee(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function YN(){return new Dn}function rr(t){return ae((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Cn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?at((i,o)=>t(i,o,r)):st,bn(1),n?nr(e):su(()=>new Dn))}function Ui(t){return t<=0?()=>et:ae((e,n)=>{let r=[];e.subscribe(ee(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Rf(t,e){let n=arguments.length>=2;return r=>r.pipe(t?at((i,o)=>t(i,o,r)):st,Ui(1),n?nr(e):su(()=>new Dn))}function Nf(t,e){return ae(NE(t,e,arguments.length>=2,!0))}function JN(t){return at((e,n)=>t<=n)}function Mf(...t){let e=Jt(t);return ae((n,r)=>{(e?Vi(t,n,e):Vi(t,n)).subscribe(r)})}function Tt(t,e){return ae((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(ee(r,u=>{i?.unsubscribe();let l=0,h=o++;Te(t(u,h)).subscribe(i=ee(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Pf(t){return ae((e,n)=>{Te(t).subscribe(ee(n,()=>n.complete(),Rs)),!n.closed&&e.subscribe(n)})}function Ke(t,e,n){let r=J(t)||e||n?{next:t,error:e,complete:n}:t;return r?ae((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ee(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):st}var gw="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",j=class extends Error{code;constructor(e,n){super(XN(e,n)),this.code=e}};function ZN(t){return`NG0${Math.abs(t)}`}function XN(t,e){return`${ZN(t)}${e?": "+e:""}`}var mw=Symbol("InputSignalNode#UNSET"),eM=Ie(U({},Nc),{transformFn:void 0,applyValueToInputSignal(t,e){Ss(t,e)}});function yw(t,e){let n=Object.create(eM);n.value=t,n.transformFn=e?.transform;function r(){if(Cs(n),n.value===mw){let i=null;throw new j(-950,i)}return n.value}return r[Mt]=n,r}function $s(t){return{toString:t}.toString()}var au="__parameters__";function tM(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function vw(t,e,n){return $s(()=>{let r=tM(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(au)?u[au]:Object.defineProperty(u,au,{value:[]})[au];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Ps=globalThis;function Ee(t){for(let e in t)if(t[e]===Ee)return e;throw Error("Could not find renamed property on target object.")}function nM(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function mt(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(mt).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Wf(t,e){return t?e?`${t} ${e}`:t:e||""}var rM=Ee({__forward_ref__:Ee});function _w(t){return t.__forward_ref__=_w,t.toString=function(){return mt(this())},t}function ct(t){return Iw(t)?t():t}function Iw(t){return typeof t=="function"&&t.hasOwnProperty(rM)&&t.__forward_ref__===_w}function H(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function no(t){return{providers:t.providers||[],imports:t.imports||[]}}function ju(t){return ME(t,ww)||ME(t,Tw)}function Ew(t){return ju(t)!==null}function ME(t,e){return t.hasOwnProperty(e)?t[e]:null}function iM(t){let e=t&&(t[ww]||t[Tw]);return e||null}function PE(t){return t&&(t.hasOwnProperty(xE)||t.hasOwnProperty(oM))?t[xE]:null}var ww=Ee({\u0275prov:Ee}),xE=Ee({\u0275inj:Ee}),Tw=Ee({ngInjectableDef:Ee}),oM=Ee({ngInjectorDef:Ee}),B=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=H({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Dw(t){return t&&!!t.\u0275providers}var sM=Ee({\u0275cmp:Ee}),aM=Ee({\u0275dir:Ee}),cM=Ee({\u0275pipe:Ee}),uM=Ee({\u0275mod:Ee}),gu=Ee({\u0275fac:Ee}),Os=Ee({__NG_ELEMENT_ID__:Ee}),kE=Ee({__NG_ENV_ID__:Ee});function Gi(t){return typeof t=="string"?t:t==null?"":String(t)}function lM(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Gi(t)}function bw(t,e){throw new j(-200,t)}function Gp(t,e){throw new j(-201,!1)}var te=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(te||{}),Kf;function Cw(){return Kf}function ft(t){let e=Kf;return Kf=t,e}function Sw(t,e,n){let r=ju(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&te.Optional)return null;if(e!==void 0)return e;Gp(t,"Injector")}var dM={},Ur=dM,Qf="__NG_DI_FLAG__",mu=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=n;return this.injector.get(e,r.optional?Mc:Ur,r)}},yu="ngTempTokenPath",hM="ngTokenPath",fM=/\n/gm,pM="\u0275",OE="__source";function gM(t,e=te.Default){if(As()===void 0)throw new j(-203,!1);if(As()===null)return Sw(t,void 0,e);{let n=As(),r;return n instanceof mu?r=n.injector:r=n,r.get(t,e&te.Optional?null:void 0,e)}}function W(t,e=te.Default){return(Cw()||gM)(ct(t),e)}function x(t,e=te.Default){return W(t,Bu(e))}function Bu(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Yf(t){let e=[];for(let n=0;n<t.length;n++){let r=ct(t[n]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,o=te.Default;for(let s=0;s<r.length;s++){let a=r[s],u=mM(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(W(i,o))}else e.push(W(r))}return e}function Aw(t,e){return t[Qf]=e,t.prototype[Qf]=e,t}function mM(t){return t[Qf]}function yM(t,e,n,r){let i=t[yu];throw e[OE]&&i.unshift(e[OE]),t.message=vM(`
`+t.message,i,n,r),t[hM]=i,t[yu]=null,t}function vM(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==pM?t.slice(2):t;let i=mt(e);if(Array.isArray(e))i=e.map(mt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):mt(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(fM,`
  `)}`}var _M=Aw(vw("Optional"),8);var IM=Aw(vw("SkipSelf"),4);function Br(t,e){let n=t.hasOwnProperty(gu);return n?t[gu]:null}function EM(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function wM(t){return t.flat(Number.POSITIVE_INFINITY)}function Wp(t,e){t.forEach(n=>Array.isArray(n)?Wp(n,e):e(n))}function Rw(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function vu(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function TM(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function Kp(t,e,n){let r=Hs(t,e);return r>=0?t[r|1]=n:(r=~r,TM(t,r,e,n)),r}function xf(t,e){let n=Hs(t,e);if(n>=0)return t[n|1]}function Hs(t,e){return DM(t,e,1)}function DM(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var $r={},pt=[],Ls=new B(""),Nw=new B("",-1),Mw=new B(""),_u=class{get(e,n=Ur){if(n===Ur){let r=new Error(`NullInjectorError: No provider for ${mt(e)}!`);throw r.name="NullInjectorError",r}return n}};function Pw(t,e){let n=t[uM]||null;if(!n&&e===!0)throw new Error(`Type ${mt(t)} does not have '\u0275mod' property.`);return n}function Hr(t){return t[sM]||null}function bM(t){return t[aM]||null}function CM(t){return t[cM]||null}function zs(t){return{\u0275providers:t}}function SM(...t){return{\u0275providers:xw(!0,t),\u0275fromNgModule:!0}}function xw(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Wp(e,s=>{let a=s;Jf(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&kw(i,o),n}function kw(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Qp(i,o=>{e(o,r)})}}function Jf(t,e,n,r){if(t=ct(t),!t)return!1;let i=null,o=PE(t),s=!o&&Hr(t);if(!o&&!s){let u=t.ngModule;if(o=PE(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Jf(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Wp(o.imports,h=>{Jf(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&kw(l,e)}if(!a){let l=Br(i)||(()=>new i);e({provide:i,useFactory:l,deps:pt},i),e({provide:Mw,useValue:i,multi:!0},i),e({provide:Ls,useValue:()=>W(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;Qp(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Qp(t,e){for(let n of t)Dw(n)&&(n=n.\u0275providers),Array.isArray(n)?Qp(n,e):e(n)}var AM=Ee({provide:String,useValue:Ee});function Ow(t){return t!==null&&typeof t=="object"&&AM in t}function RM(t){return!!(t&&t.useExisting)}function NM(t){return!!(t&&t.useFactory)}function Wi(t){return typeof t=="function"}function MM(t){return!!t.useClass}var $u=new B(""),uu={},LE={},kf;function Hu(){return kf===void 0&&(kf=new _u),kf}var vt=class{},Fs=class extends vt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Xf(e,s=>this.processProvider(s)),this.records.set(Nw,ji(void 0,this)),i.has("environment")&&this.records.set(vt,ji(void 0,this));let o=this.records.get($u);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Mw,pt,te.Self))}retrieve(e,n){let r=n;return this.get(e,r.optional?Mc:Ur,r)}destroy(){xs(this),this._destroyed=!0;let e=se(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),se(e)}}onDestroy(e){return xs(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){xs(this);let n=Tn(this),r=ft(void 0),i;try{return e()}finally{Tn(n),ft(r)}}get(e,n=Ur,r=te.Default){if(xs(this),e.hasOwnProperty(kE))return e[kE](this);r=Bu(r);let i,o=Tn(this),s=ft(void 0);try{if(!(r&te.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=LM(e)&&ju(e);l&&this.injectableDefInScope(l)?u=ji(Zf(e),uu):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,r)}let a=r&te.Self?Hu():this.parent;return n=r&te.Optional&&n===Ur?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[yu]=a[yu]||[]).unshift(mt(e)),o)throw a;return yM(a,e,"R3InjectorError",this.source)}else throw a}finally{ft(s),Tn(o)}}resolveInjectorInitializers(){let e=se(null),n=Tn(this),r=ft(void 0),i;try{let o=this.get(Ls,pt,te.Self);for(let s of o)s()}finally{Tn(n),ft(r),se(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(mt(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=ct(e);let n=Wi(e)?e:ct(e&&e.provide),r=xM(e);if(!Wi(e)&&e.multi===!0){let i=this.records.get(n);i||(i=ji(void 0,uu,!0),i.factory=()=>Yf(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=se(null);try{return n.value===LE?bw(mt(e)):n.value===uu&&(n.value=LE,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&OM(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{se(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=ct(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Zf(t){let e=ju(t),n=e!==null?e.factory:Br(t);if(n!==null)return n;if(t instanceof B)throw new j(204,!1);if(t instanceof Function)return PM(t);throw new j(204,!1)}function PM(t){if(t.length>0)throw new j(204,!1);let n=iM(t);return n!==null?()=>n.factory(t):()=>new t}function xM(t){if(Ow(t))return ji(void 0,t.useValue);{let e=Lw(t);return ji(e,uu)}}function Lw(t,e,n){let r;if(Wi(t)){let i=ct(t);return Br(i)||Zf(i)}else if(Ow(t))r=()=>ct(t.useValue);else if(NM(t))r=()=>t.useFactory(...Yf(t.deps||[]));else if(RM(t))r=(i,o)=>W(ct(t.useExisting),o!==void 0&&o&te.Optional?te.Optional:void 0);else{let i=ct(t&&(t.useClass||t.provide));if(kM(t))r=()=>new i(...Yf(t.deps));else return Br(i)||Zf(i)}return r}function xs(t){if(t.destroyed)throw new j(205,!1)}function ji(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function kM(t){return!!t.deps}function OM(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function LM(t){return typeof t=="function"||typeof t=="object"&&t instanceof B}function Xf(t,e){for(let n of t)Array.isArray(n)?Xf(n,e):n&&Dw(n)?Xf(n.\u0275providers,e):e(n)}function Dt(t,e){let n;t instanceof Fs?(xs(t),n=t):n=new mu(t);let r,i=Tn(n),o=ft(void 0);try{return e()}finally{Tn(i),ft(o)}}function Fw(){return Cw()!==void 0||As()!=null}function Vw(t){if(!Fw())throw new j(-203,!1)}function FM(t){return typeof t=="function"}var Nn=0,ne=1,Q=2,tt=3,Bt=4,Ht=5,Iu=6,Eu=7,ut=8,zr=9,Sn=10,be=11,Vs=12,FE=13,ro=14,Xt=15,qr=16,Bi=17,An=18,zu=19,Uw=20,ir=21,Of=22,wu=23,Pt=24,zi=25,lt=26,jw=1;var Gr=7,Tu=8,Ki=9,yt=10;function or(t){return Array.isArray(t)&&typeof t[jw]=="object"}function Mn(t){return Array.isArray(t)&&t[jw]===!0}function Yp(t){return(t.flags&4)!==0}function io(t){return t.componentOffset>-1}function qu(t){return(t.flags&1)===1}function en(t){return!!t.template}function Du(t){return(t[Q]&512)!==0}function oo(t){return(t[Q]&256)===256}var ep=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Bw(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var Jp=(()=>{let t=()=>$w;return t.ngInherit=!0,t})();function $w(t){return t.type.prototype.ngOnChanges&&(t.setInput=UM),VM}function VM(){let t=zw(this),e=t?.current;if(e){let n=t.previous;if(n===$r)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function UM(t,e,n,r,i){let o=this.declaredInputs[r],s=zw(t)||jM(t,{previous:$r,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new ep(l&&l.currentValue,n,u===$r),Bw(t,e,i,n)}var Hw="__ngSimpleChanges__";function zw(t){return t[Hw]||null}function jM(t,e){return t[Hw]=e}var VE=null;var ve=function(t,e=null,n){VE?.(t,e,n)},qw="svg",BM="math";function tn(t){for(;Array.isArray(t);)t=t[Nn];return t}function Gw(t,e){return tn(e[t])}function an(t,e){return tn(e[t.index])}function Zp(t,e){return t.data[e]}function Ww(t,e){return t[e]}function nn(t,e){let n=e[t];return or(n)?n:n[Nn]}function $M(t){return(t[Q]&4)===4}function Xp(t){return(t[Q]&128)===128}function HM(t){return Mn(t[tt])}function Qi(t,e){return e==null?null:t[e]}function Kw(t){t[Bi]=0}function Qw(t){t[Q]&1024||(t[Q]|=1024,Xp(t)&&qs(t))}function zM(t,e){for(;t>0;)e=e[ro],t--;return e}function Gu(t){return!!(t[Q]&9216||t[Pt]?.dirty)}function tp(t){t[Sn].changeDetectionScheduler?.notify(8),t[Q]&64&&(t[Q]|=1024),Gu(t)&&qs(t)}function qs(t){t[Sn].changeDetectionScheduler?.notify(0);let e=Wr(t);for(;e!==null&&!(e[Q]&8192||(e[Q]|=8192,!Xp(e)));)e=Wr(e)}function Yw(t,e){if(oo(t))throw new j(911,!1);t[ir]===null&&(t[ir]=[]),t[ir].push(e)}function qM(t,e){if(t[ir]===null)return;let n=t[ir].indexOf(e);n!==-1&&t[ir].splice(n,1)}function Wr(t){let e=t[tt];return Mn(e)?e[tt]:e}function eg(t){return t[Eu]??=[]}function tg(t){return t.cleanup??=[]}function GM(t,e,n,r){let i=eg(e);i.push(n),t.firstCreatePass&&tg(t).push(r,i.length-1)}var re={lFrame:iT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var np=!1;function WM(){return re.lFrame.elementDepthCount}function KM(){re.lFrame.elementDepthCount++}function QM(){re.lFrame.elementDepthCount--}function ng(){return re.bindingsEnabled}function YM(){return re.skipHydrationRootTNode!==null}function JM(t){return re.skipHydrationRootTNode===t}function ZM(){re.skipHydrationRootTNode=null}function ie(){return re.lFrame.lView}function Ne(){return re.lFrame.tView}function C9(t){return re.lFrame.contextLView=t,t[ut]}function S9(t){return re.lFrame.contextLView=null,t}function _t(){let t=Jw();for(;t!==null&&t.type===64;)t=t.parent;return t}function Jw(){return re.lFrame.currentTNode}function XM(){let t=re.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Xr(t,e){let n=re.lFrame;n.currentTNode=t,n.isParent=e}function rg(){return re.lFrame.isParent}function Zw(){re.lFrame.isParent=!1}function Xw(){return np}function UE(t){let e=np;return np=t,e}function eT(){let t=re.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function eP(){return re.lFrame.bindingIndex}function tP(t){return re.lFrame.bindingIndex=t}function so(){return re.lFrame.bindingIndex++}function ig(t){let e=re.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function nP(){return re.lFrame.inI18n}function rP(t,e){let n=re.lFrame;n.bindingIndex=n.bindingRootIndex=t,rp(e)}function iP(){return re.lFrame.currentDirectiveIndex}function rp(t){re.lFrame.currentDirectiveIndex=t}function oP(t){let e=re.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function tT(){return re.lFrame.currentQueryIndex}function og(t){re.lFrame.currentQueryIndex=t}function sP(t){let e=t[ne];return e.type===2?e.declTNode:e.type===1?t[Ht]:null}function nT(t,e,n){if(n&te.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&te.Host);)if(i=sP(o),i===null||(o=o[ro],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=re.lFrame=rT();return r.currentTNode=e,r.lView=t,!0}function sg(t){let e=rT(),n=t[ne];re.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function rT(){let t=re.lFrame,e=t===null?null:t.child;return e===null?iT(t):e}function iT(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function oT(){let t=re.lFrame;return re.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var sT=oT;function ag(){let t=oT();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function aP(t){return(re.lFrame.contextLView=zM(t,re.lFrame.contextLView))[ut]}function sr(){return re.lFrame.selectedIndex}function Kr(t){re.lFrame.selectedIndex=t}function ao(){let t=re.lFrame;return Zp(t.tView,t.selectedIndex)}function A9(){re.lFrame.currentNamespace=qw}function R9(){cP()}function cP(){re.lFrame.currentNamespace=null}function uP(){return re.lFrame.currentNamespace}var aT=!0;function Wu(){return aT}function Ku(t){aT=t}function lP(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=$w(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function cg(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function lu(t,e,n){cT(t,e,3,n)}function du(t,e,n,r){(t[Q]&3)===n&&cT(t,e,n,r)}function Lf(t,e){let n=t[Q];(n&3)===e&&(n&=16383,n+=1,t[Q]=n)}function cT(t,e,n,r){let i=r!==void 0?t[Bi]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Bi]+=65536),(a<o||o==-1)&&(dP(t,n,e,u),t[Bi]=(t[Bi]&4294901760)+u+2),u++}function jE(t,e){ve(4,t,e);let n=se(null);try{e.call(t)}finally{se(n),ve(5,t,e)}}function dP(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[Q]>>14<t[Bi]>>16&&(t[Q]&3)===e&&(t[Q]+=16384,jE(a,o)):jE(a,o)}var qi=-1,Qr=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r){this.factory=e,this.canSeeViewProviders=n,this.injectImpl=r}};function hP(t){return(t.flags&8)!==0}function fP(t){return(t.flags&16)!==0}function pP(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];mP(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function gP(t){return t===3||t===4||t===6}function mP(t){return t.charCodeAt(0)===64}function Yi(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?BE(t,n,i,null,e[++r]):BE(t,n,i,null,null))}}return t}function BE(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function uT(t){return t!==qi}function bu(t){return t&32767}function yP(t){return t>>16}function Cu(t,e){let n=yP(t),r=e;for(;n>0;)r=r[ro],n--;return r}var ip=!0;function Su(t){let e=ip;return ip=t,e}var vP=256,lT=vP-1,dT=5,_P=0,Zt={};function IP(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Os)&&(r=n[Os]),r==null&&(r=n[Os]=_P++);let i=r&lT,o=1<<i;e.data[t+(i>>dT)]|=o}function Au(t,e){let n=hT(t,e);if(n!==-1)return n;let r=e[ne];r.firstCreatePass&&(t.injectorIndex=e.length,Ff(r.data,t),Ff(e,null),Ff(r.blueprint,null));let i=ug(t,e),o=t.injectorIndex;if(uT(i)){let s=bu(i),a=Cu(i,e),u=a[ne].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Ff(t,e){t.push(0,0,0,0,0,0,0,0,e)}function hT(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function ug(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=yT(i),r===null)return qi;if(n++,i=i[ro],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return qi}function op(t,e,n){IP(t,e,n)}function fT(t,e,n){if(n&te.Optional||t!==void 0)return t;Gp(e,"NodeInjector")}function pT(t,e,n,r){if(n&te.Optional&&r===void 0&&(r=null),(n&(te.Self|te.Host))===0){let i=t[zr],o=ft(void 0);try{return i?i.get(e,r,n&te.Optional):Sw(e,r,n&te.Optional)}finally{ft(o)}}return fT(r,e,n)}function gT(t,e,n,r=te.Default,i){if(t!==null){if(e[Q]&2048&&!(r&te.Self)){let s=DP(t,e,n,r,Zt);if(s!==Zt)return s}let o=mT(t,e,n,r,Zt);if(o!==Zt)return o}return pT(e,n,r,i)}function mT(t,e,n,r,i){let o=wP(n);if(typeof o=="function"){if(!nT(e,t,r))return r&te.Host?fT(i,n,r):pT(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&te.Optional))Gp(n);else return s}finally{sT()}}else if(typeof o=="number"){let s=null,a=hT(t,e),u=qi,l=r&te.Host?e[Xt][Ht]:null;for((a===-1||r&te.SkipSelf)&&(u=a===-1?ug(t,e):e[a+8],u===qi||!HE(r,!1)?a=-1:(s=e[ne],a=bu(u),e=Cu(u,e)));a!==-1;){let h=e[ne];if($E(o,a,h.data)){let p=EP(a,e,n,s,r,l);if(p!==Zt)return p}u=e[a+8],u!==qi&&HE(r,e[ne].data[a+8]===l)&&$E(o,a,e)?(s=h,a=bu(u),e=Cu(u,e)):a=-1}}return i}function EP(t,e,n,r,i,o){let s=e[ne],a=s.data[t+8],u=r==null?io(a)&&ip:r!=s&&(a.type&3)!==0,l=i&te.Host&&o===a,h=hu(a,s,n,u,l);return h!==null?Us(e,s,h,a,i):Zt}function hu(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:l;for(let y=p;y<g;y++){let w=s[y];if(y<u&&n===w||y>=u&&w.type===n)return y}if(i){let y=s[u];if(y&&en(y)&&y.type===n)return u}return null}function Us(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof Qr){let a=o;a.resolving&&bw(lM(s[n]));let u=Su(a.canSeeViewProviders);a.resolving=!0;let l,h=a.injectImpl?ft(a.injectImpl):null,p=nT(t,r,te.Default);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&lP(n,s[n],e)}finally{h!==null&&ft(h),Su(u),a.resolving=!1,sT()}}return o}function wP(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Os)?t[Os]:void 0;return typeof e=="number"?e>=0?e&lT:TP:e}function $E(t,e,n){let r=1<<t;return!!(n[e+(t>>dT)]&r)}function HE(t,e){return!(t&te.Self)&&!(t&te.Host&&e)}var jr=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return gT(this._tNode,this._lView,e,Bu(r),n)}};function TP(){return new jr(_t(),ie())}function lg(t){return $s(()=>{let e=t.prototype.constructor,n=e[gu]||sp(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[gu]||sp(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function sp(t){return Iw(t)?()=>{let e=sp(ct(t));return e&&e()}:Br(t)}function DP(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[Q]&2048&&!Du(s);){let a=mT(o,s,n,r|te.Self,Zt);if(a!==Zt)return a;let u=o.parent;if(!u){let l=s[Uw];if(l){let h=l.get(n,Zt,r);if(h!==Zt)return h}u=yT(s),s=s[ro]}o=u}return i}function yT(t){let e=t[ne],n=e.type;return n===2?e.declTNode:n===1?t[Ht]:null}function zE(t,e=null,n=null,r){let i=vT(t,e,n,r);return i.resolveInjectorInitializers(),i}function vT(t,e=null,n=null,r,i=new Set){let o=[n||pt,SM(t)];return r=r||(typeof t=="object"?void 0:mt(t)),new Fs(o,e||Hu(),r||null,i)}var rn=class t{static THROW_IF_NOT_FOUND=Ur;static NULL=new _u;static create(e,n){if(Array.isArray(e))return zE({name:""},n,e,"");{let r=e.name??"";return zE({name:r},e.parent,e.providers,r)}}static \u0275prov=H({token:t,providedIn:"any",factory:()=>W(Nw)});static __NG_ELEMENT_ID__=-1};var bP=new B("");bP.__NG_ELEMENT_ID__=t=>{let e=_t();if(e===null)throw new j(204,!1);if(e.type&2)return e.value;if(t&te.Optional)return null;throw new j(204,!1)};var _T=!1,Gs=(()=>{class t{static __NG_ELEMENT_ID__=CP;static __NG_ENV_ID__=n=>n}return t})(),ap=class extends Gs{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let n=this._lView;return oo(n)?(e(),()=>{}):(Yw(n,e),()=>qM(n,e))}};function CP(){return new ap(ie())}var Ji=class{},dg=new B("",{providedIn:"root",factory:()=>!1});var IT=new B(""),ET=new B(""),Pn=(()=>{class t{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new We(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}return t})();var cp=class extends je{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Fw()&&(this.destroyRef=x(Gs,{optional:!0})??void 0,this.pendingTasks=x(Pn,{optional:!0})??void 0)}emit(e){let n=se(null);try{super.next(e)}finally{se(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Re&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},gt=cp;function Ru(...t){}function wT(t){let e,n;function r(){t=Ru;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function qE(t){return queueMicrotask(()=>t()),()=>{t=Ru}}var hg="isAngularZone",Nu=hg+"_ID",SP=0,xe=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new gt(!1);onMicrotaskEmpty=new gt(!1);onStable=new gt(!1);onError=new gt(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=_T}=e;if(typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,NP(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(hg)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new j(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,AP,Ru,Ru);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},AP={};function fg(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function RP(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){wT(()=>{t.callbackScheduled=!1,up(t),t.isCheckStableRunning=!0,fg(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),up(t)}function NP(t){let e=()=>{RP(t)},n=SP++;t._inner=t._inner.fork({name:"angular",properties:{[hg]:!0,[Nu]:n,[Nu+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(MP(u))return r.invokeTask(o,s,a,u);try{return GE(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),WE(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return GE(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!PP(u)&&e(),WE(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,up(t),fg(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function up(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function GE(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function WE(t){t._nesting--,fg(t)}var lp=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new gt;onMicrotaskEmpty=new gt;onStable=new gt;onError=new gt;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function MP(t){return TT(t,"__ignore_ng_zone__")}function PP(t){return TT(t,"__scheduler_tick__")}function TT(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var on=class{_console=console;handleError(e){this._console.error("ERROR",e)}},xP=new B("",{providedIn:"root",factory:()=>{let t=x(xe),e=x(on);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function KE(t,e){return yw(t,e)}function kP(t){return yw(mw,t)}var DT=(KE.required=kP,KE);function OP(){return co(_t(),ie())}function co(t,e){return new Ws(an(t,e))}var Ws=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=OP}return t})();function LP(t){return t instanceof Ws?t.nativeElement:t}function FP(t){return typeof t=="function"&&t[Mt]!==void 0}function N9(t,e){let n=df(t,e?.equal),r=n[Mt];return n.set=i=>Ss(r,i),n.update=i=>hf(r,i),n.asReadonly=VP.bind(n),n}function VP(){let t=this[Mt];if(t.readonlyFn===void 0){let e=()=>this();e[Mt]=t,t.readonlyFn=e}return t.readonlyFn}function bT(t){return FP(t)&&typeof t.set=="function"}function UP(){return this._results[Symbol.iterator]()}var dp=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new je}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=wM(e);(this._changesDetected=!EM(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=UP};function CT(t){return(t.flags&128)===128}var ST=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(ST||{}),AT=new Map,jP=0;function BP(){return jP++}function $P(t){AT.set(t[zu],t)}function hp(t){AT.delete(t[zu])}var QE="__ngContext__";function uo(t,e){or(e)?(t[QE]=e[zu],$P(e)):t[QE]=e}function RT(t){return MT(t[Vs])}function NT(t){return MT(t[Bt])}function MT(t){for(;t!==null&&!Mn(t);)t=t[Bt];return t}var fp;function PT(t){fp=t}function HP(){if(fp!==void 0)return fp;if(typeof document<"u")return document;throw new j(210,!1)}var Qu=new B("",{providedIn:"root",factory:()=>zP}),zP="ng",pg=new B(""),Ks=new B("",{providedIn:"platform",factory:()=>"unknown"});var M9=new B(""),gg=new B("",{providedIn:"root",factory:()=>HP().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var qP="h",GP="b";var xT=!1,WP=new B("",{providedIn:"root",factory:()=>xT});var mg=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(mg||{}),lo=new B(""),YE=new Set;function ho(t){YE.has(t)||(YE.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var kT=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=KP}return t})();function KP(){return new kT(ie(),_t())}var $i=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}($i||{}),OT=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}return t})(),QP=[$i.EarlyRead,$i.Write,$i.MixedReadWrite,$i.Read],YP=(()=>{class t{ngZone=x(xe);scheduler=x(Ji);errorHandler=x(on,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){x(lo,{optional:!0})}execute(){let n=this.sequences.size>0;n&&ve(16),this.executing=!0;for(let r of QP)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&ve(17)}register(n){let{view:r}=n;r!==void 0?((r[zi]??=[]).push(n),qs(r),r[Q]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(mg.AFTER_NEXT_RENDER,n):n()}static \u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}return t})(),pp=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,i,o,s=null){this.impl=e,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[zi];e&&(this.view[zi]=e.filter(n=>n!==this))}};function JP(t,e){!e?.injector&&Vw(JP);let n=e?.injector??x(rn);return ho("NgAfterRender"),FT(t,n,e,!1)}function LT(t,e){!e?.injector&&Vw(LT);let n=e?.injector??x(rn);return ho("NgAfterNextRender"),FT(t,n,e,!0)}function ZP(t,e){if(t instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[e]=t,n}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function FT(t,e,n,r){let i=e.get(OT);i.impl??=e.get(YP);let o=e.get(lo,null,{optional:!0}),s=n?.phase??$i.MixedReadWrite,a=n?.manualCleanup!==!0?e.get(Gs):null,u=e.get(kT,null,{optional:!0}),l=new pp(i.impl,ZP(t,s),u?.view,r,a,o?.snapshot(null));return i.impl.register(l),l}var XP=()=>null;function VT(t,e,n=!1){return XP(t,e,n)}function UT(t,e){let n=t.contentQueries;if(n!==null){let r=se(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];og(o),a.contentQueries(2,e[s],s)}}}finally{se(r)}}}function gp(t,e,n){og(0);let r=se(null);try{e(t,n)}finally{se(r)}}function yg(t,e,n){if(Yp(e)){let r=se(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{se(r)}}}var sn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(sn||{});var Mu=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${gw})`}};function vg(t){return t instanceof Mu?t.changingThisBreaksApplicationSecurity:t}function ex(t,e){let n=tx(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${gw})`)}return n===e}function tx(t){return t instanceof Mu&&t.getTypeName()||null}var nx=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function rx(t){return t=String(t),t.match(nx)?t:"unsafe:"+t}var jT=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(jT||{});function P9(t){let e=ix();return e?e.sanitize(jT.URL,t)||"":ex(t,"URL")?vg(t):rx(Gi(t))}function ix(){let t=ie();return t&&t[Sn].sanitizer}var ox=/^>|^->|<!--|-->|--!>|<!-$/g,sx=/(<|>)/g,ax="\u200B$1\u200B";function cx(t){return t.replace(ox,e=>e.replace(sx,ax))}function BT(t){return t instanceof Function?t():t}function ux(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var $T="ng-template";function lx(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&ux(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(_g(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function _g(t){return t.type===4&&t.value!==$T}function dx(t,e,n){let r=t.type===4&&!n?$T:t.value;return e===r}function hx(t,e,n){let r=4,i=t.attrs,o=i!==null?gx(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Ut(r)&&!Ut(u))return!1;if(s&&Ut(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!dx(t,u,n)||u===""&&e.length===1){if(Ut(r))return!1;s=!0}}else if(r&8){if(i===null||!lx(t,i,u,n)){if(Ut(r))return!1;s=!0}}else{let l=e[++a],h=fx(u,i,_g(t),n);if(h===-1){if(Ut(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Ut(r))return!1;s=!0}}}}return Ut(r)||s}function Ut(t){return(t&1)===0}function fx(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return mx(e,t)}function px(t,e,n=!1){for(let r=0;r<e.length;r++)if(hx(t,e[r],n))return!0;return!1}function gx(t){for(let e=0;e<t.length;e++){let n=t[e];if(gP(n))return e}return t.length}function mx(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function JE(t,e){return t?":not("+e.trim()+")":e}function yx(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Ut(s)&&(e+=JE(o,i),i=""),r=s,o=o||!Ut(r);n++}return i!==""&&(e+=JE(o,i)),e}function vx(t){return t.map(yx).join(",")}function _x(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Ut(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var It={};function Ix(t,e){return t.createText(e)}function Ex(t,e,n){t.setValue(e,n)}function wx(t,e){return t.createComment(cx(e))}function HT(t,e,n){return t.createElement(e,n)}function Pu(t,e,n,r,i){t.insertBefore(e,n,r,i)}function zT(t,e,n){t.appendChild(e,n)}function ZE(t,e,n,r,i){r!==null?Pu(t,e,n,r,i):zT(t,e,n)}function Tx(t,e,n){t.removeChild(null,e,n)}function Dx(t,e,n){t.setAttribute(e,"style",n)}function bx(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function qT(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&pP(t,e,r),i!==null&&bx(t,e,i),o!==null&&Dx(t,e,o)}function Ig(t,e,n,r,i,o,s,a,u,l,h){let p=lt+r,g=p+i,y=Cx(p,g),w=typeof l=="function"?l():l;return y[ne]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:w,incompleteFirstPass:!1,ssrId:h}}function Cx(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:It);return n}function Sx(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Ig(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Eg(t,e,n,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Nn]=i,p[Q]=r|4|128|8|64|1024,(l!==null||t&&t[Q]&2048)&&(p[Q]|=2048),Kw(p),p[tt]=p[ro]=t,p[ut]=n,p[Sn]=s||t&&t[Sn],p[be]=a||t&&t[be],p[zr]=u||t&&t[zr]||null,p[Ht]=o,p[zu]=BP(),p[Iu]=h,p[Uw]=l,p[Xt]=e.type==2?t[Xt]:p,p}function Ax(t,e,n){let r=an(e,t),i=Sx(n),o=t[Sn].rendererFactory,s=wg(t,Eg(t,i,null,GT(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function GT(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function WT(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function wg(t,e){return t[Vs]?t[FE][Bt]=e:t[Vs]=e,t[FE]=e,e}function x9(t=1){KT(Ne(),ie(),sr()+t,!1)}function KT(t,e,n,r){if(!r)if((e[Q]&3)===3){let o=t.preOrderCheckHooks;o!==null&&lu(e,o,n)}else{let o=t.preOrderHooks;o!==null&&du(e,o,0,n)}Kr(n)}var Yu=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Yu||{});function mp(t,e,n,r){let i=se(null);try{let[o,s,a]=t.inputs[n],u=null;(s&Yu.SignalBased)!==0&&(u=e[o][Mt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):Bw(e,u,o,r)}finally{se(i)}}function QT(t,e,n,r,i){let o=sr(),s=r&2;try{Kr(-1),s&&e.length>lt&&KT(t,e,lt,!1),ve(s?2:0,i),n(r,i)}finally{Kr(o),ve(s?3:1,i)}}function Ju(t,e,n){kx(t,e,n),(n.flags&64)===64&&Ox(t,e,n)}function Tg(t,e,n=an){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function Rx(t,e,n,r){let o=r.get(WP,xT)||n===sn.ShadowDom,s=t.selectRootElement(e,o);return Nx(s),s}function Nx(t){Mx(t)}var Mx=()=>null;function Px(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Qs(t,e,n,r,i,o,s,a){if(!a&&bg(e,t,n,r,i)){io(e)&&xx(n,e.index);return}if(e.type&3){let u=an(e,n);r=Px(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)}else e.type&12}function xx(t,e){let n=nn(e,t);n[Q]&16||(n[Q]|=64)}function kx(t,e,n){let r=n.directiveStart,i=n.directiveEnd;io(n)&&Ax(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Au(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],u=Us(e,t,s,n);if(uo(u,e),o!==null&&Ux(e,s-r,u,a,n,o),en(a)){let l=nn(n.index,e);l[ut]=Us(e,t,s,n)}}}function Ox(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=iP();try{Kr(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];rp(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&Lx(u,l)}}finally{Kr(-1),rp(s)}}function Lx(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Dg(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];px(e,o.selectors,!1)&&(r??=[],en(o)?r.unshift(o):r.push(o))}return r}function Fx(t,e,n,r,i,o){let s=an(t,e);Vx(e[be],s,o,t.value,n,r,i)}function Vx(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Gi(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function Ux(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];mp(r,n,u,l)}}function jx(t,e){let n=t[zr],r=n?n.get(on,null):null;r&&r.handleError(e)}function bg(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];mp(p,n[l],h,i),a=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];mp(h,l,r,i),a=!0}return a}function Bx(t,e){let n=nn(e,t),r=n[ne];$x(r,n);let i=n[Nn];i!==null&&n[Iu]===null&&(n[Iu]=VT(i,n[zr])),ve(18),Cg(r,n,n[ut]),ve(19,n[ut])}function $x(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Cg(t,e,n){sg(e);try{let r=t.viewQuery;r!==null&&gp(1,r,n);let i=t.template;i!==null&&QT(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[An]?.finishViewCreation(t),t.staticContentQueries&&UT(t,e),t.staticViewQueries&&gp(2,t.viewQuery,n);let o=t.components;o!==null&&Hx(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Q]&=-5,ag()}}function Hx(t,e){for(let n=0;n<e.length;n++)Bx(t,e[n])}function YT(t,e,n,r){let i=se(null);try{let o=e.tView,a=t[Q]&4096?4096:16,u=Eg(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[qr]=l;let h=t[An];return h!==null&&(u[An]=h.createEmbeddedView(o)),Cg(o,u,n),u}finally{se(i)}}function yp(t,e){return!e||e.firstChild===null||CT(t)}var zx;function Sg(t,e){return zx(t,e)}var Rn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Rn||{});function JT(t){return(t.flags&32)===32}function Hi(t,e,n,r,i){if(r!=null){let o,s=!1;Mn(r)?o=r:or(r)&&(s=!0,r=r[Nn]);let a=tn(r);t===0&&n!==null?i==null?zT(e,n,a):Pu(e,n,a,i||null,!0):t===1&&n!==null?Pu(e,n,a,i||null,!0):t===2?Tx(e,a,s):t===3&&e.destroyNode(a),o!=null&&nk(e,t,o,n,i)}}function qx(t,e){ZT(t,e),e[Nn]=null,e[Ht]=null}function Gx(t,e,n,r,i,o){r[Nn]=i,r[Ht]=e,Xu(t,r,n,1,i,o)}function ZT(t,e){e[Sn].changeDetectionScheduler?.notify(9),Xu(t,e,e[be],2,null,null)}function Wx(t){let e=t[Vs];if(!e)return Vf(t[ne],t);for(;e;){let n=null;if(or(e))n=e[Vs];else{let r=e[yt];r&&(n=r)}if(!n){for(;e&&!e[Bt]&&e!==t;)or(e)&&Vf(e[ne],e),e=e[tt];e===null&&(e=t),or(e)&&Vf(e[ne],e),n=e&&e[Bt]}e=n}}function Ag(t,e){let n=t[Ki],r=n.indexOf(e);n.splice(r,1)}function Rg(t,e){if(oo(e))return;let n=e[be];n.destroyNode&&Xu(t,e,n,3,null,null),Wx(e)}function Vf(t,e){if(oo(e))return;let n=se(null);try{e[Q]&=-129,e[Q]|=256,e[Pt]&&cf(e[Pt]),Qx(t,e),Kx(t,e),e[ne].type===1&&e[be].destroy();let r=e[qr];if(r!==null&&Mn(e[tt])){r!==e[tt]&&Ag(r,e);let i=e[An];i!==null&&i.detachView(t)}hp(e)}finally{se(n)}}function Kx(t,e){let n=t.cleanup,r=e[Eu];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[Eu]=null);let i=e[ir];if(i!==null){e[ir]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[wu];if(o!==null){e[wu]=null;for(let s of o)s.destroy()}}function Qx(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Qr)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];ve(4,a,u);try{u.call(a)}finally{ve(5,a,u)}}else{ve(4,i,o);try{o.call(i)}finally{ve(5,i,o)}}}}}function Yx(t,e,n){return Jx(t,e.parent,n)}function Jx(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Nn];if(io(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===sn.None||i===sn.Emulated)return null}return an(r,n)}function Zx(t,e,n){return ek(t,e,n)}function Xx(t,e,n){return t.type&40?an(t,n):null}var ek=Xx,XE;function Zu(t,e,n,r){let i=Yx(t,r,e),o=e[be],s=r.parent||e[Ht],a=Zx(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)ZE(o,i,n[u],a,!1);else ZE(o,i,n,a,!1);XE!==void 0&&XE(o,r,e,n,i)}function ks(t,e){if(e!==null){let n=e.type;if(n&3)return an(e,t);if(n&4)return vp(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return ks(t,r);{let i=t[e.index];return Mn(i)?vp(-1,i):tn(i)}}else{if(n&128)return ks(t,e.next);if(n&32)return Sg(e,t)()||tn(t[e.index]);{let r=XT(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Wr(t[Xt]);return ks(i,r)}else return ks(t,e.next)}}}return null}function XT(t,e){if(e!==null){let r=t[Xt][Ht],i=e.projection;return r.projection[i]}return null}function vp(t,e){let n=yt+t+1;if(n<e.length){let r=e[n],i=r[ne].firstChild;if(i!==null)return ks(r,i)}return e[Gr]}function Ng(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(s&&e===0&&(a&&uo(tn(a),r),n.flags|=2),!JT(n))if(u&8)Ng(t,e,n.child,r,i,o,!1),Hi(e,t,i,a,o);else if(u&32){let l=Sg(n,r),h;for(;h=l();)Hi(e,t,i,h,o);Hi(e,t,i,a,o)}else u&16?tk(t,e,r,n,i,o):Hi(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Xu(t,e,n,r,i,o){Ng(n,r,t.firstChild,e,i,o,!1)}function tk(t,e,n,r,i,o){let s=n[Xt],u=s[Ht].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Hi(e,t,i,h,o)}else{let l=u,h=s[tt];CT(r)&&(l.flags|=128),Ng(t,e,l,h,i,o,!0)}}function nk(t,e,n,r,i){let o=n[Gr],s=tn(n);o!==s&&Hi(e,t,r,o,i);for(let a=yt;a<n.length;a++){let u=n[a];Xu(u[ne],u,t,e,r,o)}}function rk(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Rn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Rn.Important),t.setStyle(n,r,i,o))}}function xu(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(tn(o)),Mn(o)&&ik(o,r);let s=n.type;if(s&8)xu(t,e,n.child,r);else if(s&32){let a=Sg(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=XT(e,n);if(Array.isArray(a))r.push(...a);else{let u=Wr(e[Xt]);xu(u[ne],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function ik(t,e){for(let n=yt;n<t.length;n++){let r=t[n],i=r[ne].firstChild;i!==null&&xu(r[ne],r,i,e)}t[Gr]!==t[Nn]&&e.push(t[Gr])}function eD(t){if(t[zi]!==null){for(let e of t[zi])e.impl.addSequence(e);t[zi].length=0}}var tD=[];function ok(t){return t[Pt]??sk(t)}function sk(t){let e=tD.pop()??Object.create(ck);return e.lView=t,e}function ak(t){t.lView[Pt]!==t&&(t.lView=null,tD.push(t))}var ck=Ie(U({},bs),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{qs(t.lView)},consumerOnSignalRead(){this.lView[Pt]=this}});function uk(t){let e=t[Pt]??Object.create(lk);return e.lView=t,e}var lk=Ie(U({},bs),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Wr(t.lView);for(;e&&!nD(e[ne]);)e=Wr(e);e&&Qw(e)},consumerOnSignalRead(){this.lView[Pt]=this}});function nD(t){return t.type!==2}function rD(t){if(t[wu]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[wu])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[Q]&8192)}}var dk=100;function iD(t,e=!0,n=0){let i=t[Sn].rendererFactory,o=!1;o||i.begin?.();try{hk(t,n)}catch(s){throw e&&jx(t,s),s}finally{o||i.end?.()}}function hk(t,e){let n=Xw();try{UE(!0),_p(t,e);let r=0;for(;Gu(t);){if(r===dk)throw new j(103,!1);r++,_p(t,1)}}finally{UE(n)}}function fk(t,e,n,r){if(oo(e))return;let i=e[Q],o=!1,s=!1;sg(e);let a=!0,u=null,l=null;o||(nD(t)?(l=ok(e),u=Sc(l)):tf()===null?(a=!1,l=uk(e),u=Sc(l)):e[Pt]&&(cf(e[Pt]),e[Pt]=null));try{Kw(e),tP(t.bindingStartIndex),n!==null&&QT(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&lu(e,y,null)}else{let y=t.preOrderHooks;y!==null&&du(e,y,0,null),Lf(e,0)}if(s||pk(e),rD(e),oD(e,0),t.contentQueries!==null&&UT(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&lu(e,y)}else{let y=t.contentHooks;y!==null&&du(e,y,1),Lf(e,1)}mk(t,e);let p=t.components;p!==null&&aD(e,p,0);let g=t.viewQuery;if(g!==null&&gp(2,g,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&lu(e,y)}else{let y=t.viewHooks;y!==null&&du(e,y,2),Lf(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Of]){for(let y of e[Of])y();e[Of]=null}o||(eD(e),e[Q]&=-73)}catch(h){throw o||qs(e),h}finally{l!==null&&(sf(l,u),a&&ak(l)),ag()}}function oD(t,e){for(let n=RT(t);n!==null;n=NT(n))for(let r=yt;r<n.length;r++){let i=n[r];sD(i,e)}}function pk(t){for(let e=RT(t);e!==null;e=NT(e)){if(!(e[Q]&2))continue;let n=e[Ki];for(let r=0;r<n.length;r++){let i=n[r];Qw(i)}}}function gk(t,e,n){ve(18);let r=nn(e,t);sD(r,n),ve(19,r[ut])}function sD(t,e){Xp(t)&&_p(t,e)}function _p(t,e){let r=t[ne],i=t[Q],o=t[Pt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&af(o)),s||=!1,o&&(o.dirty=!1),t[Q]&=-9217,s)fk(r,t,r.template,t[ut]);else if(i&8192){rD(t),oD(t,1);let a=r.components;a!==null&&aD(t,a,1),eD(t)}}function aD(t,e,n){for(let r=0;r<e.length;r++)gk(t,e[r],n)}function mk(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Kr(~i);else{let o=i,s=n[++r],a=n[++r];rP(s,o);let u=e[o];ve(24,u),a(2,u),ve(25,u)}}}finally{Kr(-1)}}function Mg(t,e){let n=Xw()?64:1088;for(t[Sn].changeDetectionScheduler?.notify(e);t;){t[Q]|=n;let r=Wr(t);if(Du(t)&&!r)return t;t=r}return null}function cD(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function yk(t,e){let n=yt+e;if(n<t.length)return t[n]}function uD(t,e,n,r=!0){let i=e[ne];if(_k(i,e,t,n),r){let s=vp(n,t),a=e[be],u=a.parentNode(t[Gr]);u!==null&&Gx(i,t[Ht],a,e,u,s)}let o=e[Iu];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function vk(t,e){let n=ku(t,e);return n!==void 0&&Rg(n[ne],n),n}function ku(t,e){if(t.length<=yt)return;let n=yt+e,r=t[n];if(r){let i=r[qr];i!==null&&i!==t&&Ag(i,r),e>0&&(t[n-1][Bt]=r[Bt]);let o=vu(t,yt+e);qx(r[ne],r);let s=o[An];s!==null&&s.detachView(o[ne]),r[tt]=null,r[Bt]=null,r[Q]&=-129}return r}function _k(t,e,n,r){let i=yt+r,o=n.length;r>0&&(n[i-1][Bt]=e),r<o-yt?(e[Bt]=n[i],Rw(n,yt+r,e)):(n.push(e),e[Bt]=null),e[tt]=n;let s=e[qr];s!==null&&n!==s&&lD(s,e);let a=e[An];a!==null&&a.insertView(t),tp(e),e[Q]|=128}function lD(t,e){let n=t[Ki],r=e[tt];if(or(r))t[Q]|=2;else{let i=r[tt][Xt];e[Xt]!==i&&(t[Q]|=2)}n===null?t[Ki]=[e]:n.push(e)}var js=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,n=e[ne];return xu(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r}get context(){return this._lView[ut]}set context(e){this._lView[ut]=e}get destroyed(){return oo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[tt];if(Mn(e)){let n=e[Tu],r=n?n.indexOf(this):-1;r>-1&&(ku(e,r),vu(n,r))}this._attachedToViewContainer=!1}Rg(this._lView[ne],this._lView)}onDestroy(e){Yw(this._lView,e)}markForCheck(){Mg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Q]&=-129}reattach(){tp(this._lView),this._lView[Q]|=128}detectChanges(){this._lView[Q]|=1024,iD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Du(this._lView),n=this._lView[qr];n!==null&&!e&&Ag(n,this._lView),ZT(this._lView[ne],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e;let n=Du(this._lView),r=this._lView[qr];r!==null&&!n&&lD(r,this._lView),tp(this._lView)}};var Yr=(()=>{class t{static __NG_ELEMENT_ID__=wk}return t})(),Ik=Yr,Ek=class extends Ik{_declarationLView;_declarationTContainer;elementRef;constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=YT(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new js(i)}};function wk(){return Pg(_t(),ie())}function Pg(t,e){return t.type&4?new Ek(e,t,co(t,e)):null}function el(t,e,n,r,i){let o=t.data[e];if(o===null)o=Tk(t,e,n,r,i),nP()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=XM();o.injectorIndex=s===null?-1:s.injectorIndex}return Xr(o,!0),o}function Tk(t,e,n,r,i){let o=Jw(),s=rg(),a=s?o:o&&o.parent,u=t.data[e]=bk(t,a,n,e,r,i);return Dk(t,u,o,s),u}function Dk(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function bk(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return YM()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var L9=new RegExp(`^(\\d+)*(${GP}|${qP})*(.*)`);var Ck=()=>null;function Ip(t,e){return Ck(t,e)}var Sk=class{},dD=class{},Ep=class{resolveComponentFactory(e){throw Error(`No component factory found for ${mt(e)}.`)}},tl=class{static NULL=new Ep},Zi=class{},Ak=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>Rk()}return t})();function Rk(){let t=ie(),e=_t(),n=nn(e.index,t);return(or(n)?n:t)[be]}var Nk=(()=>{class t{static \u0275prov=H({token:t,providedIn:"root",factory:()=>null})}return t})();var Uf={},wp=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Bu(r);let i=this.injector.get(e,Uf,r);return i!==Uf||n===Uf?i:this.parentInjector.get(e,n,r)}};function Tp(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Wf(i,a);else if(o==2){let u=a,l=e[++s];r=Wf(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function zt(t,e=te.Default){let n=ie();if(n===null)return W(t,e);let r=_t();return gT(r,n,ct(t),e)}function xg(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a,u=null,l=null,h=Pk(s);h===null?a=s:[a,u,l]=h,Ok(t,e,n,a,o,u,l)}o!==null&&r!==null&&Mk(n,r,o)}function Mk(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new j(-301,!1);r.push(e[i],o)}}function Pk(t){let e=null,n=!1;for(let s=0;s<t.length;s++){let a=t[s];if(s===0&&en(a)&&(e=a),a.findHostDirectiveDefs!==null){n=!0;break}}if(!n)return null;let r=null,i=null,o=null;for(let s of t)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,xk(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?t:t.slice(1)),[r,i,o]):null}function xk(t,e,n,r){let i=e.length;t.findHostDirectiveDefs(t,e,r),n.set(t,[i,e.length-1])}function kk(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Ok(t,e,n,r,i,o,s){let a=r.length,u=!1;for(let g=0;g<a;g++){let y=r[g];!u&&en(y)&&(u=!0,kk(t,n,g)),op(Au(n,e),t,y.type)}Bk(n,t.data.length,a);for(let g=0;g<a;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=WT(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let g=0;g<a;g++){let y=r[g];if(n.mergedAttrs=Yi(n.mergedAttrs,y.hostAttrs),Fk(t,n,e,p,y),jk(p,y,i),s!==null&&s.has(y)){let[R,N]=s.get(y);n.directiveToIndex.set(y.type,[p,R+n.directiveStart,N+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let w=y.type.prototype;!l&&(w.ngOnChanges||w.ngOnInit||w.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(w.ngOnChanges||w.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}Lk(t,n,o)}function Lk(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))ew(0,e,i,r),ew(1,e,i,r),nw(e,r,!1);else{let o=n.get(i);tw(0,e,o,r),tw(1,e,o,r),nw(e,r,!0)}}}function ew(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),hD(e,o)}}function tw(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),hD(e,s)}}function hD(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function nw(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||_g(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function Fk(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Br(i.type,!0)),s=new Qr(o,en(i),zt);t.blueprint[r]=s,n[r]=s,Vk(t,e,r,WT(t,n,i.hostVars,It),i)}function Vk(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;Uk(s)!=a&&s.push(a),s.push(n,r,o)}}function Uk(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function jk(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;en(e)&&(n[""]=t)}}function Bk(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function fD(t,e,n,r,i,o,s,a){let u=e.consts,l=Qi(u,s),h=el(e,t,2,r,l);return o&&xg(e,n,h,Qi(u,a),i),h.mergedAttrs=Yi(h.mergedAttrs,h.attrs),h.attrs!==null&&Tp(h,h.attrs,!1),h.mergedAttrs!==null&&Tp(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function pD(t,e){cg(t,e),Yp(e)&&t.queries.elementEnd(e)}var Ou=class extends tl{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Hr(e);return new Xi(n,this.ngModule)}};function $k(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&Yu.SignalBased)!==0};return i&&(o.transform=i),o})}function Hk(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function zk(t,e,n){let r=e instanceof vt?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new wp(n,r):n}function qk(t){let e=t.get(Zi,null);if(e===null)throw new j(407,!1);let n=t.get(Nk,null),r=t.get(Ji,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r}}function Gk(t,e){let n=(t.selectors[0][0]||"div").toLowerCase();return HT(e,n,n==="svg"?qw:n==="math"?BM:null)}var Xi=class extends dD{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=$k(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=Hk(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=vx(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i){ve(22);let o=se(null);try{let s=this.componentDef,a=r?["ng-version","19.2.10"]:_x(this.componentDef.selectors[0]),u=Ig(0,null,null,1,0,null,null,null,null,[a],null),l=zk(s,i||this.ngModule,e),h=qk(l),p=h.rendererFactory.createRenderer(null,s),g=r?Rx(p,r,s.encapsulation,l):Gk(s,p),y=Eg(null,u,null,512|GT(s),null,null,h,p,l,null,VT(g,l,!0));y[lt]=g,sg(y);let w=null;try{let R=fD(lt,u,y,"#host",()=>[this.componentDef],!0,0);g&&(qT(p,g,R),uo(g,y)),Ju(u,y,R),yg(u,R,y),pD(u,R),n!==void 0&&Wk(R,this.ngContentSelectors,n),w=nn(R.index,y),y[ut]=w[ut],Cg(u,y,null)}catch(R){throw w!==null&&hp(w),hp(y),R}finally{ve(23),ag()}return new Dp(this.componentType,y)}finally{se(o)}}},Dp=class extends Sk{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n){super(),this._rootLView=n,this._tNode=Zp(n[ne],lt),this.location=co(this._tNode,n),this.instance=nn(this._tNode.index,n)[ut],this.hostView=this.changeDetectorRef=new js(n,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=bg(r,i[ne],i,e,n);this.previousInputValues.set(e,n);let s=nn(r.index,i);Mg(s,1)}get injector(){return new jr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Wk(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var ar=(()=>{class t{static __NG_ELEMENT_ID__=Kk}return t})();function Kk(){let t=_t();return mD(t,ie())}var Qk=ar,gD=class extends Qk{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return co(this._hostTNode,this._hostLView)}get injector(){return new jr(this._hostTNode,this._hostLView)}get parentInjector(){let e=ug(this._hostTNode,this._hostLView);if(uT(e)){let n=Cu(e,this._hostLView),r=bu(e),i=n[ne].data[r+8];return new jr(i,n)}else return new jr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=rw(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-yt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Ip(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,yp(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!FM(e),a;if(s)a=n;else{let w=n||{};a=w.index,r=w.injector,i=w.projectableNodes,o=w.environmentInjector||w.ngModuleRef}let u=s?e:new Xi(Hr(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let R=(s?l:this.parentInjector).get(vt,null);R&&(o=R)}let h=Hr(u.componentType??{}),p=Ip(this._lContainer,h?.id??null),g=p?.firstChild??null,y=u.create(l,i,g,o);return this.insertImpl(y.hostView,a,yp(this._hostTNode,p)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(HM(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[tt],l=new gD(u,u[Ht],u[tt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return uD(s,i,o,r),e.attachToViewContainerRef(),Rw(jf(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=rw(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=ku(this._lContainer,n);r&&(vu(jf(this._lContainer),n),Rg(r[ne],r))}detach(e){let n=this._adjustIndex(e,-1),r=ku(this._lContainer,n);return r&&vu(jf(this._lContainer),n)!=null?new js(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function rw(t){return t[Tu]}function jf(t){return t[Tu]||(t[Tu]=[])}function mD(t,e){let n,r=e[t.index];return Mn(r)?n=r:(n=cD(r,e,null,t),e[t.index]=n,wg(e,n)),Jk(n,e,t,r),new gD(n,t,e)}function Yk(t,e){let n=t[be],r=n.createComment(""),i=an(e,t),o=n.parentNode(i);return Pu(n,o,r,n.nextSibling(i),!1),r}var Jk=eO,Zk=()=>!1;function Xk(t,e,n){return Zk(t,e,n)}function eO(t,e,n,r){if(t[Gr])return;let i;n.type&8?i=tn(r):i=Yk(e,n),t[Gr]=i}var bp=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Cp=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)kg(e,n).matches!==null&&this.queries[n].setDirty()}},Sp=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=cO(e):this.predicate=e}},Ap=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Rp=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,tO(n,o)),this.matchTNodeWithReadOption(e,n,hu(n,e,o,!1,!1))}else r===Yr?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,hu(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Ws||i===ar||i===Yr&&n.type&4)this.addMatch(n.index,-2);else{let o=hu(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function tO(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function nO(t,e){return t.type&11?co(t,e):t.type&4?Pg(t,e):null}function rO(t,e,n,r){return n===-1?nO(e,t):n===-2?iO(t,e,r):Us(t,t[ne],n,e)}function iO(t,e,n){if(n===Ws)return co(e,t);if(n===Yr)return Pg(e,t);if(n===ar)return mD(e,t)}function yD(t,e,n,r){let i=e[An].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let h=o[l];a.push(rO(e,h,s[u+1],n.metadata.read))}}i.matches=a}return i.matches}function Np(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=yD(t,e,i,n);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-u];for(let p=yt;p<h.length;p++){let g=h[p];g[qr]===g[tt]&&Np(g[ne],g,l,r)}if(h[Ki]!==null){let p=h[Ki];for(let g=0;g<p.length;g++){let y=p[g];Np(y[ne],y,l,r)}}}}}return r}function oO(t,e){return t[An].queries[e].queryList}function sO(t,e,n){let r=new dp((n&4)===4);return GM(t,e,r,r.destroy),(e[An]??=new Cp).queries.push(new bp(r))-1}function aO(t,e,n){let r=Ne();return r.firstCreatePass&&(uO(r,new Sp(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),sO(r,ie(),e)}function cO(t){return t.split(",").map(e=>e.trim())}function uO(t,e,n){t.queries===null&&(t.queries=new Ap),t.queries.track(new Rp(e,n))}function kg(t,e){return t.queries.getByIndex(e)}function lO(t,e){let n=t[ne],r=kg(n,e);return r.crossesNgTemplate?Np(n,t,e,[]):yD(n,t,r,e)}var eo=class{},Og=class{};var Mp=class extends eo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Ou(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=Pw(e);this._bootstrapComponents=BT(o.bootstrap),this._r3Injector=vT(e,n,[{provide:eo,useValue:this},{provide:tl,useValue:this.componentFactoryResolver},...r],mt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Pp=class extends Og{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Mp(this.moduleType,e,[])}};var Lu=class extends eo{injector;componentFactoryResolver=new Ou(this);instance=null;constructor(e){super();let n=new Fs([...e.providers,{provide:eo,useValue:this},{provide:tl,useValue:this.componentFactoryResolver}],e.parent||Hu(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function nl(t,e,n=null){return new Lu({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var dO=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=xw(!1,n.type),i=r.length>0?nl([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=H({token:t,providedIn:"environment",factory:()=>new t(W(vt))})}return t})();function vD(t){return $s(()=>{let e=ID(t),n=Ie(U({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===ST.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(dO).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||sn.Emulated,styles:t.styles||pt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&ho("NgStandalone"),ED(n);let r=t.dependencies;return n.directiveDefs=iw(r,!1),n.pipeDefs=iw(r,!0),n.id=mO(n),n})}function hO(t){return Hr(t)||bM(t)}function fO(t){return t!==null}function fo(t){return $s(()=>({type:t.type,bootstrap:t.bootstrap||pt,declarations:t.declarations||pt,imports:t.imports||pt,exports:t.exports||pt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function pO(t,e){if(t==null)return $r;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Yu.None,u=null),n[o]=[r,a,u],e[o]=s}return n}function gO(t){if(t==null)return $r;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Ys(t){return $s(()=>{let e=ID(t);return ED(e),e})}function _D(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function ID(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||$r,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||pt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:pO(t.inputs,e),outputs:gO(t.outputs),debugInfo:null}}function ED(t){t.features?.forEach(e=>e(t))}function iw(t,e){if(!t)return null;let n=e?CM:hO;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(fO)}function mO(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function yO(t){return Object.getPrototypeOf(t.prototype).constructor}function vO(t){let e=yO(t.type),n=!0,r=[t];for(;e;){let i;if(en(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Bf(t.inputs),s.declaredInputs=Bf(t.declaredInputs),s.outputs=Bf(t.outputs);let a=i.hostBindings;a&&TO(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&EO(t,u),l&&wO(t,l),_O(t,i),nM(t.outputs,i.outputs),en(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===vO&&(n=!1)}}e=Object.getPrototypeOf(e)}IO(r)}function _O(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function IO(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Yi(i.hostAttrs,n=Yi(n,i.hostAttrs))}}function Bf(t){return t===$r?{}:t===pt?[]:t}function EO(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function wO(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function TO(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function wD(t){return bO(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function DO(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function bO(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function TD(t,e,n){return t[e]=n}function $t(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function DD(t,e,n,r){let i=$t(t,e,n);return $t(t,e+1,r)||i}function CO(t,e,n,r,i,o,s,a,u){let l=e.consts,h=el(e,t,4,s||null,a||null);ng()&&xg(e,n,h,Qi(l,u),Dg),h.mergedAttrs=Yi(h.mergedAttrs,h.attrs),cg(e,h);let p=h.tView=Ig(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function SO(t,e,n,r,i,o,s,a,u,l){let h=n+lt,p=e.firstCreatePass?CO(h,e,t,r,i,o,s,a,u):e.data[h];Xr(p,!1);let g=RO(e,t,p,n);Wu()&&Zu(e,t,g,p),uo(g,t);let y=cD(g,t,g,p);return t[h]=y,wg(t,y),Xk(y,p,t),qu(p)&&Ju(e,t,p),u!=null&&Tg(t,p,l),p}function AO(t,e,n,r,i,o,s,a){let u=ie(),l=Ne(),h=Qi(l.consts,o);return SO(u,l,t,e,n,r,i,h,s,a),AO}var RO=NO;function NO(t,e,n,r){return Ku(!0),e[be].createComment("")}var bD=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var CD=new B("");var MO=(()=>{class t{static \u0275prov=H({token:t,providedIn:"root",factory:()=>new xp})}return t})(),xp=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,n]of this.queues)e===null?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(let n of e)e.delete(n),this.queuedEffectCount--,n.run()}};function Js(t){return!!t&&typeof t.then=="function"}function SD(t){return!!t&&typeof t.subscribe=="function"}var PO=new B("");var AD=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=x(PO,{optional:!0})??[];injector=x(rn);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=Dt(this.injector,i);if(Js(o))n.push(o);else if(SD(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Lg=new B("");function xO(){lf(()=>{throw new j(600,!1)})}function kO(t){return t.isBoundToModule}var OO=10;var Jr=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=x(xP);afterRenderManager=x(OT);zonelessEnabled=x(dg);rootEffectScheduler=x(MO);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new je;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=x(Pn).hasPendingTasks.pipe(ce(n=>!n));constructor(){x(lo,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=x(vt);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=rn.NULL){ve(10);let o=n instanceof dD;if(!this._injector.get(AD).done){let y="";throw new j(405,y)}let a;o?a=n:a=this._injector.get(tl).resolveComponentFactory(n),this.componentTypes.push(a.componentType);let u=kO(a)?void 0:this._injector.get(eo),l=r||a.selector,h=a.create(i,[],l,u),p=h.location.nativeElement,g=h.injector.get(CD,null);return g?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),fu(this.components,h),g?.unregisterApplication(p)}),this._loadComponent(h),ve(11,h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ve(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(mg.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new j(101,!1);let n=se(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,se(n),this.afterTick.next(),ve(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Zi,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<OO;)ve(14),this.synchronizeOnce(),ve(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let n=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)LO(r,i,n,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Gu(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;fu(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(Lg,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>fu(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new j(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function fu(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function LO(t,e,n,r){if(!n&&!Gu(t))return;iD(t,e,n&&!r?0:1)}function FO(t,e,n,r){let i=ie(),o=so();if($t(i,o,e)){let s=Ne(),a=ao();Fx(a,i,t,e,n,r)}return FO}function Fg(t,e,n,r){return $t(t,so(),n)?e+Gi(n)+r:It}function RD(t,e,n,r,i,o){let s=eP(),a=DD(t,s,n,i);return ig(2),a?e+Gi(n)+r+Gi(i)+o:It}function cu(t,e){return t<<17|e<<2}function Zr(t){return t>>17&32767}function VO(t){return(t&2)==2}function UO(t,e){return t&131071|e<<17}function kp(t){return t|2}function to(t){return(t&131068)>>2}function $f(t,e){return t&-131069|e<<2}function jO(t){return(t&1)===1}function Op(t){return t|1}function BO(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Zr(s),u=to(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||Hs(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let g=Zr(t[a+1]);t[r+1]=cu(g,a),g!==0&&(t[g+1]=$f(t[g+1],r)),t[a+1]=UO(t[a+1],r)}else t[r+1]=cu(a,0),a!==0&&(t[a+1]=$f(t[a+1],r)),a=r;else t[r+1]=cu(u,0),a===0?a=r:t[u+1]=$f(t[u+1],r),u=r;l&&(t[r+1]=kp(t[r+1])),ow(t,h,r,!0),ow(t,h,r,!1),$O(e,h,t,r,o),s=cu(a,u),o?e.classBindings=s:e.styleBindings=s}function $O(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Hs(o,e)>=0&&(n[r+1]=Op(n[r+1]))}function ow(t,e,n,r){let i=t[n+1],o=e===null,s=r?Zr(i):to(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];HO(u,e)&&(a=!0,t[s+1]=r?Op(l):kp(l)),s=r?Zr(l):to(l)}a&&(t[n+1]=r?kp(i):Op(i))}function HO(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Hs(t,e)>=0:!1}var jt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function zO(t){return t.substring(jt.key,jt.keyEnd)}function qO(t){return GO(t),ND(t,MD(t,0,jt.textEnd))}function ND(t,e){let n=jt.textEnd;return n===e?-1:(e=jt.keyEnd=WO(t,jt.key=e,n),MD(t,e,n))}function GO(t){jt.key=0,jt.keyEnd=0,jt.value=0,jt.valueEnd=0,jt.textEnd=t.length}function MD(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function WO(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function KO(t,e,n){let r=ie(),i=so();if($t(r,i,e)){let o=Ne(),s=ao();Qs(o,s,r,t,e,r[be],n,!1)}return KO}function Lp(t,e,n,r,i){bg(e,t,n,i?"class":"style",r)}function QO(t,e,n){return PD(t,e,n,!1),QO}function YO(t,e){return PD(t,e,null,!0),YO}function JO(t,e){for(let n=qO(e);n>=0;n=ND(e,n))Kp(t,zO(e),!0)}function PD(t,e,n,r){let i=ie(),o=Ne(),s=ig(2);if(o.firstUpdatePass&&kD(o,t,s,r),e!==It&&$t(i,s,e)){let a=o.data[sr()];OD(o,a,i,i[be],t,i[s+1]=o1(e,n),r,s)}}function ZO(t,e,n,r){let i=Ne(),o=ig(2);i.firstUpdatePass&&kD(i,null,o,r);let s=ie();if(n!==It&&$t(s,o,n)){let a=i.data[sr()];if(LD(a,r)&&!xD(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(n=Wf(u,n||"")),Lp(i,a,s,n,r)}else i1(i,a,s,s[be],s[o+1],s[o+1]=r1(t,e,n),r,o)}}function xD(t,e){return e>=t.expandoStartIndex}function kD(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[sr()],s=xD(t,n);LD(o,r)&&e===null&&!s&&(e=!1),e=XO(i,o,e,r),BO(i,o,e,n,s,r)}}function XO(t,e,n,r){let i=oP(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Hf(null,t,e,n,r),n=Bs(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Hf(i,t,e,n,r),o===null){let u=e1(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Hf(null,t,e,u[1],r),u=Bs(u,e.attrs,r),t1(t,e,r,u))}else o=n1(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function e1(t,e,n){let r=n?e.classBindings:e.styleBindings;if(to(r)!==0)return t[Zr(r)]}function t1(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Zr(i)]=r}function n1(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Bs(r,s,n)}return Bs(r,e.attrs,n)}function Hf(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Bs(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Bs(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Kp(t,s,n?!0:e[++o]))}return t===void 0?null:t}function r1(t,e,n){if(n==null||n==="")return pt;let r=[],i=vg(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function i1(t,e,n,r,i,o,s,a){i===It&&(i=pt);let u=0,l=0,h=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;h!==null||p!==null;){let g=u<i.length?i[u+1]:void 0,y=l<o.length?o[l+1]:void 0,w=null,R;h===p?(u+=2,l+=2,g!==y&&(w=p,R=y)):p===null||h!==null&&h<p?(u+=2,w=h):(l+=2,w=p,R=y),w!==null&&OD(t,e,n,r,w,R,s,a),h=u<i.length?i[u]:null,p=l<o.length?o[l]:null}}function OD(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=jO(l)?sw(u,e,n,i,to(l),s):void 0;if(!Fu(h)){Fu(o)||VO(l)&&(o=sw(u,null,n,i,a,s));let p=Gw(sr(),n);rk(r,s,p,i,o)}}function sw(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,g=n[i+1];g===It&&(g=p?pt:void 0);let y=p?xf(g,r):h===r?g:void 0;if(l&&!Fu(y)&&(y=xf(u,r)),Fu(y)&&(a=y,s))return a;let w=t[i+1];i=s?Zr(w):to(w)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=xf(u,r))}return a}function Fu(t){return t!==void 0}function o1(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=mt(vg(t)))),t}function LD(t,e){return(t.flags&(e?8:16))!==0}function H9(t,e,n){let r=ie(),i=Fg(r,t,e,n);ZO(Kp,JO,i,!0)}function z9(t,e){ho("NgControlFlow");let n=ie(),r=so(),i=n[r]!==It?n[r]:-1,o=i!==-1?aw(n,lt+i):void 0,s=0;if($t(n,r,t)){let a=se(null);try{if(o!==void 0&&vk(o,s),t!==-1){let u=lt+t,l=aw(n,u),h=s1(n[ne],u),p=Ip(l,h.tView.ssrId),g=YT(n,h,e,{dehydratedView:p});uD(l,g,s,yp(h,p))}}finally{se(a)}}else if(o!==void 0){let a=yk(o,s);a!==void 0&&(a[ut]=e)}}function aw(t,e){return t[e]}function s1(t,e){return Zp(t,e)}function FD(t,e,n,r){let i=ie(),o=Ne(),s=lt+t,a=i[be],u=o.firstCreatePass?fD(s,o,i,e,Dg,ng(),n,r):o.data[s],l=a1(o,i,u,a,e,t);i[s]=l;let h=qu(u);return Xr(u,!0),qT(a,l,u),!JT(u)&&Wu()&&Zu(o,i,l,u),(WM()===0||h)&&uo(l,i),KM(),h&&(Ju(o,i,u),yg(o,u,i)),r!==null&&Tg(i,u),FD}function VD(){let t=_t();rg()?Zw():(t=t.parent,Xr(t,!1));let e=t;JM(e)&&ZM(),QM();let n=Ne();return n.firstCreatePass&&pD(n,e),e.classesWithoutHost!=null&&hP(e)&&Lp(n,e,ie(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&fP(e)&&Lp(n,e,ie(),e.stylesWithoutHost,!1),VD}function Vg(t,e,n,r){return FD(t,e,n,r),VD(),Vg}var a1=(t,e,n,r,i,o)=>(Ku(!0),HT(r,i,uP()));function c1(t,e,n,r,i){let o=e.consts,s=Qi(o,r),a=el(e,t,8,"ng-container",s);s!==null&&Tp(a,s,!0);let u=Qi(o,i);return ng()&&xg(e,n,a,u,Dg),a.mergedAttrs=Yi(a.mergedAttrs,a.attrs),e.queries!==null&&e.queries.elementStart(e,a),a}function u1(t,e,n){let r=ie(),i=Ne(),o=t+lt,s=i.firstCreatePass?c1(o,i,r,e,n):i.data[o];Xr(s,!0);let a=d1(i,r,s,t);return r[o]=a,Wu()&&Zu(i,r,a,s),uo(a,r),qu(s)&&(Ju(i,r,s),yg(i,s,r)),n!=null&&Tg(r,s),u1}function l1(){let t=_t(),e=Ne();return rg()?Zw():(t=t.parent,Xr(t,!1)),e.firstCreatePass&&(cg(e,t),Yp(t)&&e.queries.elementEnd(t)),l1}var d1=(t,e,n,r)=>(Ku(!0),wx(e[be],""));function q9(){return ie()}function h1(t,e,n){let r=ie(),i=so();if($t(r,i,e)){let o=Ne(),s=ao();Qs(o,s,r,t,e,r[be],n,!0)}return h1}var Vr=void 0;function f1(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var p1=["en",[["a","p"],["AM","PM"],Vr],[["AM","PM"],Vr,Vr],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Vr,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Vr,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Vr,"{1} 'at' {0}",Vr],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",f1],zf={};function Ug(t){let e=g1(t),n=cw(e);if(n)return n;let r=e.split("-")[0];if(n=cw(r),n)return n;if(r==="en")return p1;throw new j(701,!1)}function cw(t){return t in zf||(zf[t]=Ps.ng&&Ps.ng.common&&Ps.ng.common.locales&&Ps.ng.common.locales[t]),zf[t]}var po=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(po||{});function g1(t){return t.toLowerCase().replace(/_/g,"-")}var Vu="en-US";var m1=Vu;function y1(t){typeof t=="string"&&(m1=t.toLowerCase().replace(/_/g,"-"))}function uw(t,e,n){return function r(i){if(i===Function)return n;let o=io(t)?nn(t.index,e):e;Mg(o,5);let s=e[ut],a=lw(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)a=lw(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function lw(t,e,n,r){let i=se(null);try{return ve(6,e,n),n(r)!==!1}catch(o){return v1(t,o),!1}finally{ve(7,e,n),se(i)}}function v1(t,e){let n=t[zr],r=n?n.get(on,null):null;r&&r.handleError(e)}function dw(t,e,n,r,i,o){let s=e[n],a=e[ne],l=a.data[n].outputs[r],h=s[l],p=a.firstCreatePass?tg(a):null,g=eg(e),y=h.subscribe(o),w=g.length;g.push(o,y),p&&p.push(i,t.index,w,-(w+1))}var _1=new Map;function I1(t,e,n,r){let i=ie(),o=Ne(),s=_t();return UD(o,i,i[be],s,t,e,r),I1}function E1(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Eu],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function UD(t,e,n,r,i,o,s){let a=qu(r),l=t.firstCreatePass?tg(t):null,h=eg(e),p=!0;if(r.type&3||s){let g=an(r,e),y=s?s(g):g,w=h.length,R=s?O=>s(tn(O[r.index])):r.index,N=null;if(!s&&a&&(N=E1(t,e,i,r.index)),N!==null){let O=N.__ngLastListenerFn__||N;O.__ngNextListenerFn__=o,N.__ngLastListenerFn__=o,p=!1}else{o=uw(r,e,o);let O=e[zr].get(Qu);_1.get(O)?.(y,i,o);let V=n.listen(y,i,o);h.push(o,V),l&&l.push(i,R,w,w+1)}}else o=uw(r,e,o);if(p){let g=r.outputs?.[i],y=r.hostDirectiveOutputs?.[i];if(y&&y.length)for(let w=0;w<y.length;w+=2){let R=y[w],N=y[w+1];dw(r,e,R,N,i,o)}if(g&&g.length)for(let w of g)dw(r,e,w,i,i,o)}}function G9(t=1){return aP(t)}function w1(t,e,n){return jD(t,"",e,"",n),w1}function jD(t,e,n,r,i){let o=ie(),s=Fg(o,e,n,r);if(s!==It){let a=Ne(),u=ao();Qs(a,u,o,t,s,o[be],i,!1)}return jD}function T1(t,e,n,r,i,o,s){let a=ie(),u=RD(a,e,n,r,i,o);if(u!==It){let l=Ne(),h=ao();Qs(l,h,a,t,u,a[be],s,!1)}return T1}function W9(t,e,n){aO(t,e,n)}function K9(t){let e=ie(),n=Ne(),r=tT();og(r+1);let i=kg(n,r);if(t.dirty&&$M(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=lO(e,r);t.reset(o,LP),t.notifyOnChanges()}return!0}return!1}function Q9(){return oO(ie(),tT())}function D1(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function Y9(t,e=""){let n=ie(),r=Ne(),i=t+lt,o=r.firstCreatePass?el(r,i,1,e,null):r.data[i],s=b1(r,n,o,e,t);n[i]=s,Wu()&&Zu(r,n,s,o),Xr(o,!1)}var b1=(t,e,n,r,i)=>(Ku(!0),Ix(e[be],r));function C1(t){return BD("",t,""),C1}function BD(t,e,n){let r=ie(),i=Fg(r,t,e,n);return i!==It&&$D(r,sr(),i),BD}function S1(t,e,n,r,i){let o=ie(),s=RD(o,t,e,n,r,i);return s!==It&&$D(o,sr(),s),S1}function $D(t,e,n){let r=Gw(e,t);Ex(t[be],r,n)}function A1(t,e,n){bT(e)&&(e=e());let r=ie(),i=so();if($t(r,i,e)){let o=Ne(),s=ao();Qs(o,s,r,t,e,r[be],n,!1)}return A1}function J9(t,e){let n=bT(t);return n&&t.set(e),n}function R1(t,e){let n=ie(),r=Ne(),i=_t();return UD(r,n,n[be],i,t,e),R1}function N1(t,e,n){let r=Ne();if(r.firstCreatePass){let i=en(t);Fp(n,r.data,r.blueprint,i,!0),Fp(e,r.data,r.blueprint,i,!1)}}function Fp(t,e,n,r,i){if(t=ct(t),Array.isArray(t))for(let o=0;o<t.length;o++)Fp(t[o],e,n,r,i);else{let o=Ne(),s=ie(),a=_t(),u=Wi(t)?t:ct(t.provide),l=Lw(t),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(Wi(t)||!t.multi){let y=new Qr(l,i,zt),w=Gf(u,e,i?h:h+g,p);w===-1?(op(Au(a,s),o,u),qf(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[w]=y,s[w]=y)}else{let y=Gf(u,e,h+g,p),w=Gf(u,e,h,h+g),R=y>=0&&n[y],N=w>=0&&n[w];if(i&&!N||!i&&!R){op(Au(a,s),o,u);let O=x1(i?P1:M1,n.length,i,r,l);!i&&N&&(n[w].providerFactory=O),qf(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(O),s.push(O)}else{let O=HD(n[i?w:y],l,!i&&r);qf(o,t,y>-1?y:w,O)}!i&&r&&N&&n[w].componentProviders++}}}function qf(t,e,n,r){let i=Wi(e),o=MM(e);if(i||o){let u=(o?ct(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function HD(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Gf(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function M1(t,e,n,r,i){return Vp(this.multi,[])}function P1(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=Us(r,r[ne],this.providerFactory.index,i);s=u.slice(0,a),Vp(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],Vp(o,s);return s}function Vp(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function x1(t,e,n,r,i){let o=new Qr(t,n,zt);return o.multi=[],o.index=e,o.componentProviders=0,HD(o,i,r&&!n),o}function Z9(t,e=[]){return n=>{n.providersResolver=(r,i)=>N1(r,i?i(t):t,e)}}function zD(t,e){let n=t[e];return n===It?void 0:n}function k1(t,e,n,r,i,o){let s=e+n;return $t(t,s,i)?TD(t,s+1,o?r.call(o,i):r(i)):zD(t,s+1)}function O1(t,e,n,r,i,o,s){let a=e+n;return DD(t,a,i,o)?TD(t,a+2,s?r.call(s,i,o):r(i,o)):zD(t,a+2)}function X9(t,e){let n=Ne(),r,i=t+lt;n.firstCreatePass?(r=L1(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Br(r.type,!0)),s,a=ft(zt);try{let u=Su(!1),l=o();return Su(u),D1(n,ie(),i,l),l}finally{ft(a)}}function L1(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function e8(t,e,n){let r=t+lt,i=ie(),o=Ww(i,r);return qD(i,r)?k1(i,eT(),e,o.transform,n,o):o.transform(n)}function t8(t,e,n,r){let i=t+lt,o=ie(),s=Ww(o,i);return qD(o,i)?O1(o,eT(),e,s.transform,n,r,s):s.transform(n,r)}function qD(t,e){return t[ne].data[e].pure}var Up=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},n8=new Up("19.2.10"),jp=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},GD=(()=>{class t{compileModuleSync(n){return new Pp(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Pw(n),o=BT(i.declarations).reduce((s,a)=>{let u=Hr(a);return u&&s.push(new Xi(u)),s},[]);return new jp(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var F1=(()=>{class t{zone=x(xe);changeDetectionScheduler=x(Ji);applicationRef=x(Jr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),V1=new B("",{factory:()=>!1});function WD({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new xe(Ie(U({},KD()),{scheduleInRootZone:n})),[{provide:xe,useFactory:t},{provide:Ls,multi:!0,useFactory:()=>{let r=x(F1,{optional:!0});return()=>r.initialize()}},{provide:Ls,multi:!0,useFactory:()=>{let r=x(U1);return()=>{r.initialize()}}},e===!0?{provide:IT,useValue:!0}:[],{provide:ET,useValue:n??_T}]}function r8(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=WD({ngZoneFactory:()=>{let i=KD(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&ho("NgZone_CoalesceEvent"),new xe(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return zs([{provide:V1,useValue:!0},{provide:dg,useValue:!1},r])}function KD(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var U1=(()=>{class t{subscription=new Re;initialized=!1;zone=x(xe);pendingTasks=x(Pn);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{xe.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{xe.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var j1=(()=>{class t{appRef=x(Jr);taskService=x(Pn);ngZone=x(xe);zonelessEnabled=x(dg);tracing=x(lo,{optional:!0});disableScheduling=x(IT,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Re;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Nu):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(x(ET,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof lp||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?qE:wT;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Nu+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,qE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function B1(){return typeof $localize<"u"&&$localize.locale||Vu}var rl=new B("",{providedIn:"root",factory:()=>x(rl,te.Optional|te.SkipSelf)||B1()});var Bp=new B(""),$1=new B("");function Ms(t){return!t.moduleRef}function H1(t){let e=Ms(t)?t.r3Injector:t.moduleRef.injector,n=e.get(xe);return n.run(()=>{Ms(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(on,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),Ms(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Bp);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Bp);s.add(o),t.moduleRef.onDestroy(()=>{fu(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return q1(r,n,()=>{let o=e.get(AD);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(rl,Vu);if(y1(s||Vu),!e.get($1,!0))return Ms(t)?e.get(Jr):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Ms(t)){let u=e.get(Jr);return t.rootComponent!==void 0&&u.bootstrap(t.rootComponent),u}else return z1(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function z1(t,e){let n=t.injector.get(Jr);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new j(-403,!1);e.push(t)}function q1(t,e,n){try{let r=n();return Js(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var pu=null;function G1(t=[],e){return rn.create({name:e,providers:[{provide:$u,useValue:"platform"},{provide:Bp,useValue:new Set([()=>pu=null])},...t]})}function W1(t=[]){if(pu)return pu;let e=G1(t);return pu=e,xO(),K1(e),e}function K1(t){let e=t.get(pg,null);Dt(t,()=>{e?.forEach(n=>n())})}var jg=(()=>{class t{static __NG_ELEMENT_ID__=Q1}return t})();function Q1(t){return Y1(_t(),ie(),(t&16)===16)}function Y1(t,e,n){if(io(t)&&!n){let r=nn(t.index,e);return new js(r,r)}else if(t.type&175){let r=e[Xt];return new js(r,e)}return null}var $p=class{constructor(){}supports(e){return wD(e)}create(e){return new Hp(e)}},J1=(t,e)=>e,Hp=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||J1}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<hw(r,i,o)?n:r,a=hw(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let g=0;g<l;g++){let y=g<o.length?o[g]:o[g]=0,w=y+g;h<=w&&w<l&&(o[g]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!wD(e))throw new j(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,DO(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new zp(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Uu),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Uu),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},zp=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,n){this.item=e,this.trackById=n}},qp=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Uu=class{map=new Map;put(e){let n=e.trackById,r=this.map.get(n);r||(r=new qp,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function hw(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function fw(){return new Bg([new $p])}var Bg=(()=>{class t{factories;static \u0275prov=H({token:t,providedIn:"root",factory:fw});constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||fw()),deps:[[t,new IM,new _M]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new j(901,!1)}}return t})();function QD(t){ve(8);try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=W1(r),o=[WD({}),{provide:Ji,useExisting:j1},...n||[]],s=new Lu({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return H1({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{ve(9)}}function Z1(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function X1(t){return ff(t)}function i8(t,e){return uf(t,e?.equal)}var pw=class{[Mt];constructor(e){this[Mt]=e}destroy(){this[Mt].destroy()}};function o8(t,e){let n=Hr(t),r=e.elementInjector||Hu();return new Xi(n).create(r,e.projectableNodes,e.hostElement,e.environmentInjector)}var Be=new B("");var ZD=null;function xn(){return ZD}function $g(t){ZD??=t}var Zs=class{},Hg=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>x(XD),providedIn:"platform"})}return t})();var XD=(()=>{class t extends Hg{_location;_history;_doc=x(Be);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return xn().getBaseHref(this._doc)}onPopState(n){let r=xn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=xn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function eb(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function YD(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function ur(t){return t&&t[0]!=="?"?`?${t}`:t}var il=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>x(nb),providedIn:"root"})}return t})(),tb=new B(""),nb=(()=>{class t extends il{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??x(Be).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return eb(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+ur(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+ur(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+ur(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(W(Hg),W(tb,8))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),go=(()=>{class t{_subject=new je;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=nL(YD(JD(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+ur(r))}normalize(n){return t.stripTrailingSlash(tL(this._basePath,JD(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ur(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ur(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=ur;static joinWithSlash=eb;static stripTrailingSlash=YD;static \u0275fac=function(r){return new(r||t)(W(il))};static \u0275prov=H({token:t,factory:()=>eL(),providedIn:"root"})}return t})();function eL(){return new go(W(il))}function tL(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function JD(t){return t.replace(/\/index.html$/,"")}function nL(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var Gg=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(Gg||{});var cn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function mo(t,e){let n=Ug(t),r=n[po.NumberSymbols][e];if(typeof r>"u"){if(e===cn.CurrencyDecimal)return n[po.NumberSymbols][cn.Decimal];if(e===cn.CurrencyGroup)return n[po.NumberSymbols][cn.Group]}return r}function sb(t,e){return Ug(t)[po.NumberFormats][e]}var rL=/^(\d+)?\.((\d+)(-(\d+))?)?$/,rb=22,ol=".",Xs="0",iL=";",oL=",",zg="#";function sL(t,e,n,r,i,o,s=!1){let a="",u=!1;if(!isFinite(t))a=mo(n,cn.Infinity);else{let l=uL(t);s&&(l=cL(l));let h=e.minInt,p=e.minFrac,g=e.maxFrac;if(o){let $=o.match(rL);if($===null)throw new Error(`${o} is not a valid digit info`);let V=$[1],de=$[3],Pe=$[5];V!=null&&(h=qg(V)),de!=null&&(p=qg(de)),Pe!=null?g=qg(Pe):de!=null&&p>g&&(g=p)}lL(l,p,g);let y=l.digits,w=l.integerLen,R=l.exponent,N=[];for(u=y.every($=>!$);w<h;w++)y.unshift(0);for(;w<0;w++)y.unshift(0);w>0?N=y.splice(w,y.length):(N=y,y=[0]);let O=[];for(y.length>=e.lgSize&&O.unshift(y.splice(-e.lgSize,y.length).join(""));y.length>e.gSize;)O.unshift(y.splice(-e.gSize,y.length).join(""));y.length&&O.unshift(y.join("")),a=O.join(mo(n,r)),N.length&&(a+=mo(n,i)+N.join("")),R&&(a+=mo(n,cn.Exponential)+"+"+R)}return t<0&&!u?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function ab(t,e,n){let r=sb(e,Gg.Decimal),i=aL(r,mo(e,cn.MinusSign));return sL(t,i,e,cn.Group,cn.Decimal,n)}function aL(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(iL),i=r[0],o=r[1],s=i.indexOf(ol)!==-1?i.split(ol):[i.substring(0,i.lastIndexOf(Xs)+1),i.substring(i.lastIndexOf(Xs)+1)],a=s[0],u=s[1]||"";n.posPre=a.substring(0,a.indexOf(zg));for(let h=0;h<u.length;h++){let p=u.charAt(h);p===Xs?n.minFrac=n.maxFrac=h+1:p===zg?n.maxFrac=h+1:n.posSuf+=p}let l=a.split(oL);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let h=i.length-n.posPre.length-n.posSuf.length,p=o.indexOf(zg);n.negPre=o.substring(0,p).replace(/'/g,""),n.negSuf=o.slice(p+h).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function cL(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function uL(t){let e=Math.abs(t)+"",n=0,r,i,o,s,a;for((i=e.indexOf(ol))>-1&&(e=e.replace(ol,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===Xs;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===Xs;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>rb&&(r=r.splice(0,rb-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function lL(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen,o=Math.min(Math.max(e,i),n),s=o+t.integerLen,a=r[s];if(s>0){r.splice(Math.max(t.integerLen,s));for(let p=s;p<r.length;p++)r[p]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let p=1;p<s;p++)r[p]=0}if(a>=5)if(s-1<0){for(let p=0;p>s;p--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let u=o!==0,l=e+t.integerLen,h=r.reduceRight(function(p,g,y,w){return g=g+p,w[y]=g<10?g:g-10,u&&(w[y]===0&&y>=l?w.pop():u=!1),g>=10?1:0},0);h&&(r.unshift(h),t.integerLen++)}function qg(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}var sl=class{$implicit;ngForOf;index;count;constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},cb=(()=>{class t{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new sl(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),ib(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);ib(o,i)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(zt(ar),zt(Yr),zt(Bg))};static \u0275dir=Ys({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return t})();function ib(t,e){t.context.$implicit=e.item}var dL=(()=>{class t{_viewContainer;_context=new al;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){ob(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){ob(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(zt(ar),zt(Yr))};static \u0275dir=Ys({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return t})(),al=class{$implicit=null;ngIf=null};function ob(t,e){if(t&&!t.createEmbeddedView)throw new j(2020,!1)}function hL(t,e){return new j(2100,!1)}var fL=(()=>{class t{_locale;constructor(n){this._locale=n}transform(n,r,i){if(!pL(n))return null;i||=this._locale;try{let o=gL(n);return ab(o,i,r)}catch(o){throw hL(t,o.message)}}static \u0275fac=function(r){return new(r||t)(zt(rl,16))};static \u0275pipe=_D({name:"number",type:t,pure:!0})}return t})();function pL(t){return!(t==null||t===""||t!==t)}function gL(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new Error(`${t} is not a number`);return t}var ub=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=fo({type:t});static \u0275inj=no({})}return t})();function ea(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var cl="browser",lb="server";function mL(t){return t===cl}function ul(t){return t===lb}var ei=class{};var hl=new B(""),Yg=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new j(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(W(hl),W(xe))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),ta=class{_doc;constructor(e){this._doc=e}manager},ll="ng-app-id";function db(t){for(let e of t)e.remove()}function hb(t,e){let n=e.createElement("style");return n.textContent=t,n}function yL(t,e,n,r){let i=t.head?.querySelectorAll(`style[${ll}="${e}"],link[${ll}="${e}"]`);if(i)for(let o of i)o.removeAttribute(ll),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function Kg(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var Jg=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.isServer=ul(o),yL(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,hb);r?.forEach(i=>this.addUsage(i,this.external,Kg))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(db(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])db(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,hb(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,Kg(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(ll,this.appId),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(W(Be),W(Qu),W(gg,8),W(Ks))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),Wg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Zg=/%COMP%/g;var pb="%COMP%",vL=`_nghost-${pb}`,_L=`_ngcontent-${pb}`,IL=!0,EL=new B("",{providedIn:"root",factory:()=>IL});function wL(t){return _L.replace(Zg,t)}function TL(t){return vL.replace(Zg,t)}function gb(t,e){return e.map(n=>n.replace(Zg,t))}var Xg=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,u,l=null,h=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=ul(a),this.defaultRenderer=new na(n,s,u,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===sn.ShadowDom&&(r=Ie(U({},r),{encapsulation:sn.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof dl?i.applyToHost(n):i instanceof ra&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case sn.Emulated:o=new dl(u,l,r,this.appId,h,s,a,p,g);break;case sn.ShadowDom:return new Qg(u,l,n,r,s,a,this.nonce,p,g);default:o=new ra(u,l,r,h,s,a,p,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(W(Yg),W(Jg),W(Qu),W(EL),W(Be),W(Ks),W(xe),W(gg),W(lo,8))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),na=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(Wg[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(fb(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(fb(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Wg[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Wg[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Rn.DashCase|Rn.Important)?e.style.setProperty(n,r,i&Rn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Rn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=xn().getGlobalEventTarget(this.doc,e),!e))throw new j(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function fb(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Qg=class extends na{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=gb(i.id,h);for(let g of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=g,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let g of p){let y=Kg(g,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ra=class extends na{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?gb(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},dl=class extends ra{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,n,r,o,s,a,u,l,h),this.contentAttr=wL(h),this.hostAttr=TL(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var fl=class t extends Zs{supportsDOMEvents=!0;static makeCurrent(){$g(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=DL();return n==null?null:bL(n)}resetBaseElement(){ia=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ea(document.cookie,e)}},ia=null;function DL(){return ia=ia||document.querySelector("base"),ia?ia.getAttribute("href"):null}function bL(t){return new URL(t,document.baseURI).pathname}var CL=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),yb=(()=>{class t extends ta{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(W(Be))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),mb=["alt","control","meta","shift"],SL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},AL={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},vb=(()=>{class t extends ta{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>xn().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),mb.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=SL[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),mb.forEach(s=>{if(s!==i){let a=AL[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(W(Be))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})();function RL(t,e){return QD(U({rootComponent:t},NL(e)))}function NL(t){return{appProviders:[...OL,...t?.providers??[]],platformProviders:kL}}function ML(){fl.makeCurrent()}function PL(){return new on}function xL(){return PT(document),document}var kL=[{provide:Ks,useValue:cl},{provide:pg,useValue:ML,multi:!0},{provide:Be,useFactory:xL}];var OL=[{provide:$u,useValue:"root"},{provide:on,useFactory:PL},{provide:hl,useClass:yb,multi:!0,deps:[Be]},{provide:hl,useClass:vb,multi:!0,deps:[Be]},Xg,Jg,Yg,{provide:Zi,useExisting:Xg},{provide:ei,useClass:CL},[]];var vo=class{},oa=class{},lr=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=n.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(e,n){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var gl=class{encodeKey(e){return _b(e)}encodeValue(e){return _b(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function LL(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=n.get(s)||[];u.push(a),n.set(s,u)}),n}var FL=/%(\d[a-f0-9])/gi,VL={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function _b(t){return encodeURIComponent(t).replace(FL,(e,n)=>VL[n]??e)}function pl(t){return`${t}`}var kn=class t{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new gl,e.fromString){if(e.fromObject)throw new j(2805,!1);this.map=LL(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(pl):[pl(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(pl(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(pl(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var ml=class{map=new Map;set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function UL(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Ib(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function Eb(t){return typeof Blob<"u"&&t instanceof Blob}function wb(t){return typeof FormData<"u"&&t instanceof FormData}function jL(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Tb="Content-Type",Db="Accept",Cb="X-Request-URL",Sb="text/plain",Ab="application/json",BL=`${Ab}, ${Sb}, */*`,yo=class t{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,n,r,i){this.url=n,this.method=e.toUpperCase();let o;if(UL(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new lr,this.context??=new ml,!this.params)this.params=new kn,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),u=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+u+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Ib(this.body)||Eb(this.body)||wb(this.body)||jL(this.body)?this.body:this.body instanceof kn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||wb(this.body)?null:Eb(this.body)?this.body.type||null:Ib(this.body)?null:typeof this.body=="string"?Sb:this.body instanceof kn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?Ab:null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,l=e.headers||this.headers,h=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((g,y)=>g.set(y,e.setHeaders[y]),l)),e.setParams&&(h=Object.keys(e.setParams).reduce((g,y)=>g.set(y,e.setParams[y]),h)),new t(n,r,s,{params:h,headers:l,context:p,reportProgress:u,responseType:i,withCredentials:a,transferCache:o})}},ti=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(ti||{}),_o=class{headers;status;statusText;url;ok;type;constructor(e,n=200,r="OK"){this.headers=e.headers||new lr,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},yl=class t extends _o{constructor(e={}){super(e)}type=ti.ResponseHeader;clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},sa=class t extends _o{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=ti.Response;clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},aa=class extends _o{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},$L=200,HL=204;function em(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var Rb=(()=>{class t{handler;constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof yo)o=n;else{let u;i.headers instanceof lr?u=i.headers:u=new lr(i.headers);let l;i.params&&(i.params instanceof kn?l=i.params:l=new kn({fromObject:i.params})),o=new yo(n,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=G(o).pipe(tr(u=>this.handler.handle(u)));if(n instanceof yo||i.observe==="events")return s;let a=s.pipe(at(u=>u instanceof sa));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(ce(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new j(2806,!1);return u.body}));case"blob":return a.pipe(ce(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new j(2807,!1);return u.body}));case"text":return a.pipe(ce(u=>{if(u.body!==null&&typeof u.body!="string")throw new j(2808,!1);return u.body}));case"json":default:return a.pipe(ce(u=>u.body))}case"response":return a;default:throw new j(2809,!1)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new kn().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,em(i,r))}post(n,r,i={}){return this.request("POST",n,em(i,r))}put(n,r,i={}){return this.request("PUT",n,em(i,r))}static \u0275fac=function(r){return new(r||t)(W(vo))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})();var zL=new B("");function Nb(t,e){return e(t)}function qL(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}function GL(t,e,n){return(r,i)=>Dt(n,()=>e(r,o=>t(o,i)))}var Mb=new B(""),nm=new B(""),Pb=new B(""),rm=new B("",{providedIn:"root",factory:()=>!0});function WL(){let t=null;return(e,n)=>{t===null&&(t=(x(Mb,{optional:!0})??[]).reduceRight(qL,Nb));let r=x(Pn);if(x(rm)){let o=r.add();return t(e,n).pipe(rr(()=>r.remove(o)))}else return t(e,n)}}var vl=(()=>{class t extends vo{backend;injector;chain=null;pendingTasks=x(Pn);contributeToStability=x(rm);constructor(n,r){super(),this.backend=n,this.injector=r}handle(n){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(nm),...this.injector.get(Pb,[])]));this.chain=r.reduceRight((i,o)=>GL(i,o,this.injector),Nb)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(rr(()=>this.pendingTasks.remove(r)))}else return this.chain(n,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||t)(W(oa),W(vt))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})();var KL=/^\)\]\}',?\n/,QL=RegExp(`^${Cb}:`,"m");function YL(t){return"responseURL"in t&&t.responseURL?t.responseURL:QL.test(t.getAllResponseHeaders())?t.getResponseHeader(Cb):null}var tm=(()=>{class t{xhrFactory;constructor(n){this.xhrFactory=n}handle(n){if(n.method==="JSONP")throw new j(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?De(r.\u0275loadImpl()):G(null)).pipe(Tt(()=>new he(o=>{let s=r.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((R,N)=>s.setRequestHeader(R,N.join(","))),n.headers.has(Db)||s.setRequestHeader(Db,BL),!n.headers.has(Tb)){let R=n.detectContentTypeHeader();R!==null&&s.setRequestHeader(Tb,R)}if(n.responseType){let R=n.responseType.toLowerCase();s.responseType=R!=="json"?R:"text"}let a=n.serializeBody(),u=null,l=()=>{if(u!==null)return u;let R=s.statusText||"OK",N=new lr(s.getAllResponseHeaders()),O=YL(s)||n.url;return u=new yl({headers:N,status:s.status,statusText:R,url:O}),u},h=()=>{let{headers:R,status:N,statusText:O,url:$}=l(),V=null;N!==HL&&(V=typeof s.response>"u"?s.responseText:s.response),N===0&&(N=V?$L:0);let de=N>=200&&N<300;if(n.responseType==="json"&&typeof V=="string"){let Pe=V;V=V.replace(KL,"");try{V=V!==""?JSON.parse(V):null}catch(ge){V=Pe,de&&(de=!1,V={error:ge,text:V})}}de?(o.next(new sa({body:V,headers:R,status:N,statusText:O,url:$||void 0})),o.complete()):o.error(new aa({error:V,headers:R,status:N,statusText:O,url:$||void 0}))},p=R=>{let{url:N}=l(),O=new aa({error:R,status:s.status||0,statusText:s.statusText||"Unknown Error",url:N||void 0});o.error(O)},g=!1,y=R=>{g||(o.next(l()),g=!0);let N={type:ti.DownloadProgress,loaded:R.loaded};R.lengthComputable&&(N.total=R.total),n.responseType==="text"&&s.responseText&&(N.partialText=s.responseText),o.next(N)},w=R=>{let N={type:ti.UploadProgress,loaded:R.loaded};R.lengthComputable&&(N.total=R.total),o.next(N)};return s.addEventListener("load",h),s.addEventListener("error",p),s.addEventListener("timeout",p),s.addEventListener("abort",p),n.reportProgress&&(s.addEventListener("progress",y),a!==null&&s.upload&&s.upload.addEventListener("progress",w)),s.send(a),o.next({type:ti.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",h),s.removeEventListener("timeout",p),n.reportProgress&&(s.removeEventListener("progress",y),a!==null&&s.upload&&s.upload.removeEventListener("progress",w)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||t)(W(ei))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),xb=new B(""),JL="XSRF-TOKEN",ZL=new B("",{providedIn:"root",factory:()=>JL}),XL="X-XSRF-TOKEN",eF=new B("",{providedIn:"root",factory:()=>XL}),ca=class{},tF=(()=>{class t{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(n,r){this.doc=n,this.cookieName=r}getToken(){let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=ea(n,this.cookieName),this.lastCookieString=n),this.lastToken}static \u0275fac=function(r){return new(r||t)(W(Be),W(ZL))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})();function nF(t,e){let n=t.url.toLowerCase();if(!x(xb)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=x(ca).getToken(),i=x(eF);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var im=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(im||{});function rF(t,e){return{\u0275kind:t,\u0275providers:e}}function kb(...t){let e=[Rb,tm,vl,{provide:vo,useExisting:vl},{provide:oa,useFactory:()=>x(zL,{optional:!0})??x(tm)},{provide:nm,useValue:nF,multi:!0},{provide:xb,useValue:!0},{provide:ca,useClass:tF}];for(let n of t)e.push(...n.\u0275providers);return zs(e)}var bb=new B("");function Ob(){return rF(im.LegacyInterceptors,[{provide:bb,useFactory:WL},{provide:nm,useExisting:bb,multi:!0}])}var iF=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=fo({type:t});static \u0275inj=no({providers:[kb(Ob())]})}return t})();var Lb=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(W(Be))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var X="primary",wa=Symbol("RouteTitle"),um=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ii(t){return new um(t)}function zb(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function sF(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!un(t[n],e[n]))return!1;return!0}function un(t,e){let n=t?lm(t):void 0,r=e?lm(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!qb(t[i],e[i]))return!1;return!0}function lm(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function qb(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function Gb(t){return t.length>0?t[t.length-1]:null}function fr(t){return Af(t)?t:Js(t)?De(Promise.resolve(t)):G(t)}var aF={exact:Kb,subset:Qb},Wb={exact:cF,subset:uF,ignored:()=>!0};function Fb(t,e,n){return aF[n.paths](t.root,e.root,n.matrixParams)&&Wb[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function cF(t,e){return un(t,e)}function Kb(t,e,n){if(!ni(t.segments,e.segments)||!El(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!Kb(t.children[r],e.children[r],n))return!1;return!0}function uF(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>qb(t[n],e[n]))}function Qb(t,e,n){return Yb(t,e,e.segments,n)}function Yb(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!ni(i,n)||e.hasChildren()||!El(i,n,r))}else if(t.segments.length===n.length){if(!ni(t.segments,n)||!El(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!Qb(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!ni(t.segments,i)||!El(t.segments,i,r)||!t.children[X]?!1:Yb(t.children[X],e,o,r)}}function El(t,e,n){return e.every((r,i)=>Wb[n](t[i].parameters,r.parameters))}var dn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new me([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ii(this.queryParams),this._queryParamMap}toString(){return hF.serialize(this)}},me=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return wl(this)}},dr=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ii(this.parameters),this._parameterMap}toString(){return Zb(this)}};function lF(t,e){return ni(t,e)&&t.every((n,r)=>un(n.parameters,e[r].parameters))}function ni(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function dF(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===X&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==X&&(n=n.concat(e(i,r)))}),n}var Ta=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>new oi,providedIn:"root"})}return t})(),oi=class{parse(e){let n=new hm(e);return new dn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${ua(e.root,!0)}`,r=gF(e.queryParams),i=typeof e.fragment=="string"?`#${fF(e.fragment)}`:"";return`${n}${r}${i}`}},hF=new oi;function wl(t){return t.segments.map(e=>Zb(e)).join("/")}function ua(t,e){if(!t.hasChildren())return wl(t);if(e){let n=t.children[X]?ua(t.children[X],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==X&&r.push(`${i}:${ua(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=dF(t,(r,i)=>i===X?[ua(t.children[X],!1)]:[`${i}:${ua(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[X]!=null?`${wl(t)}/${n[0]}`:`${wl(t)}/(${n.join("//")})`}}function Jb(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function _l(t){return Jb(t).replace(/%3B/gi,";")}function fF(t){return encodeURI(t)}function dm(t){return Jb(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Tl(t){return decodeURIComponent(t)}function Vb(t){return Tl(t.replace(/\+/g,"%20"))}function Zb(t){return`${dm(t.path)}${pF(t.parameters)}`}function pF(t){return Object.entries(t).map(([e,n])=>`;${dm(e)}=${dm(n)}`).join("")}function gF(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${_l(n)}=${_l(i)}`).join("&"):`${_l(n)}=${_l(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var mF=/^[^\/()?;#]+/;function om(t){let e=t.match(mF);return e?e[0]:""}var yF=/^[^\/()?;=#]+/;function vF(t){let e=t.match(yF);return e?e[0]:""}var _F=/^[^=?&#]+/;function IF(t){let e=t.match(_F);return e?e[0]:""}var EF=/^[^&#]+/;function wF(t){let e=t.match(EF);return e?e[0]:""}var hm=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new me([],{}):new me([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[X]=new me(e,n)),r}parseSegment(){let e=om(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new dr(Tl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=vF(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=om(this.remaining);i&&(r=i,this.capture(r))}e[Tl(n)]=Tl(r)}parseQueryParam(e){let n=IF(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=wF(this.remaining);s&&(r=s,this.capture(r))}let i=Vb(n),o=Vb(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=om(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=X);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[X]:new me([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}};function Xb(t){return t.segments.length>0?new me([],{[X]:t}):t}function eC(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=eC(i);if(r===X&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new me(t.segments,e);return TF(n)}function TF(t){if(t.numberOfChildren===1&&t.children[X]){let e=t.children[X];return new me(t.segments.concat(e.segments),e.children)}return t}function Do(t){return t instanceof dn}function tC(t,e,n=null,r=null){let i=nC(t);return rC(i,e,n,r)}function nC(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new me(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=Xb(r);return e??i}function rC(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return sm(i,i,i,n,r);let o=DF(e);if(o.toRoot())return sm(i,i,new me([],{}),n,r);let s=bF(o,i,t),a=s.processChildren?da(s.segmentGroup,s.index,o.commands):oC(s.segmentGroup,s.index,o.commands);return sm(i,s.segmentGroup,a,n,r)}function bl(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function fa(t){return typeof t=="object"&&t!=null&&t.outlets}function sm(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;t===e?s=n:s=iC(t,e,n);let a=Xb(eC(s));return new dn(a,o,i)}function iC(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=iC(o,e,n)}),new me(t.segments,r)}var Cl=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&bl(r[0]))throw new j(4003,!1);let i=r.find(fa);if(i&&i!==Gb(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function DF(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Cl(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Cl(n,e,r)}var wo=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function bF(t,e,n){if(t.isAbsolute)return new wo(e,!0,0);if(!n)return new wo(e,!1,NaN);if(n.parent===null)return new wo(n,!0,0);let r=bl(t.commands[0])?0:1,i=n.segments.length-1+r;return CF(n,i,t.numberOfDoubleDots)}function CF(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new wo(r,!1,i-o)}function SF(t){return fa(t[0])?t[0].outlets:{[X]:t}}function oC(t,e,n){if(t??=new me([],{}),t.segments.length===0&&t.hasChildren())return da(t,e,n);let r=AF(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new me(t.segments.slice(0,r.pathIndex),{});return o.children[X]=new me(t.segments.slice(r.pathIndex),t.children),da(o,0,i)}else return r.match&&i.length===0?new me(t.segments,{}):r.match&&!t.hasChildren()?fm(t,e,n):r.match?da(t,0,i):fm(t,e,n)}function da(t,e,n){if(n.length===0)return new me(t.segments,{});{let r=SF(n),i={};if(Object.keys(r).some(o=>o!==X)&&t.children[X]&&t.numberOfChildren===1&&t.children[X].segments.length===0){let o=da(t.children[X],e,n);return new me(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=oC(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new me(t.segments,i)}}function AF(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(fa(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!jb(u,l,s))return o;r+=2}else{if(!jb(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function fm(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(fa(o)){let u=RF(o.outlets);return new me(r,u)}if(i===0&&bl(n[0])){let u=t.segments[e];r.push(new dr(u.path,Ub(n[0]))),i++;continue}let s=fa(o)?o.outlets[X]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&bl(a)?(r.push(new dr(s,Ub(a))),i+=2):(r.push(new dr(s,{})),i++)}return new me(r,{})}function RF(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=fm(new me([],{}),0,r))}),e}function Ub(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function jb(t,e,n){return t==n.path&&un(e,n.parameters)}var Dl="imperative",$e=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}($e||{}),Ct=class{id;url;constructor(e,n){this.id=e,this.url=n}},si=class extends Ct{type=$e.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},On=class extends Ct{urlAfterRedirects;type=$e.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Et=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Et||{}),pa=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(pa||{}),ln=class extends Ct{reason;code;type=$e.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ln=class extends Ct{reason;code;type=$e.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},bo=class extends Ct{error;target;type=$e.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ga=class extends Ct{urlAfterRedirects;state;type=$e.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sl=class extends Ct{urlAfterRedirects;state;type=$e.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Al=class extends Ct{urlAfterRedirects;state;shouldActivate;type=$e.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Rl=class extends Ct{urlAfterRedirects;state;type=$e.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Nl=class extends Ct{urlAfterRedirects;state;type=$e.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ml=class{route;type=$e.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Pl=class{route;type=$e.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},xl=class{snapshot;type=$e.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},kl=class{snapshot;type=$e.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ol=class{snapshot;type=$e.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ll=class{snapshot;type=$e.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var ma=class{},Co=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function NF(t,e){return t.providers&&!t._injector&&(t._injector=nl(t.providers,e,`Route: ${t.path}`)),t._injector??e}function qt(t){return t.outlet||X}function MF(t,e){let n=t.filter(r=>qt(r)===e);return n.push(...t.filter(r=>qt(r)!==e)),n}function Da(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Fl=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Da(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Ro(this.rootInjector)}},Ro=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Fl(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(W(vt))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Vl=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=pm(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=pm(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=gm(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return gm(e,this._root).map(n=>n.value)}};function pm(t,e){if(t===e.value)return e;for(let n of e.children){let r=pm(t,n);if(r)return r}return null}function gm(t,e){if(t===e.value)return[e];for(let n of e.children){let r=gm(t,n);if(r.length)return r.unshift(e),r}return[]}var bt=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Eo(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var ya=class extends Vl{snapshot;constructor(e,n){super(e),this.snapshot=n,Tm(this,e)}toString(){return this.snapshot.toString()}};function sC(t){let e=PF(t),n=new We([new dr("",{})]),r=new We({}),i=new We({}),o=new We({}),s=new We(""),a=new hr(n,r,o,s,i,X,t,e.root);return a.snapshot=e.root,new ya(new bt(a,[]),e)}function PF(t){let e={},n={},r={},i="",o=new ri([],e,r,i,n,X,t,null,{});return new va("",new bt(o,[]))}var hr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ce(l=>l[wa]))??G(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ce(e=>ii(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ce(e=>ii(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ul(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:U(U({},e.params),t.params),data:U(U({},e.data),t.data),resolve:U(U(U(U({},t.data),e.data),i?.data),t._resolvedData)}:r={params:U({},t.params),data:U({},t.data),resolve:U(U({},t.data),t._resolvedData??{})},i&&cC(i)&&(r.resolve[wa]=i.title),r}var ri=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[wa]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ii(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ii(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},va=class extends Vl{url;constructor(e,n){super(n),this.url=e,Tm(this,n)}toString(){return aC(this._root)}};function Tm(t,e){e.value._routerState=t,e.children.forEach(n=>Tm(t,n))}function aC(t){let e=t.children.length>0?` { ${t.children.map(aC).join(", ")} } `:"";return`${t.value}${e}`}function am(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,un(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),un(e.params,n.params)||t.paramsSubject.next(n.params),sF(e.url,n.url)||t.urlSubject.next(n.url),un(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function mm(t,e){let n=un(t.params,e.params)&&lF(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||mm(t.parent,e.parent))}function cC(t){return typeof t.title=="string"||t.title===null}var uC=new B(""),Dm=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=X;activateEvents=new gt;deactivateEvents=new gt;attachEvents=new gt;detachEvents=new gt;routerOutletData=DT(void 0);parentContexts=x(Ro);location=x(ar);changeDetector=x(jg);inputBinder=x(Hl,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new ym(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ys({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Jp]})}return t})(),ym=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===hr?this.route:e===Ro?this.childContexts:e===uC?this.outletData:this.parent.get(e,n)}},Hl=new B("");function xF(t,e,n){let r=_a(t,e._root,n?n._root:void 0);return new ya(r,e)}function _a(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=kF(t,e,n);return new bt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>_a(t,a)),s}}let r=OF(e.value),i=e.children.map(o=>_a(t,o));return new bt(r,i)}}function kF(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return _a(t,r,i);return _a(t,r)})}function OF(t){return new hr(new We(t.url),new We(t.params),new We(t.queryParams),new We(t.fragment),new We(t.data),t.outlet,t.component,t)}var So=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},lC="ngNavigationCancelingError";function jl(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Do(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=dC(!1,Et.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function dC(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[lC]=!0,n.cancellationCode=e,n}function LF(t){return hC(t)&&Do(t.url)}function hC(t){return!!t&&t[lC]}var FF=(t,e,n,r)=>ce(i=>(new vm(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),vm=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),am(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Eo(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Eo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Eo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Eo(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Ll(o.value.snapshot))}),e.children.length&&this.forwardEvent(new kl(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(am(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),am(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Bl=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},To=class{component;route;constructor(e,n){this.component=e,this.route=n}};function VF(t,e,n){let r=t._root,i=e?e._root:null;return la(r,i,n,[r.value])}function UF(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function No(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Ew(t)?t:e.get(t):r}function la(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Eo(e);return t.children.forEach(s=>{jF(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ha(a,n.getContext(s),i)),i}function jF(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=BF(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Bl(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?la(t,e,a?a.children:null,r,i):la(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new To(a.outlet.component,s))}else s&&ha(e,a,i),i.canActivateChecks.push(new Bl(r)),o.component?la(t,null,a?a.children:null,r,i):la(t,null,n,r,i);return i}function BF(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!ni(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ni(t.url,e.url)||!un(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!mm(t,e)||!un(t.queryParams,e.queryParams);case"paramsChange":default:return!mm(t,e)}}function ha(t,e,n){let r=Eo(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?ha(s,e.children.getContext(o),n):ha(s,null,n):ha(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new To(e.outlet.component,i)):n.canDeactivateChecks.push(new To(null,i)):n.canDeactivateChecks.push(new To(null,i))}function ba(t){return typeof t=="function"}function $F(t){return typeof t=="boolean"}function HF(t){return t&&ba(t.canLoad)}function zF(t){return t&&ba(t.canActivate)}function qF(t){return t&&ba(t.canActivateChild)}function GF(t){return t&&ba(t.canDeactivate)}function WF(t){return t&&ba(t.canMatch)}function fC(t){return t instanceof Dn||t?.name==="EmptyError"}var Il=Symbol("INITIAL_VALUE");function Ao(){return Tt(t=>ru(t.map(e=>e.pipe(bn(1),Mf(Il)))).pipe(ce(e=>{for(let n of e)if(n!==!0){if(n===Il)return Il;if(n===!1||KF(n))return n}return!0}),at(e=>e!==Il),bn(1)))}function KF(t){return Do(t)||t instanceof So}function QF(t,e){return Ue(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?G(Ie(U({},n),{guardsResult:!0})):YF(s,r,i,t).pipe(Ue(a=>a&&$F(a)?JF(r,o,t,e):G(a)),ce(a=>Ie(U({},n),{guardsResult:a})))})}function YF(t,e,n,r){return De(t).pipe(Ue(i=>nV(i.component,i.route,n,e,r)),Cn(i=>i!==!0,!0))}function JF(t,e,n,r){return De(e).pipe(tr(i=>Vi(XF(i.route.parent,r),ZF(i.route,r),tV(t,i.path,n),eV(t,i.route,n))),Cn(i=>i!==!0,!0))}function ZF(t,e){return t!==null&&e&&e(new Ol(t)),G(!0)}function XF(t,e){return t!==null&&e&&e(new xl(t)),G(!0)}function eV(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return G(!0);let i=r.map(o=>ou(()=>{let s=Da(e)??n,a=No(o,s),u=zF(a)?a.canActivate(e,t):Dt(s,()=>a(e,t));return fr(u).pipe(Cn())}));return G(i).pipe(Ao())}function tV(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>UF(s)).filter(s=>s!==null).map(s=>ou(()=>{let a=s.guards.map(u=>{let l=Da(s.node)??n,h=No(u,l),p=qF(h)?h.canActivateChild(r,t):Dt(l,()=>h(r,t));return fr(p).pipe(Cn())});return G(a).pipe(Ao())}));return G(o).pipe(Ao())}function nV(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return G(!0);let s=o.map(a=>{let u=Da(e)??i,l=No(a,u),h=GF(l)?l.canDeactivate(t,e,n,r):Dt(u,()=>l(t,e,n,r));return fr(h).pipe(Cn())});return G(s).pipe(Ao())}function rV(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return G(!0);let o=i.map(s=>{let a=No(s,t),u=HF(a)?a.canLoad(e,n):Dt(t,()=>a(e,n));return fr(u)});return G(o).pipe(Ao(),pC(r))}function pC(t){return If(Ke(e=>{if(typeof e!="boolean")throw jl(t,e)}),ce(e=>e===!0))}function iV(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return G(!0);let o=i.map(s=>{let a=No(s,t),u=WF(a)?a.canMatch(e,n):Dt(t,()=>a(e,n));return fr(u)});return G(o).pipe(Ao(),pC(r))}var Ia=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Ea=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Io(t){return Fi(new Ia(t))}function oV(t){return Fi(new j(4e3,!1))}function sV(t){return Fi(dC(!1,Et.GuardRejected))}var _m=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return G(r);if(i.numberOfChildren>1||!i.children[X])return oV(`${e.redirectTo}`);i=i.children[X]}}applyRedirectCommands(e,n,r,i,o){if(typeof n!="string"){let a=n,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:g,params:y,data:w,title:R}=i,N=Dt(o,()=>a({params:y,data:w,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:g,title:R}));if(N instanceof dn)throw new Ea(N);n=N}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new Ea(s);return s}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new dn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new me(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Im={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function aV(t,e,n,r,i){let o=gC(t,e,n);return o.matched?(r=NF(e,r),iV(r,e,n,i).pipe(ce(s=>s===!0?o:U({},Im)))):G(o)}function gC(t,e,n){if(e.path==="**")return cV(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?U({},Im):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||zb)(n,t,e);if(!i)return U({},Im);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?U(U({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function cV(t){return{matched:!0,parameters:t.length>0?Gb(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Bb(t,e,n,r){return n.length>0&&dV(t,n,r)?{segmentGroup:new me(e,lV(r,new me(n,t.children))),slicedSegments:[]}:n.length===0&&hV(t,n,r)?{segmentGroup:new me(t.segments,uV(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new me(t.segments,t.children),slicedSegments:n}}function uV(t,e,n,r){let i={};for(let o of n)if(zl(t,e,o)&&!r[qt(o)]){let s=new me([],{});i[qt(o)]=s}return U(U({},r),i)}function lV(t,e){let n={};n[X]=e;for(let r of t)if(r.path===""&&qt(r)!==X){let i=new me([],{});n[qt(r)]=i}return n}function dV(t,e,n){return n.some(r=>zl(t,e,r)&&qt(r)!==X)}function hV(t,e,n){return n.some(r=>zl(t,e,r))}function zl(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function fV(t,e,n){return e.length===0&&!t.children[n]}var Em=class{};function pV(t,e,n,r,i,o,s="emptyOnly"){return new wm(t,e,n,r,i,s,o).recognize()}var gV=31,wm=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new _m(this.urlSerializer,this.urlTree)}noMatchError(e){return new j(4002,`'${e.segmentGroup}'`)}recognize(){let e=Bb(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ce(({children:n,rootSnapshot:r})=>{let i=new bt(r,n),o=new va("",i),s=tC(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new ri([],Object.freeze({}),Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),X,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,X,n).pipe(ce(r=>({children:r,rootSnapshot:n})),er(r=>{if(r instanceof Ea)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ia?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(ce(s=>s instanceof bt?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return De(o).pipe(tr(s=>{let a=r.children[s],u=MF(n,s);return this.processSegmentGroup(e,u,a,s,i)}),Nf((s,a)=>(s.push(...a),s)),nr(null),Rf(),Ue(s=>{if(s===null)return Io(r);let a=mC(s);return mV(a),G(a)}))}processSegment(e,n,r,i,o,s,a){return De(n).pipe(tr(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a).pipe(er(l=>{if(l instanceof Ia)return G(null);throw l}))),Cn(u=>!!u),er(u=>{if(fC(u))return fV(r,i,o)?G(new Em):Io(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,u){return qt(r)!==s&&(s===X||!zl(i,o,r))?Io(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):Io(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=gC(n,i,o);if(!u)return Io(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>gV&&(this.allowRedirects=!1));let y=new ri(o,l,Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,$b(i),qt(i),i.component??i._loadedComponent??null,i,Hb(i)),w=Ul(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(w.params),y.data=Object.freeze(w.data);let R=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,R).pipe(Ue(N=>this.processSegment(e,r,n,N.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=aV(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Tt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Tt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:y}=u,w=new ri(g,p,Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,$b(r),qt(r),r.component??r._loadedComponent??null,r,Hb(r)),R=Ul(w,s,this.paramsInheritanceStrategy);w.params=Object.freeze(R.params),w.data=Object.freeze(R.data);let{segmentGroup:N,slicedSegments:O}=Bb(n,g,y,l);if(O.length===0&&N.hasChildren())return this.processChildren(h,l,N,w).pipe(ce(V=>new bt(w,V)));if(l.length===0&&O.length===0)return G(new bt(w,[]));let $=qt(r)===o;return this.processSegment(h,l,N,O,$?X:o,!0,w).pipe(ce(V=>new bt(w,V instanceof bt?[V]:[])))}))):Io(n)))}getChildConfig(e,n,r){return n.children?G({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?G({routes:n._loadedRoutes,injector:n._loadedInjector}):rV(e,n,r,this.urlSerializer).pipe(Ue(i=>i?this.configLoader.loadChildren(e,n).pipe(Ke(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):sV(n))):G({routes:[],injector:e})}};function mV(t){t.sort((e,n)=>e.value.outlet===X?-1:n.value.outlet===X?1:e.value.outlet.localeCompare(n.value.outlet))}function yV(t){let e=t.value.routeConfig;return e&&e.path===""}function mC(t){let e=[],n=new Set;for(let r of t){if(!yV(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=mC(r.children);e.push(new bt(r.value,i))}return e.filter(r=>!n.has(r))}function $b(t){return t.data||{}}function Hb(t){return t.resolve||{}}function vV(t,e,n,r,i,o){return Ue(s=>pV(t,e,n,r,s.extractedUrl,i,o).pipe(ce(({state:a,tree:u})=>Ie(U({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function _V(t,e){return Ue(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return G(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of yC(u))s.add(l);let a=0;return De(s).pipe(tr(u=>o.has(u)?IV(u,r,t,e):(u.data=Ul(u,u.parent,t).resolve,G(void 0))),Ke(()=>a++),Ui(1),Ue(u=>a===s.size?G(n):et))})}function yC(t){let e=t.children.map(n=>yC(n)).flat();return[t,...e]}function IV(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!cC(i)&&(o[wa]=i.title),EV(o,t,e,r).pipe(ce(s=>(t._resolvedData=s,t.data=Ul(t,t.parent,n).resolve,null)))}function EV(t,e,n,r){let i=lm(t);if(i.length===0)return G({});let o={};return De(i).pipe(Ue(s=>wV(t[s],e,n,r).pipe(Cn(),Ke(a=>{if(a instanceof So)throw jl(new oi,a);o[s]=a}))),Ui(1),ce(()=>o),er(s=>fC(s)?et:Fi(s)))}function wV(t,e,n,r){let i=Da(e)??r,o=No(t,i),s=o.resolve?o.resolve(e,n):Dt(i,()=>o(e,n));return fr(s)}function cm(t){return Tt(e=>{let n=t(e);return n?De(n).pipe(ce(()=>e)):G(e)})}var bm=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===X);return r}getResolvedTitleForRoute(n){return n.data[wa]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>x(vC),providedIn:"root"})}return t})(),vC=(()=>{class t extends bm{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(W(Lb))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ca=new B("",{providedIn:"root",factory:()=>({})}),Cm=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=vD({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Vg(0,"router-outlet")},dependencies:[Dm],encapsulation:2})}return t})();function Sm(t){let e=t.children&&t.children.map(Sm),n=e?Ie(U({},t),{children:e}):U({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==X&&(n.component=Cm),n}var Sa=new B(""),_C=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=x(GD);loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return G(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=fr(n.loadComponent()).pipe(ce(EC),Ke(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),rr(()=>{this.componentLoaders.delete(n)})),i=new Oi(r,()=>new je).pipe(ki());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return G({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=IC(r,this.compiler,n,this.onLoadEndListener).pipe(rr(()=>{this.childrenLoaders.delete(r)})),s=new Oi(o,()=>new je).pipe(ki());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function IC(t,e,n,r){return fr(t.loadChildren()).pipe(ce(EC),Ue(i=>i instanceof Og||Array.isArray(i)?G(i):De(e.compileModuleAsync(i))),ce(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Sa,[],{optional:!0,self:!0}).flat()),{routes:s.map(Sm),injector:o}}))}function TV(t){return t&&typeof t=="object"&&"default"in t}function EC(t){return TV(t)?t.default:t}var ql=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>x(DV),providedIn:"root"})}return t})(),DV=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),wC=new B("");var TC=new B(""),DC=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new je;transitionAbortSubject=new je;configLoader=x(_C);environmentInjector=x(vt);destroyRef=x(Gs);urlSerializer=x(Ta);rootContexts=x(Ro);location=x(go);inputBindingEnabled=x(Hl,{optional:!0})!==null;titleStrategy=x(bm);options=x(Ca,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=x(ql);createViewTransition=x(wC,{optional:!0});navigationErrorHandler=x(TC,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>G(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new Ml(i)),r=i=>this.events.next(new Pl(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(Ie(U({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(n){return this.transitions=new We(null),this.transitions.pipe(at(r=>r!==null),Tt(r=>{let i=!1,o=!1;return G(r).pipe(Tt(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Et.SupersededByNewNavigation),et;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?Ie(U({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=s.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!a&&u!=="reload"){let l="";return this.events.next(new Ln(s.id,this.urlSerializer.serialize(s.rawUrl),l,pa.IgnoredSameUrlNavigation)),s.resolve(!1),et}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return G(s).pipe(Tt(l=>(this.events.next(new si(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?et:Promise.resolve(l))),vV(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Ke(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation=Ie(U({},this.currentNavigation),{finalUrl:l.urlAfterRedirects});let h=new ga(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:l,extractedUrl:h,source:p,restoredState:g,extras:y}=s,w=new si(l,this.urlSerializer.serialize(h),p,g);this.events.next(w);let R=sC(this.rootComponentType).snapshot;return this.currentTransition=r=Ie(U({},s),{targetSnapshot:R,urlAfterRedirects:h,extras:Ie(U({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,G(r)}else{let l="";return this.events.next(new Ln(s.id,this.urlSerializer.serialize(s.extractedUrl),l,pa.IgnoredByUrlHandlingStrategy)),s.resolve(!1),et}}),Ke(s=>{let a=new Sl(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),ce(s=>(this.currentTransition=r=Ie(U({},s),{guards:VF(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),QF(this.environmentInjector,s=>this.events.next(s)),Ke(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw jl(this.urlSerializer,s.guardsResult);let a=new Al(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),at(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Et.GuardRejected),!1)),cm(s=>{if(s.guards.canActivateChecks.length!==0)return G(s).pipe(Ke(a=>{let u=new Rl(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),Tt(a=>{let u=!1;return G(a).pipe(_V(this.paramsInheritanceStrategy,this.environmentInjector),Ke({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",Et.NoDataFromResolver)}}))}),Ke(a=>{let u=new Nl(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),cm(s=>{let a=u=>{let l=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(u.routeConfig).pipe(Ke(h=>{u.component=h}),ce(()=>{})));for(let h of u.children)l.push(...a(h));return l};return ru(a(s.targetSnapshot.root)).pipe(nr(null),bn(1))}),cm(()=>this.afterPreactivation()),Tt(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,u=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return u?De(u).pipe(ce(()=>r)):G(r)}),ce(s=>{let a=xF(n.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=Ie(U({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),Ke(()=>{this.events.next(new ma)}),FF(this.rootContexts,n.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),bn(1),Ke({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new On(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Pf(this.transitionAbortSubject.pipe(Ke(s=>{throw s}))),rr(()=>{!i&&!o&&this.cancelNavigationTransition(r,"",Et.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),er(s=>{if(this.destroyed)return r.resolve(!1),et;if(o=!0,hC(s))this.events.next(new ln(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),LF(s)?this.events.next(new Co(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new bo(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let u=Dt(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof So){let{message:l,cancellationCode:h}=jl(this.urlSerializer,u);this.events.next(new ln(r.id,this.urlSerializer.serialize(r.extractedUrl),l,h)),this.events.next(new Co(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return et}))}))}cancelNavigationTransition(n,r,i){let o=new ln(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function bV(t){return t!==Dl}var bC=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>x(CV),providedIn:"root"})}return t})(),$l=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},CV=(()=>{class t extends $l{static \u0275fac=(()=>{let n;return function(i){return(n||(n=lg(t)))(i||t)}})();static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),CC=(()=>{class t{urlSerializer=x(Ta);options=x(Ca,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=x(go);urlHandlingStrategy=x(ql);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new dn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof dn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=sC(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>x(SV),providedIn:"root"})}return t})(),SV=(()=>{class t extends CC{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof si?this.updateStateMemento():n instanceof Ln?this.commitTransition(r):n instanceof ga?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof ma?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof ln&&(n.code===Et.GuardRejected||n.code===Et.NoDataFromResolver)?this.restoreHistory(r):n instanceof bo?this.restoreHistory(r,!0):n instanceof On&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,u=U(U({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",u)}else{let a=U(U({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=lg(t)))(i||t)}})();static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Am(t,e){t.events.pipe(at(n=>n instanceof On||n instanceof ln||n instanceof bo||n instanceof Ln),ce(n=>n instanceof On||n instanceof Ln?0:(n instanceof ln?n.code===Et.Redirect||n.code===Et.SupersededByNewNavigation:!1)?2:1),at(n=>n!==2),bn(1)).subscribe(()=>{e()})}var AV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},RV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Gl=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=x(bD);stateManager=x(CC);options=x(Ca,{optional:!0})||{};pendingTasks=x(Pn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=x(DC);urlSerializer=x(Ta);location=x(go);urlHandlingStrategy=x(ql);_events=new je;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=x(bC);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=x(Sa,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!x(Hl,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Re;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof ln&&r.code!==Et.Redirect&&r.code!==Et.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof On)this.navigated=!0;else if(r instanceof Co){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=U({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||bV(i.source)},s);this.scheduleNavigation(a,Dl,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}MV(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Dl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=U({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Sm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=U(U({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=nC(g)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return rC(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Do(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Dl,null,r)}navigate(n,r={skipLocationChange:!1}){return NV(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=U({},AV):r===!1?i=U({},RV):i=r,Do(n))return Fb(this.currentUrlTree,n,i);let o=this.parseUrl(n);return Fb(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,g)=>{a=p,u=g});let h=this.pendingTasks.add();return Am(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function NV(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new j(4008,!1)}function MV(t){return!(t instanceof ma)&&!(t instanceof Co)}var xV=new B("");function kV(t,...e){return zs([{provide:Sa,multi:!0,useValue:t},[],{provide:hr,useFactory:OV,deps:[Gl]},{provide:Lg,multi:!0,useFactory:LV},e.map(n=>n.\u0275providers)])}function OV(t){return t.routerState.root}function LV(){let t=x(rn);return e=>{let n=t.get(Jr);if(e!==n.components[0])return;let r=t.get(Gl),i=t.get(FV);t.get(VV)===1&&r.initialNavigation(),t.get(UV,null,te.Optional)?.setUpPreloading(),t.get(xV,null,te.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var FV=new B("",{factory:()=>new je}),VV=new B("",{providedIn:"root",factory:()=>1});var UV=new B("");var SC=()=>{};var NC=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},BV=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},MC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(g=64)),r.push(n[h],n[p],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(NC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):BV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new Nm;let g=o<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let w=l<<6&192|p;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Nm=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},$V=function(t){let e=NC(t);return MC.encodeByteArray(e,!0)},Ra=function(t){return $V(t).replace(/\./g,"")},Kl=function(t){try{return MC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function PC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var HV=()=>PC().__FIREBASE_DEFAULTS__,zV=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},qV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Kl(t[1]);return e&&JSON.parse(e)},Ql=()=>{try{return SC()||HV()||zV()||qV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Pm=t=>{var e,n;return(n=(e=Ql())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},xC=t=>{let e=Pm(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},xm=()=>{var t;return(t=Ql())===null||t===void 0?void 0:t.config},km=t=>{var e;return(e=Ql())===null||e===void 0?void 0:e[`_${t}`]};var Wl=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function pr(t){return t.endsWith(".cloudworkstations.dev")}function Yl(t){return E(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function kC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ra(JSON.stringify(n)),Ra(JSON.stringify(s)),""].join(".")}var Aa={};function GV(){let t={prod:[],emulator:[]};for(let e of Object.keys(Aa))Aa[e]?t.emulator.push(e):t.prod.push(e);return t}function WV(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var AC=!1;function Jl(t,e){if(typeof window>"u"||typeof document>"u"||!pr(window.location.host)||Aa[t]===e||Aa[t]||AC)return;Aa[t]=e;function n(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=GV().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{AC=!0,s()},g}function h(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=WV(r),y=n("text"),w=document.getElementById(y)||document.createElement("span"),R=n("learnmore"),N=document.getElementById(R)||document.createElement("a"),O=n("preprendIcon"),$=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let V=g.element;a(V),h(N,R);let de=l();u($,O),V.append($,w,N,de),document.body.appendChild(V)}o?(w.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function He(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function OC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(He())}function KV(){var t;let e=(t=Ql())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function LC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function FC(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function VC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function UC(){let t=He();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function jC(){return!KV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Om(){try{return typeof indexedDB=="object"}catch{return!1}}function BC(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var QV="FirebaseError",St=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=QV,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fn.prototype.create)}},Fn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?YV(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new St(i,a,r)}};function YV(t,e){return t.replace(JV,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var JV=/\{\$([^}]+)}/g;function $C(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function hn(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(RC(o)&&RC(s)){if(!hn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function RC(t){return t!==null&&typeof t=="object"}function Na(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function HC(t,e){let n=new Mm(t,e);return n.subscribe.bind(n)}var Mm=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ZV(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Rm),i.error===void 0&&(i.error=Rm),i.complete===void 0&&(i.complete=Rm);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function ZV(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Rm(){}var t7=4*60*60*1e3;function ke(t){return t&&t._delegate?t._delegate:t}var xt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ai="[DEFAULT]";var Lm=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Wl;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(e2(e))try{this.getOrInitializeService({instanceIdentifier:ai})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ai){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return E(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ai){return this.instances.has(e)}getOptions(e=ai){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:XV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ai){return this.component?this.component.multipleInstances?e:ai:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function XV(t){return t===ai?void 0:t}function e2(t){return t.instantiationMode==="EAGER"}var Zl=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Lm(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var t2=[],ue=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ue||{}),n2={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},r2=ue.INFO,i2={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},o2=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=i2[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},gr=class{constructor(e){this.name=e,this._logLevel=r2,this._logHandler=o2,this._userLogHandler=null,t2.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?n2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}};var s2=(t,e)=>e.some(n=>t instanceof n),zC,qC;function a2(){return zC||(zC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function c2(){return qC||(qC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var GC=new WeakMap,Vm=new WeakMap,WC=new WeakMap,Fm=new WeakMap,jm=new WeakMap;function u2(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(fn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&GC.set(n,t)}).catch(()=>{}),jm.set(e,t),e}function l2(t){if(Vm.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Vm.set(t,e)}var Um={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Vm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||WC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function KC(t){Um=t(Um)}function d2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Xl(this),e,...n);return WC.set(r,e.sort?e.sort():[e]),fn(r)}:c2().includes(t)?function(...e){return t.apply(Xl(this),e),fn(GC.get(this))}:function(...e){return fn(t.apply(Xl(this),e))}}function h2(t){return typeof t=="function"?d2(t):(t instanceof IDBTransaction&&l2(t),s2(t,a2())?new Proxy(t,Um):t)}function fn(t){if(t instanceof IDBRequest)return u2(t);if(Fm.has(t))return Fm.get(t);let e=h2(t);return e!==t&&(Fm.set(t,e),jm.set(e,t)),e}var Xl=t=>jm.get(t);function YC(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=fn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(fn(s.result),u.oldVersion,u.newVersion,fn(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var f2=["get","getKey","getAll","getAllKeys","count"],p2=["put","add","delete","clear"],Bm=new Map;function QC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Bm.get(e))return Bm.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=p2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||f2.includes(n)))return;let o=function(s,...a){return E(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return Bm.set(e,o),o}KC(t=>Ie(U({},t),{get:(e,n,r)=>QC(e,n)||t.get(e,n,r),has:(e,n)=>!!QC(e,n)||t.has(e,n)}));var Hm=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(g2(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function g2(t){let e=t.getComponent();return e?.type==="VERSION"}var zm="@firebase/app",JC="0.13.1";var Vn=new gr("@firebase/app"),m2="@firebase/app-compat",y2="@firebase/analytics-compat",v2="@firebase/analytics",_2="@firebase/app-check-compat",I2="@firebase/app-check",E2="@firebase/auth",w2="@firebase/auth-compat",T2="@firebase/database",D2="@firebase/data-connect",b2="@firebase/database-compat",C2="@firebase/functions",S2="@firebase/functions-compat",A2="@firebase/installations",R2="@firebase/installations-compat",N2="@firebase/messaging",M2="@firebase/messaging-compat",P2="@firebase/performance",x2="@firebase/performance-compat",k2="@firebase/remote-config",O2="@firebase/remote-config-compat",L2="@firebase/storage",F2="@firebase/storage-compat",V2="@firebase/firestore",U2="@firebase/ai",j2="@firebase/firestore-compat",B2="firebase",$2="11.9.0";var qm="[DEFAULT]",H2={[zm]:"fire-core",[m2]:"fire-core-compat",[v2]:"fire-analytics",[y2]:"fire-analytics-compat",[I2]:"fire-app-check",[_2]:"fire-app-check-compat",[E2]:"fire-auth",[w2]:"fire-auth-compat",[T2]:"fire-rtdb",[D2]:"fire-data-connect",[b2]:"fire-rtdb-compat",[C2]:"fire-fn",[S2]:"fire-fn-compat",[A2]:"fire-iid",[R2]:"fire-iid-compat",[N2]:"fire-fcm",[M2]:"fire-fcm-compat",[P2]:"fire-perf",[x2]:"fire-perf-compat",[k2]:"fire-rc",[O2]:"fire-rc-compat",[L2]:"fire-gcs",[F2]:"fire-gcs-compat",[V2]:"fire-fst",[j2]:"fire-fst-compat",[U2]:"fire-vertex","fire-js":"fire-js",[B2]:"fire-js-all"};var ed=new Map,z2=new Map,Gm=new Map;function ZC(t,e){try{t.container.addComponent(e)}catch(n){Vn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function yr(t){let e=t.name;if(Gm.has(e))return Vn.debug(`There were multiple attempts to register component ${e}.`),!1;Gm.set(e,t);for(let n of ed.values())ZC(n,t);for(let n of z2.values())ZC(n,t);return!0}function Pa(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function At(t){return t==null?!1:t.settings!==void 0}var q2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mr=new Fn("app","Firebase",q2);var Wm=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mr.create("app-deleted",{appName:this._name})}};var vr=$2;function Ym(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:qm,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw mr.create("bad-app-name",{appName:String(i)});if(n||(n=xm()),!n)throw mr.create("no-options");let o=ed.get(i);if(o){if(hn(n,o.options)&&hn(r,o.config))return o;throw mr.create("duplicate-app",{appName:i})}let s=new Zl(i);for(let u of Gm.values())s.addComponent(u);let a=new Wm(n,r,s);return ed.set(i,a),a}function td(t=qm){let e=ed.get(t);if(!e&&t===qm&&xm())return Ym();if(!e)throw mr.create("no-app",{appName:t});return e}function Gt(t,e,n){var r;let i=(r=H2[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vn.warn(a.join(" "));return}yr(new xt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var G2="firebase-heartbeat-database",W2=1,Ma="firebase-heartbeat-store",$m=null;function nS(){return $m||($m=YC(G2,W2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ma)}catch(n){console.warn(n)}}}}).catch(t=>{throw mr.create("idb-open",{originalErrorMessage:t.message})})),$m}function K2(t){return E(this,null,function*(){try{let n=(yield nS()).transaction(Ma),r=yield n.objectStore(Ma).get(rS(t));return yield n.done,r}catch(e){if(e instanceof St)Vn.warn(e.message);else{let n=mr.create("idb-get",{originalErrorMessage:e?.message});Vn.warn(n.message)}}})}function XC(t,e){return E(this,null,function*(){try{let r=(yield nS()).transaction(Ma,"readwrite");yield r.objectStore(Ma).put(e,rS(t)),yield r.done}catch(n){if(n instanceof St)Vn.warn(n.message);else{let r=mr.create("idb-set",{originalErrorMessage:n?.message});Vn.warn(r.message)}}})}function rS(t){return`${t.name}!${t.options.appId}`}var Q2=1024,Y2=30,Km=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Qm(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return E(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=eS();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>Y2){let s=Z2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Vn.warn(r)}})}getHeartbeatsHeader(){return E(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=eS(),{heartbeatsToSend:r,unsentEntries:i}=J2(this._heartbeatsCache.heartbeats),o=Ra(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Vn.warn(n),""}})}};function eS(){return new Date().toISOString().substring(0,10)}function J2(t,e=Q2){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),tS(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),tS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Qm=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return E(this,null,function*(){return Om()?BC().then(()=>!0).catch(()=>!1):!1})}read(){return E(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield K2(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return E(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return XC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return E(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return XC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function tS(t){return Ra(JSON.stringify({version:2,heartbeats:t})).length}function Z2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function X2(t){yr(new xt("platform-logger",e=>new Hm(e),"PRIVATE")),yr(new xt("heartbeat",e=>new Km(e),"PRIVATE")),Gt(zm,JC,t),Gt(zm,JC,"esm2017"),Gt("fire-js","")}X2("");var eU="firebase",tU="11.9.1";Gt(eU,tU,"app");function vS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var _S=vS,IS=new Fn("auth","Firebase",vS());var ad=new gr("@firebase/auth");function nU(t,...e){ad.logLevel<=ue.WARN&&ad.warn(`Auth (${vr}): ${t}`,...e)}function rd(t,...e){ad.logLevel<=ue.ERROR&&ad.error(`Auth (${vr}): ${t}`,...e)}function wr(t,...e){throw my(t,...e)}function ci(t,...e){return my(t,...e)}function ES(t,e,n){let r=Object.assign(Object.assign({},_S()),{[e]:n});return new Fn("auth","Firebase",r).create(e,{appName:t.name})}function Er(t){return ES(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function my(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return IS.create(t,...e)}function K(t,e,...n){if(!t)throw my(e,...n)}function Un(t){let e="INTERNAL ASSERTION FAILED: "+t;throw rd(e),new Error(e)}function Tr(t,e){t||Un(e)}function ey(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function rU(){return iS()==="http:"||iS()==="https:"}function iS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function iU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rU()||FC()||"connection"in navigator)?navigator.onLine:!0}function oU(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var ui=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Tr(n>e,"Short delay should be less than long delay!"),this.isMobile=OC()||VC()}get(){return iU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function yy(t,e){Tr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var cd=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Un("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Un("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Un("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var sU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var aU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cU=new ui(3e4,6e4);function _d(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Mo(o,s,a,u){return E(this,arguments,function*(t,e,n,r,i={}){return wS(t,i,()=>E(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Na(Object.assign({key:t.config.apiKey},h)).slice(1),g=yield t._getAdditionalHeaders();g["Content-Type"]="application/json",t.languageCode&&(g["X-Firebase-Locale"]=t.languageCode);let y=Object.assign({method:e,headers:g},l);return LC()||(y.referrerPolicy="no-referrer"),t.emulatorConfig&&pr(t.emulatorConfig.host)&&(y.credentials="include"),cd.fetch()(yield DS(t,t.config.apiHost,n,p),y)}))})}function wS(t,e,n){return E(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},sU),e);try{let i=new ty(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw nd(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw nd(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw nd(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw nd(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw ES(t,h,l);wr(t,h)}}catch(i){if(i instanceof St)throw i;wr(t,"network-request-failed",{message:String(i)})}})}function TS(o,s,a,u){return E(this,arguments,function*(t,e,n,r,i={}){let l=yield Mo(t,e,n,r,i);return"mfaPendingCredential"in l&&wr(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function DS(t,e,n,r){return E(this,null,function*(){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?yy(t.config,i):`${t.config.apiScheme}://${i}`;return aU.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var ty=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ci(this.auth,"network-request-failed")),cU.get())})}};function nd(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=ci(t,e,r);return i.customData._tokenResponse=n,i}function uU(t,e){return E(this,null,function*(){return Mo(t,"POST","/v1/accounts:delete",e)})}function ud(t,e){return E(this,null,function*(){return Mo(t,"POST","/v1/accounts:lookup",e)})}function xa(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function bS(t,e=!1){return E(this,null,function*(){let n=ke(t),r=yield n.getIdToken(e),i=vy(r);K(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:xa(Jm(i.auth_time)),issuedAtTime:xa(Jm(i.iat)),expirationTime:xa(Jm(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Jm(t){return Number(t)*1e3}function vy(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return rd("JWT malformed, contained fewer than 3 sections"),null;try{let i=Kl(n);return i?JSON.parse(i):(rd("Failed to decode base64 JWT payload"),null)}catch(i){return rd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function oS(t){let e=vy(t);return K(e,"internal-error"),K(typeof e.exp<"u","internal-error"),K(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Oa(t,e,n=!1){return E(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof St&&lU(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function lU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var ny=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>E(this,null,function*(){yield this.iteration()}),n)}iteration(){return E(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var La=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=xa(this.lastLoginAt),this.creationTime=xa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function ld(t){return E(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Oa(t,ud(n,{idToken:r}));K(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?SS(o.providerUserInfo):[],a=dU(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new La(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function CS(t){return E(this,null,function*(){let e=ke(t);yield ld(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function dU(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function SS(t){return t.map(e=>{var{providerId:n}=e,r=Sf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function hU(t,e){return E(this,null,function*(){let n=yield wS(t,{},()=>E(null,null,function*(){let r=Na({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield DS(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return t.emulatorConfig&&pr(t.emulatorConfig.host)&&(u.credentials="include"),cd.fetch()(s,u)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function fU(t,e){return E(this,null,function*(){return Mo(t,"POST","/v2/accounts:revokeToken",_d(t,e))})}var ka=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){K(e.idToken,"internal-error"),K(typeof e.idToken<"u","internal-error"),K(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):oS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){K(e.length!==0,"internal-error");let n=oS(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return E(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(K(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return E(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield hU(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(K(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(K(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(K(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Un("not implemented")}};function _r(t,e){K(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Ir=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Sf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ny(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new La(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return E(this,null,function*(){let n=yield Oa(this,this.stsTokenManager.getToken(this.auth,e));return K(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return bS(this,e)}reload(){return CS(this)}_assign(e){this!==e&&(K(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return E(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield ld(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return E(this,null,function*(){if(At(this.auth.app))return Promise.reject(Er(this.auth));let e=yield this.getIdToken();return yield Oa(this,uU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,w=(s=n.photoURL)!==null&&s!==void 0?s:void 0,R=(a=n.tenantId)!==null&&a!==void 0?a:void 0,N=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,O=(l=n.createdAt)!==null&&l!==void 0?l:void 0,$=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:V,emailVerified:de,isAnonymous:Pe,providerData:ge,stsTokenManager:D}=n;K(V&&D,e,"internal-error");let v=ka.fromJSON(this.name,D);K(typeof V=="string",e,"internal-error"),_r(p,e.name),_r(g,e.name),K(typeof de=="boolean",e,"internal-error"),K(typeof Pe=="boolean",e,"internal-error"),_r(y,e.name),_r(w,e.name),_r(R,e.name),_r(N,e.name),_r(O,e.name),_r($,e.name);let I=new t({uid:V,auth:e,email:g,emailVerified:de,displayName:p,isAnonymous:Pe,photoURL:w,phoneNumber:y,tenantId:R,stsTokenManager:v,createdAt:O,lastLoginAt:$});return ge&&Array.isArray(ge)&&(I.providerData=ge.map(T=>Object.assign({},T))),N&&(I._redirectEventId=N),I}static _fromIdTokenResponse(e,n,r=!1){return E(this,null,function*(){let i=new ka;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield ld(o),o})}static _fromGetAccountInfoResponse(e,n,r){return E(this,null,function*(){let i=n.users[0];K(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?SS(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new ka;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new La(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var sS=new Map;function jn(t){Tr(t instanceof Function,"Expected a class definition");let e=sS.get(t);return e?(Tr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,sS.set(t,e),e)}var pU=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return E(this,null,function*(){return!0})}_set(n,r){return E(this,null,function*(){this.storage[n]=r})}_get(n){return E(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return E(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),ry=pU;function id(t,e,n){return`firebase:${t}:${e}:${n}`}var dd=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=id(this.userKey,i.apiKey,o),this.fullPersistenceKey=id("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return E(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield ud(this.auth,{idToken:e}).catch(()=>{});return n?Ir._fromGetAccountInfoResponse(this.auth,n,e):null}return Ir._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return E(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return E(this,null,function*(){if(!n.length)return new t(jn(ry),e,r);let i=(yield Promise.all(n.map(l=>E(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||jn(ry),s=id(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let g=yield ud(e,{idToken:h}).catch(()=>{});if(!g)break;p=yield Ir._fromGetAccountInfoResponse(e,g,h)}else p=Ir._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>E(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function aS(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(MS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(AS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xS(e))return"Blackberry";if(kS(e))return"Webos";if(RS(e))return"Safari";if((e.includes("chrome/")||NS(e))&&!e.includes("edge/"))return"Chrome";if(PS(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function AS(t=He()){return/firefox\//i.test(t)}function RS(t=He()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function NS(t=He()){return/crios\//i.test(t)}function MS(t=He()){return/iemobile/i.test(t)}function PS(t=He()){return/android/i.test(t)}function xS(t=He()){return/blackberry/i.test(t)}function kS(t=He()){return/webos/i.test(t)}function _y(t=He()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function gU(t=He()){var e;return _y(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function mU(){return UC()&&document.documentMode===10}function OS(t=He()){return _y(t)||PS(t)||kS(t)||xS(t)||/windows phone/i.test(t)||MS(t)}function LS(t,e=[]){let n;switch(t){case"Browser":n=aS(He());break;case"Worker":n=`${aS(He())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${vr}/${r}`}var iy=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return E(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function yU(n){return E(this,arguments,function*(t,e={}){return Mo(t,"GET","/v2/passwordPolicy",_d(t,e))})}var vU=6,oy=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:vU,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var sy=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hd(this),this.idTokenSubscription=new hd(this),this.beforeStateQueue=new iy(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=IS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=jn(n)),this._initializationPromise=this.queue(()=>E(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield dd.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return E(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return E(this,null,function*(){try{let n=yield ud(this,{idToken:e}),r=yield Ir._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return E(this,null,function*(){var n;if(At(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return E(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return E(this,null,function*(){try{yield ld(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=oU()}_delete(){return E(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return E(this,null,function*(){if(At(this.app))return Promise.reject(Er(this));let n=e?ke(e):null;return n&&K(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return E(this,null,function*(){if(!this._deleted)return e&&K(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>E(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return E(this,null,function*(){return At(this.app)?Promise.reject(Er(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return At(this.app)?Promise.reject(Er(this)):this.queue(()=>E(this,null,function*(){yield this.assertedPersistence.setPersistence(jn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return E(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return E(this,null,function*(){let e=yield yU(this),n=new oy(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Fn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return E(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield fU(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return E(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return E(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&jn(e)||this._popupRedirectResolver;K(n,this,"argument-error"),this.redirectPersistenceManager=yield dd.create(this,[jn(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return E(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>E(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return E(this,null,function*(){if(e===this.currentUser)return this.queue(()=>E(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return E(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=LS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return E(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return E(this,null,function*(){var e;if(At(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&nU(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Id(t){return ke(t)}var hd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=HC(n=>this.observer=n)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Iy={loadJS(){return E(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _U(t){Iy=t}function IU(t){return Iy.loadJS(t)}function EU(){return Iy.gapiScript}function FS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function VS(t,e){let n=Pa(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(hn(o,e??{}))return i;wr(i,"already-initialized")}return n.initialize({options:e})}function wU(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(jn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function US(t,e,n){let r=Id(t);K(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=jS(e),{host:s,port:a}=TU(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){K(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),K(hn(l,r.config.emulator)&&hn(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,pr(s)?(Yl(`${o}//${s}${u}`),Jl("Auth",!0)):i||DU()}function jS(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function TU(t){let e=jS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:cS(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:cS(s)}}}function cS(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function DU(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var fd=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Un("not implemented")}_getIdTokenResponse(e){return Un("not implemented")}_linkToIdToken(e,n){return Un("not implemented")}_getReauthenticationResolver(e){return Un("not implemented")}};function Zm(t,e){return E(this,null,function*(){return TS(t,"POST","/v1/accounts:signInWithIdp",_d(t,e))})}var pd=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var ay=class extends pd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function bU(t,e){return E(this,null,function*(){return TS(t,"POST","/v1/accounts:signUp",_d(t,e))})}var li=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return E(this,null,function*(){let o=yield Ir._fromIdTokenResponse(e,r,i),s=uS(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return E(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=uS(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function uS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}function Po(t){return E(this,null,function*(){var e;if(At(t.app))return Promise.reject(Er(t));let n=Id(t);if(yield n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new li({user:n.currentUser,providerId:null,operationType:"signIn"});let r=yield bU(n,{returnSecureToken:!0}),i=yield li._fromIdTokenResponse(n,"signIn",r,!0);return yield n._updateCurrentUser(i.user),i})}var cy=class t extends St{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function BS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?cy._fromErrorAndOperation(t,o,e,r):o})}function CU(t,e,n=!1){return E(this,null,function*(){let r=yield Oa(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return li._forOperation(t,"link",r)})}function SU(t,e,n=!1){return E(this,null,function*(){let{auth:r}=t;if(At(r.app))return Promise.reject(Er(r));let i="reauthenticate";try{let o=yield Oa(t,BS(r,i,e,t),n);K(o.idToken,r,"internal-error");let s=vy(o.idToken);K(s,r,"internal-error");let{sub:a}=s;return K(t.uid===a,r,"user-mismatch"),li._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&wr(r,"user-mismatch"),o}})}function AU(t,e,n=!1){return E(this,null,function*(){if(At(t.app))return Promise.reject(Er(t));let r="signIn",i=yield BS(t,r,e),o=yield li._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function $S(t,e,n,r){return ke(t).onIdTokenChanged(e,n,r)}function HS(t,e,n){return ke(t).beforeAuthStateChanged(e,n)}function Ey(t,e,n,r){return ke(t).onAuthStateChanged(e,n,r)}var gd="__sak";var md=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(gd,"1"),this.storage.removeItem(gd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var RU=1e3,NU=10,MU=(()=>{class t extends md{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=OS(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);mU()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,NU):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},RU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return E(this,null,function*(){yield Xn(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return E(this,null,function*(){let r=yield Xn(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return E(this,null,function*(){yield Xn(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),zS=MU;var PU=(()=>{class t extends md{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),wy=PU;function xU(t){return Promise.all(t.map(e=>E(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var kU=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return E(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>E(this,null,function*(){return h(r.origin,s)})),l=yield xU(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function qS(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var uy=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return E(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=qS("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function pn(){return window}function OU(t){pn().location.href=t}function GS(){return typeof pn().WorkerGlobalScope<"u"&&typeof pn().importScripts=="function"}function LU(){return E(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function FU(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function VU(){return GS()?self:null}var WS="firebaseLocalStorageDb",UU=1,yd="firebaseLocalStorage",KS="fbase_key",di=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Ed(t,e){return t.transaction([yd],e?"readwrite":"readonly").objectStore(yd)}function jU(){let t=indexedDB.deleteDatabase(WS);return new di(t).toPromise()}function ly(){let t=indexedDB.open(WS,UU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(yd,{keyPath:KS})}catch(i){n(i)}}),t.addEventListener("success",()=>E(null,null,function*(){let r=t.result;r.objectStoreNames.contains(yd)?e(r):(r.close(),yield jU(),e(yield ly()))}))})}function lS(t,e,n){return E(this,null,function*(){let r=Ed(t,!0).put({[KS]:e,value:n});return new di(r).toPromise()})}function BU(t,e){return E(this,null,function*(){let n=Ed(t,!1).get(e),r=yield new di(n).toPromise();return r===void 0?null:r.value})}function dS(t,e){let n=Ed(t,!0).delete(e);return new di(n).toPromise()}var $U=800,HU=3,zU=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return E(this,null,function*(){return this.db?this.db:(this.db=yield ly(),this.db)})}_withRetries(n){return E(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>HU)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return E(this,null,function*(){return GS()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return E(this,null,function*(){this.receiver=kU._getInstance(VU()),this.receiver._subscribe("keyChanged",(n,r)=>E(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>E(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return E(this,null,function*(){var n,r;if(this.activeServiceWorker=yield LU(),!this.activeServiceWorker)return;this.sender=new uy(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return E(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||FU()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return E(this,null,function*(){try{if(!indexedDB)return!1;let n=yield ly();return yield lS(n,gd,"1"),yield dS(n,gd),!0}catch{}return!1})}_withPendingWrite(n){return E(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(i=>lS(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return E(this,null,function*(){let r=yield this._withRetries(i=>BU(i,n));return this.localCache[n]=r,r})}_remove(n){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(r=>dS(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return E(this,null,function*(){let n=yield this._withRetries(o=>{let s=Ed(o,!1).getAll();return new di(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>E(this,null,function*(){return this._poll()}),$U)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),QS=zU;var k7=FS("rcb"),O7=new ui(3e4,6e4);function qU(t,e){return e?jn(e):(K(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Fa=class extends fd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zm(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Zm(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Zm(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function GU(t){return AU(t.auth,new Fa(t),t.bypassAuthState)}function WU(t){let{auth:e,user:n}=t;return K(n,e,"internal-error"),SU(n,new Fa(t),t.bypassAuthState)}function KU(t){return E(this,null,function*(){let{auth:e,user:n}=t;return K(n,e,"internal-error"),CU(n,new Fa(t),t.bypassAuthState)})}var dy=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>E(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return E(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return GU;case"linkViaPopup":case"linkViaRedirect":return KU;case"reauthViaPopup":case"reauthViaRedirect":return WU;default:wr(this.auth,"internal-error")}}resolve(e){Tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var L7=new ui(2e3,1e4);var QU="pendingRedirect",od=new Map,hy=class t extends dy{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return E(this,null,function*(){let e=od.get(this.auth._key());if(!e){try{let r=(yield YU(this.resolver,this.auth))?yield Xn(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}od.set(this.auth._key(),e)}return this.bypassAuthState||od.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return E(this,null,function*(){if(e.type==="signInViaRedirect")return Xn(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Xn(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return E(this,null,function*(){})}cleanUp(){}};function YU(t,e){return E(this,null,function*(){let n=XU(e),r=ZU(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function JU(t,e){od.set(t._key(),e)}function ZU(t){return jn(t._redirectPersistence)}function XU(t){return id(QU,t.config.apiKey,t.name)}function ej(t,e,n=!1){return E(this,null,function*(){if(At(t.app))return Promise.reject(Er(t));let r=Id(t),i=qU(r,e),s=yield new hy(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var tj=10*60*1e3,fy=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!YS(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ci(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tj&&this.cachedEventUids.clear(),this.cachedEventUids.has(hS(e))}saveEventToCache(e){this.cachedEventUids.add(hS(e)),this.lastProcessedEventTime=Date.now()}};function hS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function YS({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function nj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return YS(t);default:return!1}}function rj(n){return E(this,arguments,function*(t,e={}){return Mo(t,"GET","/v1/projects",e)})}var ij=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oj=/^https?/;function sj(t){return E(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield rj(t);for(let n of e)try{if(aj(n))return}catch{}wr(t,"unauthorized-domain")})}function aj(t){let e=ey(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!oj.test(n))return!1;if(ij.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var cj=new ui(3e4,6e4);function fS(){let t=pn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function uj(t){return new Promise((e,n)=>{var r,i,o;function s(){fS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fS(),n(ci(t,"network-request-failed"))},timeout:cj.get()})}if(!((i=(r=pn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=pn().gapi)===null||o===void 0)&&o.load)s();else{let a=FS("iframefcb");return pn()[a]=()=>{gapi.load?s():n(ci(t,"network-request-failed"))},IU(`${EU()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw sd=null,e})}var sd=null;function lj(t){return sd=sd||uj(t),sd}var dj=new ui(5e3,15e3),hj="__/auth/iframe",fj="emulator/auth/iframe",pj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mj(t){let e=t.config;K(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?yy(e,fj):`https://${t.config.authDomain}/${hj}`,r={apiKey:e.apiKey,appName:t.name,v:vr},i=gj.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Na(r).slice(1)}`}function yj(t){return E(this,null,function*(){let e=yield lj(t),n=pn().gapi;return K(n,t,"internal-error"),e.open({where:document.body,url:mj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pj,dontclear:!0},r=>new Promise((i,o)=>E(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=ci(t,"network-request-failed"),a=pn().setTimeout(()=>{o(s)},dj.get());function u(){pn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var vj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_j=500,Ij=600,Ej="_blank",wj="http://localhost",vd=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Tj(t,e,n,r=_j,i=Ij){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},vj),{width:r.toString(),height:i.toString(),top:o,left:s}),l=He().toLowerCase();n&&(a=NS(l)?Ej:n),AS(l)&&(e=e||wj,u.scrollbars="yes");let h=Object.entries(u).reduce((g,[y,w])=>`${g}${y}=${w},`,"");if(gU(l)&&a!=="_self")return Dj(e||"",a),new vd(null);let p=window.open(e||"",a,h);K(p,t,"popup-blocked");try{p.focus()}catch{}return new vd(p)}function Dj(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var bj="__/auth/handler",Cj="emulator/auth/handler",Sj=encodeURIComponent("fac");function pS(t,e,n,r,i,o){return E(this,null,function*(){K(t.config.authDomain,t,"auth-domain-config-required"),K(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:vr,eventId:i};if(e instanceof pd){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",$C(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof ay){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${Sj}=${encodeURIComponent(u)}`:"";return`${Aj(t)}?${Na(a).slice(1)}${l}`})}function Aj({config:t}){return t.emulator?yy(t,Cj):`https://${t.authDomain}/${bj}`}var Xm="webStorageSupport",py=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wy,this._completeRedirectFn=ej,this._overrideRedirectResult=JU}_openPopup(e,n,r,i){return E(this,null,function*(){var o;Tr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield pS(e,n,r,ey(),i);return Tj(e,s,qS())})}_openRedirect(e,n,r,i){return E(this,null,function*(){yield this._originValidation(e);let o=yield pS(e,n,r,ey(),i);return OU(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Tr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return E(this,null,function*(){let n=yield yj(e),r=new fy(e);return n.register("authEvent",i=>(K(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Xm,{type:Xm},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[Xm];s!==void 0&&n(!!s),wr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=sj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return OS()||RS()||_y()}},JS=py;var gS="@firebase/auth",mS="1.10.7";var gy=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return E(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Rj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Nj(t){yr(new xt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;K(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:LS(t)},l=new sy(r,i,o,u);return wU(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),yr(new xt("auth-internal",e=>{let n=Id(e.getProvider("auth").getImmediate());return(r=>new gy(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gt(gS,mS,Rj(t)),Gt(gS,mS,"esm2017")}var Mj=5*60,Pj=km("authIdTokenMaxAge")||Mj,yS=null,xj=t=>e=>E(null,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Pj)return;let i=n?.token;yS!==i&&(yS=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Ty(t=td()){let e=Pa(t,"auth");if(e.isInitialized())return e.getImmediate();let n=VS(t,{popupRedirectResolver:JS,persistence:[QS,zS,wy]}),r=km("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=xj(o.toString());HS(n,s,()=>s(n.currentUser)),$S(n,a=>s(a))}}let i=Pm("auth");return i&&US(n,`http://${i}`),n}function kj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}_U({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=ci("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",kj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Nj("Browser");var ZS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},XS={};var Bn,Dy;(function(){var t;function e(D,v){function I(){}I.prototype=v.prototype,D.D=v.prototype,D.prototype=new I,D.prototype.constructor=D,D.C=function(T,b,S){for(var _=Array(arguments.length-2),In=2;In<arguments.length;In++)_[In-2]=arguments[In];return v.prototype[b].apply(T,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,v,I){I||(I=0);var T=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)T[b]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(b=0;16>b;++b)T[b]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=D.g[0],I=D.g[1],b=D.g[2];var S=D.g[3],_=v+(S^I&(b^S))+T[0]+3614090360&4294967295;v=I+(_<<7&4294967295|_>>>25),_=S+(b^v&(I^b))+T[1]+3905402710&4294967295,S=v+(_<<12&4294967295|_>>>20),_=b+(I^S&(v^I))+T[2]+606105819&4294967295,b=S+(_<<17&4294967295|_>>>15),_=I+(v^b&(S^v))+T[3]+3250441966&4294967295,I=b+(_<<22&4294967295|_>>>10),_=v+(S^I&(b^S))+T[4]+4118548399&4294967295,v=I+(_<<7&4294967295|_>>>25),_=S+(b^v&(I^b))+T[5]+1200080426&4294967295,S=v+(_<<12&4294967295|_>>>20),_=b+(I^S&(v^I))+T[6]+2821735955&4294967295,b=S+(_<<17&4294967295|_>>>15),_=I+(v^b&(S^v))+T[7]+4249261313&4294967295,I=b+(_<<22&4294967295|_>>>10),_=v+(S^I&(b^S))+T[8]+1770035416&4294967295,v=I+(_<<7&4294967295|_>>>25),_=S+(b^v&(I^b))+T[9]+2336552879&4294967295,S=v+(_<<12&4294967295|_>>>20),_=b+(I^S&(v^I))+T[10]+4294925233&4294967295,b=S+(_<<17&4294967295|_>>>15),_=I+(v^b&(S^v))+T[11]+2304563134&4294967295,I=b+(_<<22&4294967295|_>>>10),_=v+(S^I&(b^S))+T[12]+1804603682&4294967295,v=I+(_<<7&4294967295|_>>>25),_=S+(b^v&(I^b))+T[13]+4254626195&4294967295,S=v+(_<<12&4294967295|_>>>20),_=b+(I^S&(v^I))+T[14]+2792965006&4294967295,b=S+(_<<17&4294967295|_>>>15),_=I+(v^b&(S^v))+T[15]+1236535329&4294967295,I=b+(_<<22&4294967295|_>>>10),_=v+(b^S&(I^b))+T[1]+4129170786&4294967295,v=I+(_<<5&4294967295|_>>>27),_=S+(I^b&(v^I))+T[6]+3225465664&4294967295,S=v+(_<<9&4294967295|_>>>23),_=b+(v^I&(S^v))+T[11]+643717713&4294967295,b=S+(_<<14&4294967295|_>>>18),_=I+(S^v&(b^S))+T[0]+3921069994&4294967295,I=b+(_<<20&4294967295|_>>>12),_=v+(b^S&(I^b))+T[5]+3593408605&4294967295,v=I+(_<<5&4294967295|_>>>27),_=S+(I^b&(v^I))+T[10]+38016083&4294967295,S=v+(_<<9&4294967295|_>>>23),_=b+(v^I&(S^v))+T[15]+3634488961&4294967295,b=S+(_<<14&4294967295|_>>>18),_=I+(S^v&(b^S))+T[4]+3889429448&4294967295,I=b+(_<<20&4294967295|_>>>12),_=v+(b^S&(I^b))+T[9]+568446438&4294967295,v=I+(_<<5&4294967295|_>>>27),_=S+(I^b&(v^I))+T[14]+3275163606&4294967295,S=v+(_<<9&4294967295|_>>>23),_=b+(v^I&(S^v))+T[3]+4107603335&4294967295,b=S+(_<<14&4294967295|_>>>18),_=I+(S^v&(b^S))+T[8]+1163531501&4294967295,I=b+(_<<20&4294967295|_>>>12),_=v+(b^S&(I^b))+T[13]+2850285829&4294967295,v=I+(_<<5&4294967295|_>>>27),_=S+(I^b&(v^I))+T[2]+4243563512&4294967295,S=v+(_<<9&4294967295|_>>>23),_=b+(v^I&(S^v))+T[7]+1735328473&4294967295,b=S+(_<<14&4294967295|_>>>18),_=I+(S^v&(b^S))+T[12]+2368359562&4294967295,I=b+(_<<20&4294967295|_>>>12),_=v+(I^b^S)+T[5]+4294588738&4294967295,v=I+(_<<4&4294967295|_>>>28),_=S+(v^I^b)+T[8]+2272392833&4294967295,S=v+(_<<11&4294967295|_>>>21),_=b+(S^v^I)+T[11]+1839030562&4294967295,b=S+(_<<16&4294967295|_>>>16),_=I+(b^S^v)+T[14]+4259657740&4294967295,I=b+(_<<23&4294967295|_>>>9),_=v+(I^b^S)+T[1]+2763975236&4294967295,v=I+(_<<4&4294967295|_>>>28),_=S+(v^I^b)+T[4]+1272893353&4294967295,S=v+(_<<11&4294967295|_>>>21),_=b+(S^v^I)+T[7]+4139469664&4294967295,b=S+(_<<16&4294967295|_>>>16),_=I+(b^S^v)+T[10]+3200236656&4294967295,I=b+(_<<23&4294967295|_>>>9),_=v+(I^b^S)+T[13]+681279174&4294967295,v=I+(_<<4&4294967295|_>>>28),_=S+(v^I^b)+T[0]+3936430074&4294967295,S=v+(_<<11&4294967295|_>>>21),_=b+(S^v^I)+T[3]+3572445317&4294967295,b=S+(_<<16&4294967295|_>>>16),_=I+(b^S^v)+T[6]+76029189&4294967295,I=b+(_<<23&4294967295|_>>>9),_=v+(I^b^S)+T[9]+3654602809&4294967295,v=I+(_<<4&4294967295|_>>>28),_=S+(v^I^b)+T[12]+3873151461&4294967295,S=v+(_<<11&4294967295|_>>>21),_=b+(S^v^I)+T[15]+530742520&4294967295,b=S+(_<<16&4294967295|_>>>16),_=I+(b^S^v)+T[2]+3299628645&4294967295,I=b+(_<<23&4294967295|_>>>9),_=v+(b^(I|~S))+T[0]+4096336452&4294967295,v=I+(_<<6&4294967295|_>>>26),_=S+(I^(v|~b))+T[7]+1126891415&4294967295,S=v+(_<<10&4294967295|_>>>22),_=b+(v^(S|~I))+T[14]+2878612391&4294967295,b=S+(_<<15&4294967295|_>>>17),_=I+(S^(b|~v))+T[5]+4237533241&4294967295,I=b+(_<<21&4294967295|_>>>11),_=v+(b^(I|~S))+T[12]+1700485571&4294967295,v=I+(_<<6&4294967295|_>>>26),_=S+(I^(v|~b))+T[3]+2399980690&4294967295,S=v+(_<<10&4294967295|_>>>22),_=b+(v^(S|~I))+T[10]+4293915773&4294967295,b=S+(_<<15&4294967295|_>>>17),_=I+(S^(b|~v))+T[1]+2240044497&4294967295,I=b+(_<<21&4294967295|_>>>11),_=v+(b^(I|~S))+T[8]+1873313359&4294967295,v=I+(_<<6&4294967295|_>>>26),_=S+(I^(v|~b))+T[15]+4264355552&4294967295,S=v+(_<<10&4294967295|_>>>22),_=b+(v^(S|~I))+T[6]+2734768916&4294967295,b=S+(_<<15&4294967295|_>>>17),_=I+(S^(b|~v))+T[13]+1309151649&4294967295,I=b+(_<<21&4294967295|_>>>11),_=v+(b^(I|~S))+T[4]+4149444226&4294967295,v=I+(_<<6&4294967295|_>>>26),_=S+(I^(v|~b))+T[11]+3174756917&4294967295,S=v+(_<<10&4294967295|_>>>22),_=b+(v^(S|~I))+T[2]+718787259&4294967295,b=S+(_<<15&4294967295|_>>>17),_=I+(S^(b|~v))+T[9]+3951481745&4294967295,D.g[0]=D.g[0]+v&4294967295,D.g[1]=D.g[1]+(b+(_<<21&4294967295|_>>>11))&4294967295,D.g[2]=D.g[2]+b&4294967295,D.g[3]=D.g[3]+S&4294967295}r.prototype.u=function(D,v){v===void 0&&(v=D.length);for(var I=v-this.blockSize,T=this.B,b=this.h,S=0;S<v;){if(b==0)for(;S<=I;)i(this,D,S),S+=this.blockSize;if(typeof D=="string"){for(;S<v;)if(T[b++]=D.charCodeAt(S++),b==this.blockSize){i(this,T),b=0;break}}else for(;S<v;)if(T[b++]=D[S++],b==this.blockSize){i(this,T),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var v=1;v<D.length-8;++v)D[v]=0;var I=8*this.o;for(v=D.length-8;v<D.length;++v)D[v]=I&255,I/=256;for(this.u(D),D=Array(16),v=I=0;4>v;++v)for(var T=0;32>T;T+=8)D[I++]=this.g[v]>>>T&255;return D};function o(D,v){var I=a;return Object.prototype.hasOwnProperty.call(I,D)?I[D]:I[D]=v(D)}function s(D,v){this.h=v;for(var I=[],T=!0,b=D.length-1;0<=b;b--){var S=D[b]|0;T&&S==v||(I[b]=S,T=!1)}this.g=I}var a={};function u(D){return-128<=D&&128>D?o(D,function(v){return new s([v|0],0>v?-1:0)}):new s([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return N(l(-D));for(var v=[],I=1,T=0;D>=I;T++)v[T]=D/I|0,I*=4294967296;return new s(v,0)}function h(D,v){if(D.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(D.charAt(0)=="-")return N(h(D.substring(1),v));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),T=p,b=0;b<D.length;b+=8){var S=Math.min(8,D.length-b),_=parseInt(D.substring(b,b+S),v);8>S?(S=l(Math.pow(v,S)),T=T.j(S).add(l(_))):(T=T.j(I),T=T.add(l(_)))}return T}var p=u(0),g=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(R(this))return-N(this).m();for(var D=0,v=1,I=0;I<this.g.length;I++){var T=this.i(I);D+=(0<=T?T:4294967296+T)*v,v*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(w(this))return"0";if(R(this))return"-"+N(this).toString(D);for(var v=l(Math.pow(D,6)),I=this,T="";;){var b=de(I,v).g;I=O(I,b.j(v));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(D);if(I=b,w(I))return S+T;for(;6>S.length;)S="0"+S;T=S+T}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function w(D){if(D.h!=0)return!1;for(var v=0;v<D.g.length;v++)if(D.g[v]!=0)return!1;return!0}function R(D){return D.h==-1}t.l=function(D){return D=O(this,D),R(D)?-1:w(D)?0:1};function N(D){for(var v=D.g.length,I=[],T=0;T<v;T++)I[T]=~D.g[T];return new s(I,~D.h).add(g)}t.abs=function(){return R(this)?N(this):this},t.add=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],T=0,b=0;b<=v;b++){var S=T+(this.i(b)&65535)+(D.i(b)&65535),_=(S>>>16)+(this.i(b)>>>16)+(D.i(b)>>>16);T=_>>>16,S&=65535,_&=65535,I[b]=_<<16|S}return new s(I,I[I.length-1]&-2147483648?-1:0)};function O(D,v){return D.add(N(v))}t.j=function(D){if(w(this)||w(D))return p;if(R(this))return R(D)?N(this).j(N(D)):N(N(this).j(D));if(R(D))return N(this.j(N(D)));if(0>this.l(y)&&0>D.l(y))return l(this.m()*D.m());for(var v=this.g.length+D.g.length,I=[],T=0;T<2*v;T++)I[T]=0;for(T=0;T<this.g.length;T++)for(var b=0;b<D.g.length;b++){var S=this.i(T)>>>16,_=this.i(T)&65535,In=D.i(b)>>>16,os=D.i(b)&65535;I[2*T+2*b]+=_*os,$(I,2*T+2*b),I[2*T+2*b+1]+=S*os,$(I,2*T+2*b+1),I[2*T+2*b+1]+=_*In,$(I,2*T+2*b+1),I[2*T+2*b+2]+=S*In,$(I,2*T+2*b+2)}for(T=0;T<v;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=v;T<2*v;T++)I[T]=0;return new s(I,0)};function $(D,v){for(;(D[v]&65535)!=D[v];)D[v+1]+=D[v]>>>16,D[v]&=65535,v++}function V(D,v){this.g=D,this.h=v}function de(D,v){if(w(v))throw Error("division by zero");if(w(D))return new V(p,p);if(R(D))return v=de(N(D),v),new V(N(v.g),N(v.h));if(R(v))return v=de(D,N(v)),new V(N(v.g),v.h);if(30<D.g.length){if(R(D)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var I=g,T=v;0>=T.l(D);)I=Pe(I),T=Pe(T);var b=ge(I,1),S=ge(T,1);for(T=ge(T,2),I=ge(I,2);!w(T);){var _=S.add(T);0>=_.l(D)&&(b=b.add(I),S=_),T=ge(T,1),I=ge(I,1)}return v=O(D,b.j(v)),new V(b,v)}for(b=p;0<=D.l(v);){for(I=Math.max(1,Math.floor(D.m()/v.m())),T=Math.ceil(Math.log(I)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),S=l(I),_=S.j(v);R(_)||0<_.l(D);)I-=T,S=l(I),_=S.j(v);w(S)&&(S=g),b=b.add(S),D=O(D,_)}return new V(b,D)}t.A=function(D){return de(this,D).h},t.and=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)&D.i(T);return new s(I,this.h&D.h)},t.or=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)|D.i(T);return new s(I,this.h|D.h)},t.xor=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)^D.i(T);return new s(I,this.h^D.h)};function Pe(D){for(var v=D.g.length+1,I=[],T=0;T<v;T++)I[T]=D.i(T)<<1|D.i(T-1)>>>31;return new s(I,D.h)}function ge(D,v){var I=v>>5;v%=32;for(var T=D.g.length-I,b=[],S=0;S<T;S++)b[S]=0<v?D.i(S+I)>>>v|D.i(S+I+1)<<32-v:D.i(S+I);return new s(b,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Dy=XS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Bn=XS.Integer=s}).apply(typeof ZS<"u"?ZS:typeof self<"u"?self:typeof window<"u"?window:{});var wd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$n={};var by,Oj,xo,Cy,Va,Td,Sy,Ay,Ry;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof wd=="object"&&wd];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var C=c[m];if(!(C in f))break e;f=f[C]}c=c[c.length-1],m=f[c],d=d(m),d!=m&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,m=!1,C={next:function(){if(!m&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return m=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,m),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function g(c,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function w(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(m,C,A){for(var k=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)k[_e-2]=arguments[_e];return d.prototype[C].apply(m,k)}}function R(c){let d=c.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=c[m];return f}return[]}function N(c,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(u(m)){let C=c.length||0,A=m.length||0;c.length=C+A;for(let k=0;k<A;k++)c[C+k]=m[k]}else c.push(m)}}class O{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function $(c){return/^[\s\xa0]*$/.test(c)}function V(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function de(c){return de[" "](c),c}de[" "]=function(){};var Pe=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function ge(c,d,f){for(let m in c)d.call(f,c[m],m,c)}function D(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(c,d){let f,m;for(let C=1;C<arguments.length;C++){m=arguments[C];for(f in m)c[f]=m[f];for(let A=0;A<I.length;A++)f=I[A],Object.prototype.hasOwnProperty.call(m,f)&&(c[f]=m[f])}}function b(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function _(){var c=bh;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class In{constructor(){this.h=this.g=null}add(d,f){let m=os.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var os=new O(()=>new NR,c=>c.reset());class NR{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ss,as=!1,bh=new In,Q_=()=>{let c=a.Promise.resolve(void 0);ss=()=>{c.then(MR)}};var MR=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(f){S(f)}var d=os;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}as=!1};function Qn(){this.s=this.s,this.C=this.C}Qn.prototype.s=!1,Qn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Qn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ye(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Ye.prototype.h=function(){this.defaultPrevented=!0};var PR=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function cs(c,d){if(Ye.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Pe){e:{try{de(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:xR[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&cs.aa.h.call(this)}}w(cs,Ye);var xR={2:"touch",3:"pen",4:"mouse"};cs.prototype.h=function(){cs.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var us="closure_listenable_"+(1e6*Math.random()|0),kR=0;function OR(c,d,f,m,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=C,this.key=++kR,this.da=this.fa=!1}function cc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function uc(c){this.src=c,this.g={},this.h=0}uc.prototype.add=function(c,d,f,m,C){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var k=Sh(c,d,m,C);return-1<k?(d=c[k],f||(d.fa=!1)):(d=new OR(d,this.src,A,!!m,C),d.fa=f,c.push(d)),d};function Ch(c,d){var f=d.type;if(f in c.g){var m=c.g[f],C=Array.prototype.indexOf.call(m,d,void 0),A;(A=0<=C)&&Array.prototype.splice.call(m,C,1),A&&(cc(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Sh(c,d,f,m){for(var C=0;C<c.length;++C){var A=c[C];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==m)return C}return-1}var Ah="closure_lm_"+(1e6*Math.random()|0),Rh={};function Y_(c,d,f,m,C){if(m&&m.once)return Z_(c,d,f,m,C);if(Array.isArray(d)){for(var A=0;A<d.length;A++)Y_(c,d[A],f,m,C);return null}return f=xh(f),c&&c[us]?c.K(d,f,l(m)?!!m.capture:!!m,C):J_(c,d,f,!1,m,C)}function J_(c,d,f,m,C,A){if(!d)throw Error("Invalid event type");var k=l(C)?!!C.capture:!!C,_e=Mh(c);if(_e||(c[Ah]=_e=new uc(c)),f=_e.add(d,f,m,k,A),f.proxy)return f;if(m=LR(),f.proxy=m,m.src=c,m.listener=f,c.addEventListener)PR||(C=k),C===void 0&&(C=!1),c.addEventListener(d.toString(),m,C);else if(c.attachEvent)c.attachEvent(eI(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function LR(){function c(f){return d.call(c.src,c.listener,f)}let d=FR;return c}function Z_(c,d,f,m,C){if(Array.isArray(d)){for(var A=0;A<d.length;A++)Z_(c,d[A],f,m,C);return null}return f=xh(f),c&&c[us]?c.L(d,f,l(m)?!!m.capture:!!m,C):J_(c,d,f,!0,m,C)}function X_(c,d,f,m,C){if(Array.isArray(d))for(var A=0;A<d.length;A++)X_(c,d[A],f,m,C);else m=l(m)?!!m.capture:!!m,f=xh(f),c&&c[us]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=Sh(A,f,m,C),-1<f&&(cc(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=Mh(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Sh(d,f,m,C)),(f=-1<c?d[c]:null)&&Nh(f))}function Nh(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[us])Ch(d.i,c);else{var f=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(f,m,c.capture):d.detachEvent?d.detachEvent(eI(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=Mh(d))?(Ch(f,c),f.h==0&&(f.src=null,d[Ah]=null)):cc(c)}}}function eI(c){return c in Rh?Rh[c]:Rh[c]="on"+c}function FR(c,d){if(c.da)c=!0;else{d=new cs(d,this);var f=c.listener,m=c.ha||c.src;c.fa&&Nh(c),c=f.call(m,d)}return c}function Mh(c){return c=c[Ah],c instanceof uc?c:null}var Ph="__closure_events_fn_"+(1e9*Math.random()>>>0);function xh(c){return typeof c=="function"?c:(c[Ph]||(c[Ph]=function(d){return c.handleEvent(d)}),c[Ph])}function Je(){Qn.call(this),this.i=new uc(this),this.M=this,this.F=null}w(Je,Qn),Je.prototype[us]=!0,Je.prototype.removeEventListener=function(c,d,f,m){X_(this,c,d,f,m)};function it(c,d){var f,m=c.F;if(m)for(f=[];m;m=m.F)f.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new Ye(d,c);else if(d instanceof Ye)d.target=d.target||c;else{var C=d;d=new Ye(m,c),T(d,C)}if(C=!0,f)for(var A=f.length-1;0<=A;A--){var k=d.g=f[A];C=lc(k,m,!0,d)&&C}if(k=d.g=c,C=lc(k,m,!0,d)&&C,C=lc(k,m,!1,d)&&C,f)for(A=0;A<f.length;A++)k=d.g=f[A],C=lc(k,m,!1,d)&&C}Je.prototype.N=function(){if(Je.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],m=0;m<f.length;m++)cc(f[m]);delete c.g[d],c.h--}}this.F=null},Je.prototype.K=function(c,d,f,m){return this.i.add(String(c),d,!1,f,m)},Je.prototype.L=function(c,d,f,m){return this.i.add(String(c),d,!0,f,m)};function lc(c,d,f,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,A=0;A<d.length;++A){var k=d[A];if(k&&!k.da&&k.capture==f){var _e=k.listener,Ge=k.ha||k.src;k.fa&&Ch(c.i,k),C=_e.call(Ge,m)!==!1&&C}}return C&&!m.defaultPrevented}function tI(c,d,f){if(typeof c=="function")f&&(c=g(c,f));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function nI(c){c.g=tI(()=>{c.g=null,c.i&&(c.i=!1,nI(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class VR extends Qn{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:nI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ls(c){Qn.call(this),this.h=c,this.g={}}w(ls,Qn);var rI=[];function iI(c){ge(c.g,function(d,f){this.g.hasOwnProperty(f)&&Nh(d)},c),c.g={}}ls.prototype.N=function(){ls.aa.N.call(this),iI(this)},ls.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kh=a.JSON.stringify,UR=a.JSON.parse,jR=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Oh(){}Oh.prototype.h=null;function oI(c){return c.h||(c.h=c.i())}function sI(){}var ds={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Lh(){Ye.call(this,"d")}w(Lh,Ye);function Fh(){Ye.call(this,"c")}w(Fh,Ye);var Nr={},aI=null;function dc(){return aI=aI||new Je}Nr.La="serverreachability";function cI(c){Ye.call(this,Nr.La,c)}w(cI,Ye);function hs(c){let d=dc();it(d,new cI(d))}Nr.STAT_EVENT="statevent";function uI(c,d){Ye.call(this,Nr.STAT_EVENT,c),this.stat=d}w(uI,Ye);function ot(c){let d=dc();it(d,new uI(d,c))}Nr.Ma="timingevent";function lI(c,d){Ye.call(this,Nr.Ma,c),this.size=d}w(lI,Ye);function fs(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function ps(){this.g=!0}ps.prototype.xa=function(){this.g=!1};function BR(c,d,f,m,C,A){c.info(function(){if(c.g)if(A)for(var k="",_e=A.split("&"),Ge=0;Ge<_e.length;Ge++){var pe=_e[Ge].split("=");if(1<pe.length){var Ze=pe[0];pe=pe[1];var Xe=Ze.split("_");k=2<=Xe.length&&Xe[1]=="type"?k+(Ze+"="+pe+"&"):k+(Ze+"=redacted&")}}else k=null;else k=A;return"XMLHTTP REQ ("+m+") [attempt "+C+"]: "+d+`
`+f+`
`+k})}function $R(c,d,f,m,C,A,k){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+C+"]: "+d+`
`+f+`
`+A+" "+k})}function bi(c,d,f,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+zR(c,f)+(m?" "+m:"")})}function HR(c,d){c.info(function(){return"TIMEOUT: "+d})}ps.prototype.info=function(){};function zR(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var m=f[c];if(!(2>m.length)){var C=m[1];if(Array.isArray(C)&&!(1>C.length)){var A=C[0];if(A!="noop"&&A!="stop"&&A!="close")for(var k=1;k<C.length;k++)C[k]=""}}}}return kh(f)}catch{return d}}var hc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},dI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vh;function fc(){}w(fc,Oh),fc.prototype.g=function(){return new XMLHttpRequest},fc.prototype.i=function(){return{}},Vh=new fc;function Yn(c,d,f,m){this.j=c,this.i=d,this.l=f,this.R=m||1,this.U=new ls(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new hI}function hI(){this.i=null,this.g="",this.h=!1}var fI={},Uh={};function jh(c,d,f){c.L=1,c.v=yc(En(d)),c.m=f,c.P=!0,pI(c,null)}function pI(c,d){c.F=Date.now(),pc(c),c.A=En(c.v);var f=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),AI(f.i,"t",m),c.C=0,f=c.j.J,c.h=new hI,c.g=GI(c.j,f?d:null,!c.m),0<c.O&&(c.M=new VR(g(c.Y,c,c.g),c.O)),d=c.U,f=c.g,m=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(rI[0]=C.toString()),C=rI);for(var A=0;A<C.length;A++){var k=Y_(f,C[A],m||d.handleEvent,!1,d.h||d);if(!k)break;d.g[k.key]=k}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),hs(),BR(c.i,c.u,c.A,c.l,c.R,c.m)}Yn.prototype.ca=function(c){c=c.target;let d=this.M;d&&wn(c)==3?d.j():this.Y(c)},Yn.prototype.Y=function(c){try{if(c==this.g)e:{let Xe=wn(this.g);var d=this.g.Ba();let Ai=this.g.Z();if(!(3>Xe)&&(Xe!=3||this.g&&(this.h.h||this.g.oa()||OI(this.g)))){this.J||Xe!=4||d==7||(d==8||0>=Ai?hs(3):hs(2)),Bh(this);var f=this.g.Z();this.X=f;t:if(gI(this)){var m=OI(this.g);c="";var C=m.length,A=wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Mr(this),gs(this);var k="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(m[d],{stream:!(A&&d==C-1)});m.length=0,this.h.g+=c,this.C=0,k=this.h.g}else k=this.g.oa();if(this.o=f==200,$R(this.i,this.u,this.A,this.l,this.R,Xe,f),this.o){if(this.T&&!this.K){t:{if(this.g){var _e,Ge=this.g;if((_e=Ge.g?Ge.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(_e)){var pe=_e;break t}}pe=null}if(f=pe)bi(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$h(this,f);else{this.o=!1,this.s=3,ot(12),Mr(this),gs(this);break e}}if(this.P){f=!0;let Ft;for(;!this.J&&this.C<k.length;)if(Ft=qR(this,k),Ft==Uh){Xe==4&&(this.s=4,ot(14),f=!1),bi(this.i,this.l,null,"[Incomplete Response]");break}else if(Ft==fI){this.s=4,ot(15),bi(this.i,this.l,k,"[Invalid Chunk]"),f=!1;break}else bi(this.i,this.l,Ft,null),$h(this,Ft);if(gI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xe!=4||k.length!=0||this.h.h||(this.s=1,ot(16),f=!1),this.o=this.o&&f,!f)bi(this.i,this.l,k,"[Invalid Chunked Response]"),Mr(this),gs(this);else if(0<k.length&&!this.W){this.W=!0;var Ze=this.j;Ze.g==this&&Ze.ba&&!Ze.M&&(Ze.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),Kh(Ze),Ze.M=!0,ot(11))}}else bi(this.i,this.l,k,null),$h(this,k);Xe==4&&Mr(this),this.o&&!this.J&&(Xe==4?$I(this.j,this):(this.o=!1,pc(this)))}else cN(this.g),f==400&&0<k.indexOf("Unknown SID")?(this.s=3,ot(12)):(this.s=0,ot(13)),Mr(this),gs(this)}}}catch{}finally{}};function gI(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function qR(c,d){var f=c.C,m=d.indexOf(`
`,f);return m==-1?Uh:(f=Number(d.substring(f,m)),isNaN(f)?fI:(m+=1,m+f>d.length?Uh:(d=d.slice(m,m+f),c.C=m+f,d)))}Yn.prototype.cancel=function(){this.J=!0,Mr(this)};function pc(c){c.S=Date.now()+c.I,mI(c,c.I)}function mI(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=fs(g(c.ba,c),d)}function Bh(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Yn.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(HR(this.i,this.A),this.L!=2&&(hs(),ot(17)),Mr(this),this.s=2,gs(this)):mI(this,this.S-c)};function gs(c){c.j.G==0||c.J||$I(c.j,c)}function Mr(c){Bh(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,iI(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function $h(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Hh(f.h,c))){if(!c.K&&Hh(f.h,c)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var C=m;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)wc(f),Ic(f);else break e;Wh(f),ot(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=fs(g(f.Za,f),6e3));if(1>=_I(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else xr(f,11)}else if((c.K||f.g==c)&&wc(f),!$(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let pe=C[d];if(f.T=pe[0],pe=pe[1],f.G==2)if(pe[0]=="c"){f.K=pe[1],f.ia=pe[2];let Ze=pe[3];Ze!=null&&(f.la=Ze,f.j.info("VER="+f.la));let Xe=pe[4];Xe!=null&&(f.Aa=Xe,f.j.info("SVER="+f.Aa));let Ai=pe[5];Ai!=null&&typeof Ai=="number"&&0<Ai&&(m=1.5*Ai,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let Ft=c.g;if(Ft){let Dc=Ft.g?Ft.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Dc){var A=m.h;A.g||Dc.indexOf("spdy")==-1&&Dc.indexOf("quic")==-1&&Dc.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(zh(A,A.h),A.h=null))}if(m.D){let Qh=Ft.g?Ft.g.getResponseHeader("X-HTTP-Session-Id"):null;Qh&&(m.ya=Qh,we(m.I,m.D,Qh))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var k=c;if(m.qa=qI(m,m.J?m.ia:null,m.W),k.K){II(m.h,k);var _e=k,Ge=m.L;Ge&&(_e.I=Ge),_e.B&&(Bh(_e),pc(_e)),m.g=k}else jI(m);0<f.i.length&&Ec(f)}else pe[0]!="stop"&&pe[0]!="close"||xr(f,7);else f.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?xr(f,7):Gh(f):pe[0]!="noop"&&f.l&&f.l.ta(pe),f.v=0)}}hs(4)}catch{}}var GR=class{constructor(c,d){this.g=c,this.map=d}};function yI(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function vI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function _I(c){return c.h?1:c.g?c.g.size:0}function Hh(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function zh(c,d){c.g?c.g.add(d):c.h=d}function II(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}yI.prototype.cancel=function(){if(this.i=EI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function EI(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return R(c.i)}function WR(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,m=0;m<f;m++)d.push(c[m]);return d}d=[],f=0;for(m in c)d[f++]=c[m];return d}function KR(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let m in c)d[f++]=m;return d}}}function wI(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=KR(c),m=WR(c),C=m.length,A=0;A<C;A++)d.call(void 0,m[A],f&&f[A],c)}var TI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function QR(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var m=c[f].indexOf("="),C=null;if(0<=m){var A=c[f].substring(0,m);C=c[f].substring(m+1)}else A=c[f];d(A,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Pr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Pr){this.h=c.h,gc(this,c.j),this.o=c.o,this.g=c.g,mc(this,c.s),this.l=c.l;var d=c.i,f=new vs;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),DI(this,f),this.m=c.m}else c&&(d=String(c).match(TI))?(this.h=!1,gc(this,d[1]||"",!0),this.o=ms(d[2]||""),this.g=ms(d[3]||"",!0),mc(this,d[4]),this.l=ms(d[5]||"",!0),DI(this,d[6]||"",!0),this.m=ms(d[7]||"")):(this.h=!1,this.i=new vs(null,this.h))}Pr.prototype.toString=function(){var c=[],d=this.j;d&&c.push(ys(d,bI,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(ys(d,bI,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(ys(f,f.charAt(0)=="/"?ZR:JR,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",ys(f,eN)),c.join("")};function En(c){return new Pr(c)}function gc(c,d,f){c.j=f?ms(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function mc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function DI(c,d,f){d instanceof vs?(c.i=d,tN(c.i,c.h)):(f||(d=ys(d,XR)),c.i=new vs(d,c.h))}function we(c,d,f){c.i.set(d,f)}function yc(c){return we(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function ms(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ys(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,YR),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function YR(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var bI=/[#\/\?@]/g,JR=/[#\?:]/g,ZR=/[#\?]/g,XR=/[#\?@]/g,eN=/#/g;function vs(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Jn(c){c.g||(c.g=new Map,c.h=0,c.i&&QR(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=vs.prototype,t.add=function(c,d){Jn(this),this.i=null,c=Ci(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function CI(c,d){Jn(c),d=Ci(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function SI(c,d){return Jn(c),d=Ci(c,d),c.g.has(d)}t.forEach=function(c,d){Jn(this),this.g.forEach(function(f,m){f.forEach(function(C){c.call(d,C,m,this)},this)},this)},t.na=function(){Jn(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let C=c[m];for(let A=0;A<C.length;A++)f.push(d[m])}return f},t.V=function(c){Jn(this);let d=[];if(typeof c=="string")SI(this,c)&&(d=d.concat(this.g.get(Ci(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return Jn(this),this.i=null,c=Ci(this,c),SI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function AI(c,d,f){CI(c,d),0<f.length&&(c.i=null,c.g.set(Ci(c,d),R(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let A=encodeURIComponent(String(m)),k=this.V(m);for(m=0;m<k.length;m++){var C=A;k[m]!==""&&(C+="="+encodeURIComponent(String(k[m]))),c.push(C)}}return this.i=c.join("&")};function Ci(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function tN(c,d){d&&!c.j&&(Jn(c),c.i=null,c.g.forEach(function(f,m){var C=m.toLowerCase();m!=C&&(CI(this,m),AI(this,C,f))},c)),c.j=d}function nN(c,d){let f=new ps;if(a.Image){let m=new Image;m.onload=y(Zn,f,"TestLoadImage: loaded",!0,d,m),m.onerror=y(Zn,f,"TestLoadImage: error",!1,d,m),m.onabort=y(Zn,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(Zn,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function rN(c,d){let f=new ps,m=new AbortController,C=setTimeout(()=>{m.abort(),Zn(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(A=>{clearTimeout(C),A.ok?Zn(f,"TestPingServer: ok",!0,d):Zn(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),Zn(f,"TestPingServer: error",!1,d)})}function Zn(c,d,f,m,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),m(f)}catch{}}function iN(){this.g=new jR}function oN(c,d,f){let m=f||"";try{wI(c,function(C,A){let k=C;l(C)&&(k=kh(C)),d.push(m+A+"="+encodeURIComponent(k))})}catch(C){throw d.push(m+"type="+encodeURIComponent("_badmap")),C}}function _s(c){this.l=c.Ub||null,this.j=c.eb||!1}w(_s,Oh),_s.prototype.g=function(){return new vc(this.l,this.j)},_s.prototype.i=function(c){return function(){return c}}({});function vc(c,d){Je.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(vc,Je),t=vc.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Es(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Is(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Es(this)),this.g&&(this.readyState=3,Es(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;RI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function RI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Is(this):Es(this),this.readyState==3&&RI(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Is(this))},t.Qa=function(c){this.g&&(this.response=c,Is(this))},t.ga=function(){this.g&&Is(this)};function Is(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Es(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Es(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(vc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function NI(c){let d="";return ge(c,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function qh(c,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=NI(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):we(c,d,f))}function Ae(c){Je.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Ae,Je);var sN=/^https?$/i,aN=["POST","PUT"];t=Ae.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vh.g(),this.v=this.o?oI(this.o):oI(Vh),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){MI(this,A);return}if(c=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var C in m)f.set(C,m[C]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let A of m.keys())f.set(A,m.get(A));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(aN,d,void 0))||m||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,k]of f)this.g.setRequestHeader(A,k);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{kI(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){MI(this,A)}};function MI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,PI(c),_c(c)}function PI(c){c.A||(c.A=!0,it(c,"complete"),it(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,it(this,"complete"),it(this,"abort"),_c(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_c(this,!0)),Ae.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?xI(this):this.bb())},t.bb=function(){xI(this)};function xI(c){if(c.h&&typeof s<"u"&&(!c.v[1]||wn(c)!=4||c.Z()!=2)){if(c.u&&wn(c)==4)tI(c.Ea,0,c);else if(it(c,"readystatechange"),wn(c)==4){c.h=!1;try{let k=c.Z();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=k===0){var C=String(c.D).match(TI)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),m=!sN.test(C?C.toLowerCase():"")}f=m}if(f)it(c,"complete"),it(c,"success");else{c.m=6;try{var A=2<wn(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",PI(c)}}finally{_c(c)}}}}function _c(c,d){if(c.g){kI(c);let f=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||it(c,"ready");try{f.onreadystatechange=m}catch{}}}function kI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function wn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<wn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),UR(d)}};function OI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function cN(c){let d={};c=(c.g&&2<=wn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if($(c[m]))continue;var f=b(c[m]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[C]||[];d[C]=A,A.push(f)}D(d,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ws(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function LI(c){this.Aa=0,this.i=[],this.j=new ps,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ws("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ws("baseRetryDelayMs",5e3,c),this.cb=ws("retryDelaySeedMs",1e4,c),this.Wa=ws("forwardChannelMaxRetries",2,c),this.wa=ws("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new yI(c&&c.concurrentRequestLimit),this.Da=new iN,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=LI.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,m){ot(0),this.W=c,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=qI(this,null,this.W),Ec(this)};function Gh(c){if(FI(c),c.G==3){var d=c.U++,f=En(c.I);if(we(f,"SID",c.K),we(f,"RID",d),we(f,"TYPE","terminate"),Ts(c,f),d=new Yn(c,c.j,d),d.L=2,d.v=yc(En(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=GI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),pc(d)}zI(c)}function Ic(c){c.g&&(Kh(c),c.g.cancel(),c.g=null)}function FI(c){Ic(c),c.u&&(a.clearTimeout(c.u),c.u=null),wc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Ec(c){if(!vI(c.h)&&!c.s){c.s=!0;var d=c.Ga;ss||Q_(),as||(ss(),as=!0),bh.add(d,c),c.B=0}}function uN(c,d){return _I(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=fs(g(c.Ga,c,d),HI(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new Yn(this,this.j,c),A=this.o;if(this.S&&(A?(A=v(A),T(A,this.S)):A=this.S),this.m!==null||this.O||(C.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=UI(this,C,d),f=En(this.I),we(f,"RID",c),we(f,"CVER",22),this.D&&we(f,"X-HTTP-Session-Id",this.D),Ts(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(NI(A)))+"&"+d:this.m&&qh(f,this.m,A)),zh(this.h,C),this.Ua&&we(f,"TYPE","init"),this.P?(we(f,"$req",d),we(f,"SID","null"),C.T=!0,jh(C,f,null)):jh(C,f,d),this.G=2}}else this.G==3&&(c?VI(this,c):this.i.length==0||vI(this.h)||VI(this))};function VI(c,d){var f;d?f=d.l:f=c.U++;let m=En(c.I);we(m,"SID",c.K),we(m,"RID",f),we(m,"AID",c.T),Ts(c,m),c.m&&c.o&&qh(m,c.m,c.o),f=new Yn(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=UI(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),zh(c.h,f),jh(f,m,d)}function Ts(c,d){c.H&&ge(c.H,function(f,m){we(d,m,f)}),c.l&&wI({},function(f,m){we(d,m,f)})}function UI(c,d,f){f=Math.min(c.i.length,f);var m=c.l?g(c.l.Na,c.l,c):null;e:{var C=c.i;let A=-1;for(;;){let k=["count="+f];A==-1?0<f?(A=C[0].g,k.push("ofs="+A)):A=0:k.push("ofs="+A);let _e=!0;for(let Ge=0;Ge<f;Ge++){let pe=C[Ge].g,Ze=C[Ge].map;if(pe-=A,0>pe)A=Math.max(0,C[Ge].g-100),_e=!1;else try{oN(Ze,k,"req"+pe+"_")}catch{m&&m(Ze)}}if(_e){m=k.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,m}function jI(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;ss||Q_(),as||(ss(),as=!0),bh.add(d,c),c.v=0}}function Wh(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=fs(g(c.Fa,c),HI(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,BI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=fs(g(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ot(10),Ic(this),BI(this))};function Kh(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function BI(c){c.g=new Yn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=En(c.qa);we(d,"RID","rpc"),we(d,"SID",c.K),we(d,"AID",c.T),we(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&we(d,"TO",c.ja),we(d,"TYPE","xmlhttp"),Ts(c,d),c.m&&c.o&&qh(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=yc(En(d)),f.m=null,f.P=!0,pI(f,c)}t.Za=function(){this.C!=null&&(this.C=null,Ic(this),Wh(this),ot(19))};function wc(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function $I(c,d){var f=null;if(c.g==d){wc(c),Kh(c),c.g=null;var m=2}else if(Hh(c.h,d))f=d.D,II(c.h,d),m=1;else return;if(c.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;m=dc(),it(m,new lI(m,f)),Ec(c)}else jI(c);else if(C=d.s,C==3||C==0&&0<d.X||!(m==1&&uN(c,d)||m==2&&Wh(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:xr(c,5);break;case 4:xr(c,10);break;case 3:xr(c,6);break;default:xr(c,2)}}}function HI(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function xr(c,d){if(c.j.info("Error code "+d),d==2){var f=g(c.fb,c),m=c.Xa;let C=!m;m=new Pr(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||gc(m,"https"),yc(m),C?nN(m.toString(),f):rN(m.toString(),f)}else ot(2);c.G=0,c.l&&c.l.sa(d),zI(c),FI(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function zI(c){if(c.G=0,c.ka=[],c.l){let d=EI(c.h);(d.length!=0||c.i.length!=0)&&(N(c.ka,d),N(c.ka,c.i),c.h.i.length=0,R(c.i),c.i.length=0),c.l.ra()}}function qI(c,d,f){var m=f instanceof Pr?En(f):new Pr(f);if(m.g!="")d&&(m.g=d+"."+m.g),mc(m,m.s);else{var C=a.location;m=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var A=new Pr(null);m&&gc(A,m),d&&(A.g=d),C&&mc(A,C),f&&(A.l=f),m=A}return f=c.D,d=c.ya,f&&d&&we(m,f,d),we(m,"VER",c.la),Ts(c,m),m}function GI(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Ae(new _s({eb:f})):new Ae(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function WI(){}t=WI.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Tc(){}Tc.prototype.g=function(c,d){return new wt(c,d)};function wt(c,d){Je.call(this),this.g=new LI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!$(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!$(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Si(this)}w(wt,Je),wt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wt.prototype.close=function(){Gh(this.g)},wt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=kh(c),c=f);d.i.push(new GR(d.Ya++,c)),d.G==3&&Ec(d)},wt.prototype.N=function(){this.g.l=null,delete this.j,Gh(this.g),delete this.g,wt.aa.N.call(this)};function KI(c){Lh.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}w(KI,Lh);function QI(){Fh.call(this),this.status=1}w(QI,Fh);function Si(c){this.g=c}w(Si,WI),Si.prototype.ua=function(){it(this.g,"a")},Si.prototype.ta=function(c){it(this.g,new KI(c))},Si.prototype.sa=function(c){it(this.g,new QI)},Si.prototype.ra=function(){it(this.g,"b")},Tc.prototype.createWebChannel=Tc.prototype.g,wt.prototype.send=wt.prototype.o,wt.prototype.open=wt.prototype.m,wt.prototype.close=wt.prototype.close,Ry=$n.createWebChannelTransport=function(){return new Tc},Ay=$n.getStatEventTarget=function(){return dc()},Sy=$n.Event=Nr,Td=$n.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},hc.NO_ERROR=0,hc.TIMEOUT=8,hc.HTTP_ERROR=6,Va=$n.ErrorCode=hc,dI.COMPLETE="complete",Cy=$n.EventType=dI,sI.EventType=ds,ds.OPEN="a",ds.CLOSE="b",ds.ERROR="c",ds.MESSAGE="d",Je.prototype.listen=Je.prototype.K,xo=$n.WebChannel=sI,Oj=$n.FetchXmlHttpFactory=_s,Ae.prototype.listenOnce=Ae.prototype.L,Ae.prototype.getLastError=Ae.prototype.Ka,Ae.prototype.getLastErrorCode=Ae.prototype.Ba,Ae.prototype.getStatus=Ae.prototype.Z,Ae.prototype.getResponseJson=Ae.prototype.Oa,Ae.prototype.getResponseText=Ae.prototype.oa,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Ha,by=$n.XhrIo=Ae}).apply(typeof wd<"u"?wd:typeof self<"u"?self:typeof window<"u"?window:{});var e0="@firebase/firestore",t0="4.7.17";var ze=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ze.UNAUTHENTICATED=new ze(null),ze.GOOGLE_CREDENTIALS=new ze("google-credentials-uid"),ze.FIRST_PARTY=new ze("first-party-uid"),ze.MOCK_USER=new ze("mock-user");var ts="11.9.0";var gi=new gr("@firebase/firestore");function ko(){return gi.logLevel}function F(t,...e){if(gi.logLevel<=ue.DEBUG){let n=e.map(w_);gi.debug(`Firestore (${ts}): ${t}`,...n)}}function Hn(t,...e){if(gi.logLevel<=ue.ERROR){let n=e.map(w_);gi.error(`Firestore (${ts}): ${t}`,...n)}}function Bo(t,...e){if(gi.logLevel<=ue.WARN){let n=e.map(w_);gi.warn(`Firestore (${ts}): ${t}`,...n)}}function w_(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function q(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,G0(t,r,n)}function G0(t,e,n){let r=`FIRESTORE (${ts}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Hn(r),new Error(r)}function ye(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||G0(e,i,r)}function Y(t,e){return t}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=class extends St{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Wt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Nd=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Oy=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ze.UNAUTHENTICATED))}shutdown(){}},Ly=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Fy=class{constructor(e){this.t=e,this.currentUser=ze.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ye(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new Wt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Wt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>E(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Wt)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string",31837,{l:r}),new Nd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string",2055,{h:e}),new ze(e)}},Vy=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ze.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Uy=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Vy(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ze.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Md=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},jy=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,At(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ye(this.o===void 0,3512);let r=o=>{o.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,F("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Md(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Md(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Lj(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function W0(){return new TextEncoder}var Pd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=Lj(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function oe(t,e){return t<e?-1:t>e?1:0}function By(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return oe(r,i);{let o=W0(),s=Fj(o.encode(n0(t,n)),o.encode(n0(e,n)));return s!==0?s:oe(r,i)}}n+=r>65535?2:1}return oe(t.length,e.length)}function n0(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function Fj(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return oe(t[n],e[n]);return oe(t.length,e.length)}function $o(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var r0=-62135596800,i0=1e6,Qe=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*i0);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<r0)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/i0}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-r0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Z=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Qe(0,0))}static max(){return new t(new Qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var o0="__name__",xd=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&q(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&q(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return oe(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):By(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Bn.fromString(e.substring(4,e.length-2))}},Se=class t extends xd{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new L(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},Vj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Nt=class t extends xd{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return Vj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===o0}static keyField(){return new t([o0])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new L(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new L(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new L(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new L(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var z=class t{constructor(e){this.path=e}static fromPath(e){return new t(Se.fromString(e))}static fromName(e){return new t(Se.fromString(e).popFirst(5))}static empty(){return new t(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Se(e.slice()))}};var za=-1,$y=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};$y.UNKNOWN_ID=-1;function Uj(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Z.fromTimestamp(r===1e9?new Qe(n+1,0):new Qe(n,r));return new mi(i,z.empty(),e)}function jj(t){return new mi(t.readTime,t.key,za)}var mi=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(Z.min(),z.empty(),za)}static max(){return new t(Z.max(),z.empty(),za)}};function Bj(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=z.comparator(t.documentKey,e.documentKey),n!==0?n:oe(t.largestBatchId,e.largestBatchId))}var $j="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Hy=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ns(t){return E(this,null,function*(){if(t.code!==M.FAILED_PRECONDITION||t.message!==$j)throw t;F("LocalStore","Unexpectedly lost primary lease")})}var P=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function Hj(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function rs(t){return t.name==="IndexedDbTransactionError"}var T_=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>r.writeSequenceNumber(i))}ue(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ce&&this.ce(n),n}}t.le=-1;return t})(),D_=-1;function fh(t){return t==null}function qa(t){return t===0&&1/t==-1/0}function zj(t){return typeof t=="number"&&Number.isInteger(t)&&!qa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var K0="";function qj(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=s0(e)),e=Gj(t.get(n),e);return s0(e)}function Gj(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case K0:n+="";break;default:n+=o}}return n}function s0(t){return t+K0+""}var Wj="remoteDocuments",Q0="owner";var Y0="mutationQueues";var J0="mutations";var Z0="documentMutations",Kj="remoteDocumentsV14";var X0="remoteDocumentGlobal";var eA="targets";var tA="targetDocuments";var nA="targetGlobal",rA="collectionParents";var iA="clientMetadata";var oA="bundles";var sA="namedQueries";var Qj="indexConfiguration";var Yj="indexState";var Jj="indexEntries";var aA="documentOverlays";var Zj="globals";var Xj=[Y0,J0,Z0,Wj,eA,Q0,nA,tA,iA,X0,rA,oA,sA],IQ=[...Xj,aA],eB=[Y0,J0,Z0,Kj,eA,Q0,nA,tA,iA,X0,rA,oA,sA,aA],tB=eB,nB=[...tB,Qj,Yj,Jj];var EQ=[...nB,Zj];function a0(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ar(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function cA(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Me=class t{constructor(e,n){this.comparator=e,this.root=n||gn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,gn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vo(this.root,e,this.comparator,!0)}},Vo=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},gn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw q(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw q(27949);return e+(this.isRed()?0:1)}};gn.EMPTY=null,gn.RED=!0,gn.BLACK=!1;gn.EMPTY=new class{constructor(){this.size=0}get key(){throw q(57766)}get value(){throw q(16141)}get color(){throw q(16727)}get left(){throw q(29726)}get right(){throw q(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new gn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var qe=class t{constructor(e){this.comparator=e,this.data=new Me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new kd(this.data.getIterator())}getIteratorFrom(e){return new kd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},kd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ot=class t{constructor(e){this.fields=e,e.sort(Nt.comparator)}static empty(){return new t([])}unionWith(e){let n=new qe(Nt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return $o(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Od=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var rt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Od("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};rt.EMPTY_BYTE_STRING=new rt("");var rB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zn(t){if(ye(!!t,39018),typeof t=="string"){let e=0,n=rB.exec(t);if(ye(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ce(t.seconds),nanos:Ce(t.nanos)}}function Ce(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function qn(t){return typeof t=="string"?rt.fromBase64String(t):rt.fromUint8Array(t)}var uA="server_timestamp",lA="__type__",dA="__previous_value__",hA="__local_write_time__";function b_(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[lA])===null||n===void 0?void 0:n.stringValue)===uA}function ph(t){let e=t.mapValue.fields[dA];return b_(e)?ph(e):e}function Ga(t){let e=zn(t.mapValue.fields[hA].timestampValue);return new Qe(e.seconds,e.nanos)}var zy=class{constructor(e,n,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},Ld="(default)",Fd=class t{constructor(e,n){this.projectId=e,this.database=n||Ld}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===Ld}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var C_="__type__",fA="__max__",Dd={mapValue:{fields:{__type__:{stringValue:fA}}}},S_="__vector__",Ho="value";function br(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?b_(t)?4:gA(t)?9007199254740991:pA(t)?10:11:q(28295,{value:t})}function vn(t,e){if(t===e)return!0;let n=br(t);if(n!==br(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ga(t).isEqual(Ga(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=zn(i.timestampValue),a=zn(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return qn(i.bytesValue).isEqual(qn(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Ce(i.geoPointValue.latitude)===Ce(o.geoPointValue.latitude)&&Ce(i.geoPointValue.longitude)===Ce(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ce(i.integerValue)===Ce(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ce(i.doubleValue),a=Ce(o.doubleValue);return s===a?qa(s)===qa(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return $o(t.arrayValue.values||[],e.arrayValue.values||[],vn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(a0(s)!==a0(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!vn(s[u],a[u])))return!1;return!0}(t,e);default:return q(52216,{left:t})}}function Wa(t,e){return(t.values||[]).find(n=>vn(n,e))!==void 0}function zo(t,e){if(t===e)return 0;let n=br(t),r=br(e);if(n!==r)return oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ce(o.integerValue||o.doubleValue),u=Ce(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return c0(t.timestampValue,e.timestampValue);case 4:return c0(Ga(t),Ga(e));case 5:return By(t.stringValue,e.stringValue);case 6:return function(o,s){let a=qn(o),u=qn(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=oe(a[l],u[l]);if(h!==0)return h}return oe(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=oe(Ce(o.latitude),Ce(s.latitude));return a!==0?a:oe(Ce(o.longitude),Ce(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return u0(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},g=s.fields||{},y=(a=p[Ho])===null||a===void 0?void 0:a.arrayValue,w=(u=g[Ho])===null||u===void 0?void 0:u.arrayValue,R=oe(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=w?.values)===null||h===void 0?void 0:h.length)||0);return R!==0?R:u0(y,w)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Dd.mapValue&&s===Dd.mapValue)return 0;if(o===Dd.mapValue)return 1;if(s===Dd.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let g=By(u[p],h[p]);if(g!==0)return g;let y=zo(a[u[p]],l[h[p]]);if(y!==0)return y}return oe(u.length,h.length)}(t.mapValue,e.mapValue);default:throw q(23264,{Pe:n})}}function c0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return oe(t,e);let n=zn(t),r=zn(e),i=oe(n.seconds,r.seconds);return i!==0?i:oe(n.nanos,r.nanos)}function u0(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=zo(n[i],r[i]);if(o)return o}return oe(n.length,r.length)}function qo(t){return qy(t)}function qy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=zn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return qn(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=qy(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${qy(n.fields[s])}`;return i+"}"}(t.mapValue):q(61005,{value:t})}function Sd(t){switch(br(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=ph(t);return e?16+Sd(e):16;case 5:return 2*t.stringValue.length;case 6:return qn(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Sd(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Ar(r.fields,(o,s)=>{i+=o.length+Sd(s)}),i}(t.mapValue);default:throw q(13486,{value:t})}}function l0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Gy(t){return!!t&&"integerValue"in t}function A_(t){return!!t&&"arrayValue"in t}function d0(t){return!!t&&"nullValue"in t}function h0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ad(t){return!!t&&"mapValue"in t}function pA(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[C_])===null||n===void 0?void 0:n.stringValue)===S_}function ja(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Ar(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ja(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ja(t.arrayValue.values[n]);return e}return Object.assign({},t)}function gA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===fA}var TQ={mapValue:{fields:{[C_]:{stringValue:S_},[Ho]:{arrayValue:{}}}}};var Rt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ad(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ja(n)}setAll(e){let n=Nt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=ja(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Ad(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ad(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ar(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(ja(this.value))}};function mA(t){let e=[];return Ar(t.fields,(n,r)=>{let i=new Nt([n]);if(Ad(r)){let o=mA(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Ot(e)}var Kt=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,Z.min(),Z.min(),Z.min(),Rt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,Z.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,Z.min(),Z.min(),Rt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,Z.min(),Z.min(),Rt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Go=class{constructor(e,n){this.position=e,this.inclusive=n}};function f0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=z.comparator(z.fromName(s.referenceValue),n.key):r=zo(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function p0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vn(t.position[n],e.position[n]))return!1;return!0}var Wo=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function iB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Vd=class{},Fe=class t extends Vd{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Ky(e,n,r):n==="array-contains"?new Jy(e,r):n==="in"?new Zy(e,r):n==="not-in"?new Xy(e,r):n==="array-contains-any"?new ev(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Qy(e,r):new Yy(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(zo(n,this.value)):n!==null&&br(this.value)===br(n)&&this.matchesComparison(zo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Qt=class t extends Vd{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new t(e,n)}matches(e){return yA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}};function yA(t){return t.op==="and"}function vA(t){return oB(t)&&yA(t)}function oB(t){for(let e of t.filters)if(e instanceof Qt)return!1;return!0}function Wy(t){if(t instanceof Fe)return t.field.canonicalString()+t.op.toString()+qo(t.value);if(vA(t))return t.filters.map(e=>Wy(e)).join(",");{let e=t.filters.map(n=>Wy(n)).join(",");return`${t.op}(${e})`}}function _A(t,e){return t instanceof Fe?function(r,i){return i instanceof Fe&&r.op===i.op&&r.field.isEqual(i.field)&&vn(r.value,i.value)}(t,e):t instanceof Qt?function(r,i){return i instanceof Qt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&_A(s,i.filters[a]),!0):!1}(t,e):void q(19439)}function IA(t){return t instanceof Fe?function(n){return`${n.field.canonicalString()} ${n.op} ${qo(n.value)}`}(t):t instanceof Qt?function(n){return n.op.toString()+" {"+n.getFilters().map(IA).join(" ,")+"}"}(t):"Filter"}var Ky=class extends Fe{constructor(e,n,r){super(e,n,r),this.key=z.fromName(r.referenceValue)}matches(e){let n=z.comparator(e.key,this.key);return this.matchesComparison(n)}},Qy=class extends Fe{constructor(e,n){super(e,"in",n),this.keys=EA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Yy=class extends Fe{constructor(e,n){super(e,"not-in",n),this.keys=EA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function EA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>z.fromName(r.referenceValue))}var Jy=class extends Fe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return A_(n)&&Wa(n.arrayValue,this.value)}},Zy=class extends Fe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Wa(this.value.arrayValue,n)}},Xy=class extends Fe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Wa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Wa(this.value.arrayValue,n)}},ev=class extends Fe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!A_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Wa(this.value.arrayValue,r))}};var tv=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Ie=null}};function g0(t,e=null,n=[],r=[],i=null,o=null,s=null){return new tv(t,e,n,r,i,o,s)}function R_(t){let e=Y(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Wy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),fh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>qo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>qo(r)).join(",")),e.Ie=n}return e.Ie}function N_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!iB(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_A(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!p0(t.startAt,e.startAt)&&p0(t.endAt,e.endAt)}function nv(t){return z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var yi=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}};function sB(t,e,n,r,i,o,s,a){return new yi(t,e,n,r,i,o,s,a)}function M_(t){return new yi(t)}function m0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function wA(t){return t.collectionGroup!==null}function Ba(t){let e=Y(t);if(e.Ee===null){e.Ee=[];let n=new Set;for(let o of e.explicitOrderBy)e.Ee.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new qe(Nt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new Wo(o,r))}),n.has(Nt.keyField().canonicalString())||e.Ee.push(new Wo(Nt.keyField(),r))}return e.Ee}function mn(t){let e=Y(t);return e.de||(e.de=aB(e,Ba(t))),e.de}function aB(t,e){if(t.limitType==="F")return g0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Wo(i.field,o)});let n=t.endAt?new Go(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Go(t.startAt.position,t.startAt.inclusive):null;return g0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function rv(t,e){let n=t.filters.concat([e]);return new yi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function iv(t,e,n){return new yi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function gh(t,e){return N_(mn(t),mn(e))&&t.limitType===e.limitType}function TA(t){return`${R_(mn(t))}|lt:${t.limitType}`}function Oo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>IA(i)).join(", ")}]`),fh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>qo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>qo(i)).join(",")),`Target(${r})`}(mn(t))}; limitType=${t.limitType})`}function mh(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):z.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of Ba(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=f0(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Ba(r),i)||r.endAt&&!function(s,a,u){let l=f0(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Ba(r),i))}(t,e)}function cB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function DA(t){return(e,n)=>{let r=!1;for(let i of Ba(t)){let o=uB(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function uB(t,e,n){let r=t.field.isKeyField()?z.comparator(e.key,n.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?zo(u,l):q(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return q(19790,{direction:t.dir})}}var Gn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ar(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return cA(this.inner)}size(){return this.innerSize}};var lB=new Me(z.comparator);function Wn(){return lB}var bA=new Me(z.comparator);function Ua(...t){let e=bA;for(let n of t)e=e.insert(n.key,n);return e}function CA(t){let e=bA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function hi(){return $a()}function SA(){return $a()}function $a(){return new Gn(t=>t.toString(),(t,e)=>t.isEqual(e))}var dB=new Me(z.comparator),hB=new qe(z.comparator);function le(...t){let e=hB;for(let n of t)e=e.add(n);return e}var fB=new qe(oe);function pB(){return fB}function P_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qa(e)?"-0":e}}function AA(t){return{integerValue:""+t}}function RA(t,e){return zj(e)?AA(e):P_(t,e)}var Ko=class{constructor(){this._=void 0}};function gB(t,e,n){return t instanceof Qo?function(i,o){let s={fields:{[lA]:{stringValue:uA},[hA]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&b_(o)&&(o=ph(o)),o&&(s.fields[dA]=o),{mapValue:s}}(n,e):t instanceof vi?MA(t,e):t instanceof _i?PA(t,e):function(i,o){let s=NA(i,o),a=y0(s)+y0(i.Re);return Gy(s)&&Gy(i.Re)?AA(a):P_(i.serializer,a)}(t,e)}function mB(t,e,n){return t instanceof vi?MA(t,e):t instanceof _i?PA(t,e):n}function NA(t,e){return t instanceof Ii?function(r){return Gy(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Qo=class extends Ko{},vi=class extends Ko{constructor(e){super(),this.elements=e}};function MA(t,e){let n=xA(e);for(let r of t.elements)n.some(i=>vn(i,r))||n.push(r);return{arrayValue:{values:n}}}var _i=class extends Ko{constructor(e){super(),this.elements=e}};function PA(t,e){let n=xA(e);for(let r of t.elements)n=n.filter(i=>!vn(i,r));return{arrayValue:{values:n}}}var Ii=class extends Ko{constructor(e,n){super(),this.serializer=e,this.Re=n}};function y0(t){return Ce(t.integerValue||t.doubleValue)}function xA(t){return A_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var ov=class{constructor(e,n){this.field=e,this.transform=n}};function yB(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof vi&&i instanceof vi||r instanceof _i&&i instanceof _i?$o(r.elements,i.elements,vn):r instanceof Ii&&i instanceof Ii?vn(r.Re,i.Re):r instanceof Qo&&i instanceof Qo}(t.transform,e.transform)}var sv=class{constructor(e,n){this.version=e,this.transformResults=n}},Lt=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Rd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Yo=class{};function kA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ka(t.key,Lt.none()):new Ei(t.key,t.data,Lt.none());{let n=t.data,r=Rt.empty(),i=new qe(Nt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new _n(t.key,r,new Ot(i.toArray()),Lt.none())}}function vB(t,e,n){t instanceof Ei?function(i,o,s){let a=i.value.clone(),u=_0(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof _n?function(i,o,s){if(!Rd(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=_0(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(OA(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Ha(t,e,n,r){return t instanceof Ei?function(o,s,a,u){if(!Rd(o.precondition,s))return a;let l=o.value.clone(),h=I0(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof _n?function(o,s,a,u){if(!Rd(o.precondition,s))return a;let l=I0(o.fieldTransforms,u,s),h=s.data;return h.setAll(OA(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,a){return Rd(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function _B(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=NA(r.transform,i||null);o!=null&&(n===null&&(n=Rt.empty()),n.set(r.field,o))}return n||null}function v0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&$o(r,i,(o,s)=>yB(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Ei=class extends Yo{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},_n=class extends Yo{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function OA(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function _0(t,e,n){let r=new Map;ye(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,mB(s,a,n[i]))}return r}function I0(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,gB(o,s,e))}return r}var Ka=class extends Yo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},av=class extends Yo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var cv=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&vB(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ha(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Ha(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=SA();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=kA(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&$o(this.mutations,e.mutations,(n,r)=>v0(n,r))&&$o(this.baseMutations,e.baseMutations,(n,r)=>v0(n,r))}},uv=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ye(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return dB}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var lv=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var dv=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Oe,fe;function IB(t){switch(t){case M.OK:return q(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return q(15467,{code:t})}}function LA(t){if(t===void 0)return Hn("GRPC error has no .code"),M.UNKNOWN;switch(t){case Oe.OK:return M.OK;case Oe.CANCELLED:return M.CANCELLED;case Oe.UNKNOWN:return M.UNKNOWN;case Oe.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Oe.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Oe.INTERNAL:return M.INTERNAL;case Oe.UNAVAILABLE:return M.UNAVAILABLE;case Oe.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Oe.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Oe.NOT_FOUND:return M.NOT_FOUND;case Oe.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Oe.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Oe.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Oe.ABORTED:return M.ABORTED;case Oe.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Oe.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Oe.DATA_LOSS:return M.DATA_LOSS;default:return q(39323,{code:t})}}(fe=Oe||(Oe={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";var E0=null;var EB=new Bn([4294967295,4294967295],0);function w0(t){let e=W0().encode(t),n=new Dy;return n.update(e),new Uint8Array(n.digest())}function T0(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Bn([n,r],0),new Bn([i,o],0)]}var hv=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new fi(`Invalid padding: ${n}`);if(r<0)throw new fi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new fi(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Bn.fromNumber(this.pe)}we(e,n,r){let i=e.add(n.multiply(Bn.fromNumber(r)));return i.compare(EB)===1&&(i=new Bn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;let n=w0(e),[r,i]=T0(n);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);if(!this.be(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.pe===0)return;let n=w0(e),[r,i]=T0(n);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);this.Se(s)}}Se(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},fi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ud=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Qa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(Z.min(),i,new Me(oe),Wn(),le())}},Qa=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,le(),le(),le())}};var Uo=class{constructor(e,n,r,i){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=i}},jd=class{constructor(e,n){this.targetId=e,this.Ce=n}},Bd=class{constructor(e,n,r=rt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},$d=class{constructor(){this.Fe=0,this.Me=D0(),this.xe=rt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=le(),n=le(),r=le();return this.Me.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:q(38017,{changeType:o})}}),new Qa(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=D0()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ye(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}},fv=class{constructor(e){this.ze=e,this.je=new Map,this.He=Wn(),this.Je=bd(),this.Ye=bd(),this.Ze=new Me(oe)}Xe(e){for(let n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(let n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{let r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:q(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,i)=>{this.it(i)&&n(i)})}ot(e){let n=e.targetId,r=e.Ce.count,i=this._t(n);if(i){let o=i.target;if(nv(o))if(r===0){let s=new z(o.path);this.tt(n,s,Kt.newNoDocument(s,Z.min()))}else ye(r===1,20013,{expectedCount:r});else{let s=this.ut(n);if(s!==r){let a=this.ct(e),u=a?this.lt(a,e,s):1;if(u!==0){this.st(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,l)}E0?.ht(function(h,p,g,y,w){var R,N,O,$,V,de;let Pe={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},ge=p.unchangedNames;return ge&&(Pe.bloomFilter={applied:w===0,hashCount:(R=ge?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:($=(O=(N=ge?.bits)===null||N===void 0?void 0:N.bitmap)===null||O===void 0?void 0:O.length)!==null&&$!==void 0?$:0,padding:(de=(V=ge?.bits)===null||V===void 0?void 0:V.padding)!==null&&de!==void 0?de:0,mightContain:D=>{var v;return(v=y?.mightContain(D))!==null&&v!==void 0&&v}}),Pe}(s,e.Ce,this.ze.Pt(),a,u))}}}}ct(e){let n=e.Ce.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=qn(r).toUint8Array()}catch(u){if(u instanceof Od)return Bo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new hv(s,i,o)}catch(u){return Bo(u instanceof fi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.pe===0?null:a}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){let r=this.ze.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.ze.Pt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.tt(n,o,null),i++)}),i}It(e){let n=new Map;this.je.forEach((o,s)=>{let a=this._t(s);if(a){if(o.current&&nv(a.target)){let u=new z(a.target.path);this.Et(u).has(s)||this.dt(s,u)||this.tt(s,u,Kt.newNoDocument(u,e))}o.Le&&(n.set(s,o.qe()),o.Qe())}});let r=le();this.Ye.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this._t(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.He.forEach((o,s)=>s.setReadTime(e));let i=new Ud(e,n,this.Ze,this.He,r);return this.He=Wn(),this.Je=bd(),this.Ye=bd(),this.Ze=new Me(oe),i}et(e,n){if(!this.it(e))return;let r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;let i=this.rt(e);this.dt(e,n)?i.$e(n,1):i.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){let n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new $d,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new qe(oe),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new qe(oe),this.Je=this.Je.insert(e,n)),n}it(e){let n=this._t(e)!==null;return n||F("WatchChangeAggregator","Detected inactive target",e),n}_t(e){let n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new $d),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}};function bd(){return new Me(z.comparator)}function D0(){return new Me(z.comparator)}var wB={asc:"ASCENDING",desc:"DESCENDING"},TB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DB={and:"AND",or:"OR"},pv=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function gv(t,e){return t.useProto3Json||fh(e)?e:{value:e}}function Hd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function FA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function bB(t,e){return Hd(t,e.toTimestamp())}function yn(t){return ye(!!t,49232),Z.fromTimestamp(function(n){let r=zn(n);return new Qe(r.seconds,r.nanos)}(t))}function x_(t,e){return mv(t,e).canonicalString()}function mv(t,e){let n=function(i){return new Se(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function VA(t){let e=Se.fromString(t);return ye(HA(e),10190,{key:e.toString()}),e}function yv(t,e){return x_(t.databaseId,e.path)}function Ny(t,e){let n=VA(e);if(n.get(1)!==t.databaseId.projectId)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new z(jA(n))}function UA(t,e){return x_(t.databaseId,e)}function CB(t){let e=VA(t);return e.length===4?Se.emptyPath():jA(e)}function vv(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function jA(t){return ye(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function b0(t,e,n){return{name:yv(t,e),fields:n.value.mapValue.fields}}function SB(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:q(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(ye(h===void 0||typeof h=="string",58123),rt.fromBase64String(h||"")):(ye(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),rt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?M.UNKNOWN:LA(l.code);return new L(h,l.message||"")}(s);n=new Bd(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Ny(t,r.document.name),o=yn(r.document.updateTime),s=r.document.createTime?yn(r.document.createTime):Z.min(),a=new Rt({mapValue:{fields:r.document.fields}}),u=Kt.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new Uo(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Ny(t,r.document),o=r.readTime?yn(r.readTime):Z.min(),s=Kt.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Uo([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Ny(t,r.document),o=r.removedTargetIds||[];n=new Uo([],o,i,null)}else{if(!("filter"in e))return q(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new dv(i,o),a=r.targetId;n=new jd(a,s)}}return n}function AB(t,e){let n;if(e instanceof Ei)n={update:b0(t,e.key,e.value)};else if(e instanceof Ka)n={delete:yv(t,e.key)};else if(e instanceof _n)n={update:b0(t,e.key,e.data),updateMask:FB(e.fieldMask)};else{if(!(e instanceof av))return q(16599,{ft:e.type});n={verify:yv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Qo)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof vi)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof _i)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ii)return{fieldPath:s.field.canonicalString(),increment:a.Re};throw q(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:bB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:q(27497)}(t,e.precondition)),n}function RB(t,e){return t&&t.length>0?(ye(e!==void 0,14353),t.map(n=>function(i,o){let s=i.updateTime?yn(i.updateTime):yn(o);return s.isEqual(Z.min())&&(s=yn(o)),new sv(s,i.transformResults||[])}(n,e))):[]}function NB(t,e){return{documents:[UA(t,e.path)]}}function MB(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=UA(t,i);let o=function(l){if(l.length!==0)return $A(Qt.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(g){return{field:Lo(g.field),direction:kB(g.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=gv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{gt:n,parent:i}}function PB(t){let e=CB(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ye(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){let g=BA(p);return g instanceof Qt&&vA(g)?g.getFilters():[g]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(g=>function(w){return new Wo(Fo(w.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,fh(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){let g=!!p.before,y=p.values||[];return new Go(y,g)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let g=!p.before,y=p.values||[];return new Go(y,g)}(n.endAt)),sB(e,i,s,o,a,"F",u,l)}function xB(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return q(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function BA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Fo(n.unaryFilter.field);return Fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Fo(n.unaryFilter.field);return Fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Fo(n.unaryFilter.field);return Fe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Fo(n.unaryFilter.field);return Fe.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return q(61313);default:return q(60726)}}(t):t.fieldFilter!==void 0?function(n){return Fe.create(Fo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return q(58110);default:return q(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Qt.create(n.compositeFilter.filters.map(r=>BA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return q(1026)}}(n.compositeFilter.op))}(t):q(30097,{filter:t})}function kB(t){return wB[t]}function OB(t){return TB[t]}function LB(t){return DB[t]}function Lo(t){return{fieldPath:t.canonicalString()}}function Fo(t){return Nt.fromServerFormat(t.fieldPath)}function $A(t){return t instanceof Fe?function(n){if(n.op==="=="){if(h0(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NAN"}};if(d0(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(h0(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NOT_NAN"}};if(d0(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lo(n.field),op:OB(n.op),value:n.value}}}(t):t instanceof Qt?function(n){let r=n.getFilters().map(i=>$A(i));return r.length===1?r[0]:{compositeFilter:{op:LB(n.op),filters:r}}}(t):q(54877,{filter:t})}function FB(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function HA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Ya=class t{constructor(e,n,r,i,o=Z.min(),s=Z.min(),a=rt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var _v=class{constructor(e){this.wt=e}};function VB(t){let e=PB({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?iv(e,e.limit,"L"):e}var zd=class{constructor(){}vt(e,n){this.Ct(e,n),n.Ft()}Ct(e,n){if("nullValue"in e)this.Mt(n,5);else if("booleanValue"in e)this.Mt(n,10),n.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(n,15),n.xt(Ce(e.integerValue));else if("doubleValue"in e){let r=Ce(e.doubleValue);isNaN(r)?this.Mt(n,13):(this.Mt(n,15),qa(r)?n.xt(0):n.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(n,20),typeof r=="string"&&(r=zn(r)),n.Ot(`${r.seconds||""}`),n.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,n),this.Bt(n);else if("bytesValue"in e)this.Mt(n,30),n.Lt(qn(e.bytesValue)),this.Bt(n);else if("referenceValue"in e)this.kt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Mt(n,45),n.xt(r.latitude||0),n.xt(r.longitude||0)}else"mapValue"in e?gA(e)?this.Mt(n,Number.MAX_SAFE_INTEGER):pA(e)?this.qt(e.mapValue,n):(this.Qt(e.mapValue,n),this.Bt(n)):"arrayValue"in e?(this.$t(e.arrayValue,n),this.Bt(n)):q(19022,{Ut:e})}Nt(e,n){this.Mt(n,25),this.Kt(e,n)}Kt(e,n){n.Ot(e)}Qt(e,n){let r=e.fields||{};this.Mt(n,55);for(let i of Object.keys(r))this.Nt(i,n),this.Ct(r[i],n)}qt(e,n){var r,i;let o=e.fields||{};this.Mt(n,53);let s=Ho,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Mt(n,15),n.xt(Ce(a)),this.Nt(s,n),this.Ct(o[s],n)}$t(e,n){let r=e.values||[];this.Mt(n,50);for(let i of r)this.Ct(i,n)}kt(e,n){this.Mt(n,37),z.fromName(e).path.forEach(r=>{this.Mt(n,60),this.Kt(r,n)})}Mt(e,n){e.xt(n)}Bt(e){e.xt(2)}};zd.Wt=new zd;var Iv=class{constructor(){this.Cn=new Ev}addToCollectionParentIndex(e,n){return this.Cn.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(mi.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(mi.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}},Ev=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new qe(Se.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new qe(Se.comparator)).toArray()}};var DQ=new Uint8Array(0);var C0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zA=41943040,kt=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};kt.DEFAULT_COLLECTION_PERCENTILE=10,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kt.DEFAULT=new kt(zA,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kt.DISABLED=new kt(-1,0,0);var Ja=class t{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new t(0)}static lr(){return new t(-1)}};var S0="LruGarbageCollector",UB=1048576;function A0([t,e],[n,r]){let i=oe(t,n);return i===0?oe(e,r):i}var wv=class{constructor(e){this.Er=e,this.buffer=new qe(A0),this.dr=0}Ar(){return++this.dr}Rr(e){let n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();A0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},Tv=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){F(S0,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>E(this,null,function*(){this.Vr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){rs(n)?F(S0,"Ignoring IndexedDB error during garbage collection: ",n):yield ns(n)}yield this.mr(3e5)}))}},Dv=class{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return P.resolve(T_.le);let r=new wv(n);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(C0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),C0):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),ko()<=ue.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function jB(t,e){return new Dv(t,e)}var bv=class{constructor(){this.changes=new Gn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Kt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Cv=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Sv=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ha(r.mutation,i,Ot.empty(),Qe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=le()){let i=hi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Ua();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=hi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,le()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Wn(),s=$a(),a=function(){return $a()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof _n)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Ha(h.mutation,l,h.mutation.getFieldMask(),Qe.now())):s.set(l.key,Ot.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new Cv(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=$a(),i=new Me((s,a)=>s-a),o=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Ot.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||le()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=SA();h.forEach(g=>{if(!o.has(g)){let y=kA(n.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return z.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):wA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):P.resolve(hi()),a=za,u=o;return s.next(l=>P.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?P.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,le())).next(h=>({batchId:a,changes:CA(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new z(n)).next(r=>{let i=Ua();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Ua();return this.indexManager.getCollectionParents(e,o).next(a=>P.forEach(a,u=>{let l=function(p,g){return new yi(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,Kt.newInvalidDocument(h)))});let a=Ua();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Ha(h.mutation,l,Ot.empty(),Qe.now()),mh(n,l)&&(a=a.insert(u,l))}),a})}};var Av=class{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return P.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:yn(i.createTime)}}(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(i){return{name:i.name,query:VB(i.bundledQuery),readTime:yn(i.readTime)}}(n)),P.resolve()}};var Rv=class{constructor(){this.overlays=new Me(z.comparator),this.Qr=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){let r=hi();return P.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.St(e,n,o)}),P.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Qr.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){let i=hi(),o=n.length+1,s=new z(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Me((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=hi(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=hi(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return P.resolve(a)}St(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new lv(n,r));let o=this.Qr.get(n);o===void 0&&(o=le(),this.Qr.set(n,o)),this.Qr.set(n,o.add(r.key))}};var Nv=class{constructor(){this.sessionToken=rt.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,P.resolve()}};var Za=class{constructor(){this.$r=new qe(Le.Ur),this.Kr=new qe(Le.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){let r=new Le(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new Le(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){let n=new z(new Se([])),r=new Le(n,e),i=new Le(n,e+1),o=[];return this.Kr.forEachInRange([r,i],s=>{this.zr(s),o.push(s.key)}),o}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){let n=new z(new Se([])),r=new Le(n,e),i=new Le(n,e+1),o=le();return this.Kr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Le(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Le=class{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return z.comparator(e.key,n.key)||oe(e.Zr,n.Zr)}static Wr(e,n){return oe(e.Zr,n.Zr)||z.comparator(e.key,n.key)}};var Mv=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new qe(Le.Ur)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new cv(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Xr=this.Xr.add(new Le(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(s)}lookupMutationBatch(e,n){return P.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.ti(r),o=i<0?0:i;return P.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?D_:this.nr-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Le(n,0),i=new Le(n,Number.POSITIVE_INFINITY),o=[];return this.Xr.forEachInRange([r,i],s=>{let a=this.ei(s.Zr);o.push(a)}),P.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qe(oe);return n.forEach(i=>{let o=new Le(i,0),s=new Le(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([o,s],a=>{r=r.add(a.Zr)})}),P.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;z.isDocumentKey(o)||(o=o.child(""));let s=new Le(new z(o),0),a=new qe(oe);return this.Xr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Zr)),!0)},s),P.resolve(this.ni(a))}ni(e){let n=[];return e.forEach(r=>{let i=this.ei(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ye(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return P.forEach(n.mutations,i=>{let o=new Le(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){let r=new Le(n,0),i=this.Xr.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){let n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Pv=class{constructor(e){this.ii=e,this.docs=function(){return new Me(z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():Kt.newInvalidDocument(n))}getEntries(e,n){let r=Wn();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Kt.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Wn(),s=n.path,a=new z(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Bj(jj(h),r)<=0||(i.has(h.key)||mh(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return P.resolve(o)}getAllFromCollectionGroup(e,n,r,i){q(9500)}si(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new xv(this)}getSize(e){return P.resolve(this.size)}},xv=class extends bv{constructor(e){super(),this.Br=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}};var kv=class{constructor(e){this.persistence=e,this.oi=new Gn(n=>R_(n),N_),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this._i=0,this.ai=new Za,this.targetCount=0,this.ui=Ja.cr()}forEachTarget(e,n){return this.oi.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),P.resolve()}Tr(e){this.oi.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.ui=new Ja(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.Tr(n),P.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.oi.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.oi.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(o).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){let r=this.oi.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),P.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),P.resolve()}getMatchingKeysForTargetId(e,n){let r=this.ai.Yr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.ai.containsKey(n))}};var qd=class{constructor(e,n){this.ci={},this.overlays={},this.li=new T_(0),this.hi=!1,this.hi=!0,this.Pi=new Nv,this.referenceDelegate=e(this),this.Ti=new kv(this),this.indexManager=new Iv,this.remoteDocumentCache=function(i){return new Pv(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new _v(n),this.Ei=new Av(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Rv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new Mv(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){F("MemoryPersistence","Starting transaction:",e);let i=new Ov(this.li.next());return this.referenceDelegate.di(),r(i).next(o=>this.referenceDelegate.Ai(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ri(e,n){return P.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}},Ov=class extends Hy{constructor(e){super(),this.currentSequenceNumber=e}},Lv=class t{constructor(e){this.persistence=e,this.Vi=new Za,this.mi=null}static fi(e){return new t(e)}get gi(){if(this.mi)return this.mi;throw q(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),P.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(i=>this.gi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.gi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.gi,r=>{let i=z.fromPath(r);return this.pi(e,i).next(o=>{o||n.removeEntry(i,Z.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return P.or([()=>P.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}},Gd=class t{constructor(e,n){this.persistence=e,this.yi=new Gn(r=>qj(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=jB(this,n)}static fi(e,n){return new t(e,n)}di(){}Ai(e){return P.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){let n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}br(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return P.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(o=>o?P.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.si(e,s=>this.Dr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,Z.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),P.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),P.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Sd(e.data.value)),n}Dr(e,n,r){return P.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.yi.get(n);return P.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Fv=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ds=r,this.As=i}static Rs(e,n){let r=le(),i=le();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var Vv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Uv=class{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return jC()?8:Hj(He())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ws(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.bs(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Vv;return this.Ss(e,n,s).next(a=>{if(o.result=a,this.fs)return this.Ds(e,n,s,a.size)})}).next(()=>o.result)}Ds(e,n,r,i){return r.documentReadCount<this.gs?(ko()<=ue.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",Oo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),P.resolve()):(ko()<=ue.DEBUG&&F("QueryEngine","Query:",Oo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(ko()<=ue.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",Oo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mn(n))):P.resolve())}ws(e,n){if(m0(n))return P.resolve(null);let r=mn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=iv(n,null,"F"),r=mn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=le(...o);return this.ys.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.vs(n,a);return this.Cs(n,l,s,u.readTime)?this.ws(e,iv(n,null,"F")):this.Fs(e,l,n,u)}))})))}bs(e,n,r,i){return m0(n)||i.isEqual(Z.min())?P.resolve(null):this.ys.getDocuments(e,r).next(o=>{let s=this.vs(n,o);return this.Cs(n,s,r,i)?P.resolve(null):(ko()<=ue.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Oo(n)),this.Fs(e,s,n,Uj(i,za)).next(a=>a))})}vs(e,n){let r=new qe(DA(e));return n.forEach((i,o)=>{mh(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return ko()<=ue.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",Oo(n)),this.ys.getDocumentsMatchingQuery(e,n,mi.min(),r)}Fs(e,n,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var k_="LocalStore",BB=3e8,jv=class{constructor(e,n,r,i){this.persistence=e,this.Ms=n,this.serializer=i,this.xs=new Me(oe),this.Os=new Gn(o=>R_(o),N_),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Sv(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}};function $B(t,e,n,r){return new jv(t,e,n,r)}function qA(t,e){return E(this,null,function*(){let n=Y(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=le();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({ks:l,removedBatchIds:s,addedBatchIds:a}))})})})}function HB(t,e){let n=Y(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Bs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,g=p.keys(),y=P.resolve();return g.forEach(w=>{y=y.next(()=>h.getEntry(u,w)).next(R=>{let N=l.docVersions.get(w);ye(N!==null,48541),R.version.compareTo(N)<0&&(p.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),h.addEntry(R)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=le();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function GA(t){let e=Y(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function zB(t,e){let n=Y(t),r=e.snapshotVersion,i=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Bs.newChangeBuffer({trackRemovals:!0});i=n.xs;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(n.Ti.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.Ti.addMatchingKeys(o,h.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(rt.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(R,N,O){return R.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=BB?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(g,y,h)&&a.push(n.Ti.updateTargetData(o,y))});let u=Wn(),l=le();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(qB(o,s,e.documentUpdates).next(h=>{u=h.qs,l=h.Qs})),!r.isEqual(Z.min())){let h=n.Ti.getLastRemoteSnapshotVersion(o).next(p=>n.Ti.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return P.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.xs=i,o))}function qB(t,e,n){let r=le(),i=le();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Wn();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Z.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):F(k_,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{qs:s,Qs:i}})}function GB(t,e){let n=Y(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=D_),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function WB(t,e){let n=Y(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ti.getTargetData(r,e).next(o=>o?(i=o,P.resolve(i)):n.Ti.allocateTargetId(r).next(s=>(i=new Ya(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}function Bv(t,e,n){return E(this,null,function*(){let r=Y(t),i=r.xs.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!rs(s))throw s;F(k_,`Failed to update sequence numbers for target ${e}: ${s}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)})}function R0(t,e,n){let r=Y(t),i=Z.min(),o=le();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=Y(u),g=p.Os.get(h);return g!==void 0?P.resolve(p.xs.get(g)):p.Ti.getTargetData(l,h)}(r,s,mn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Ms.getDocumentsMatchingQuery(s,e,n?i:Z.min(),n?o:le())).next(a=>(KB(r,cB(e),a),{documents:a,$s:o})))}function KB(t,e,n){let r=t.Ns.get(e)||Z.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Ns.set(e,r)}var Wd=class{constructor(){this.activeTargetIds=pB()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var $v=class{constructor(){this.xo=new Wd,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Wd,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Hv=class{No(e){}shutdown(){}};var N0="ConnectivityMonitor",Kd=class{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){F(N0,"Network connectivity changed: AVAILABLE");for(let e of this.Qo)e(0)}qo(){F(N0,"Network connectivity changed: UNAVAILABLE");for(let e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Cd=null;function zv(){return Cd===null?Cd=function(){return 268435456+Math.round(2147483648*Math.random())}():Cd++,"0x"+Cd.toString(16)}var My="RestConnection",QB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},qv=class{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===Ld?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,n,r,i,o){let s=zv(),a=this.jo(e,n.toUriEncodedString());F(My,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(u,i,o);let{host:l}=new URL(a),h=pr(l);return this.Jo(e,a,u,r,h).then(p=>(F(My,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Bo(My,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Yo(e,n,r,i,o,s){return this.zo(e,n,r,i,o)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ts}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}jo(e,n){let r=QB[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}};var Gv=class{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}};var nt="WebChannelConnection",Wv=class extends qv{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){let s=zv();return new Promise((a,u)=>{let l=new by;l.setWithCredentials(!0),l.listenOnce(Cy.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Va.NO_ERROR:let p=l.getResponseJson();F(nt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Va.TIMEOUT:F(nt,`RPC '${e}' ${s} timed out`),u(new L(M.DEADLINE_EXCEEDED,"Request time out"));break;case Va.HTTP_ERROR:let g=l.getStatus();if(F(nt,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let w=y?.error;if(w&&w.status&&w.message){let R=function(O){let $=O.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf($)>=0?$:M.UNKNOWN}(w.status);u(new L(R,w.message))}else u(new L(M.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new L(M.UNAVAILABLE,"Connection failed."));break;default:q(9055,{h_:e,streamId:s,P_:l.getLastErrorCode(),T_:l.getLastError()})}}finally{F(nt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);F(nt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}I_(e,n,r){let i=zv(),o=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Ry(),a=Ay(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Ho(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");F(nt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.E_(p);let g=!1,y=!1,w=new Gv({Zo:N=>{y?F(nt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(g||(F(nt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),F(nt,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},Xo:()=>p.close()}),R=(N,O,$)=>{N.listen(O,V=>{try{$(V)}catch(de){setTimeout(()=>{throw de},0)}})};return R(p,xo.EventType.OPEN,()=>{y||(F(nt,`RPC '${e}' stream ${i} transport opened.`),w.__())}),R(p,xo.EventType.CLOSE,()=>{y||(y=!0,F(nt,`RPC '${e}' stream ${i} transport closed`),w.u_(),this.d_(p))}),R(p,xo.EventType.ERROR,N=>{y||(y=!0,Bo(nt,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),w.u_(new L(M.UNAVAILABLE,"The operation could not be completed")))}),R(p,xo.EventType.MESSAGE,N=>{var O;if(!y){let $=N.data[0];ye(!!$,16349);let V=$,de=V?.error||((O=V[0])===null||O===void 0?void 0:O.error);if(de){F(nt,`RPC '${e}' stream ${i} received error:`,de);let Pe=de.status,ge=function(I){let T=Oe[I];if(T!==void 0)return LA(T)}(Pe),D=de.message;ge===void 0&&(ge=M.INTERNAL,D="Unknown error status: "+Pe+" with message "+de.message),y=!0,w.u_(new L(ge,D)),p.close()}else F(nt,`RPC '${e}' stream ${i} received:`,$),w.c_($)}}),R(a,Sy.STAT_EVENT,N=>{N.stat===Td.PROXY?F(nt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Td.NOPROXY&&F(nt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.a_()},0),w}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}};function Py(){return typeof document<"u"?document:null}function yh(t){return new pv(t,!0)}var Qd=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.xi=e,this.timerId=n,this.A_=r,this.R_=i,this.V_=o,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();let n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),i=Math.max(0,n-r);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}};var M0="PersistentStream",Yd=class{constructor(e,n,r,i,o,s,a,u){this.xi=e,this.S_=r,this.D_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new Qd(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}stop(){return E(this,null,function*(){this.O_()&&(yield this.close(0))})}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}q_(){return E(this,null,function*(){if(this.N_())return this.close(0)})}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}close(e,n){return E(this,null,function*(){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(Hn(n.toString()),Hn("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.i_(n)})}W_(){}auth(){this.state=1;let e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.v_===n&&this.z_(r,i)},r=>{e(()=>{let i=new L(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(i)})})}z_(e,n){let r=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.j_(i))}),this.stream.onMessage(i=>{r(()=>++this.M_==1?this.J_(i):this.onNext(i))})}B_(){this.state=5,this.x_.y_(()=>E(this,null,function*(){this.state=0,this.start()}))}j_(e){return F(M0,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(F(M0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Kv=class extends Yd{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();let n=SB(this.serializer,e),r=function(o){if(!("targetChange"in o))return Z.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Z.min():s.readTime?yn(s.readTime):Z.min()}(e);return this.listener.Y_(n,r)}Z_(e){let n={};n.database=vv(this.serializer),n.addTarget=function(o,s){let a,u=s.target;if(a=nv(u)?{documents:NB(o,u)}:{query:MB(o,u).gt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=FA(o,s.resumeToken);let l=gv(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(Z.min())>0){a.readTime=Hd(o,s.snapshotVersion.toTimestamp());let l=gv(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=xB(this.serializer,e);r&&(n.labels=r),this.Q_(n)}X_(e){let n={};n.database=vv(this.serializer),n.removeTarget=e,this.Q_(n)}},Qv=class extends Yd{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();let n=RB(e.writeResults,e.commitTime),r=yn(e.commitTime);return this.listener.ra(r,n)}ia(){let e={};e.database=vv(this.serializer),this.Q_(e)}ta(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>AB(this.serializer,r))};this.Q_(n)}};var Yv=class{},Jv=class extends Yv{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.sa=!1}oa(){if(this.sa)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.zo(e,mv(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(M.UNKNOWN,o.toString())})}Yo(e,n,r,i,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Yo(e,mv(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(M.UNKNOWN,s.toString())})}terminate(){this.sa=!0,this.connection.terminate()}},Zv=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Hn(n),this.ua=!1):F("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}};var wi="RemoteStore",Xv=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=o,this.Ra.No(s=>{r.enqueueAndForget(()=>E(this,null,function*(){Di(this)&&(F(wi,"Restarting streams for network reachability change."),yield function(u){return E(this,null,function*(){let l=Y(u);l.da.add(4),yield rc(l),l.Va.set("Unknown"),l.da.delete(4),yield vh(l)})}(this))}))}),this.Va=new Zv(r,i)}};function vh(t){return E(this,null,function*(){if(Di(t))for(let e of t.Aa)yield e(!0)})}function rc(t){return E(this,null,function*(){for(let e of t.Aa)yield e(!1)})}function WA(t,e){let n=Y(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),V_(n)?F_(n):is(n).N_()&&L_(n,e))}function O_(t,e){let n=Y(t),r=is(n);n.Ea.delete(e),r.N_()&&KA(n,e),n.Ea.size===0&&(r.N_()?r.k_():Di(n)&&n.Va.set("Unknown"))}function L_(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}is(t).Z_(e)}function KA(t,e){t.ma.Ke(e),is(t).X_(e)}function F_(t){t.ma=new fv({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),is(t).start(),t.Va.ca()}function V_(t){return Di(t)&&!is(t).O_()&&t.Ea.size>0}function Di(t){return Y(t).da.size===0}function QA(t){t.ma=void 0}function YB(t){return E(this,null,function*(){t.Va.set("Online")})}function JB(t){return E(this,null,function*(){t.Ea.forEach((e,n)=>{L_(t,e)})})}function ZB(t,e){return E(this,null,function*(){QA(t),V_(t)?(t.Va.Pa(e),F_(t)):t.Va.set("Unknown")})}function XB(t,e,n){return E(this,null,function*(){if(t.Va.set("Online"),e instanceof Bd&&e.state===2&&e.cause)try{yield function(i,o){return E(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ea.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ea.delete(a),i.ma.removeTarget(a))})}(t,e)}catch(r){F(wi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Jd(t,r)}else if(e instanceof Uo?t.ma.Xe(e):e instanceof jd?t.ma.ot(e):t.ma.nt(e),!n.isEqual(Z.min()))try{let r=yield GA(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.ma.It(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ea.get(l);h&&o.Ea.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ea.get(u);if(!h)return;o.Ea.set(u,h.withResumeToken(rt.EMPTY_BYTE_STRING,h.snapshotVersion)),KA(o,u);let p=new Ya(h.target,u,l,h.sequenceNumber);L_(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){F(wi,"Failed to raise snapshot:",r),yield Jd(t,r)}})}function Jd(t,e,n){return E(this,null,function*(){if(!rs(e))throw e;t.da.add(1),yield rc(t),t.Va.set("Offline"),n||(n=()=>GA(t.localStore)),t.asyncQueue.enqueueRetryable(()=>E(null,null,function*(){F(wi,"Retrying IndexedDB access"),yield n(),t.da.delete(1),yield vh(t)}))})}function YA(t,e){return e().catch(n=>Jd(t,n,e))}function _h(t){return E(this,null,function*(){let e=Y(t),n=Cr(e),r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:D_;for(;e$(e);)try{let i=yield GB(e.localStore,r);if(i===null){e.Ia.length===0&&n.k_();break}r=i.batchId,t$(e,i)}catch(i){yield Jd(e,i)}JA(e)&&ZA(e)})}function e$(t){return Di(t)&&t.Ia.length<10}function t$(t,e){t.Ia.push(e);let n=Cr(t);n.N_()&&n.ea&&n.ta(e.mutations)}function JA(t){return Di(t)&&!Cr(t).O_()&&t.Ia.length>0}function ZA(t){Cr(t).start()}function n$(t){return E(this,null,function*(){Cr(t).ia()})}function r$(t){return E(this,null,function*(){let e=Cr(t);for(let n of t.Ia)e.ta(n.mutations)})}function i$(t,e,n){return E(this,null,function*(){let r=t.Ia.shift(),i=uv.from(r,e,n);yield YA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield _h(t)})}function o$(t,e){return E(this,null,function*(){e&&Cr(t).ea&&(yield function(r,i){return E(this,null,function*(){if(function(s){return IB(s)&&s!==M.ABORTED}(i.code)){let o=r.Ia.shift();Cr(r).L_(),yield YA(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield _h(r)}})}(t,e)),JA(t)&&ZA(t)})}function P0(t,e){return E(this,null,function*(){let n=Y(t);n.asyncQueue.verifyOperationInProgress(),F(wi,"RemoteStore received new credentials");let r=Di(n);n.da.add(3),yield rc(n),r&&n.Va.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),yield vh(n)})}function s$(t,e){return E(this,null,function*(){let n=Y(t);e?(n.da.delete(2),yield vh(n)):e||(n.da.add(2),yield rc(n),n.Va.set("Unknown"))})}function is(t){return t.fa||(t.fa=function(n,r,i){let o=Y(n);return o.oa(),new Kv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{e_:YB.bind(null,t),n_:JB.bind(null,t),i_:ZB.bind(null,t),Y_:XB.bind(null,t)}),t.Aa.push(e=>E(null,null,function*(){e?(t.fa.L_(),V_(t)?F_(t):t.Va.set("Unknown")):(yield t.fa.stop(),QA(t))}))),t.fa}function Cr(t){return t.ga||(t.ga=function(n,r,i){let o=Y(n);return o.oa(),new Qv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:n$.bind(null,t),i_:o$.bind(null,t),na:r$.bind(null,t),ra:i$.bind(null,t)}),t.Aa.push(e=>E(null,null,function*(){e?(t.ga.L_(),yield _h(t)):(yield t.ga.stop(),t.Ia.length>0&&(F(wi,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))}))),t.ga}var e_=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Wt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function U_(t,e){if(Hn("AsyncQueue",`${e}: ${t}`),rs(t))return new L(M.UNAVAILABLE,`${e}: ${t}`);throw t}var Zd=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||z.comparator(n.key,r.key):(n,r)=>z.comparator(n.key,r.key),this.keyedMap=Ua(),this.sortedSet=new Me(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Xd=class{constructor(){this.pa=new Me(z.comparator)}track(e){let n=e.doc.key,r=this.pa.get(n);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(n,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(n):e.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):q(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(n,e)}wa(){let e=[];return this.pa.inorderTraversal((n,r)=>{e.push(r)}),e}},Jo=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Zd.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var t_=class{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}},n_=class{constructor(){this.queries=x0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){let i=Y(n),o=i.queries;i.queries=x0(),o.forEach((s,a)=>{for(let u of a.Sa)u.onError(r)})})(this,new L(M.ABORTED,"Firestore shutting down"))}};function x0(){return new Gn(t=>TA(t),gh)}function XA(t,e){return E(this,null,function*(){let n=Y(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Da()&&e.va()&&(r=2):(o=new t_,r=e.va()?0:1);try{switch(r){case 0:o.ba=yield n.onListen(i,!0);break;case 1:o.ba=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=U_(s,`Initialization of query '${Oo(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.Sa.push(e),e.Fa(n.onlineState),o.ba&&e.Ma(o.ba)&&j_(n)})}function eR(t,e){return E(this,null,function*(){let n=Y(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.va()?0:1:!o.Da()&&e.va()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function a$(t,e){let n=Y(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.Sa)a.Ma(i)&&(r=!0);s.ba=i}}r&&j_(n)}function c$(t,e,n){let r=Y(t),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(n);r.queries.delete(e)}function j_(t){t.Ca.forEach(e=>{e.next()})}var r_,k0;(k0=r_||(r_={})).xa="default",k0.Cache="cache";var eh=class{constructor(e,n,r){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Jo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;let r=n!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;let n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=Jo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==r_.Cache}};var th=class{constructor(e){this.key=e}},nh=class{constructor(e){this.key=e}},i_=class{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=le(),this.mutatedKeys=le(),this.Za=DA(e),this.Xa=new Zd(this.Za)}get eu(){return this.Ha}tu(e,n){let r=n?n.nu:new Xd,i=n?n.Xa:this.Xa,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=mh(this.query,p)?p:null,w=!!g&&this.mutatedKeys.has(g.key),R=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),N=!1;g&&y?g.data.isEqual(y.data)?w!==R&&(r.track({type:3,doc:y}),N=!0):this.ru(g,y)||(r.track({type:2,doc:y}),N=!0,(u&&this.Za(y,u)>0||l&&this.Za(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),N=!0):g&&!y&&(r.track({type:1,doc:g}),N=!0,(u||l)&&(a=!0)),N&&(y?(s=s.add(y),o=R?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Xa:s,nu:r,Cs:a,mutatedKeys:o}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;let s=e.nu.wa();s.sort((h,p)=>function(y,w){let R=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q(20277,{Vt:N})}};return R(y)-R(w)}(h.type,p.type)||this.Za(h.doc,p.doc)),this.iu(r),i=i!=null&&i;let a=n&&!i?this.su():[],u=this.Ya.size===0&&this.current&&!i?1:0,l=u!==this.Ja;return this.Ja=u,s.length!==0||l?{snapshot:new Jo(this.query,e.Xa,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:a}:{ou:a}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Xd,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];let e=this.Ya;this.Ya=le(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});let n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new nh(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new th(r))}),n}au(e){this.Ha=e.$s,this.Ya=le();let n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return Jo.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}},B_="SyncEngine",o_=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},s_=class{constructor(e){this.key=e,this.cu=!1}},a_=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.lu={},this.hu=new Gn(a=>TA(a),gh),this.Pu=new Map,this.Tu=new Set,this.Iu=new Me(z.comparator),this.Eu=new Map,this.du=new Za,this.Au={},this.Ru=new Map,this.Vu=Ja.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}};function u$(t,e,n=!0){return E(this,null,function*(){let r=sR(t),i,o=r.hu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.uu()):i=yield tR(r,e,n,!0),i})}function l$(t,e){return E(this,null,function*(){let n=sR(t);yield tR(n,e,!0,!1)})}function tR(t,e,n,r){return E(this,null,function*(){let i=yield WB(t.localStore,mn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=yield d$(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&WA(t.remoteStore,i),a})}function d$(t,e,n,r,i){return E(this,null,function*(){t.fu=(p,g,y)=>function(R,N,O,$){return E(this,null,function*(){let V=N.view.tu(O);V.Cs&&(V=yield R0(R.localStore,N.query,!1).then(({documents:D})=>N.view.tu(D,V)));let de=$&&$.targetChanges.get(N.targetId),Pe=$&&$.targetMismatches.get(N.targetId)!=null,ge=N.view.applyChanges(V,R.isPrimaryClient,de,Pe);return L0(R,N.targetId,ge.ou),ge.snapshot})}(t,p,g,y);let o=yield R0(t.localStore,e,!0),s=new i_(e,o.$s),a=s.tu(o.documents),u=Qa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);L0(t,n,l.ou);let h=new o_(e,n,s);return t.hu.set(e,h),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),l.snapshot})}function h$(t,e,n){return E(this,null,function*(){let r=Y(t),i=r.hu.get(e),o=r.Pu.get(i.targetId);if(o.length>1)return r.Pu.set(i.targetId,o.filter(s=>!gh(s,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Bv(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&O_(r.remoteStore,i.targetId),c_(r,i.targetId)}).catch(ns))):(c_(r,i.targetId),yield Bv(r.localStore,i.targetId,!0))})}function f$(t,e){return E(this,null,function*(){let n=Y(t),r=n.hu.get(e),i=n.Pu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),O_(n.remoteStore,r.targetId))})}function p$(t,e,n){return E(this,null,function*(){let r=E$(t);try{let i=yield function(s,a){let u=Y(s),l=Qe.now(),h=a.reduce((y,w)=>y.add(w.key),le()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let w=Wn(),R=le();return u.Bs.getEntries(y,h).next(N=>{w=N,w.forEach((O,$)=>{$.isValidDocument()||(R=R.add(O))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,w)).next(N=>{p=N;let O=[];for(let $ of a){let V=_B($,p.get($.key).overlayedDocument);V!=null&&O.push(new _n($.key,V,mA(V.value.mapValue),Lt.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,O,a)}).next(N=>{g=N;let O=N.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(y,N.batchId,O)})}).then(()=>({batchId:g.batchId,changes:CA(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Au[s.currentUser.toKey()];l||(l=new Me(oe)),l=l.insert(a,u),s.Au[s.currentUser.toKey()]=l}(r,i.batchId,n),yield ic(r,i.changes),yield _h(r.remoteStore)}catch(i){let o=U_(i,"Failed to persist write");n.reject(o)}})}function nR(t,e){return E(this,null,function*(){let n=Y(t);try{let r=yield zB(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Eu.get(o);s&&(ye(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.cu=!0:i.modifiedDocuments.size>0?ye(s.cu,14607):i.removedDocuments.size>0&&(ye(s.cu,42227),s.cu=!1))}),yield ic(n,r,e)}catch(r){yield ns(r)}})}function O0(t,e,n){let r=Y(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.hu.forEach((o,s)=>{let a=s.view.Fa(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=Y(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let g of p.Sa)g.Fa(a)&&(l=!0)}),l&&j_(u)}(r.eventManager,e),i.length&&r.lu.Y_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function g$(t,e,n){return E(this,null,function*(){let r=Y(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Me(z.comparator);s=s.insert(o,Kt.newNoDocument(o,Z.min()));let a=le().add(o),u=new Ud(Z.min(),new Map,new Me(oe),s,a);yield nR(r,u),r.Iu=r.Iu.remove(o),r.Eu.delete(e),$_(r)}else yield Bv(r.localStore,e,!1).then(()=>c_(r,e,n)).catch(ns)})}function m$(t,e){return E(this,null,function*(){let n=Y(t),r=e.batch.batchId;try{let i=yield HB(n.localStore,e);iR(n,r,null),rR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield ic(n,i)}catch(i){yield ns(i)}})}function y$(t,e,n){return E(this,null,function*(){let r=Y(t);try{let i=yield function(s,a){let u=Y(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(ye(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);iR(r,e,n),rR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield ic(r,i)}catch(i){yield ns(i)}})}function rR(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function iR(t,e,n){let r=Y(t),i=r.Au[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Au[r.currentUser.toKey()]=i}}function c_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Pu.get(e))t.hu.delete(r),n&&t.lu.gu(r,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(r=>{t.du.containsKey(r)||oR(t,r)})}function oR(t,e){t.Tu.delete(e.path.canonicalString());let n=t.Iu.get(e);n!==null&&(O_(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),$_(t))}function L0(t,e,n){for(let r of n)r instanceof th?(t.du.addReference(r.key,e),v$(t,r)):r instanceof nh?(F(B_,"Document no longer in limbo: "+r.key),t.du.removeReference(r.key,e),t.du.containsKey(r.key)||oR(t,r.key)):q(19791,{pu:r})}function v$(t,e){let n=e.key,r=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(r)||(F(B_,"New document in limbo: "+n),t.Tu.add(r),$_(t))}function $_(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){let e=t.Tu.values().next().value;t.Tu.delete(e);let n=new z(Se.fromString(e)),r=t.Vu.next();t.Eu.set(r,new s_(n)),t.Iu=t.Iu.insert(n,r),WA(t.remoteStore,new Ya(mn(M_(n.path)),r,"TargetPurposeLimboResolution",T_.le))}}function ic(t,e,n){return E(this,null,function*(){let r=Y(t),i=[],o=[],s=[];r.hu.isEmpty()||(r.hu.forEach((a,u)=>{s.push(r.fu(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Fv.Rs(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.lu.Y_(i),yield function(u,l){return E(this,null,function*(){let h=Y(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,g=>P.forEach(g.ds,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>P.forEach(g.As,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!rs(p))throw p;F(k_,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=h.xs.get(g),w=y.snapshotVersion,R=y.withLastLimboFreeSnapshotVersion(w);h.xs=h.xs.insert(g,R)}}})}(r.localStore,o))})}function _$(t,e){return E(this,null,function*(){let n=Y(t);if(!n.currentUser.isEqual(e)){F(B_,"User change. New user:",e.toKey());let r=yield qA(n.localStore,e);n.currentUser=e,function(o,s){o.Ru.forEach(a=>{a.forEach(u=>{u.reject(new L(M.CANCELLED,s))})}),o.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ic(n,r.ks)}})}function I$(t,e){let n=Y(t),r=n.Eu.get(e);if(r&&r.cu)return le().add(r.key);{let i=le(),o=n.Pu.get(e);if(!o)return i;for(let s of o){let a=n.hu.get(s);i=i.unionWith(a.view.eu)}return i}}function sR(t){let e=Y(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=nR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=I$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=g$.bind(null,e),e.lu.Y_=a$.bind(null,e.eventManager),e.lu.gu=c$.bind(null,e.eventManager),e}function E$(t){let e=Y(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=m$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=y$.bind(null,e),e}var aR=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return E(this,null,function*(){this.serializer=yh(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Su(n),yield this.persistence.start(),this.localStore=this.Du(n),this.gcScheduler=this.vu(n,this.localStore),this.indexBackfillerScheduler=this.Cu(n,this.localStore)})}vu(n,r){return null}Cu(n,r){return null}Du(n){return $B(this.persistence,new Uv,n.initialUser,this.serializer)}Su(n){return new qd(Lv.fi,this.serializer)}bu(n){return new $v}terminate(){return E(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})(),u_=class extends aR{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){ye(this.persistence.referenceDelegate instanceof Gd,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Tv(r,e.asyncQueue,n)}Su(e){let n=this.cacheSizeBytes!==void 0?kt.withCacheSize(this.cacheSizeBytes):kt.DEFAULT;return new qd(r=>Gd.fi(r,n),this.serializer)}};var w$=(()=>{class t{initialize(n,r){return E(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>O0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=_$.bind(null,this.syncEngine),yield s$(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new n_}()}createDatastore(n){let r=yh(n.databaseInfo.databaseId),i=function(s){return new Wv(s)}(n.databaseInfo);return function(s,a,u,l){return new Jv(s,a,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,o,s,a,u){return new Xv(i,o,s,a,u)}(this.localStore,this.datastore,n.asyncQueue,r=>O0(this.syncEngine,r,0),function(){return Kd.C()?new Kd:new Hv}())}createSyncEngine(n,r){return function(o,s,a,u,l,h,p){let g=new a_(o,s,a,u,l,h);return p&&(g.mu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return E(this,null,function*(){var n,r;yield function(o){return E(this,null,function*(){let s=Y(o);F(wi,"RemoteStore shutting down."),s.da.add(5),yield rc(s),s.Ra.shutdown(),s.Va.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var rh=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Hn("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Sr="FirestoreClient",l_=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ze.UNAUTHENTICATED,this.clientId=Pd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>E(this,null,function*(){F(Sr,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(F(Sr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Wt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>E(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=U_(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function xy(t,e){return E(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),F(Sr,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>E(null,null,function*(){r.isEqual(i)||(yield qA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function F0(t,e){return E(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield T$(t);F(Sr,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>P0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>P0(e.remoteStore,i)),t._onlineComponents=e})}function T$(t){return E(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){F(Sr,"Using user provided OfflineComponentProvider");try{yield xy(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Bo("Error using user provided cache. Falling back to memory cache: "+n),yield xy(t,new aR)}}else F(Sr,"Using default OfflineComponentProvider"),yield xy(t,new u_(void 0));return t._offlineComponents})}function cR(t){return E(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(F(Sr,"Using user provided OnlineComponentProvider"),yield F0(t,t._uninitializedComponentsProvider._online)):(F(Sr,"Using default OnlineComponentProvider"),yield F0(t,new w$))),t._onlineComponents})}function D$(t){return cR(t).then(e=>e.syncEngine)}function uR(t){return E(this,null,function*(){let e=yield cR(t),n=e.eventManager;return n.onListen=u$.bind(null,e.syncEngine),n.onUnlisten=h$.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=l$.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=f$.bind(null,e.syncEngine),n})}function b$(t,e,n={}){let r=new Wt;return t.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return function(o,s,a,u,l){let h=new rh({next:g=>{h.xu(),s.enqueueAndForget(()=>eR(o,p));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new L(M.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?l.reject(new L(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new eh(M_(a.path),h,{includeMetadataChanges:!0,Qa:!0});return XA(o,p)}(yield uR(t),t.asyncQueue,e,n,r)})),r.promise}function C$(t,e,n={}){let r=new Wt;return t.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return function(o,s,a,u,l){let h=new rh({next:g=>{h.xu(),s.enqueueAndForget(()=>eR(o,p)),g.fromCache&&u.source==="server"?l.reject(new L(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new eh(a,h,{includeMetadataChanges:!0,Qa:!0});return XA(o,p)}(yield uR(t),t.asyncQueue,e,n,r)})),r.promise}function lR(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var V0=new Map;function dR(t,e,n){if(!n)throw new L(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function S$(t,e,n,r){if(e===!0&&r===!0)throw new L(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function U0(t){if(!z.isDocumentKey(t))throw new L(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function j0(t){if(z.isDocumentKey(t))throw new L(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ih(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":q(12329,{type:typeof t})}function Yt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new L(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Ih(t);throw new L(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var hR="firestore.googleapis.com",B0=!0,ih=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new L(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hR,this.ssl=B0}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:B0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<UB)throw new L(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}S$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Zo=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ih({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new L(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ih(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Oy;switch(r.type){case"firstParty":return new Uy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return E(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=V0.get(n);r&&(F("ComponentProvider","Removing Datastore"),V0.delete(n),r.terminate())}(this),Promise.resolve()}};function A$(t,e,n,r={}){var i;t=Yt(t,Zo);let o=pr(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o&&(Yl(`https://${u}`),Jl("Firestore",!0)),s.host!==hR&&s.host!==u&&Bo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!hn(l,a)&&(t._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=ze.MOCK_USER;else{h=kC(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new L(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new ze(g)}t._authCredentials=new Ly(new Nd(h,p))}}var Xo=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},dt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Dr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Dr=class t extends Xo{constructor(e,n,r){super(e,n,M_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new dt(this.firestore,null,new z(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function oc(t,e,...n){if(t=ke(t),dR("collection","path",e),t instanceof Zo){let r=Se.fromString(e,...n);return j0(r),new Dr(t,null,r)}{if(!(t instanceof dt||t instanceof Dr))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Se.fromString(e,...n));return j0(r),new Dr(t.firestore,null,r)}}function Rr(t,e,...n){if(t=ke(t),arguments.length===1&&(e=Pd.newId()),dR("doc","path",e),t instanceof Zo){let r=Se.fromString(e,...n);return U0(r),new dt(t,null,new z(r))}{if(!(t instanceof dt||t instanceof Dr))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Se.fromString(e,...n));return U0(r),new dt(t.firestore,t instanceof Dr?t.converter:null,new z(r))}}var $0="AsyncQueue",oh=class{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new Qd(this,"async_queue_retry"),this.rc=()=>{let r=Py();r&&F($0,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;let n=Py();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;let n=Py();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});let n=new Wt;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}ac(){return E(this,null,function*(){if(this.Ju.length!==0){try{yield this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!rs(e))throw e;F($0,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}})}_c(e){let n=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,Hn("INTERNAL UNHANDLED ERROR: ",H0(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(e,n,r){this.oc(),this.nc.indexOf(e)>-1&&(n=0);let i=e_.createAndSchedule(this,e,n,r,o=>this.uc(o));return this.Zu.push(i),i}oc(){this.Xu&&q(47125,{cc:H0(this.Xu)})}verifyOperationInProgress(){}lc(){return E(this,null,function*(){let e;do e=this.sc,yield e;while(e!==this.sc)})}hc(e){for(let n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){let n=this.Zu.indexOf(e);this.Zu.splice(n,1)}};function H0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}var Kn=class extends Zo{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new oh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return E(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new oh(e),this._firestoreClient=void 0,yield e}})}};function fR(t,e){let n=typeof t=="object"?t:td(),r=typeof t=="string"?t:e||Ld,i=Pa(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=xC("firestore");o&&A$(i,...o)}return i}function Eh(t){if(t._terminated)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||R$(t),t._firestoreClient}function R$(t){var e,n,r;let i=t._freezeSettings(),o=function(a,u,l,h){return new zy(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,lR(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new l_(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(t._componentsProvider))}var Xa=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(rt.fromBase64String(e))}catch(n){throw new L(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ti=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new L(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var es=class{constructor(e){this._methodName=e}};var ec=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new L(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new L(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}};var tc=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var N$=/^__.*__$/,d_=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new _n(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ei(e,this.data,n,this.fieldTransforms)}},sh=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new _n(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function pR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q(40011,{Ic:t})}}var h_=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ec(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.dc({path:r,Rc:!1});return i.Vc(e),i}mc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.dc({path:r,Rc:!1});return i.Ec(),i}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return ch(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(pR(this.Ic)&&N$.test(e))throw this.gc('Document fields cannot begin and end with "__"')}},f_=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||yh(e)}bc(e,n,r,i=!1){return new h_({Ic:e,methodName:n,wc:r,path:Nt.emptyPath(),Rc:!1,yc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function sc(t){let e=t._freezeSettings(),n=yh(t._databaseId);return new f_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function H_(t,e,n,r,i,o={}){let s=t.bc(o.merge||o.mergeFields?2:0,e,n,i);z_("Data must be an object, but it was:",s,r);let a=yR(r,s),u,l;if(o.merge)u=new Ot(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=g_(e,p,n);if(!s.contains(g))throw new L(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);_R(h,g)||h.push(g)}u=new Ot(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new d_(new Rt(a),u,l)}var ah=class t extends es{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};var p_=class t extends es{constructor(e,n){super(e),this.Dc=n}_toFieldTransform(e){let n=new Ii(e.serializer,RA(e.serializer,this.Dc));return new ov(e.path,n)}isEqual(e){return e instanceof t&&this.Dc===e.Dc}};function gR(t,e,n,r){let i=t.bc(1,e,n);z_("Data must be an object, but it was:",i,r);let o=[],s=Rt.empty();Ar(r,(u,l)=>{let h=q_(e,u,n);l=ke(l);let p=i.mc(h);if(l instanceof ah)o.push(h);else{let g=ac(l,p);g!=null&&(o.push(h),s.set(h,g))}});let a=new Ot(o);return new sh(s,a,i.fieldTransforms)}function mR(t,e,n,r,i,o){let s=t.bc(1,e,n),a=[g_(e,r,n)],u=[i];if(o.length%2!=0)throw new L(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(g_(e,o[g])),u.push(o[g+1]);let l=[],h=Rt.empty();for(let g=a.length-1;g>=0;--g)if(!_R(l,a[g])){let y=a[g],w=u[g];w=ke(w);let R=s.mc(y);if(w instanceof ah)l.push(y);else{let N=ac(w,R);N!=null&&(l.push(y),h.set(y,N))}}let p=new Ot(l);return new sh(h,p,s.fieldTransforms)}function M$(t,e,n,r=!1){return ac(n,t.bc(r?4:3,e))}function ac(t,e){if(vR(t=ke(t)))return z_("Unsupported field value:",e,t),yR(t,e);if(t instanceof es)return function(r,i){if(!pR(i.Ic))throw i.gc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=ac(a,i.fc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return RA(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Qe.fromDate(r);return{timestampValue:Hd(i.serializer,o)}}if(r instanceof Qe){let o=new Qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Hd(i.serializer,o)}}if(r instanceof ec)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Xa)return{bytesValue:FA(i.serializer,r._byteString)};if(r instanceof dt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.gc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:x_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof tc)return function(s,a){return{mapValue:{fields:{[C_]:{stringValue:S_},[Ho]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.gc("VectorValues must only contain numeric values.");return P_(a.serializer,l)})}}}}}}(r,i);throw i.gc(`Unsupported field value: ${Ih(r)}`)}(t,e)}function yR(t,e){let n={};return cA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ar(t,(r,i)=>{let o=ac(i,e.Ac(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function vR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qe||t instanceof ec||t instanceof Xa||t instanceof dt||t instanceof es||t instanceof tc)}function z_(t,e,n){if(!vR(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Ih(n);throw r==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+r)}}function g_(t,e,n){if((e=ke(e))instanceof Ti)return e._internalPath;if(typeof e=="string")return q_(t,e);throw ch("Field path arguments must be of type string or ",t,!1,void 0,n)}var P$=new RegExp("[~\\*/\\[\\]]");function q_(t,e,n){if(e.search(P$)>=0)throw ch(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ti(...e.split("."))._internalPath}catch{throw ch(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ch(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new L(M.INVALID_ARGUMENT,a+t+u)}function _R(t,e){return t.some(n=>n.isEqual(e))}var uh=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new m_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(G_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},m_=class extends uh{data(){return super.data()}};function G_(t,e){return typeof e=="string"?q_(t,e):e instanceof Ti?e._internalPath:e._delegate._internalPath}function x$(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new L(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var nc=class{},y_=class extends nc{};function IR(t,e,...n){let r=[];e instanceof nc&&r.push(e),r=r.concat(n),function(o){let s=o.filter(u=>u instanceof v_).length,a=o.filter(u=>u instanceof lh).length;if(s>1||s>0&&a>0)throw new L(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var lh=class t extends y_{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return wR(e._query,n),new Xo(e.firestore,e.converter,rv(e._query,n))}_parse(e){let n=sc(e.firestore);return function(o,s,a,u,l,h,p){let g;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new L(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){q0(p,h);let w=[];for(let R of p)w.push(z0(u,o,R));g={arrayValue:{values:w}}}else g=z0(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||q0(p,h),g=M$(a,s,p,h==="in"||h==="not-in");return Fe.create(l,h,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function ER(t,e,n){let r=e,i=G_("where",t);return lh._create(i,r,n)}var v_=class t extends nc{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Qt.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)wR(s,u),s=rv(s,u)}(e._query,n),new Xo(e.firestore,e.converter,rv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function z0(t,e,n){if(typeof(n=ke(n))=="string"){if(n==="")throw new L(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wA(e)&&n.indexOf("/")!==-1)throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Se.fromString(n));if(!z.isDocumentKey(r))throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return l0(t,new z(r))}if(n instanceof dt)return l0(t,n._key);throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ih(n)}.`)}function q0(t,e){if(!Array.isArray(t)||t.length===0)throw new L(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wR(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new L(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new L(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var __=class{convertValue(e,n="none"){switch(br(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ce(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(qn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw q(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Ar(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Ho].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ce(s.doubleValue));return new tc(o)}convertGeoPoint(e){return new ec(Ce(e.latitude),Ce(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=ph(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ga(e));default:return null}}convertTimestamp(e){let n=zn(e);return new Qe(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Se.fromString(e);ye(HA(r),9688,{name:e});let i=new Fd(r.get(1),r.get(3)),o=new z(r.popFirst(5));return i.isEqual(n)||Hn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function W_(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var pi=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},dh=class extends uh{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new jo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(G_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},jo=class extends dh{data(e={}){return super.data(e)}},I_=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new pi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new jo(this._firestore,this._userDataWriter,r.key,r,new pi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new L(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new jo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new pi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new jo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new pi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:k$(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function k$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q(61501,{type:t})}}function wh(t){t=Yt(t,dt);let e=Yt(t.firestore,Kn);return b$(Eh(e),t._key).then(n=>O$(e,t,n))}var hh=class extends __{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xa(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,n)}};function Th(t){t=Yt(t,Xo);let e=Yt(t.firestore,Kn),n=Eh(e),r=new hh(e);return x$(t._query),C$(n,t._query).then(i=>new I_(e,r,t,i))}function TR(t,e,n){t=Yt(t,dt);let r=Yt(t.firestore,Kn),i=W_(t.converter,e,n);return Dh(r,[H_(sc(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Lt.none())])}function K_(t,e,n,...r){t=Yt(t,dt);let i=Yt(t.firestore,Kn),o=sc(i),s;return s=typeof(e=ke(e))=="string"||e instanceof Ti?mR(o,"updateDoc",t._key,e,n,r):gR(o,"updateDoc",t._key,e),Dh(i,[s.toMutation(t._key,Lt.exists(!0))])}function DR(t,e){let n=Yt(t.firestore,Kn),r=Rr(t),i=W_(t.converter,e);return Dh(n,[H_(sc(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Lt.exists(!1))]).then(()=>r)}function Dh(t,e){return function(r,i){let o=new Wt;return r.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return p$(yield D$(r),i,o)})),o.promise}(Eh(t),e)}function O$(t,e,n){let r=n.docs.get(e._key),i=new hh(t);return new dh(t,i,e._key,r,new pi(n.hasPendingWrites,n.fromCache),e.converter)}var E_=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=sc(e)}set(e,n,r){this._verifyNotCommitted();let i=ky(e,this._firestore),o=W_(i.converter,n,r),s=H_(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Lt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let o=ky(e,this._firestore),s;return s=typeof(n=ke(n))=="string"||n instanceof Ti?mR(this._dataReader,"WriteBatch.update",o._key,n,r,i):gR(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,Lt.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=ky(e,this._firestore);return this._mutations=this._mutations.concat(new Ka(n._key,Lt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new L(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function ky(t,e){if((t=ke(t)).firestore!==e)throw new L(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function bR(t){return new p_("increment",t)}function CR(t){return Eh(t=Yt(t,Kn)),new E_(t,e=>Dh(t,e))}(function(e,n=!0){(function(i){ts=i})(vr),yr(new xt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Kn(new Fy(r.getProvider("auth-internal")),new jy(s,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new L(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fd(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Gt(e0,t0,e),Gt(e0,t0,"esm2017")})();var SR={production:!0,apiKey:"AIzaSyDuGRux4dWqKV8r38gzW1Kp0gXWKqdmGzg"};var L$=SR.apiKey,F$={apiKey:L$,authDomain:"country-trivia-ae5d2.firebaseapp.com",projectId:"country-trivia-ae5d2",storageBucket:"country-trivia-ae5d2.appspot.com",messagingSenderId:"424976519112",appId:"1:424976519112:web:38d32b0ea3fca32ed17afd",measurementId:"G-GXS9HBLD7F"},AR=Ym(F$),RR=class t{auth=Ty(AR);firestore=fR(AR);currentUser=null;constructor(){Ey(this.auth,e=>{e?(this.currentUser=e,localStorage.setItem("uid",e.uid)):this.signInAnonymously()})}signInAnonymously(){return E(this,null,function*(){let e=yield Po(this.auth);this.currentUser=e.user,localStorage.setItem("uid",e.user.uid)})}createUserProfile(e){return E(this,null,function*(){if(!this.currentUser)throw new Error("No authenticated user");let n=this.currentUser.uid,r=Rr(this.firestore,"users",n);yield TR(r,{name:e,highScore:0,gamesPlayed:0,createdAt:new Date,uid:this.currentUser.uid})})}loadUserProfile(){return E(this,null,function*(){let e=localStorage.getItem("uid");if(!e){let i=yield Po(this.auth);e=i.user.uid,this.currentUser=i.user,localStorage.setItem("uid",e)}let n=Rr(this.firestore,"users",e),r=yield wh(n);return r.exists()?r.data():null})}updateHighScore(e){return E(this,null,function*(){if(!this.currentUser)throw new Error("No authenticated user");let n=this.currentUser.uid,r=Rr(this.firestore,"users",n);yield K_(r,{highScore:e})})}incrementGamesPlayed(){return E(this,null,function*(){if(!this.currentUser)throw new Error("No authenticated user");let e=this.currentUser.uid,n=Rr(this.firestore,"users",e);yield K_(n,{gamesPlayed:bR(1)})})}getCurrentUid(){return this.currentUser?.uid??null}saveScore(e,n){return E(this,null,function*(){yield DR(oc(this.firestore,"scores"),{name:e,score:n,date:new Date})})}getScores(){return E(this,null,function*(){return(yield Th(oc(this.firestore,"scores"))).docs.map(n=>n.data())})}getUsers(){return E(this,null,function*(){return(yield Th(oc(this.firestore,"users"))).docs.map(n=>n.data())})}getHighScore(){return E(this,null,function*(){let e=localStorage.getItem("uid");if(!e){let i=yield Po(this.auth);e=i.user.uid,this.currentUser=i.user,localStorage.setItem("uid",e)}let n=Rr(this.firestore,"users",e),r=yield wh(n);return r.exists()?r.data().highScore:null})}getUserName(){return E(this,null,function*(){let e=localStorage.getItem("uid");if(!e){let i=yield Po(this.auth);e=i.user.uid,this.currentUser=i.user,localStorage.setItem("uid",e)}let n=Rr(this.firestore,"users",e),r=yield wh(n);return r.exists()?r.data().name:null})}deleteScoresByName(e){return E(this,null,function*(){let n=oc(this.firestore,"scores"),r=IR(n,ER("name","==",e)),i=yield Th(r),o=CR(this.firestore);i.forEach(s=>{o.delete(s.ref)}),yield o.commit()})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})};export{U as a,Ie as b,E as c,Re as d,he as e,je as f,We as g,De as h,G as i,ce as j,ou as k,qN as l,GN as m,at as n,WN as o,bn as p,KN as q,JN as r,Mf as s,Pf as t,_w as u,H as v,no as w,B as x,x as y,vt as z,Jp as A,C9 as B,S9 as C,A9 as D,R9 as E,lg as F,rn as G,Gs as H,gt as I,xe as J,Ws as K,N9 as L,Qu as M,Ks as N,M9 as O,JP as P,LT as Q,P9 as R,x9 as S,Yr as T,Zi as U,Ak as V,zt as W,ar as X,eo as Y,vD as Z,fo as _,Ys as $,_D as aa,vO as ba,AO as ca,Js as da,Jr as ea,FO as fa,KO as ga,QO as ha,YO as ia,H9 as ja,z9 as ka,FD as la,VD as ma,Vg as na,u1 as oa,l1 as pa,q9 as qa,h1 as ra,I1 as sa,G9 as ta,w1 as ua,T1 as va,W9 as wa,K9 as xa,Q9 as ya,Y9 as za,C1 as Aa,BD as Ba,S1 as Ca,A1 as Da,J9 as Ea,R1 as Fa,Z9 as Ga,X9 as Ha,e8 as Ia,t8 as Ja,n8 as Ka,r8 as La,jg as Ma,Z1 as Na,X1 as Oa,i8 as Pa,o8 as Qa,Be as Ra,xn as Sa,go as Ta,cb as Ua,dL as Va,fL as Wa,ub as Xa,mL as Ya,RL as Za,lr as _a,Rb as $a,iF as ab,Dm as bb,Gl as cb,kV as db,RR as eb};
